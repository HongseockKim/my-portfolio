(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var Tx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ub(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var IM={exports:{}},Ly={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LR;function yH(){if(LR)return Ly;LR=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var l in r)l!=="key"&&(s[l]=r[l])}else s=r;return r=s.ref,{$$typeof:n,type:i,key:a,ref:r!==void 0?r:null,props:s}}return Ly.Fragment=e,Ly.jsx=t,Ly.jsxs=t,Ly}var PR;function _H(){return PR||(PR=1,IM.exports=yH()),IM.exports}var Gt=_H(),FM={exports:{}},Py={},GM={exports:{}},HM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NR;function xH(){return NR||(NR=1,function(n){function e(k,ee){var ne=k.length;k.push(ee);e:for(;0<ne;){var de=ne-1>>>1,X=k[de];if(0<r(X,ee))k[de]=ee,k[ne]=X,ne=de;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var ee=k[0],ne=k.pop();if(ne!==ee){k[0]=ne;e:for(var de=0,X=k.length,J=X>>>1;de<J;){var ce=2*(de+1)-1,ge=k[ce],oe=ce+1,ve=k[oe];if(0>r(ge,ne))oe<X&&0>r(ve,ge)?(k[de]=ve,k[oe]=ne,de=oe):(k[de]=ge,k[ce]=ne,de=ce);else if(oe<X&&0>r(ve,ne))k[de]=ve,k[oe]=ne,de=oe;else break e}}return ee}function r(k,ee){var ne=k.sortIndex-ee.sortIndex;return ne!==0?ne:k.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],f=[],d=1,v=null,y=3,A=!1,b=!1,C=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function O(k){for(var ee=t(f);ee!==null;){if(ee.callback===null)i(f);else if(ee.startTime<=k)i(f),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=t(f)}}function P(k){if(C=!1,O(k),!b)if(t(u)!==null)b=!0,F||(F=!0,$());else{var ee=t(f);ee!==null&&ye(P,ee.startTime-k)}}var F=!1,V=-1,G=5,I=-1;function N(){return T?!0:!(n.unstable_now()-I<G)}function Q(){if(T=!1,F){var k=n.unstable_now();I=k;var ee=!0;try{e:{b=!1,C&&(C=!1,B(V),V=-1),A=!0;var ne=y;try{t:{for(O(k),v=t(u);v!==null&&!(v.expirationTime>k&&N());){var de=v.callback;if(typeof de=="function"){v.callback=null,y=v.priorityLevel;var X=de(v.expirationTime<=k);if(k=n.unstable_now(),typeof X=="function"){v.callback=X,O(k),ee=!0;break t}v===t(u)&&i(u),O(k)}else i(u);v=t(u)}if(v!==null)ee=!0;else{var J=t(f);J!==null&&ye(P,J.startTime-k),ee=!1}}break e}finally{v=null,y=ne,A=!1}ee=void 0}}finally{ee?$():F=!1}}}var $;if(typeof D=="function")$=function(){D(Q)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,se=te.port2;te.port1.onmessage=Q,$=function(){se.postMessage(null)}}else $=function(){M(Q,0)};function ye(k,ee){V=M(function(){k(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function(k){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var ne=y;y=ee;try{return k()}finally{y=ne}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(k,ee){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ne=y;y=k;try{return ee()}finally{y=ne}},n.unstable_scheduleCallback=function(k,ee,ne){var de=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?de+ne:de):ne=de,k){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ne+X,k={id:d++,callback:ee,priorityLevel:k,startTime:ne,expirationTime:X,sortIndex:-1},ne>de?(k.sortIndex=ne,e(f,k),t(u)===null&&k===t(f)&&(C?(B(V),V=-1):C=!0,ye(P,ne-de))):(k.sortIndex=X,e(u,k),b||A||(b=!0,F||(F=!0,$()))),k},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(k){var ee=y;return function(){var ne=y;y=ee;try{return k.apply(this,arguments)}finally{y=ne}}}}(HM)),HM}var IR;function AH(){return IR||(IR=1,GM.exports=xH()),GM.exports}var zM={exports:{}},oi={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FR;function SH(){if(FR)return oi;FR=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),v=Symbol.iterator;function y(X){return X===null||typeof X!="object"?null:(X=v&&X[v]||X["@@iterator"],typeof X=="function"?X:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function T(X,J,ce){this.props=X,this.context=J,this.refs=C,this.updater=ce||A}T.prototype.isReactComponent={},T.prototype.setState=function(X,J){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,J,"setState")},T.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function M(){}M.prototype=T.prototype;function B(X,J,ce){this.props=X,this.context=J,this.refs=C,this.updater=ce||A}var D=B.prototype=new M;D.constructor=B,b(D,T.prototype),D.isPureReactComponent=!0;var O=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function V(X,J,ce,ge,oe,ve){return ce=ve.ref,{$$typeof:n,type:X,key:J,ref:ce!==void 0?ce:null,props:ve}}function G(X,J){return V(X.type,J,void 0,void 0,void 0,X.props)}function I(X){return typeof X=="object"&&X!==null&&X.$$typeof===n}function N(X){var J={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ce){return J[ce]})}var Q=/\/+/g;function $(X,J){return typeof X=="object"&&X!==null&&X.key!=null?N(""+X.key):J.toString(36)}function te(){}function se(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(te,te):(X.status="pending",X.then(function(J){X.status==="pending"&&(X.status="fulfilled",X.value=J)},function(J){X.status==="pending"&&(X.status="rejected",X.reason=J)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function ye(X,J,ce,ge,oe){var ve=typeof X;(ve==="undefined"||ve==="boolean")&&(X=null);var Se=!1;if(X===null)Se=!0;else switch(ve){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(X.$$typeof){case n:case e:Se=!0;break;case d:return Se=X._init,ye(Se(X._payload),J,ce,ge,oe)}}if(Se)return oe=oe(X),Se=ge===""?"."+$(X,0):ge,O(oe)?(ce="",Se!=null&&(ce=Se.replace(Q,"$&/")+"/"),ye(oe,J,ce,"",function(gt){return gt})):oe!=null&&(I(oe)&&(oe=G(oe,ce+(oe.key==null||X&&X.key===oe.key?"":(""+oe.key).replace(Q,"$&/")+"/")+Se)),J.push(oe)),1;Se=0;var Re=ge===""?".":ge+":";if(O(X))for(var Le=0;Le<X.length;Le++)ge=X[Le],ve=Re+$(ge,Le),Se+=ye(ge,J,ce,ve,oe);else if(Le=y(X),typeof Le=="function")for(X=Le.call(X),Le=0;!(ge=X.next()).done;)ge=ge.value,ve=Re+$(ge,Le++),Se+=ye(ge,J,ce,ve,oe);else if(ve==="object"){if(typeof X.then=="function")return ye(se(X),J,ce,ge,oe);throw J=String(X),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Se}function k(X,J,ce){if(X==null)return X;var ge=[],oe=0;return ye(X,ge,"","",function(ve){return J.call(ce,ve,oe++)}),ge}function ee(X){if(X._status===-1){var J=X._result;J=J(),J.then(function(ce){(X._status===0||X._status===-1)&&(X._status=1,X._result=ce)},function(ce){(X._status===0||X._status===-1)&&(X._status=2,X._result=ce)}),X._status===-1&&(X._status=0,X._result=J)}if(X._status===1)return X._result.default;throw X._result}var ne=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function de(){}return oi.Children={map:k,forEach:function(X,J,ce){k(X,function(){J.apply(this,arguments)},ce)},count:function(X){var J=0;return k(X,function(){J++}),J},toArray:function(X){return k(X,function(J){return J})||[]},only:function(X){if(!I(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},oi.Component=T,oi.Fragment=t,oi.Profiler=r,oi.PureComponent=B,oi.StrictMode=i,oi.Suspense=u,oi.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,oi.__COMPILER_RUNTIME={__proto__:null,c:function(X){return P.H.useMemoCache(X)}},oi.cache=function(X){return function(){return X.apply(null,arguments)}},oi.cloneElement=function(X,J,ce){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var ge=b({},X.props),oe=X.key,ve=void 0;if(J!=null)for(Se in J.ref!==void 0&&(ve=void 0),J.key!==void 0&&(oe=""+J.key),J)!F.call(J,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&J.ref===void 0||(ge[Se]=J[Se]);var Se=arguments.length-2;if(Se===1)ge.children=ce;else if(1<Se){for(var Re=Array(Se),Le=0;Le<Se;Le++)Re[Le]=arguments[Le+2];ge.children=Re}return V(X.type,oe,void 0,void 0,ve,ge)},oi.createContext=function(X){return X={$$typeof:a,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:s,_context:X},X},oi.createElement=function(X,J,ce){var ge,oe={},ve=null;if(J!=null)for(ge in J.key!==void 0&&(ve=""+J.key),J)F.call(J,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(oe[ge]=J[ge]);var Se=arguments.length-2;if(Se===1)oe.children=ce;else if(1<Se){for(var Re=Array(Se),Le=0;Le<Se;Le++)Re[Le]=arguments[Le+2];oe.children=Re}if(X&&X.defaultProps)for(ge in Se=X.defaultProps,Se)oe[ge]===void 0&&(oe[ge]=Se[ge]);return V(X,ve,void 0,void 0,null,oe)},oi.createRef=function(){return{current:null}},oi.forwardRef=function(X){return{$$typeof:l,render:X}},oi.isValidElement=I,oi.lazy=function(X){return{$$typeof:d,_payload:{_status:-1,_result:X},_init:ee}},oi.memo=function(X,J){return{$$typeof:f,type:X,compare:J===void 0?null:J}},oi.startTransition=function(X){var J=P.T,ce={};P.T=ce;try{var ge=X(),oe=P.S;oe!==null&&oe(ce,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(de,ne)}catch(ve){ne(ve)}finally{P.T=J}},oi.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},oi.use=function(X){return P.H.use(X)},oi.useActionState=function(X,J,ce){return P.H.useActionState(X,J,ce)},oi.useCallback=function(X,J){return P.H.useCallback(X,J)},oi.useContext=function(X){return P.H.useContext(X)},oi.useDebugValue=function(){},oi.useDeferredValue=function(X,J){return P.H.useDeferredValue(X,J)},oi.useEffect=function(X,J,ce){var ge=P.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ge.useEffect(X,J)},oi.useId=function(){return P.H.useId()},oi.useImperativeHandle=function(X,J,ce){return P.H.useImperativeHandle(X,J,ce)},oi.useInsertionEffect=function(X,J){return P.H.useInsertionEffect(X,J)},oi.useLayoutEffect=function(X,J){return P.H.useLayoutEffect(X,J)},oi.useMemo=function(X,J){return P.H.useMemo(X,J)},oi.useOptimistic=function(X,J){return P.H.useOptimistic(X,J)},oi.useReducer=function(X,J,ce){return P.H.useReducer(X,J,ce)},oi.useRef=function(X){return P.H.useRef(X)},oi.useState=function(X){return P.H.useState(X)},oi.useSyncExternalStore=function(X,J,ce){return P.H.useSyncExternalStore(X,J,ce)},oi.useTransition=function(){return P.H.useTransition()},oi.version="19.1.0",oi}var GR;function Q0(){return GR||(GR=1,zM.exports=SH()),zM.exports}var VM={exports:{}},bo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HR;function bH(){if(HR)return bo;HR=1;var n=Q0();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(u,f,d){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:u,containerInfo:f,implementation:d}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return bo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bo.createPortal=function(u,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return s(u,f,null,d)},bo.flushSync=function(u){var f=a.T,d=i.p;try{if(a.T=null,i.p=2,u)return u()}finally{a.T=f,i.p=d,i.d.f()}},bo.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(u,f))},bo.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},bo.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var d=f.as,v=l(d,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:A}):d==="script"&&i.d.X(u,{crossOrigin:v,integrity:y,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},bo.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=l(f.as,f.crossOrigin);i.d.M(u,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(u)},bo.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,v=l(d,f.crossOrigin);i.d.L(u,d,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},bo.preloadModule=function(u,f){if(typeof u=="string")if(f){var d=l(f.as,f.crossOrigin);i.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(u)},bo.requestFormReset=function(u){i.d.r(u)},bo.unstable_batchedUpdates=function(u,f){return u(f)},bo.useFormState=function(u,f,d){return a.H.useFormState(u,f,d)},bo.useFormStatus=function(){return a.H.useHostTransitionStatus()},bo.version="19.1.0",bo}var zR;function MH(){if(zR)return VM.exports;zR=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),VM.exports=bH(),VM.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VR;function TH(){if(VR)return Py;VR=1;var n=AH(),e=Q0(),t=MH();function i(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)c+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var c=o,m=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(m=c.return),o=c.return;while(o)}return c.tag===3?m:null}function a(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function l(o){if(s(o)!==o)throw Error(i(188))}function u(o){var c=o.alternate;if(!c){if(c=s(o),c===null)throw Error(i(188));return c!==o?null:o}for(var m=o,x=c;;){var E=m.return;if(E===null)break;var U=E.alternate;if(U===null){if(x=E.return,x!==null){m=x;continue}break}if(E.child===U.child){for(U=E.child;U;){if(U===m)return l(E),o;if(U===x)return l(E),c;U=U.sibling}throw Error(i(188))}if(m.return!==x.return)m=E,x=U;else{for(var W=!1,ae=E.child;ae;){if(ae===m){W=!0,m=E,x=U;break}if(ae===x){W=!0,x=E,m=U;break}ae=ae.sibling}if(!W){for(ae=U.child;ae;){if(ae===m){W=!0,m=U,x=E;break}if(ae===x){W=!0,x=U,m=E;break}ae=ae.sibling}if(!W)throw Error(i(189))}}if(m.alternate!==x)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?o:c}function f(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=f(o),c!==null)return c;o=o.sibling}return null}var d=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),B=Symbol.for("react.consumer"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function $(o){return o===null||typeof o!="object"?null:(o=Q&&o[Q]||o["@@iterator"],typeof o=="function"?o:null)}var te=Symbol.for("react.client.reference");function se(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===te?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case P:return"Suspense";case F:return"SuspenseList";case I:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case A:return"Portal";case D:return(o.displayName||"Context")+".Provider";case B:return(o._context.displayName||"Context")+".Consumer";case O:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case V:return c=o.displayName||null,c!==null?c:se(o.type)||"Memo";case G:c=o._payload,o=o._init;try{return se(o(c))}catch{}}return null}var ye=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},de=[],X=-1;function J(o){return{current:o}}function ce(o){0>X||(o.current=de[X],de[X]=null,X--)}function ge(o,c){X++,de[X]=o.current,o.current=c}var oe=J(null),ve=J(null),Se=J(null),Re=J(null);function Le(o,c){switch(ge(Se,c),ge(ve,o),ge(oe,null),c.nodeType){case 9:case 11:o=(o=c.documentElement)&&(o=o.namespaceURI)?Nr(o):0;break;default:if(o=c.tagName,c=c.namespaceURI)c=Nr(c),o=zr(c,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ce(oe),ge(oe,o)}function gt(){ce(oe),ce(ve),ce(Se)}function Mt(o){o.memoizedState!==null&&ge(Re,o);var c=oe.current,m=zr(c,o.type);c!==m&&(ge(ve,o),ge(oe,m))}function At(o){ve.current===o&&(ce(oe),ce(ve)),Re.current===o&&(ce(Re),Ep._currentValue=ne)}var at=Object.prototype.hasOwnProperty,Nt=n.unstable_scheduleCallback,ie=n.unstable_cancelCallback,ut=n.unstable_shouldYield,$e=n.unstable_requestPaint,Ke=n.unstable_now,Pe=n.unstable_getCurrentPriorityLevel,pt=n.unstable_ImmediatePriority,Ve=n.unstable_UserBlockingPriority,j=n.unstable_NormalPriority,Y=n.unstable_LowPriority,_e=n.unstable_IdlePriority,Ie=n.log,Ge=n.unstable_setDisableYieldValue,Ye=null,it=null;function rt(o){if(typeof Ie=="function"&&Ge(o),it&&typeof it.setStrictMode=="function")try{it.setStrictMode(Ye,o)}catch{}}var yt=Math.clz32?Math.clz32:Lt,Vt=Math.log,ht=Math.LN2;function Lt(o){return o>>>=0,o===0?32:31-(Vt(o)/ht|0)|0}var Et=256,_t=4194304;function ot(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function xe(o,c,m){var x=o.pendingLanes;if(x===0)return 0;var E=0,U=o.suspendedLanes,W=o.pingedLanes;o=o.warmLanes;var ae=x&134217727;return ae!==0?(x=ae&~U,x!==0?E=ot(x):(W&=ae,W!==0?E=ot(W):m||(m=ae&~o,m!==0&&(E=ot(m))))):(ae=x&~U,ae!==0?E=ot(ae):W!==0?E=ot(W):m||(m=x&~o,m!==0&&(E=ot(m)))),E===0?0:c!==0&&c!==E&&(c&U)===0&&(U=E&-E,m=c&-c,U>=m||U===32&&(m&4194048)!==0)?c:E}function We(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function Rt(o,c){switch(o){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ae(){var o=Et;return Et<<=1,(Et&4194048)===0&&(Et=256),o}function De(){var o=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),o}function He(o){for(var c=[],m=0;31>m;m++)c.push(o);return c}function dt(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Pt(o,c,m,x,E,U){var W=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var ae=o.entanglements,Te=o.expirationTimes,Je=o.hiddenUpdates;for(m=W&~m;0<m;){var bt=31-yt(m),Ut=1<<bt;ae[bt]=0,Te[bt]=-1;var nt=Je[bt];if(nt!==null)for(Je[bt]=null,bt=0;bt<nt.length;bt++){var Ze=nt[bt];Ze!==null&&(Ze.lane&=-536870913)}m&=~Ut}x!==0&&Tt(o,x,0),U!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=U&~(W&~c))}function Tt(o,c,m){o.pendingLanes|=c,o.suspendedLanes&=~c;var x=31-yt(c);o.entangledLanes|=c,o.entanglements[x]=o.entanglements[x]|1073741824|m&4194090}function qt(o,c){var m=o.entangledLanes|=c;for(o=o.entanglements;m;){var x=31-yt(m),E=1<<x;E&c|o[x]&c&&(o[x]|=c),m&=~E}}function sn(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Jt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function nn(){var o=ee.p;return o!==0?o:(o=window.event,o===void 0?32:_x(o.type))}function ti(o,c){var m=ee.p;try{return ee.p=o,c()}finally{ee.p=m}}var Fn=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Fn,Ai="__reactProps$"+Fn,Di="__reactContainer$"+Fn,or="__reactEvents$"+Fn,kr="__reactListeners$"+Fn,pr="__reactHandles$"+Fn,ln="__reactResources$"+Fn,Gi="__reactMarker$"+Fn;function ni(o){delete o[Ln],delete o[Ai],delete o[or],delete o[kr],delete o[pr]}function K(o){var c=o[Ln];if(c)return c;for(var m=o.parentNode;m;){if(c=m[Di]||m[Ln]){if(m=c.alternate,c.child!==null||m!==null&&m.child!==null)for(o=ox(o);o!==null;){if(m=o[Ln])return m;o=ox(o)}return c}o=m,m=o.parentNode}return null}function le(o){if(o=o[Ln]||o[Di]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Ce(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(i(33))}function Qe(o){var c=o[ln];return c||(c=o[ln]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function et(o){o[Gi]=!0}var ft=new Set,Ft={};function Bt(o,c){q(o,c),q(o+"Capture",c)}function q(o,c){for(Ft[o]=c,o=0;o<c.length;o++)ft.add(c[o])}var me=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Me={},pe={};function Be(o){return at.call(pe,o)?!0:at.call(Me,o)?!1:me.test(o)?pe[o]=!0:(Me[o]=!0,!1)}function qe(o,c,m){if(Be(c))if(m===null)o.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var x=c.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+m)}}function ct(o,c,m){if(m===null)o.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+m)}}function vt(o,c,m,x){if(x===null)o.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(c,m,""+x)}}var wt,Wt;function kt(o){if(wt===void 0)try{throw Error()}catch(m){var c=m.stack.trim().match(/\n( *(at )?)/);wt=c&&c[1]||"",Wt=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+o+Wt}var Yt=!1;function fn(o,c){if(!o||Yt)return"";Yt=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(c){var Ut=function(){throw Error()};if(Object.defineProperty(Ut.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ut,[])}catch(Ze){var nt=Ze}Reflect.construct(o,[],Ut)}else{try{Ut.call()}catch(Ze){nt=Ze}o.call(Ut.prototype)}}else{try{throw Error()}catch(Ze){nt=Ze}(Ut=o())&&typeof Ut.catch=="function"&&Ut.catch(function(){})}}catch(Ze){if(Ze&&nt&&typeof Ze.stack=="string")return[Ze.stack,nt.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=x.DetermineComponentFrameRoot(),W=U[0],ae=U[1];if(W&&ae){var Te=W.split(`
`),Je=ae.split(`
`);for(E=x=0;x<Te.length&&!Te[x].includes("DetermineComponentFrameRoot");)x++;for(;E<Je.length&&!Je[E].includes("DetermineComponentFrameRoot");)E++;if(x===Te.length||E===Je.length)for(x=Te.length-1,E=Je.length-1;1<=x&&0<=E&&Te[x]!==Je[E];)E--;for(;1<=x&&0<=E;x--,E--)if(Te[x]!==Je[E]){if(x!==1||E!==1)do if(x--,E--,0>E||Te[x]!==Je[E]){var bt=`
`+Te[x].replace(" at new "," at ");return o.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",o.displayName)),bt}while(1<=x&&0<=E);break}}}finally{Yt=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?kt(m):""}function an(o){switch(o.tag){case 26:case 27:case 5:return kt(o.type);case 16:return kt("Lazy");case 13:return kt("Suspense");case 19:return kt("SuspenseList");case 0:case 15:return fn(o.type,!1);case 11:return fn(o.type.render,!1);case 1:return fn(o.type,!0);case 31:return kt("Activity");default:return""}}function $n(o){try{var c="";do c+=an(o),o=o.return;while(o);return c}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function rn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function cn(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function $t(o){var c=cn(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),x=""+o[c];if(!o.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,U=m.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return E.call(this)},set:function(W){x=""+W,U.call(this,W)}}),Object.defineProperty(o,c,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(W){x=""+W},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Si(o){o._valueTracker||(o._valueTracker=$t(o))}function gn(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var m=c.getValue(),x="";return o&&(x=cn(o)?o.checked?"true":"false":o.value),o=x,o!==m?(c.setValue(o),!0):!1}function _n(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Bi=/[\n"\\]/g;function dn(o){return o.replace(Bi,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function xn(o,c,m,x,E,U,W,ae){o.name="",W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?o.type=W:o.removeAttribute("type"),c!=null?W==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+rn(c)):o.value!==""+rn(c)&&(o.value=""+rn(c)):W!=="submit"&&W!=="reset"||o.removeAttribute("value"),c!=null?Ui(o,W,rn(c)):m!=null?Ui(o,W,rn(m)):x!=null&&o.removeAttribute("value"),E==null&&U!=null&&(o.defaultChecked=!!U),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?o.name=""+rn(ae):o.removeAttribute("name")}function Pn(o,c,m,x,E,U,W,ae){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(o.type=U),c!=null||m!=null){if(!(U!=="submit"&&U!=="reset"||c!=null))return;m=m!=null?""+rn(m):"",c=c!=null?""+rn(c):m,ae||c===o.value||(o.value=c),o.defaultValue=c}x=x??E,x=typeof x!="function"&&typeof x!="symbol"&&!!x,o.checked=ae?o.checked:!!x,o.defaultChecked=!!x,W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(o.name=W)}function Ui(o,c,m){c==="number"&&_n(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function Wn(o,c,m,x){if(o=o.options,c){c={};for(var E=0;E<m.length;E++)c["$"+m[E]]=!0;for(m=0;m<o.length;m++)E=c.hasOwnProperty("$"+o[m].value),o[m].selected!==E&&(o[m].selected=E),E&&x&&(o[m].defaultSelected=!0)}else{for(m=""+rn(m),c=null,E=0;E<o.length;E++){if(o[E].value===m){o[E].selected=!0,x&&(o[E].defaultSelected=!0);return}c!==null||o[E].disabled||(c=o[E])}c!==null&&(c.selected=!0)}}function Oi(o,c,m){if(c!=null&&(c=""+rn(c),c!==o.value&&(o.value=c),m==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=m!=null?""+rn(m):""}function mr(o,c,m,x){if(c==null){if(x!=null){if(m!=null)throw Error(i(92));if(ye(x)){if(1<x.length)throw Error(i(93));x=x[0]}m=x}m==null&&(m=""),c=m}m=rn(c),o.defaultValue=m,x=o.textContent,x===m&&x!==""&&x!==null&&(o.value=x)}function Or(o,c){if(c){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=c;return}}o.textContent=c}var Zr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jl(o,c,m){var x=c.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?x?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":x?o.setProperty(c,m):typeof m!="number"||m===0||Zr.has(c)?c==="float"?o.cssFloat=m:o[c]=(""+m).trim():o[c]=m+"px"}function ql(o,c,m){if(c!=null&&typeof c!="object")throw Error(i(62));if(o=o.style,m!=null){for(var x in m)!m.hasOwnProperty(x)||c!=null&&c.hasOwnProperty(x)||(x.indexOf("--")===0?o.setProperty(x,""):x==="float"?o.cssFloat="":o[x]="");for(var E in c)x=c[E],c.hasOwnProperty(E)&&m[E]!==x&&jl(o,E,x)}else for(var U in c)c.hasOwnProperty(U)&&jl(o,U,c[U])}function Uu(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ml=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Af=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Uo(o){return Af.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var no=null;function Oo(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var da=null,gl=null;function vl(o){var c=le(o);if(c&&(o=c.stateNode)){var m=o[Ai]||null;e:switch(o=c.stateNode,c.type){case"input":if(xn(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),c=m.name,m.type==="radio"&&c!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+dn(""+c)+'"][type="radio"]'),c=0;c<m.length;c++){var x=m[c];if(x!==o&&x.form===o.form){var E=x[Ai]||null;if(!E)throw Error(i(90));xn(x,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<m.length;c++)x=m[c],x.form===o.form&&gn(x)}break e;case"textarea":Oi(o,m.value,m.defaultValue);break e;case"select":c=m.value,c!=null&&Wn(o,!!m.multiple,c,!1)}}}var Kl=!1;function Sc(o,c,m){if(Kl)return o(c,m);Kl=!0;try{var x=o(c);return x}finally{if(Kl=!1,(da!==null||gl!==null)&&(Gl(),da&&(c=da,o=gl,gl=da=null,vl(c),o)))for(c=0;c<o.length;c++)vl(o[c])}}function Jl(o,c){var m=o.stateNode;if(m===null)return null;var x=m[Ai]||null;if(x===null)return null;m=x[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(i(231,c,typeof m));return m}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lo=!1;if(Zs)try{var Zl={};Object.defineProperty(Zl,"passive",{get:function(){Lo=!0}}),window.addEventListener("test",Zl,Zl),window.removeEventListener("test",Zl,Zl)}catch{Lo=!1}var Ir=null,bc=null,Mc=null;function Sf(){if(Mc)return Mc;var o,c=bc,m=c.length,x,E="value"in Ir?Ir.value:Ir.textContent,U=E.length;for(o=0;o<m&&c[o]===E[o];o++);var W=m-o;for(x=1;x<=W&&c[m-x]===E[U-x];x++);return Mc=E.slice(o,1<x?1-x:void 0)}function li(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function vi(){return!0}function Ou(){return!1}function Fr(o){function c(m,x,E,U,W){this._reactName=m,this._targetInst=E,this.type=x,this.nativeEvent=U,this.target=W,this.currentTarget=null;for(var ae in o)o.hasOwnProperty(ae)&&(m=o[ae],this[ae]=m?m(U):U[ae]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?vi:Ou,this.isPropagationStopped=Ou,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=vi)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=vi)},persist:function(){},isPersistent:vi}),c}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=Fr(pa),Ql=d({},pa,{view:0,detail:0}),bf=Fr(Ql),ma,io,gr,ga=d({},Ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==gr&&(gr&&o.type==="mousemove"?(ma=o.screenX-gr.screenX,io=o.screenY-gr.screenY):io=ma=0,gr=o),ma)},movementY:function(o){return"movementY"in o?o.movementY:io}}),Ba=Fr(ga),bs=d({},ga,{dataTransfer:0}),xh=Fr(bs),bi=d({},Ql,{relatedTarget:0}),yl=Fr(bi),Mf=d({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),Ah=Fr(Mf),ls=d({},pa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),$s=Fr(ls),Gr=d({},pa,{data:0}),vr=Fr(Gr),Sh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ua={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=nv[o])?!!c[o]:!1}function ro(){return Pd}var bh=d({},Ql,{key:function(o){if(o.key){var c=Sh[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=li(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ua[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(o){return o.type==="keypress"?li(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?li(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Mh=Fr(bh),lr=d({},ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Po=Fr(lr),Nd=d({},Ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),om=Fr(Nd),Id=d({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),$l=Fr(Id),lm=d({},ga,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),hy=Fr(lm),um=d({},pa,{newState:0,oldState:0}),No=Fr(um),va=[9,13,27,32],Th=Zs&&"CompositionEvent"in window,Lu=null;Zs&&"documentMode"in document&&(Lu=document.documentMode);var Tf=Zs&&"TextEvent"in window&&!Lu,Tc=Zs&&(!Th||Lu&&8<Lu&&11>=Lu),_l=" ",us=!1;function Eh(o,c){switch(o){case"keyup":return va.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ch(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var xl=!1;function wh(o,c){switch(o){case"compositionend":return Ch(c);case"keypress":return c.which!==32?null:(us=!0,_l);case"textInput":return o=c.data,o===_l&&us?null:o;default:return null}}function Fd(o,c){if(xl)return o==="compositionend"||!Th&&Eh(o,c)?(o=Sf(),Mc=bc=Ir=null,xl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Tc&&c.locale!=="ko"?null:c.data;default:return null}}var Gs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rh(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Gs[o.type]:c==="textarea"}function cs(o,c,m,x){da?gl?gl.push(x):gl=[x]:da=x,c=Rv(c,"onChange"),0<c.length&&(m=new Qs("onChange","change",null,m,x),o.push({event:m,listeners:c}))}var Ec=null,Pu=null;function iv(o){$_(o,0)}function Dh(o){var c=Ce(o);if(gn(c))return o}function Gd(o,c){if(o==="change")return c}var Hd=!1;if(Zs){var zd;if(Zs){var Io="oninput"in document;if(!Io){var Ef=document.createElement("div");Ef.setAttribute("oninput","return;"),Io=typeof Ef.oninput=="function"}zd=Io}else zd=!1;Hd=zd&&(!document.documentMode||9<document.documentMode)}function Mr(){Ec&&(Ec.detachEvent("onpropertychange",Vd),Pu=Ec=null)}function Vd(o){if(o.propertyName==="value"&&Dh(Pu)){var c=[];cs(c,Pu,o,Oo(o)),Sc(iv,c)}}function rv(o,c,m){o==="focusin"?(Mr(),Ec=c,Pu=m,Ec.attachEvent("onpropertychange",Vd)):o==="focusout"&&Mr()}function eu(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Dh(Pu)}function Nu(o,c){if(o==="click")return Dh(c)}function Iu(o,c){if(o==="input"||o==="change")return Dh(c)}function sv(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var ya=typeof Object.is=="function"?Object.is:sv;function Hs(o,c){if(ya(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var m=Object.keys(o),x=Object.keys(c);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var E=m[x];if(!at.call(c,E)||!ya(o[E],c[E]))return!1}return!0}function Tr(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function kd(o,c){var m=Tr(o);o=0;for(var x;m;){if(m.nodeType===3){if(x=o+m.textContent.length,o<=c&&x>=c)return{node:m,offset:c-o};o=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Tr(m)}}function cm(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?cm(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function fm(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=_n(o.document);c instanceof o.HTMLIFrameElement;){try{var m=typeof c.contentWindow.location.href=="string"}catch{m=!1}if(m)o=c.contentWindow;else break;c=_n(o.document)}return c}function Bh(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}var hm=Zs&&"documentMode"in document&&11>=document.documentMode,tu=null,nu=null,Fe=null,mt=!1;function lt(o,c,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;mt||tu==null||tu!==_n(x)||(x=tu,"selectionStart"in x&&Bh(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Fe&&Hs(Fe,x)||(Fe=x,x=Rv(nu,"onSelect"),0<x.length&&(c=new Qs("onSelect","select",null,c,m),o.push({event:c,listeners:x}),c.target=tu)))}function Xt(o,c){var m={};return m[o.toLowerCase()]=c.toLowerCase(),m["Webkit"+o]="webkit"+c,m["Moz"+o]="moz"+c,m}var An={animationend:Xt("Animation","AnimationEnd"),animationiteration:Xt("Animation","AnimationIteration"),animationstart:Xt("Animation","AnimationStart"),transitionrun:Xt("Transition","TransitionRun"),transitionstart:Xt("Transition","TransitionStart"),transitioncancel:Xt("Transition","TransitionCancel"),transitionend:Xt("Transition","TransitionEnd")},yi={},Xr={};Zs&&(Xr=document.createElement("div").style,"AnimationEvent"in window||(delete An.animationend.animation,delete An.animationiteration.animation,delete An.animationstart.animation),"TransitionEvent"in window||delete An.transitionend.transition);function di(o){if(yi[o])return yi[o];if(!An[o])return o;var c=An[o],m;for(m in c)if(c.hasOwnProperty(m)&&m in Xr)return yi[o]=c[m];return o}var Ms=di("animationend"),dm=di("animationiteration"),yr=di("animationstart"),Uh=di("transitionrun"),iu=di("transitionstart"),Fo=di("transitioncancel"),so=di("transitionend"),Cc=new Map,Mi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mi.push("scrollEnd");function fs(o,c){Cc.set(o,c),Bt(c,[o])}var Xd=new WeakMap;function Wr(o,c){if(typeof o=="object"&&o!==null){var m=Xd.get(o);return m!==void 0?m:(c={value:o,source:c,stack:$n(c)},Xd.set(o,c),c)}return{value:o,source:c,stack:$n(c)}}var zs=[],ao=0,Wd=0;function Fu(){for(var o=ao,c=Wd=ao=0;c<o;){var m=zs[c];zs[c++]=null;var x=zs[c];zs[c++]=null;var E=zs[c];zs[c++]=null;var U=zs[c];if(zs[c++]=null,x!==null&&E!==null){var W=x.pending;W===null?E.next=E:(E.next=W.next,W.next=E),x.pending=E}U!==0&&Cf(m,E,U)}}function ea(o,c,m,x){zs[ao++]=o,zs[ao++]=c,zs[ao++]=m,zs[ao++]=x,Wd|=x,o.lanes|=x,o=o.alternate,o!==null&&(o.lanes|=x)}function wc(o,c,m,x){return ea(o,c,m,x),Rc(o)}function Al(o,c){return ea(o,null,null,c),Rc(o)}function Cf(o,c,m){o.lanes|=m;var x=o.alternate;x!==null&&(x.lanes|=m);for(var E=!1,U=o.return;U!==null;)U.childLanes|=m,x=U.alternate,x!==null&&(x.childLanes|=m),U.tag===22&&(o=U.stateNode,o===null||o._visibility&1||(E=!0)),o=U,U=U.return;return o.tag===3?(U=o.stateNode,E&&c!==null&&(E=31-yt(m),o=U.hiddenUpdates,x=o[E],x===null?o[E]=[c]:x.push(c),c.lane=m|536870912),U):null}function Rc(o){if(50<$o)throw $o=0,Jc=null,Error(i(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var ru={};function wf(o,c,m,x){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ta(o,c,m,x){return new wf(o,c,m,x)}function su(o){return o=o.prototype,!(!o||!o.isReactComponent)}function nr(o,c){var m=o.alternate;return m===null?(m=ta(o.tag,c,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=c,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,c=o.dependencies,m.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function Rf(o,c){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,c=m.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function hs(o,c,m,x,E,U){var W=0;if(x=o,typeof o=="function")su(o)&&(W=1);else if(typeof o=="string")W=bM(o,m,oe.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case I:return o=ta(31,m,c,E),o.elementType=I,o.lanes=U,o;case b:return Gu(m.children,E,U,c);case C:W=8,E|=24;break;case T:return o=ta(12,m,c,E|2),o.elementType=T,o.lanes=U,o;case P:return o=ta(13,m,c,E),o.elementType=P,o.lanes=U,o;case F:return o=ta(19,m,c,E),o.elementType=F,o.lanes=U,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case M:case D:W=10;break e;case B:W=9;break e;case O:W=11;break e;case V:W=14;break e;case G:W=16,x=null;break e}W=29,m=Error(i(130,o===null?"null":typeof o,"")),x=null}return c=ta(W,m,c,E),c.elementType=o,c.type=x,c.lanes=U,c}function Gu(o,c,m,x){return o=ta(7,o,x,c),o.lanes=m,o}function Oh(o,c,m){return o=ta(6,o,null,c),o.lanes=m,o}function Dc(o,c,m){return c=ta(4,o.children!==null?o.children:[],o.key,c),c.lanes=m,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}var au=[],Vs=0,Lh=null,Bc=0,Ts=[],Oa=0,ur=null,_r=1,Sl="";function ou(o,c){au[Vs++]=Bc,au[Vs++]=Lh,Lh=o,Bc=c}function Ph(o,c,m){Ts[Oa++]=_r,Ts[Oa++]=Sl,Ts[Oa++]=ur,ur=o;var x=_r;o=Sl;var E=32-yt(x)-1;x&=~(1<<E),m+=1;var U=32-yt(c)+E;if(30<U){var W=E-E%5;U=(x&(1<<W)-1).toString(32),x>>=W,E-=W,_r=1<<32-yt(c)+E|m<<E|x,Sl=U+o}else _r=1<<U|m<<E|x,Sl=o}function pm(o){o.return!==null&&(ou(o,1),Ph(o,1,0))}function Nh(o){for(;o===Lh;)Lh=au[--Vs],au[Vs]=null,Bc=au[--Vs],au[Vs]=null;for(;o===ur;)ur=Ts[--Oa],Ts[Oa]=null,Sl=Ts[--Oa],Ts[Oa]=null,_r=Ts[--Oa],Ts[Oa]=null}var Qr=null,xr=null,ai=!1,ks=null,Es=!1,Uc=Error(i(519));function La(o){var c=Error(i(418,""));throw bl(Wr(c,o)),Uc}function av(o){var c=o.stateNode,m=o.type,x=o.memoizedProps;switch(c[Ln]=o,c[Ai]=x,m){case"dialog":gi("cancel",c),gi("close",c);break;case"iframe":case"object":case"embed":gi("load",c);break;case"video":case"audio":for(m=0;m<Xm.length;m++)gi(Xm[m],c);break;case"source":gi("error",c);break;case"img":case"image":case"link":gi("error",c),gi("load",c);break;case"details":gi("toggle",c);break;case"input":gi("invalid",c),Pn(c,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),Si(c);break;case"select":gi("invalid",c);break;case"textarea":gi("invalid",c),mr(c,x.value,x.defaultValue,x.children),Si(c)}m=x.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||c.textContent===""+m||x.suppressHydrationWarning===!0||nx(c.textContent,m)?(x.popover!=null&&(gi("beforetoggle",c),gi("toggle",c)),x.onScroll!=null&&gi("scroll",c),x.onScrollEnd!=null&&gi("scrollend",c),x.onClick!=null&&(c.onclick=Dv),c=!0):c=!1,c||La(o)}function mm(o){for(Qr=o.return;Qr;)switch(Qr.tag){case 5:case 13:Es=!1;return;case 27:case 3:Es=!0;return;default:Qr=Qr.return}}function Go(o){if(o!==Qr)return!1;if(!ai)return mm(o),ai=!0,!1;var c=o.tag,m;if((m=c!==3&&c!==27)&&((m=c===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||Uv(o.type,o.memoizedProps)),m=!m),m&&xr&&La(o),mm(o),c===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(m=o.data,m==="/$"){if(c===0){xr=Mu(o.nextSibling);break e}c--}else m!=="$"&&m!=="$!"&&m!=="$?"||c++;o=o.nextSibling}xr=null}}else c===27?(c=xr,Hl(o.type)?(o=My,My=null,xr=o):xr=c):xr=Qr?Mu(o.stateNode.nextSibling):null;return!0}function Df(){xr=Qr=null,ai=!1}function Hi(){var o=ks;return o!==null&&(Mn===null?Mn=o:Mn.push.apply(Mn,o),ks=null),o}function bl(o){ks===null?ks=[o]:ks.push(o)}var Oc=J(null),lu=null,re=null;function Pa(o,c,m){ge(Oc,c._currentValue),c._currentValue=m}function oo(o){o._currentValue=Oc.current,ce(Oc)}function _a(o,c,m){for(;o!==null;){var x=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,x!==null&&(x.childLanes|=c)):x!==null&&(x.childLanes&c)!==c&&(x.childLanes|=c),o===m)break;o=o.return}}function Yn(o,c,m,x){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var U=E.dependencies;if(U!==null){var W=E.child;U=U.firstContext;e:for(;U!==null;){var ae=U;U=E;for(var Te=0;Te<c.length;Te++)if(ae.context===c[Te]){U.lanes|=m,ae=U.alternate,ae!==null&&(ae.lanes|=m),_a(U.return,m,o),x||(W=null);break e}U=ae.next}}else if(E.tag===18){if(W=E.return,W===null)throw Error(i(341));W.lanes|=m,U=W.alternate,U!==null&&(U.lanes|=m),_a(W,m,o),W=null}else W=E.child;if(W!==null)W.return=E;else for(W=E;W!==null;){if(W===o){W=null;break}if(E=W.sibling,E!==null){E.return=W.return,W=E;break}W=W.return}E=W}}function lo(o,c,m,x){o=null;for(var E=c,U=!1;E!==null;){if(!U){if((E.flags&524288)!==0)U=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var W=E.alternate;if(W===null)throw Error(i(387));if(W=W.memoizedProps,W!==null){var ae=E.type;ya(E.pendingProps.value,W.value)||(o!==null?o.push(ae):o=[ae])}}else if(E===Re.current){if(W=E.alternate,W===null)throw Error(i(387));W.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(Ep):o=[Ep])}E=E.return}o!==null&&Yn(c,o,m,x),c.flags|=262144}function Ih(o){for(o=o.firstContext;o!==null;){if(!ya(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ml(o){lu=o,re=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ji(o){return Yd(lu,o)}function Fh(o,c){return lu===null&&Ml(o),Yd(o,c)}function Yd(o,c){var m=c._currentValue;if(c={context:c,memoizedValue:m,next:null},re===null){if(o===null)throw Error(i(308));re=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else re=re.next=c;return m}var gm=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(m,x){o.push(x)}};this.abort=function(){c.aborted=!0,o.forEach(function(m){return m()})}},dy=n.unstable_scheduleCallback,ov=n.unstable_NormalPriority,Zi={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jd(){return{controller:new gm,data:new Map,refCount:0}}function Bf(o){o.refCount--,o.refCount===0&&dy(ov,function(){o.controller.abort()})}var Uf=null,Gh=0,zn=0,xa=null;function Na(o,c){if(Uf===null){var m=Uf=[];Gh=0,zn=wv(),xa={status:"pending",value:void 0,then:function(x){m.push(x)}}}return Gh++,c.then(qd,qd),c}function qd(){if(--Gh===0&&Uf!==null){xa!==null&&(xa.status="fulfilled");var o=Uf;Uf=null,zn=0,xa=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function py(o,c){var m=[],x={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return o.then(function(){x.status="fulfilled",x.value=c;for(var E=0;E<m.length;E++)(0,m[E])(c)},function(E){for(x.status="rejected",x.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),x}var Hh=k.S;k.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Na(o,c),Hh!==null&&Hh(o,c)};var uo=J(null);function Aa(){var o=uo.current;return o!==null?o:Gn.pooledCache}function zh(o,c){c===null?ge(uo,uo.current):ge(uo,c.pool)}function Kd(){var o=Aa();return o===null?null:{parent:Zi._currentValue,pool:o}}var na=Error(i(460)),vm=Error(i(474)),Ho=Error(i(542)),Vh={then:function(){}};function Jd(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Of(){}function kh(o,c,m){switch(m=o[m],m===void 0?o.push(c):m!==c&&(c.then(Of,Of),c=m),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,lv(o),o;default:if(typeof c.status=="string")c.then(Of,Of);else{if(o=Gn,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=c,o.status="pending",o.then(function(x){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=x}},function(x){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=x}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,lv(o),o}throw Ia=c,na}}var Ia=null;function ym(){if(Ia===null)throw Error(i(459));var o=Ia;return Ia=null,o}function lv(o){if(o===na||o===Ho)throw Error(i(483))}var zo=!1;function Lc(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bn(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Tl(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function El(o,c,m){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(ki&2)!==0){var E=x.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),x.pending=c,c=Rc(o),Cf(o,null,m),c}return ea(o,x,c,m),Rc(o)}function Pc(o,c,m){if(c=c.updateQueue,c!==null&&(c=c.shared,(m&4194048)!==0)){var x=c.lanes;x&=o.pendingLanes,m|=x,c.lanes=m,qt(o,m)}}function Sa(o,c){var m=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var E=null,U=null;if(m=m.firstBaseUpdate,m!==null){do{var W={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};U===null?E=U=W:U=U.next=W,m=m.next}while(m!==null);U===null?E=U=c:U=U.next=c}else E=U=c;m={baseState:x.baseState,firstBaseUpdate:E,lastBaseUpdate:U,shared:x.shared,callbacks:x.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=c:o.next=c,m.lastBaseUpdate=c}var Xh=!1;function Vo(){if(Xh){var o=xa;if(o!==null)throw o}}function Cs(o,c,m,x){Xh=!1;var E=o.updateQueue;zo=!1;var U=E.firstBaseUpdate,W=E.lastBaseUpdate,ae=E.shared.pending;if(ae!==null){E.shared.pending=null;var Te=ae,Je=Te.next;Te.next=null,W===null?U=Je:W.next=Je,W=Te;var bt=o.alternate;bt!==null&&(bt=bt.updateQueue,ae=bt.lastBaseUpdate,ae!==W&&(ae===null?bt.firstBaseUpdate=Je:ae.next=Je,bt.lastBaseUpdate=Te))}if(U!==null){var Ut=E.baseState;W=0,bt=Je=Te=null,ae=U;do{var nt=ae.lane&-536870913,Ze=nt!==ae.lane;if(Ze?(yn&nt)===nt:(x&nt)===nt){nt!==0&&nt===zn&&(Xh=!0),bt!==null&&(bt=bt.next={lane:0,tag:ae.tag,payload:ae.payload,callback:null,next:null});e:{var Cn=o,En=ae;nt=c;var hr=m;switch(En.tag){case 1:if(Cn=En.payload,typeof Cn=="function"){Ut=Cn.call(hr,Ut,nt);break e}Ut=Cn;break e;case 3:Cn.flags=Cn.flags&-65537|128;case 0:if(Cn=En.payload,nt=typeof Cn=="function"?Cn.call(hr,Ut,nt):Cn,nt==null)break e;Ut=d({},Ut,nt);break e;case 2:zo=!0}}nt=ae.callback,nt!==null&&(o.flags|=64,Ze&&(o.flags|=8192),Ze=E.callbacks,Ze===null?E.callbacks=[nt]:Ze.push(nt))}else Ze={lane:nt,tag:ae.tag,payload:ae.payload,callback:ae.callback,next:null},bt===null?(Je=bt=Ze,Te=Ut):bt=bt.next=Ze,W|=nt;if(ae=ae.next,ae===null){if(ae=E.shared.pending,ae===null)break;Ze=ae,ae=Ze.next,Ze.next=null,E.lastBaseUpdate=Ze,E.shared.pending=null}}while(!0);bt===null&&(Te=Ut),E.baseState=Te,E.firstBaseUpdate=Je,E.lastBaseUpdate=bt,U===null&&(E.shared.lanes=0),Qo|=W,o.lanes=W,o.memoizedState=Ut}}function Lf(o,c){if(typeof o!="function")throw Error(i(191,o));o.call(c)}function _m(o,c){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)Lf(m[o],c)}var Nc=J(null),Hu=J(0);function uu(o,c){o=xo,ge(Hu,o),ge(Nc,c),xo=o|c.baseLanes}function Zd(){ge(Hu,xo),ge(Nc,Nc.current)}function Wh(){xo=Hu.current,ce(Nc),ce(Hu)}var co=0,Vn=null,zi=null,ui=null,Pf=!1,cu=!1,Er=!1,Hr=0,ia=0,Rr=null,xm=0;function pi(){throw Error(i(321))}function ds(o,c){if(c===null)return!1;for(var m=0;m<c.length&&m<o.length;m++)if(!ya(o[m],c[m]))return!1;return!0}function fu(o,c,m,x,E,U){return co=U,Vn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,k.H=o===null||o.memoizedState===null?cp:fp,Er=!1,U=m(x,E),Er=!1,cu&&(U=cv(c,m,x,E)),uv(o),U}function uv(o){k.H=Gf;var c=zi!==null&&zi.next!==null;if(co=0,ui=zi=Vn=null,Pf=!1,ia=0,Rr=null,c)throw Error(i(300));o===null||ps||(o=o.dependencies,o!==null&&Ih(o)&&(ps=!0))}function cv(o,c,m,x){Vn=o;var E=0;do{if(cu&&(Rr=null),ia=0,cu=!1,25<=E)throw Error(i(301));if(E+=1,ui=zi=null,o.updateQueue!=null){var U=o.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}k.H=Im,U=c(m,x)}while(cu);return U}function Am(){var o=k.H,c=o.useState()[0];return c=typeof c.then=="function"?ko(c):c,o=o.useState()[0],(zi!==null?zi.memoizedState:null)!==o&&(Vn.flags|=1024),c}function Sm(){var o=Hr!==0;return Hr=0,o}function zu(o,c,m){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~m}function Qd(o){if(Pf){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Pf=!1}co=0,ui=zi=Vn=null,cu=!1,ia=Hr=0,Rr=null}function ra(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ui===null?Vn.memoizedState=ui=o:ui=ui.next=o,ui}function Yr(){if(zi===null){var o=Vn.alternate;o=o!==null?o.memoizedState:null}else o=zi.next;var c=ui===null?Vn.memoizedState:ui.next;if(c!==null)ui=c,zi=o;else{if(o===null)throw Vn.alternate===null?Error(i(467)):Error(i(310));zi=o,o={memoizedState:zi.memoizedState,baseState:zi.baseState,baseQueue:zi.baseQueue,queue:zi.queue,next:null},ui===null?Vn.memoizedState=ui=o:ui=ui.next=o}return ui}function fo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ko(o){var c=ia;return ia+=1,Rr===null&&(Rr=[]),o=kh(Rr,o,c),c=Vn,(ui===null?c.memoizedState:ui.next)===null&&(c=c.alternate,k.H=c===null||c.memoizedState===null?cp:fp),o}function $d(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ko(o);if(o.$$typeof===D)return Ji(o)}throw Error(i(438,String(o)))}function Yh(o){var c=null,m=Vn.updateQueue;if(m!==null&&(c=m.memoCache),c==null){var x=Vn.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(c={data:x.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),m===null&&(m=fo(),Vn.updateQueue=m),m.memoCache=c,m=c.data[c.index],m===void 0)for(m=c.data[c.index]=Array(o),x=0;x<o;x++)m[x]=N;return c.index++,m}function Cl(o,c){return typeof c=="function"?c(o):c}function Vu(o){var c=Yr();return bm(c,zi,o)}function bm(o,c,m){var x=o.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=m;var E=o.baseQueue,U=x.pending;if(U!==null){if(E!==null){var W=E.next;E.next=U.next,U.next=W}c.baseQueue=E=U,x.pending=null}if(U=o.baseState,E===null)o.memoizedState=U;else{c=E.next;var ae=W=null,Te=null,Je=c,bt=!1;do{var Ut=Je.lane&-536870913;if(Ut!==Je.lane?(yn&Ut)===Ut:(co&Ut)===Ut){var nt=Je.revertLane;if(nt===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),Ut===zn&&(bt=!0);else if((co&nt)===nt){Je=Je.next,nt===zn&&(bt=!0);continue}else Ut={lane:0,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Te===null?(ae=Te=Ut,W=U):Te=Te.next=Ut,Vn.lanes|=nt,Qo|=nt;Ut=Je.action,Er&&m(U,Ut),U=Je.hasEagerState?Je.eagerState:m(U,Ut)}else nt={lane:Ut,revertLane:Je.revertLane,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Te===null?(ae=Te=nt,W=U):Te=Te.next=nt,Vn.lanes|=Ut,Qo|=Ut;Je=Je.next}while(Je!==null&&Je!==c);if(Te===null?W=U:Te.next=ae,!ya(U,o.memoizedState)&&(ps=!0,bt&&(m=xa,m!==null)))throw m;o.memoizedState=U,o.baseState=W,o.baseQueue=Te,x.lastRenderedState=U}return E===null&&(x.lanes=0),[o.memoizedState,x.dispatch]}function Mm(o){var c=Yr(),m=c.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=o;var x=m.dispatch,E=m.pending,U=c.memoizedState;if(E!==null){m.pending=null;var W=E=E.next;do U=o(U,W.action),W=W.next;while(W!==E);ya(U,c.memoizedState)||(ps=!0),c.memoizedState=U,c.baseQueue===null&&(c.baseState=U),m.lastRenderedState=U}return[U,x]}function Tm(o,c,m){var x=Vn,E=Yr(),U=ai;if(U){if(m===void 0)throw Error(i(407));m=m()}else m=c();var W=!ya((zi||E).memoizedState,m);W&&(E.memoizedState=m,ps=!0),E=E.queue;var ae=ep.bind(null,x,E,o);if(If(2048,8,ae,[o]),E.getSnapshot!==c||W||ui!==null&&ui.memoizedState.tag&1){if(x.flags|=2048,Nf(9,Kh(),fv.bind(null,x,E,m,c),null),Gn===null)throw Error(i(349));U||(co&124)!==0||ku(x,c,m)}return m}function ku(o,c,m){o.flags|=16384,o={getSnapshot:c,value:m},c=Vn.updateQueue,c===null?(c=fo(),Vn.updateQueue=c,c.stores=[o]):(m=c.stores,m===null?c.stores=[o]:m.push(o))}function fv(o,c,m,x){c.value=m,c.getSnapshot=x,Em(c)&&Cm(o)}function ep(o,c,m){return m(function(){Em(c)&&Cm(o)})}function Em(o){var c=o.getSnapshot;o=o.value;try{var m=c();return!ya(o,m)}catch{return!0}}function Cm(o){var c=Al(o,2);c!==null&&oa(c,o,2)}function tp(o){var c=ra();if(typeof o=="function"){var m=o;if(o=m(),Er){rt(!0);try{m()}finally{rt(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:o},c}function jh(o,c,m,x){return o.baseState=m,bm(o,zi,typeof x=="function"?x:Cl)}function my(o,c,m,x,E){if(up(o))throw Error(i(485));if(o=c.action,o!==null){var U={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){U.listeners.push(W)}};k.T!==null?m(!0):U.isTransition=!1,x(U),m=c.pending,m===null?(U.next=c.pending=U,wm(c,U)):(U.next=m.next,c.pending=m.next=U)}}function wm(o,c){var m=c.action,x=c.payload,E=o.state;if(c.isTransition){var U=k.T,W={};k.T=W;try{var ae=m(E,x),Te=k.S;Te!==null&&Te(W,ae),Rm(o,c,ae)}catch(Je){np(o,c,Je)}finally{k.T=U}}else try{U=m(E,x),Rm(o,c,U)}catch(Je){np(o,c,Je)}}function Rm(o,c,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){hv(o,c,x)},function(x){return np(o,c,x)}):hv(o,c,m)}function hv(o,c,m){c.status="fulfilled",c.value=m,dv(c),o.state=m,c=o.pending,c!==null&&(m=c.next,m===c?o.pending=null:(m=m.next,c.next=m,wm(o,m)))}function np(o,c,m){var x=o.pending;if(o.pending=null,x!==null){x=x.next;do c.status="rejected",c.reason=m,dv(c),c=c.next;while(c!==x)}o.action=null}function dv(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function qh(o,c){return c}function Dm(o,c){if(ai){var m=Gn.formState;if(m!==null){e:{var x=Vn;if(ai){if(xr){t:{for(var E=xr,U=Es;E.nodeType!==8;){if(!U){E=null;break t}if(E=Mu(E.nextSibling),E===null){E=null;break t}}U=E.data,E=U==="F!"||U==="F"?E:null}if(E){xr=Mu(E.nextSibling),x=E.data==="F!";break e}}La(x)}x=!1}x&&(c=m[0])}}return m=ra(),m.memoizedState=m.baseState=c,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qh,lastRenderedState:c},m.queue=x,m=Nm.bind(null,Vn,x),x.dispatch=m,x=tp(!1),U=lp.bind(null,Vn,!1,x.queue),x=ra(),E={state:c,dispatch:null,action:o,pending:null},x.queue=E,m=my.bind(null,Vn,E,U,m),E.dispatch=m,x.memoizedState=o,[c,m,!1]}function ip(o){var c=Yr();return pv(c,zi,o)}function pv(o,c,m){if(c=bm(o,c,qh)[0],o=Vu(Cl)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var x=ko(c)}catch(W){throw W===na?Ho:W}else x=c;c=Yr();var E=c.queue,U=E.dispatch;return m!==c.memoizedState&&(Vn.flags|=2048,Nf(9,Kh(),Bm.bind(null,E,m),null)),[x,U,o]}function Bm(o,c){o.action=c}function jn(o){var c=Yr(),m=zi;if(m!==null)return pv(c,m,o);Yr(),c=c.memoizedState,m=Yr();var x=m.queue.dispatch;return m.memoizedState=o,[c,x,!1]}function Nf(o,c,m,x){return o={tag:o,create:m,deps:x,inst:c,next:null},c=Vn.updateQueue,c===null&&(c=fo(),Vn.updateQueue=c),m=c.lastEffect,m===null?c.lastEffect=o.next=o:(x=m.next,m.next=o,o.next=x,c.lastEffect=o),o}function Kh(){return{destroy:void 0,resource:void 0}}function Ic(){return Yr().memoizedState}function Jh(o,c,m,x){var E=ra();x=x===void 0?null:x,Vn.flags|=o,E.memoizedState=Nf(1|c,Kh(),m,x)}function If(o,c,m,x){var E=Yr();x=x===void 0?null:x;var U=E.memoizedState.inst;zi!==null&&x!==null&&ds(x,zi.memoizedState.deps)?E.memoizedState=Nf(c,U,m,x):(Vn.flags|=o,E.memoizedState=Nf(1|c,U,m,x))}function Um(o,c){Jh(8390656,8,o,c)}function ba(o,c){If(2048,8,o,c)}function rp(o,c){return If(4,2,o,c)}function Fc(o,c){return If(4,4,o,c)}function sp(o,c){if(typeof c=="function"){o=o();var m=c(o);return function(){typeof m=="function"?m():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Om(o,c,m){m=m!=null?m.concat([o]):null,If(4,4,sp.bind(null,c,o),m)}function ap(){}function Ma(o,c){var m=Yr();c=c===void 0?null:c;var x=m.memoizedState;return c!==null&&ds(c,x[1])?x[0]:(m.memoizedState=[o,c],o)}function wl(o,c){var m=Yr();c=c===void 0?null:c;var x=m.memoizedState;if(c!==null&&ds(c,x[1]))return x[0];if(x=o(),Er){rt(!0);try{o()}finally{rt(!1)}}return m.memoizedState=[x,c],x}function Ff(o,c,m){return m===void 0||(co&1073741824)!==0?o.memoizedState=c:(o.memoizedState=m,o=yp(),Vn.lanes|=o,Qo|=o,m)}function Lm(o,c,m,x){return ya(m,c)?m:Nc.current!==null?(o=Ff(o,m,x),ya(o,c)||(ps=!0),o):(co&42)===0?(ps=!0,o.memoizedState=m):(o=yp(),Vn.lanes|=o,Qo|=o,c)}function Zh(o,c,m,x,E){var U=ee.p;ee.p=U!==0&&8>U?U:8;var W=k.T,ae={};k.T=ae,lp(o,!1,c,m);try{var Te=E(),Je=k.S;if(Je!==null&&Je(ae,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var bt=py(Te,x);Gc(o,c,bt,Sr(o))}else Gc(o,c,x,Sr(o))}catch(Ut){Gc(o,c,{then:function(){},status:"rejected",reason:Ut},Sr())}finally{ee.p=U,k.T=W}}function mv(){}function Qh(o,c,m,x){if(o.tag!==5)throw Error(i(476));var E=Pm(o).queue;Zh(o,E,c,ne,m===null?mv:function(){return op(o),m(x)})}function Pm(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:ne},next:null};var m={};return c.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:m},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function op(o){var c=Pm(o).next.queue;Gc(o,c,{},Sr())}function $h(){return Ji(Ep)}function hu(){return Yr().memoizedState}function gv(){return Yr().memoizedState}function Xu(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var m=Sr();o=Tl(m);var x=El(c,o,m);x!==null&&(oa(x,c,m),Pc(x,c,m)),c={cache:jd()},o.payload=c;return}c=c.return}}function vv(o,c,m){var x=Sr();m={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},up(o)?yv(c,m):(m=wc(o,c,m,x),m!==null&&(oa(m,o,x),Ta(m,c,x)))}function Nm(o,c,m){var x=Sr();Gc(o,c,m,x)}function Gc(o,c,m,x){var E={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(up(o))yv(c,E);else{var U=o.alternate;if(o.lanes===0&&(U===null||U.lanes===0)&&(U=c.lastRenderedReducer,U!==null))try{var W=c.lastRenderedState,ae=U(W,m);if(E.hasEagerState=!0,E.eagerState=ae,ya(ae,W))return ea(o,c,E,0),Gn===null&&Fu(),!1}catch{}finally{}if(m=wc(o,c,E,x),m!==null)return oa(m,o,x),Ta(m,c,x),!0}return!1}function lp(o,c,m,x){if(x={lane:2,revertLane:wv(),action:x,hasEagerState:!1,eagerState:null,next:null},up(o)){if(c)throw Error(i(479))}else c=wc(o,m,x,2),c!==null&&oa(c,o,2)}function up(o){var c=o.alternate;return o===Vn||c!==null&&c===Vn}function yv(o,c){cu=Pf=!0;var m=o.pending;m===null?c.next=c:(c.next=m.next,m.next=c),o.pending=c}function Ta(o,c,m){if((m&4194048)!==0){var x=c.lanes;x&=o.pendingLanes,m|=x,c.lanes=m,qt(o,m)}}var Gf={readContext:Ji,use:$d,useCallback:pi,useContext:pi,useEffect:pi,useImperativeHandle:pi,useLayoutEffect:pi,useInsertionEffect:pi,useMemo:pi,useReducer:pi,useRef:pi,useState:pi,useDebugValue:pi,useDeferredValue:pi,useTransition:pi,useSyncExternalStore:pi,useId:pi,useHostTransitionStatus:pi,useFormState:pi,useActionState:pi,useOptimistic:pi,useMemoCache:pi,useCacheRefresh:pi},cp={readContext:Ji,use:$d,useCallback:function(o,c){return ra().memoizedState=[o,c===void 0?null:c],o},useContext:Ji,useEffect:Um,useImperativeHandle:function(o,c,m){m=m!=null?m.concat([o]):null,Jh(4194308,4,sp.bind(null,c,o),m)},useLayoutEffect:function(o,c){return Jh(4194308,4,o,c)},useInsertionEffect:function(o,c){Jh(4,2,o,c)},useMemo:function(o,c){var m=ra();c=c===void 0?null:c;var x=o();if(Er){rt(!0);try{o()}finally{rt(!1)}}return m.memoizedState=[x,c],x},useReducer:function(o,c,m){var x=ra();if(m!==void 0){var E=m(c);if(Er){rt(!0);try{m(c)}finally{rt(!1)}}}else E=c;return x.memoizedState=x.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},x.queue=o,o=o.dispatch=vv.bind(null,Vn,o),[x.memoizedState,o]},useRef:function(o){var c=ra();return o={current:o},c.memoizedState=o},useState:function(o){o=tp(o);var c=o.queue,m=Nm.bind(null,Vn,c);return c.dispatch=m,[o.memoizedState,m]},useDebugValue:ap,useDeferredValue:function(o,c){var m=ra();return Ff(m,o,c)},useTransition:function(){var o=tp(!1);return o=Zh.bind(null,Vn,o.queue,!0,!1),ra().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,m){var x=Vn,E=ra();if(ai){if(m===void 0)throw Error(i(407));m=m()}else{if(m=c(),Gn===null)throw Error(i(349));(yn&124)!==0||ku(x,c,m)}E.memoizedState=m;var U={value:m,getSnapshot:c};return E.queue=U,Um(ep.bind(null,x,U,o),[o]),x.flags|=2048,Nf(9,Kh(),fv.bind(null,x,U,m,c),null),m},useId:function(){var o=ra(),c=Gn.identifierPrefix;if(ai){var m=Sl,x=_r;m=(x&~(1<<32-yt(x)-1)).toString(32)+m,c="«"+c+"R"+m,m=Hr++,0<m&&(c+="H"+m.toString(32)),c+="»"}else m=xm++,c="«"+c+"r"+m.toString(32)+"»";return o.memoizedState=c},useHostTransitionStatus:$h,useFormState:Dm,useActionState:Dm,useOptimistic:function(o){var c=ra();c.memoizedState=c.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=m,c=lp.bind(null,Vn,!0,m),m.dispatch=c,[o,c]},useMemoCache:Yh,useCacheRefresh:function(){return ra().memoizedState=Xu.bind(null,Vn)}},fp={readContext:Ji,use:$d,useCallback:Ma,useContext:Ji,useEffect:ba,useImperativeHandle:Om,useInsertionEffect:rp,useLayoutEffect:Fc,useMemo:wl,useReducer:Vu,useRef:Ic,useState:function(){return Vu(Cl)},useDebugValue:ap,useDeferredValue:function(o,c){var m=Yr();return Lm(m,zi.memoizedState,o,c)},useTransition:function(){var o=Vu(Cl)[0],c=Yr().memoizedState;return[typeof o=="boolean"?o:ko(o),c]},useSyncExternalStore:Tm,useId:hu,useHostTransitionStatus:$h,useFormState:ip,useActionState:ip,useOptimistic:function(o,c){var m=Yr();return jh(m,zi,o,c)},useMemoCache:Yh,useCacheRefresh:gv},Im={readContext:Ji,use:$d,useCallback:Ma,useContext:Ji,useEffect:ba,useImperativeHandle:Om,useInsertionEffect:rp,useLayoutEffect:Fc,useMemo:wl,useReducer:Mm,useRef:Ic,useState:function(){return Mm(Cl)},useDebugValue:ap,useDeferredValue:function(o,c){var m=Yr();return zi===null?Ff(m,o,c):Lm(m,zi.memoizedState,o,c)},useTransition:function(){var o=Mm(Cl)[0],c=Yr().memoizedState;return[typeof o=="boolean"?o:ko(o),c]},useSyncExternalStore:Tm,useId:hu,useHostTransitionStatus:$h,useFormState:jn,useActionState:jn,useOptimistic:function(o,c){var m=Yr();return zi!==null?jh(m,zi,o,c):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:Yh,useCacheRefresh:gv},jr=null,Ea=0;function ed(o){var c=Ea;return Ea+=1,jr===null&&(jr=[]),kh(jr,o,c)}function Hf(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function Hc(o,c){throw c.$$typeof===v?Error(i(525)):(o=Object.prototype.toString.call(c),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function zc(o){var c=o._init;return c(o._payload)}function Fm(o){function c(ze,Ne){if(o){var je=ze.deletions;je===null?(ze.deletions=[Ne],ze.flags|=16):je.push(Ne)}}function m(ze,Ne){if(!o)return null;for(;Ne!==null;)c(ze,Ne),Ne=Ne.sibling;return null}function x(ze){for(var Ne=new Map;ze!==null;)ze.key!==null?Ne.set(ze.key,ze):Ne.set(ze.index,ze),ze=ze.sibling;return Ne}function E(ze,Ne){return ze=nr(ze,Ne),ze.index=0,ze.sibling=null,ze}function U(ze,Ne,je){return ze.index=je,o?(je=ze.alternate,je!==null?(je=je.index,je<Ne?(ze.flags|=67108866,Ne):je):(ze.flags|=67108866,Ne)):(ze.flags|=1048576,Ne)}function W(ze){return o&&ze.alternate===null&&(ze.flags|=67108866),ze}function ae(ze,Ne,je,Ct){return Ne===null||Ne.tag!==6?(Ne=Oh(je,ze.mode,Ct),Ne.return=ze,Ne):(Ne=E(Ne,je),Ne.return=ze,Ne)}function Te(ze,Ne,je,Ct){var on=je.type;return on===b?bt(ze,Ne,je.props.children,Ct,je.key):Ne!==null&&(Ne.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===G&&zc(on)===Ne.type)?(Ne=E(Ne,je.props),Hf(Ne,je),Ne.return=ze,Ne):(Ne=hs(je.type,je.key,je.props,null,ze.mode,Ct),Hf(Ne,je),Ne.return=ze,Ne)}function Je(ze,Ne,je,Ct){return Ne===null||Ne.tag!==4||Ne.stateNode.containerInfo!==je.containerInfo||Ne.stateNode.implementation!==je.implementation?(Ne=Dc(je,ze.mode,Ct),Ne.return=ze,Ne):(Ne=E(Ne,je.children||[]),Ne.return=ze,Ne)}function bt(ze,Ne,je,Ct,on){return Ne===null||Ne.tag!==7?(Ne=Gu(je,ze.mode,Ct,on),Ne.return=ze,Ne):(Ne=E(Ne,je),Ne.return=ze,Ne)}function Ut(ze,Ne,je){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return Ne=Oh(""+Ne,ze.mode,je),Ne.return=ze,Ne;if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case y:return je=hs(Ne.type,Ne.key,Ne.props,null,ze.mode,je),Hf(je,Ne),je.return=ze,je;case A:return Ne=Dc(Ne,ze.mode,je),Ne.return=ze,Ne;case G:var Ct=Ne._init;return Ne=Ct(Ne._payload),Ut(ze,Ne,je)}if(ye(Ne)||$(Ne))return Ne=Gu(Ne,ze.mode,je,null),Ne.return=ze,Ne;if(typeof Ne.then=="function")return Ut(ze,ed(Ne),je);if(Ne.$$typeof===D)return Ut(ze,Fh(ze,Ne),je);Hc(ze,Ne)}return null}function nt(ze,Ne,je,Ct){var on=Ne!==null?Ne.key:null;if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return on!==null?null:ae(ze,Ne,""+je,Ct);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case y:return je.key===on?Te(ze,Ne,je,Ct):null;case A:return je.key===on?Je(ze,Ne,je,Ct):null;case G:return on=je._init,je=on(je._payload),nt(ze,Ne,je,Ct)}if(ye(je)||$(je))return on!==null?null:bt(ze,Ne,je,Ct,null);if(typeof je.then=="function")return nt(ze,Ne,ed(je),Ct);if(je.$$typeof===D)return nt(ze,Ne,Fh(ze,je),Ct);Hc(ze,je)}return null}function Ze(ze,Ne,je,Ct,on){if(typeof Ct=="string"&&Ct!==""||typeof Ct=="number"||typeof Ct=="bigint")return ze=ze.get(je)||null,ae(Ne,ze,""+Ct,on);if(typeof Ct=="object"&&Ct!==null){switch(Ct.$$typeof){case y:return ze=ze.get(Ct.key===null?je:Ct.key)||null,Te(Ne,ze,Ct,on);case A:return ze=ze.get(Ct.key===null?je:Ct.key)||null,Je(Ne,ze,Ct,on);case G:var fi=Ct._init;return Ct=fi(Ct._payload),Ze(ze,Ne,je,Ct,on)}if(ye(Ct)||$(Ct))return ze=ze.get(je)||null,bt(Ne,ze,Ct,on,null);if(typeof Ct.then=="function")return Ze(ze,Ne,je,ed(Ct),on);if(Ct.$$typeof===D)return Ze(ze,Ne,je,Fh(Ne,Ct),on);Hc(Ne,Ct)}return null}function Cn(ze,Ne,je,Ct){for(var on=null,fi=null,vn=Ne,wn=Ne=0,Ks=null;vn!==null&&wn<je.length;wn++){vn.index>wn?(Ks=vn,vn=null):Ks=vn.sibling;var Li=nt(ze,vn,je[wn],Ct);if(Li===null){vn===null&&(vn=Ks);break}o&&vn&&Li.alternate===null&&c(ze,vn),Ne=U(Li,Ne,wn),fi===null?on=Li:fi.sibling=Li,fi=Li,vn=Ks}if(wn===je.length)return m(ze,vn),ai&&ou(ze,wn),on;if(vn===null){for(;wn<je.length;wn++)vn=Ut(ze,je[wn],Ct),vn!==null&&(Ne=U(vn,Ne,wn),fi===null?on=vn:fi.sibling=vn,fi=vn);return ai&&ou(ze,wn),on}for(vn=x(vn);wn<je.length;wn++)Ks=Ze(vn,ze,wn,je[wn],Ct),Ks!==null&&(o&&Ks.alternate!==null&&vn.delete(Ks.key===null?wn:Ks.key),Ne=U(Ks,Ne,wn),fi===null?on=Ks:fi.sibling=Ks,fi=Ks);return o&&vn.forEach(function(nh){return c(ze,nh)}),ai&&ou(ze,wn),on}function En(ze,Ne,je,Ct){if(je==null)throw Error(i(151));for(var on=null,fi=null,vn=Ne,wn=Ne=0,Ks=null,Li=je.next();vn!==null&&!Li.done;wn++,Li=je.next()){vn.index>wn?(Ks=vn,vn=null):Ks=vn.sibling;var nh=nt(ze,vn,Li.value,Ct);if(nh===null){vn===null&&(vn=Ks);break}o&&vn&&nh.alternate===null&&c(ze,vn),Ne=U(nh,Ne,wn),fi===null?on=nh:fi.sibling=nh,fi=nh,vn=Ks}if(Li.done)return m(ze,vn),ai&&ou(ze,wn),on;if(vn===null){for(;!Li.done;wn++,Li=je.next())Li=Ut(ze,Li.value,Ct),Li!==null&&(Ne=U(Li,Ne,wn),fi===null?on=Li:fi.sibling=Li,fi=Li);return ai&&ou(ze,wn),on}for(vn=x(vn);!Li.done;wn++,Li=je.next())Li=Ze(vn,ze,wn,Li.value,Ct),Li!==null&&(o&&Li.alternate!==null&&vn.delete(Li.key===null?wn:Li.key),Ne=U(Li,Ne,wn),fi===null?on=Li:fi.sibling=Li,fi=Li);return o&&vn.forEach(function(LM){return c(ze,LM)}),ai&&ou(ze,wn),on}function hr(ze,Ne,je,Ct){if(typeof je=="object"&&je!==null&&je.type===b&&je.key===null&&(je=je.props.children),typeof je=="object"&&je!==null){switch(je.$$typeof){case y:e:{for(var on=je.key;Ne!==null;){if(Ne.key===on){if(on=je.type,on===b){if(Ne.tag===7){m(ze,Ne.sibling),Ct=E(Ne,je.props.children),Ct.return=ze,ze=Ct;break e}}else if(Ne.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===G&&zc(on)===Ne.type){m(ze,Ne.sibling),Ct=E(Ne,je.props),Hf(Ct,je),Ct.return=ze,ze=Ct;break e}m(ze,Ne);break}else c(ze,Ne);Ne=Ne.sibling}je.type===b?(Ct=Gu(je.props.children,ze.mode,Ct,je.key),Ct.return=ze,ze=Ct):(Ct=hs(je.type,je.key,je.props,null,ze.mode,Ct),Hf(Ct,je),Ct.return=ze,ze=Ct)}return W(ze);case A:e:{for(on=je.key;Ne!==null;){if(Ne.key===on)if(Ne.tag===4&&Ne.stateNode.containerInfo===je.containerInfo&&Ne.stateNode.implementation===je.implementation){m(ze,Ne.sibling),Ct=E(Ne,je.children||[]),Ct.return=ze,ze=Ct;break e}else{m(ze,Ne);break}else c(ze,Ne);Ne=Ne.sibling}Ct=Dc(je,ze.mode,Ct),Ct.return=ze,ze=Ct}return W(ze);case G:return on=je._init,je=on(je._payload),hr(ze,Ne,je,Ct)}if(ye(je))return Cn(ze,Ne,je,Ct);if($(je)){if(on=$(je),typeof on!="function")throw Error(i(150));return je=on.call(je),En(ze,Ne,je,Ct)}if(typeof je.then=="function")return hr(ze,Ne,ed(je),Ct);if(je.$$typeof===D)return hr(ze,Ne,Fh(ze,je),Ct);Hc(ze,je)}return typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint"?(je=""+je,Ne!==null&&Ne.tag===6?(m(ze,Ne.sibling),Ct=E(Ne,je),Ct.return=ze,ze=Ct):(m(ze,Ne),Ct=Oh(je,ze.mode,Ct),Ct.return=ze,ze=Ct),W(ze)):m(ze,Ne)}return function(ze,Ne,je,Ct){try{Ea=0;var on=hr(ze,Ne,je,Ct);return jr=null,on}catch(vn){if(vn===na||vn===Ho)throw vn;var fi=ta(29,vn,null,ze.mode);return fi.lanes=Ct,fi.return=ze,fi}finally{}}}var Wu=Fm(!0),_v=Fm(!1),Qi=J(null),Xs=null;function ho(o){var c=o.alternate;ge(Cr,Cr.current&1),ge(Qi,o),Xs===null&&(c===null||Nc.current!==null||c.memoizedState!==null)&&(Xs=o)}function xv(o){if(o.tag===22){if(ge(Cr,Cr.current),ge(Qi,o),Xs===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Xs=o)}}else du()}function du(){ge(Cr,Cr.current),ge(Qi,Qi.current)}function Xo(o){ce(Qi),Xs===o&&(Xs=null),ce(Cr)}var Cr=J(0);function Rl(o){for(var c=o;c!==null;){if(c.tag===13){var m=c.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||Ka(m)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Wo(o,c,m,x){c=o.memoizedState,m=m(x,c),m=m==null?c:d({},c,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var ws={enqueueSetState:function(o,c,m){o=o._reactInternals;var x=Sr(),E=Tl(x);E.payload=c,m!=null&&(E.callback=m),c=El(o,E,x),c!==null&&(oa(c,o,x),Pc(c,o,x))},enqueueReplaceState:function(o,c,m){o=o._reactInternals;var x=Sr(),E=Tl(x);E.tag=1,E.payload=c,m!=null&&(E.callback=m),c=El(o,E,x),c!==null&&(oa(c,o,x),Pc(c,o,x))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var m=Sr(),x=Tl(m);x.tag=2,c!=null&&(x.callback=c),c=El(o,x,m),c!==null&&(oa(c,o,m),Pc(c,o,m))}};function td(o,c,m,x,E,U,W){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,U,W):c.prototype&&c.prototype.isPureReactComponent?!Hs(m,x)||!Hs(E,U):!0}function Av(o,c,m,x){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(m,x),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(m,x),c.state!==o&&ws.enqueueReplaceState(c,c.state,null)}function Yo(o,c){var m=c;if("ref"in c){m={};for(var x in c)x!=="ref"&&(m[x]=c[x])}if(o=o.defaultProps){m===c&&(m=d({},m));for(var E in o)m[E]===void 0&&(m[E]=o[E])}return m}var Dl=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function zf(o){Dl(o)}function Vf(o){console.error(o)}function Sv(o){Dl(o)}function nd(o,c){try{var m=o.onUncaughtError;m(c.value,{componentStack:c.stack})}catch(x){setTimeout(function(){throw x})}}function qr(o,c,m){try{var x=o.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function id(o,c,m){return m=Tl(m),m.tag=3,m.payload={element:null},m.callback=function(){nd(o,c)},m}function Gm(o){return o=Tl(o),o.tag=3,o}function hp(o,c,m,x){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var U=x.value;o.payload=function(){return E(U)},o.callback=function(){qr(c,m,x)}}var W=m.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(o.callback=function(){qr(c,m,x),typeof E!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var ae=x.stack;this.componentDidCatch(x.value,{componentStack:ae!==null?ae:""})})}function bv(o,c,m,x,E){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(c=m.alternate,c!==null&&lo(c,m,E,!0),m=Qi.current,m!==null){switch(m.tag){case 13:return Xs===null?h():m.alternate===null&&Ar===0&&(Ar=3),m.flags&=-257,m.flags|=65536,m.lanes=E,x===Vh?m.flags|=16384:(c=m.updateQueue,c===null?m.updateQueue=new Set([x]):c.add(x),st(o,x,E)),!1;case 22:return m.flags|=65536,x===Vh?m.flags|=16384:(c=m.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=c):(m=c.retryQueue,m===null?c.retryQueue=new Set([x]):m.add(x)),st(o,x,E)),!1}throw Error(i(435,m.tag))}return st(o,x,E),h(),!1}if(ai)return c=Qi.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,x!==Uc&&(o=Error(i(422),{cause:x}),bl(Wr(o,m)))):(x!==Uc&&(c=Error(i(423),{cause:x}),bl(Wr(c,m))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,x=Wr(x,m),E=id(o.stateNode,x,E),Sa(o,E),Ar!==4&&(Ar=2)),!1;var U=Error(i(520),{cause:x});if(U=Wr(U,m),Xi===null?Xi=[U]:Xi.push(U),Ar!==4&&(Ar=2),c===null)return!0;x=Wr(x,m),m=c;do{switch(m.tag){case 3:return m.flags|=65536,o=E&-E,m.lanes|=o,o=id(m.stateNode,x,o),Sa(m,o),!1;case 1:if(c=m.type,U=m.stateNode,(m.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Wa===null||!Wa.has(U))))return m.flags|=65536,E&=-E,m.lanes|=E,E=Gm(E),hp(E,o,m,x),Sa(m,E),!1}m=m.return}while(m!==null);return!1}var Mv=Error(i(461)),ps=!1;function Yi(o,c,m,x){c.child=o===null?_v(c,null,m,x):Wu(c,o.child,m,x)}function Ws(o,c,m,x,E){m=m.render;var U=c.ref;if("ref"in x){var W={};for(var ae in x)ae!=="ref"&&(W[ae]=x[ae])}else W=x;return Ml(c),x=fu(o,c,m,W,U,E),ae=Sm(),o!==null&&!ps?(zu(o,c,E),gs(o,c,E)):(ai&&ae&&pm(c),c.flags|=1,Yi(o,c,x,E),c.child)}function Ys(o,c,m,x,E){if(o===null){var U=m.type;return typeof U=="function"&&!su(U)&&U.defaultProps===void 0&&m.compare===null?(c.tag=15,c.type=U,rd(o,c,U,x,E)):(o=hs(m.type,null,x,c,c.mode,E),o.ref=c.ref,o.return=c,c.child=o)}if(U=o.child,!Ga(o,E)){var W=U.memoizedProps;if(m=m.compare,m=m!==null?m:Hs,m(W,x)&&o.ref===c.ref)return gs(o,c,E)}return c.flags|=1,o=nr(U,x),o.ref=c.ref,o.return=c,c.child=o}function rd(o,c,m,x,E){if(o!==null){var U=o.memoizedProps;if(Hs(U,x)&&o.ref===c.ref)if(ps=!1,c.pendingProps=x=U,Ga(o,E))(o.flags&131072)!==0&&(ps=!0);else return c.lanes=o.lanes,gs(o,c,E)}return pu(o,c,m,x,E)}function Bl(o,c,m){var x=c.pendingProps,E=x.children,U=o!==null?o.memoizedState:null;if(x.mode==="hidden"){if((c.flags&128)!==0){if(x=U!==null?U.baseLanes|m:m,o!==null){for(E=c.child=o.child,U=0;E!==null;)U=U|E.lanes|E.childLanes,E=E.sibling;c.childLanes=U&~x}else c.childLanes=0,c.child=null;return po(o,c,x,m)}if((m&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&zh(c,U!==null?U.cachePool:null),U!==null?uu(c,U):Zd(),xv(c);else return c.lanes=c.childLanes=536870912,po(o,c,U!==null?U.baseLanes|m:m,m)}else U!==null?(zh(c,U.cachePool),uu(c,U),du(),c.memoizedState=null):(o!==null&&zh(c,null),Zd(),du());return Yi(o,c,E,m),c.child}function po(o,c,m,x){var E=Aa();return E=E===null?null:{parent:Zi._currentValue,pool:E},c.memoizedState={baseLanes:m,cachePool:E},o!==null&&zh(c,null),Zd(),xv(c),o!==null&&lo(o,c,x,!0),null}function hn(o,c){var m=c.ref;if(m===null)o!==null&&o.ref!==null&&(c.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(o===null||o.ref!==m)&&(c.flags|=4194816)}}function pu(o,c,m,x,E){return Ml(c),m=fu(o,c,m,x,void 0,E),x=Sm(),o!==null&&!ps?(zu(o,c,E),gs(o,c,E)):(ai&&x&&pm(c),c.flags|=1,Yi(o,c,m,E),c.child)}function sa(o,c,m,x,E,U){return Ml(c),c.updateQueue=null,m=cv(c,x,m,E),uv(o),x=Sm(),o!==null&&!ps?(zu(o,c,U),gs(o,c,U)):(ai&&x&&pm(c),c.flags|=1,Yi(o,c,m,U),c.child)}function $r(o,c,m,x,E){if(Ml(c),c.stateNode===null){var U=ru,W=m.contextType;typeof W=="object"&&W!==null&&(U=Ji(W)),U=new m(x,U),c.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=ws,c.stateNode=U,U._reactInternals=c,U=c.stateNode,U.props=x,U.state=c.memoizedState,U.refs={},Lc(c),W=m.contextType,U.context=typeof W=="object"&&W!==null?Ji(W):ru,U.state=c.memoizedState,W=m.getDerivedStateFromProps,typeof W=="function"&&(Wo(c,m,W,x),U.state=c.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(W=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),W!==U.state&&ws.enqueueReplaceState(U,U.state,null),Cs(c,x,U,E),Vo(),U.state=c.memoizedState),typeof U.componentDidMount=="function"&&(c.flags|=4194308),x=!0}else if(o===null){U=c.stateNode;var ae=c.memoizedProps,Te=Yo(m,ae);U.props=Te;var Je=U.context,bt=m.contextType;W=ru,typeof bt=="object"&&bt!==null&&(W=Ji(bt));var Ut=m.getDerivedStateFromProps;bt=typeof Ut=="function"||typeof U.getSnapshotBeforeUpdate=="function",ae=c.pendingProps!==ae,bt||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ae||Je!==W)&&Av(c,U,x,W),zo=!1;var nt=c.memoizedState;U.state=nt,Cs(c,x,U,E),Vo(),Je=c.memoizedState,ae||nt!==Je||zo?(typeof Ut=="function"&&(Wo(c,m,Ut,x),Je=c.memoizedState),(Te=zo||td(c,m,Te,x,nt,Je,W))?(bt||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(c.flags|=4194308)):(typeof U.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=x,c.memoizedState=Je),U.props=x,U.state=Je,U.context=W,x=Te):(typeof U.componentDidMount=="function"&&(c.flags|=4194308),x=!1)}else{U=c.stateNode,bn(o,c),W=c.memoizedProps,bt=Yo(m,W),U.props=bt,Ut=c.pendingProps,nt=U.context,Je=m.contextType,Te=ru,typeof Je=="object"&&Je!==null&&(Te=Ji(Je)),ae=m.getDerivedStateFromProps,(Je=typeof ae=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(W!==Ut||nt!==Te)&&Av(c,U,x,Te),zo=!1,nt=c.memoizedState,U.state=nt,Cs(c,x,U,E),Vo();var Ze=c.memoizedState;W!==Ut||nt!==Ze||zo||o!==null&&o.dependencies!==null&&Ih(o.dependencies)?(typeof ae=="function"&&(Wo(c,m,ae,x),Ze=c.memoizedState),(bt=zo||td(c,m,bt,x,nt,Ze,Te)||o!==null&&o.dependencies!==null&&Ih(o.dependencies))?(Je||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(x,Ze,Te),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(x,Ze,Te)),typeof U.componentDidUpdate=="function"&&(c.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof U.componentDidUpdate!="function"||W===o.memoizedProps&&nt===o.memoizedState||(c.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||W===o.memoizedProps&&nt===o.memoizedState||(c.flags|=1024),c.memoizedProps=x,c.memoizedState=Ze),U.props=x,U.state=Ze,U.context=Te,x=bt):(typeof U.componentDidUpdate!="function"||W===o.memoizedProps&&nt===o.memoizedState||(c.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||W===o.memoizedProps&&nt===o.memoizedState||(c.flags|=1024),x=!1)}return U=x,hn(o,c),x=(c.flags&128)!==0,U||x?(U=c.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:U.render(),c.flags|=1,o!==null&&x?(c.child=Wu(c,o.child,null,E),c.child=Wu(c,null,m,E)):Yi(o,c,m,E),c.memoizedState=U.state,o=c.child):o=gs(o,c,E),o}function Yu(o,c,m,x){return Df(),c.flags|=256,Yi(o,c,m,x),c.child}var Fa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mo(o){return{baseLanes:o,cachePool:Kd()}}function _i(o,c,m){return o=o!==null?o.childLanes&~m:0,c&&(o|=Ao),o}function kf(o,c,m){var x=c.pendingProps,E=!1,U=(c.flags&128)!==0,W;if((W=U)||(W=o!==null&&o.memoizedState===null?!1:(Cr.current&2)!==0),W&&(E=!0,c.flags&=-129),W=(c.flags&32)!==0,c.flags&=-33,o===null){if(ai){if(E?ho(c):du(),ai){var ae=xr,Te;if(Te=ae){e:{for(Te=ae,ae=Es;Te.nodeType!==8;){if(!ae){ae=null;break e}if(Te=Mu(Te.nextSibling),Te===null){ae=null;break e}}ae=Te}ae!==null?(c.memoizedState={dehydrated:ae,treeContext:ur!==null?{id:_r,overflow:Sl}:null,retryLane:536870912,hydrationErrors:null},Te=ta(18,null,null,0),Te.stateNode=ae,Te.return=c,c.child=Te,Qr=c,xr=null,Te=!0):Te=!1}Te||La(c)}if(ae=c.memoizedState,ae!==null&&(ae=ae.dehydrated,ae!==null))return Ka(ae)?c.lanes=32:c.lanes=536870912,null;Xo(c)}return ae=x.children,x=x.fallback,E?(du(),E=c.mode,ae=ju({mode:"hidden",children:ae},E),x=Gu(x,E,m,null),ae.return=c,x.return=c,ae.sibling=x,c.child=ae,E=c.child,E.memoizedState=mo(m),E.childLanes=_i(o,W,m),c.memoizedState=Fa,x):(ho(c),Ul(c,ae))}if(Te=o.memoizedState,Te!==null&&(ae=Te.dehydrated,ae!==null)){if(U)c.flags&256?(ho(c),c.flags&=-257,c=Rs(o,c,m)):c.memoizedState!==null?(du(),c.child=o.child,c.flags|=128,c=null):(du(),E=x.fallback,ae=c.mode,x=ju({mode:"visible",children:x.children},ae),E=Gu(E,ae,m,null),E.flags|=2,x.return=c,E.return=c,x.sibling=E,c.child=x,Wu(c,o.child,null,m),x=c.child,x.memoizedState=mo(m),x.childLanes=_i(o,W,m),c.memoizedState=Fa,c=E);else if(ho(c),Ka(ae)){if(W=ae.nextSibling&&ae.nextSibling.dataset,W)var Je=W.dgst;W=Je,x=Error(i(419)),x.stack="",x.digest=W,bl({value:x,source:null,stack:null}),c=Rs(o,c,m)}else if(ps||lo(o,c,m,!1),W=(m&o.childLanes)!==0,ps||W){if(W=Gn,W!==null&&(x=m&-m,x=(x&42)!==0?1:sn(x),x=(x&(W.suspendedLanes|m))!==0?0:x,x!==0&&x!==Te.retryLane))throw Te.retryLane=x,Al(o,x),oa(W,o,x),Mv;ae.data==="$?"||h(),c=Rs(o,c,m)}else ae.data==="$?"?(c.flags|=192,c.child=o.child,c=null):(o=Te.treeContext,xr=Mu(ae.nextSibling),Qr=c,ai=!0,ks=null,Es=!1,o!==null&&(Ts[Oa++]=_r,Ts[Oa++]=Sl,Ts[Oa++]=ur,_r=o.id,Sl=o.overflow,ur=c),c=Ul(c,x.children),c.flags|=4096);return c}return E?(du(),E=x.fallback,ae=c.mode,Te=o.child,Je=Te.sibling,x=nr(Te,{mode:"hidden",children:x.children}),x.subtreeFlags=Te.subtreeFlags&65011712,Je!==null?E=nr(Je,E):(E=Gu(E,ae,m,null),E.flags|=2),E.return=c,x.return=c,x.sibling=E,c.child=x,x=E,E=c.child,ae=o.child.memoizedState,ae===null?ae=mo(m):(Te=ae.cachePool,Te!==null?(Je=Zi._currentValue,Te=Te.parent!==Je?{parent:Je,pool:Je}:Te):Te=Kd(),ae={baseLanes:ae.baseLanes|m,cachePool:Te}),E.memoizedState=ae,E.childLanes=_i(o,W,m),c.memoizedState=Fa,x):(ho(c),m=o.child,o=m.sibling,m=nr(m,{mode:"visible",children:x.children}),m.return=c,m.sibling=null,o!==null&&(W=c.deletions,W===null?(c.deletions=[o],c.flags|=16):W.push(o)),c.child=m,c.memoizedState=null,m)}function Ul(o,c){return c=ju({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function ju(o,c){return o=ta(22,o,null,c),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Rs(o,c,m){return Wu(c,o.child,null,m),o=Ul(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function ms(o,c,m){o.lanes|=c;var x=o.alternate;x!==null&&(x.lanes|=c),_a(o.return,c,m)}function xi(o,c,m,x,E){var U=o.memoizedState;U===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:E}:(U.isBackwards=c,U.rendering=null,U.renderingStartTime=0,U.last=x,U.tail=m,U.tailMode=E)}function go(o,c,m){var x=c.pendingProps,E=x.revealOrder,U=x.tail;if(Yi(o,c,x.children,m),x=Cr.current,(x&2)!==0)x=x&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ms(o,m,c);else if(o.tag===19)ms(o,m,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}switch(ge(Cr,x),E){case"forwards":for(m=c.child,E=null;m!==null;)o=m.alternate,o!==null&&Rl(o)===null&&(E=m),m=m.sibling;m=E,m===null?(E=c.child,c.child=null):(E=m.sibling,m.sibling=null),xi(c,!1,E,m,U);break;case"backwards":for(m=null,E=c.child,c.child=null;E!==null;){if(o=E.alternate,o!==null&&Rl(o)===null){c.child=E;break}o=E.sibling,E.sibling=m,m=E,E=o}xi(c,!0,m,null,U);break;case"together":xi(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function gs(o,c,m){if(o!==null&&(c.dependencies=o.dependencies),Qo|=c.lanes,(m&c.childLanes)===0)if(o!==null){if(lo(o,c,m,!1),(m&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(i(153));if(c.child!==null){for(o=c.child,m=nr(o,o.pendingProps),c.child=m,m.return=c;o.sibling!==null;)o=o.sibling,m=m.sibling=nr(o,o.pendingProps),m.return=c;m.sibling=null}return c.child}function Ga(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Ih(o)))}function cr(o,c,m){switch(c.tag){case 3:Le(c,c.stateNode.containerInfo),Pa(c,Zi,o.memoizedState.cache),Df();break;case 27:case 5:Mt(c);break;case 4:Le(c,c.stateNode.containerInfo);break;case 10:Pa(c,c.type,c.memoizedProps.value);break;case 13:var x=c.memoizedState;if(x!==null)return x.dehydrated!==null?(ho(c),c.flags|=128,null):(m&c.child.childLanes)!==0?kf(o,c,m):(ho(c),o=gs(o,c,m),o!==null?o.sibling:null);ho(c);break;case 19:var E=(o.flags&128)!==0;if(x=(m&c.childLanes)!==0,x||(lo(o,c,m,!1),x=(m&c.childLanes)!==0),E){if(x)return go(o,c,m);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ge(Cr,Cr.current),x)break;return null;case 22:case 23:return c.lanes=0,Bl(o,c,m);case 24:Pa(c,Zi,o.memoizedState.cache)}return gs(o,c,m)}function mu(o,c,m){if(o!==null)if(o.memoizedProps!==c.pendingProps)ps=!0;else{if(!Ga(o,m)&&(c.flags&128)===0)return ps=!1,cr(o,c,m);ps=(o.flags&131072)!==0}else ps=!1,ai&&(c.flags&1048576)!==0&&Ph(c,Bc,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var x=c.elementType,E=x._init;if(x=E(x._payload),c.type=x,typeof x=="function")su(x)?(o=Yo(x,o),c.tag=1,c=$r(null,c,x,o,m)):(c.tag=0,c=pu(null,c,x,o,m));else{if(x!=null){if(E=x.$$typeof,E===O){c.tag=11,c=Ws(null,c,x,o,m);break e}else if(E===V){c.tag=14,c=Ys(null,c,x,o,m);break e}}throw c=se(x)||x,Error(i(306,c,""))}}return c;case 0:return pu(o,c,c.type,c.pendingProps,m);case 1:return x=c.type,E=Yo(x,c.pendingProps),$r(o,c,x,E,m);case 3:e:{if(Le(c,c.stateNode.containerInfo),o===null)throw Error(i(387));x=c.pendingProps;var U=c.memoizedState;E=U.element,bn(o,c),Cs(c,x,null,m);var W=c.memoizedState;if(x=W.cache,Pa(c,Zi,x),x!==U.cache&&Yn(c,[Zi],m,!0),Vo(),x=W.element,U.isDehydrated)if(U={element:x,isDehydrated:!1,cache:W.cache},c.updateQueue.baseState=U,c.memoizedState=U,c.flags&256){c=Yu(o,c,x,m);break e}else if(x!==E){E=Wr(Error(i(424)),c),bl(E),c=Yu(o,c,x,m);break e}else{switch(o=c.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(xr=Mu(o.firstChild),Qr=c,ai=!0,ks=null,Es=!0,m=_v(c,null,x,m),c.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Df(),x===E){c=gs(o,c,m);break e}Yi(o,c,x,m)}c=c.child}return c;case 26:return hn(o,c),o===null?(m=fx(c.type,null,c.pendingProps,null))?c.memoizedState=m:ai||(m=c.type,o=c.pendingProps,x=cd(Se.current).createElement(m),x[Ln]=c,x[Ai]=o,Bs(x,m,o),et(x),c.stateNode=x):c.memoizedState=fx(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return Mt(c),o===null&&ai&&(x=c.stateNode=lx(c.type,c.pendingProps,Se.current),Qr=c,Es=!0,E=xr,Hl(c.type)?(My=E,xr=Mu(x.firstChild)):xr=E),Yi(o,c,c.pendingProps.children,m),hn(o,c),o===null&&(c.flags|=4194304),c.child;case 5:return o===null&&ai&&((E=x=xr)&&(x=ax(x,c.type,c.pendingProps,Es),x!==null?(c.stateNode=x,Qr=c,xr=Mu(x.firstChild),Es=!1,E=!0):E=!1),E||La(c)),Mt(c),E=c.type,U=c.pendingProps,W=o!==null?o.memoizedProps:null,x=U.children,Uv(E,U)?x=null:W!==null&&Uv(E,W)&&(c.flags|=32),c.memoizedState!==null&&(E=fu(o,c,Am,null,null,m),Ep._currentValue=E),hn(o,c),Yi(o,c,x,m),c.child;case 6:return o===null&&ai&&((o=m=xr)&&(m=Lv(m,c.pendingProps,Es),m!==null?(c.stateNode=m,Qr=c,xr=null,o=!0):o=!1),o||La(c)),null;case 13:return kf(o,c,m);case 4:return Le(c,c.stateNode.containerInfo),x=c.pendingProps,o===null?c.child=Wu(c,null,x,m):Yi(o,c,x,m),c.child;case 11:return Ws(o,c,c.type,c.pendingProps,m);case 7:return Yi(o,c,c.pendingProps,m),c.child;case 8:return Yi(o,c,c.pendingProps.children,m),c.child;case 12:return Yi(o,c,c.pendingProps.children,m),c.child;case 10:return x=c.pendingProps,Pa(c,c.type,x.value),Yi(o,c,x.children,m),c.child;case 9:return E=c.type._context,x=c.pendingProps.children,Ml(c),E=Ji(E),x=x(E),c.flags|=1,Yi(o,c,x,m),c.child;case 14:return Ys(o,c,c.type,c.pendingProps,m);case 15:return rd(o,c,c.type,c.pendingProps,m);case 19:return go(o,c,m);case 31:return x=c.pendingProps,m=c.mode,x={mode:x.mode,children:x.children},o===null?(m=ju(x,m),m.ref=c.ref,c.child=m,m.return=c,c=m):(m=nr(o.child,x),m.ref=c.ref,c.child=m,m.return=c,c=m),c;case 22:return Bl(o,c,m);case 24:return Ml(c),x=Ji(Zi),o===null?(E=Aa(),E===null&&(E=Gn,U=jd(),E.pooledCache=U,U.refCount++,U!==null&&(E.pooledCacheLanes|=m),E=U),c.memoizedState={parent:x,cache:E},Lc(c),Pa(c,Zi,E)):((o.lanes&m)!==0&&(bn(o,c),Cs(c,null,null,m),Vo()),E=o.memoizedState,U=c.memoizedState,E.parent!==x?(E={parent:x,cache:x},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),Pa(c,Zi,x)):(x=U.cache,Pa(c,Zi,x),x!==E.cache&&Yn(c,[Zi],m,!0))),Yi(o,c,c.pendingProps.children,m),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function jo(o){o.flags|=4}function Vc(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!Us(c)){if(c=Qi.current,c!==null&&((yn&4194048)===yn?Xs!==null:(yn&62914560)!==yn&&(yn&536870912)===0||c!==Xs))throw Ia=Vh,vm;o.flags|=8192}}function gu(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?De():536870912,o.lanes|=c,Ei|=c)}function kc(o,c){if(!ai)switch(o.tailMode){case"hidden":c=o.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function Vi(o){var c=o.alternate!==null&&o.alternate.child===o.child,m=0,x=0;if(c)for(var E=o.child;E!==null;)m|=E.lanes|E.childLanes,x|=E.subtreeFlags&65011712,x|=E.flags&65011712,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)m|=E.lanes|E.childLanes,x|=E.subtreeFlags,x|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=x,o.childLanes=m,c}function dp(o,c,m){var x=c.pendingProps;switch(Nh(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vi(c),null;case 1:return Vi(c),null;case 3:return m=c.stateNode,x=null,o!==null&&(x=o.memoizedState.cache),c.memoizedState.cache!==x&&(c.flags|=2048),oo(Zi),gt(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Go(c)?jo(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Hi())),Vi(c),null;case 26:return m=c.memoizedState,o===null?(jo(c),m!==null?(Vi(c),Vc(c,m)):(Vi(c),c.flags&=-16777217)):m?m!==o.memoizedState?(jo(c),Vi(c),Vc(c,m)):(Vi(c),c.flags&=-16777217):(o.memoizedProps!==x&&jo(c),Vi(c),c.flags&=-16777217),null;case 27:At(c),m=Se.current;var E=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==x&&jo(c);else{if(!x){if(c.stateNode===null)throw Error(i(166));return Vi(c),null}o=oe.current,Go(c)?av(c):(o=lx(E,x,m),c.stateNode=o,jo(c))}return Vi(c),null;case 5:if(At(c),m=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==x&&jo(c);else{if(!x){if(c.stateNode===null)throw Error(i(166));return Vi(c),null}if(o=oe.current,Go(c))av(c);else{switch(E=cd(Se.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof x.is=="string"?E.createElement("select",{is:x.is}):E.createElement("select"),x.multiple?o.multiple=!0:x.size&&(o.size=x.size);break;default:o=typeof x.is=="string"?E.createElement(m,{is:x.is}):E.createElement(m)}}o[Ln]=c,o[Ai]=x;e:for(E=c.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===c)break e;for(;E.sibling===null;){if(E.return===null||E.return===c)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}c.stateNode=o;e:switch(Bs(o,m,x),m){case"button":case"input":case"select":case"textarea":o=!!x.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&jo(c)}}return Vi(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==x&&jo(c);else{if(typeof x!="string"&&c.stateNode===null)throw Error(i(166));if(o=Se.current,Go(c)){if(o=c.stateNode,m=c.memoizedProps,x=null,E=Qr,E!==null)switch(E.tag){case 27:case 5:x=E.memoizedProps}o[Ln]=c,o=!!(o.nodeValue===m||x!==null&&x.suppressHydrationWarning===!0||nx(o.nodeValue,m)),o||La(c)}else o=cd(o).createTextNode(x),o[Ln]=c,c.stateNode=o}return Vi(c),null;case 13:if(x=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=Go(c),x!==null&&x.dehydrated!==null){if(o===null){if(!E)throw Error(i(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[Ln]=c}else Df(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Vi(c),E=!1}else E=Hi(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=E),E=!0;if(!E)return c.flags&256?(Xo(c),c):(Xo(c),null)}if(Xo(c),(c.flags&128)!==0)return c.lanes=m,c;if(m=x!==null,o=o!==null&&o.memoizedState!==null,m){x=c.child,E=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(E=x.alternate.memoizedState.cachePool.pool);var U=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(U=x.memoizedState.cachePool.pool),U!==E&&(x.flags|=2048)}return m!==o&&m&&(c.child.flags|=8192),gu(c,c.updateQueue),Vi(c),null;case 4:return gt(),o===null&&xy(c.stateNode.containerInfo),Vi(c),null;case 10:return oo(c.type),Vi(c),null;case 19:if(ce(Cr),E=c.memoizedState,E===null)return Vi(c),null;if(x=(c.flags&128)!==0,U=E.rendering,U===null)if(x)kc(E,!1);else{if(Ar!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(U=Rl(o),U!==null){for(c.flags|=128,kc(E,!1),o=U.updateQueue,c.updateQueue=o,gu(c,o),c.subtreeFlags=0,o=m,m=c.child;m!==null;)Rf(m,o),m=m.sibling;return ge(Cr,Cr.current&1|2),c.child}o=o.sibling}E.tail!==null&&Ke()>ys&&(c.flags|=128,x=!0,kc(E,!1),c.lanes=4194304)}else{if(!x)if(o=Rl(U),o!==null){if(c.flags|=128,x=!0,o=o.updateQueue,c.updateQueue=o,gu(c,o),kc(E,!0),E.tail===null&&E.tailMode==="hidden"&&!U.alternate&&!ai)return Vi(c),null}else 2*Ke()-E.renderingStartTime>ys&&m!==536870912&&(c.flags|=128,x=!0,kc(E,!1),c.lanes=4194304);E.isBackwards?(U.sibling=c.child,c.child=U):(o=E.last,o!==null?o.sibling=U:c.child=U,E.last=U)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=Ke(),c.sibling=null,o=Cr.current,ge(Cr,x?o&1|2:o&1),c):(Vi(c),null);case 22:case 23:return Xo(c),Wh(),x=c.memoizedState!==null,o!==null?o.memoizedState!==null!==x&&(c.flags|=8192):x&&(c.flags|=8192),x?(m&536870912)!==0&&(c.flags&128)===0&&(Vi(c),c.subtreeFlags&6&&(c.flags|=8192)):Vi(c),m=c.updateQueue,m!==null&&gu(c,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),x=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(x=c.memoizedState.cachePool.pool),x!==m&&(c.flags|=2048),o!==null&&ce(uo),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),oo(Zi),Vi(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function Xc(o,c){switch(Nh(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return oo(Zi),gt(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return At(c),null;case 13:if(Xo(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(i(340));Df()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return ce(Cr),null;case 4:return gt(),null;case 10:return oo(c.type),null;case 22:case 23:return Xo(c),Wh(),o!==null&&ce(uo),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return oo(Zi),null;case 25:return null;default:return null}}function Xf(o,c){switch(Nh(c),c.tag){case 3:oo(Zi),gt();break;case 26:case 27:case 5:At(c);break;case 4:gt();break;case 13:Xo(c);break;case 19:ce(Cr);break;case 10:oo(c.type);break;case 22:case 23:Xo(c),Wh(),o!==null&&ce(uo);break;case 24:oo(Zi)}}function Wc(o,c){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&o)===o){x=void 0;var U=m.create,W=m.inst;x=U(),W.destroy=x}m=m.next}while(m!==E)}}catch(ae){Oe(c,c.return,ae)}}function Ha(o,c,m){try{var x=c.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var U=E.next;x=U;do{if((x.tag&o)===o){var W=x.inst,ae=W.destroy;if(ae!==void 0){W.destroy=void 0,E=c;var Te=m,Je=ae;try{Je()}catch(bt){Oe(E,Te,bt)}}}x=x.next}while(x!==U)}}catch(bt){Oe(c,c.return,bt)}}function Yc(o){var c=o.updateQueue;if(c!==null){var m=o.stateNode;try{_m(c,m)}catch(x){Oe(o,o.return,x)}}}function Ol(o,c,m){m.props=Yo(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(x){Oe(o,c,x)}}function qu(o,c){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var x=o.stateNode;break;case 30:x=o.stateNode;break;default:x=o.stateNode}typeof m=="function"?o.refCleanup=m(x):m.current=x}}catch(E){Oe(o,c,E)}}function Ll(o,c){var m=o.ref,x=o.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(E){Oe(o,c,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){Oe(o,c,E)}else m.current=null}function Ku(o){var c=o.type,m=o.memoizedProps,x=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":m.autoFocus&&x.focus();break e;case"img":m.src?x.src=m.src:m.srcSet&&(x.srcset=m.srcSet)}}catch(E){Oe(o,o.return,E)}}function Wf(o,c,m){try{var x=o.stateNode;dM(x,o.type,m,c),x[Ai]=c}catch(E){Oe(o,o.return,E)}}function vu(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Hl(o.type)||o.tag===4}function Pl(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||vu(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Hl(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function yu(o,c,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,c):(c=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,c.appendChild(o),m=m._reactRootContainer,m!=null||c.onclick!==null||(c.onclick=Dv));else if(x!==4&&(x===27&&Hl(o.type)&&(m=o.stateNode,c=null),o=o.child,o!==null))for(yu(o,c,m),o=o.sibling;o!==null;)yu(o,c,m),o=o.sibling}function _u(o,c,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,c?m.insertBefore(o,c):m.appendChild(o);else if(x!==4&&(x===27&&Hl(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(_u(o,c,m),o=o.sibling;o!==null;)_u(o,c,m),o=o.sibling}function qo(o){var c=o.stateNode,m=o.memoizedProps;try{for(var x=o.type,E=c.attributes;E.length;)c.removeAttributeNode(E[0]);Bs(c,x,m),c[Ln]=o,c[Ai]=m}catch(U){Oe(o,o.return,U)}}var Ko=!1,mi=!1,vo=!1,za=typeof WeakSet=="function"?WeakSet:Set,$i=null;function es(o,c){if(o=o.containerInfo,bu=Fv,o=fm(o),Bh(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var E=x.anchorOffset,U=x.focusNode;x=x.focusOffset;try{m.nodeType,U.nodeType}catch{m=null;break e}var W=0,ae=-1,Te=-1,Je=0,bt=0,Ut=o,nt=null;t:for(;;){for(var Ze;Ut!==m||E!==0&&Ut.nodeType!==3||(ae=W+E),Ut!==U||x!==0&&Ut.nodeType!==3||(Te=W+x),Ut.nodeType===3&&(W+=Ut.nodeValue.length),(Ze=Ut.firstChild)!==null;)nt=Ut,Ut=Ze;for(;;){if(Ut===o)break t;if(nt===m&&++Je===E&&(ae=W),nt===U&&++bt===x&&(Te=W),(Ze=Ut.nextSibling)!==null)break;Ut=nt,nt=Ut.parentNode}Ut=Ze}m=ae===-1||Te===-1?null:{start:ae,end:Te}}else m=null}m=m||{start:0,end:0}}else m=null;for(Bv={focusedElem:o,selectionRange:m},Fv=!1,$i=c;$i!==null;)if(c=$i,o=c.child,(c.subtreeFlags&1024)!==0&&o!==null)o.return=c,$i=o;else for(;$i!==null;){switch(c=$i,U=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&U!==null){o=void 0,m=c,E=U.memoizedProps,U=U.memoizedState,x=m.stateNode;try{var Cn=Yo(m.type,E,m.elementType===m.type);o=x.getSnapshotBeforeUpdate(Cn,U),x.__reactInternalSnapshotBeforeUpdate=o}catch(En){Oe(m,m.return,En)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,m=o.nodeType,m===9)by(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":by(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=c.sibling,o!==null){o.return=c.return,$i=o;break}$i=c.return}}function xu(o,c,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:aa(o,m),x&4&&Wc(5,m);break;case 1:if(aa(o,m),x&4)if(o=m.stateNode,c===null)try{o.componentDidMount()}catch(W){Oe(m,m.return,W)}else{var E=Yo(m.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(E,c,o.__reactInternalSnapshotBeforeUpdate)}catch(W){Oe(m,m.return,W)}}x&64&&Yc(m),x&512&&qu(m,m.return);break;case 3:if(aa(o,m),x&64&&(o=m.updateQueue,o!==null)){if(c=null,m.child!==null)switch(m.child.tag){case 27:case 5:c=m.child.stateNode;break;case 1:c=m.child.stateNode}try{_m(o,c)}catch(W){Oe(m,m.return,W)}}break;case 27:c===null&&x&4&&qo(m);case 26:case 5:aa(o,m),c===null&&x&4&&Ku(m),x&512&&qu(m,m.return);break;case 12:aa(o,m);break;case 13:aa(o,m),x&4&&Ju(o,m),x&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=tr.bind(null,m),Ap(o,m))));break;case 22:if(x=m.memoizedState!==null||Ko,!x){c=c!==null&&c.memoizedState!==null||mi,E=Ko;var U=mi;Ko=x,(mi=c)&&!U?Jo(o,m,(m.subtreeFlags&8772)!==0):aa(o,m),Ko=E,mi=U}break;case 30:break;default:aa(o,m)}}function qn(o){var c=o.alternate;c!==null&&(o.alternate=null,qn(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&ni(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Sn=null,Ti=!1;function yo(o,c,m){for(m=m.child;m!==null;)jc(o,c,m),m=m.sibling}function jc(o,c,m){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Ye,m)}catch{}switch(m.tag){case 26:mi||Ll(m,c),yo(o,c,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:mi||Ll(m,c);var x=Sn,E=Ti;Hl(m.type)&&(Sn=m.stateNode,Ti=!1),yo(o,c,m),Wm(m.stateNode),Sn=x,Ti=E;break;case 5:mi||Ll(m,c);case 6:if(x=Sn,E=Ti,Sn=null,yo(o,c,m),Sn=x,Ti=E,Sn!==null)if(Ti)try{(Sn.nodeType===9?Sn.body:Sn.nodeName==="HTML"?Sn.ownerDocument.body:Sn).removeChild(m.stateNode)}catch(U){Oe(m,c,U)}else try{Sn.removeChild(m.stateNode)}catch(U){Oe(m,c,U)}break;case 18:Sn!==null&&(Ti?(o=Sn,Ov(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),$m(o)):Ov(Sn,m.stateNode));break;case 4:x=Sn,E=Ti,Sn=m.stateNode.containerInfo,Ti=!0,yo(o,c,m),Sn=x,Ti=E;break;case 0:case 11:case 14:case 15:mi||Ha(2,m,c),mi||Ha(4,m,c),yo(o,c,m);break;case 1:mi||(Ll(m,c),x=m.stateNode,typeof x.componentWillUnmount=="function"&&Ol(m,c,x)),yo(o,c,m);break;case 21:yo(o,c,m);break;case 22:mi=(x=mi)||m.memoizedState!==null,yo(o,c,m),mi=x;break;default:yo(o,c,m)}}function Ju(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{$m(o)}catch(m){Oe(c,c.return,m)}}function pp(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new za),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new za),c;default:throw Error(i(435,o.tag))}}function qc(o,c){var m=pp(o);c.forEach(function(x){var E=Dn.bind(null,o,x);m.has(x)||(m.add(x),x.then(E,E))})}function vs(o,c){var m=c.deletions;if(m!==null)for(var x=0;x<m.length;x++){var E=m[x],U=o,W=c,ae=W;e:for(;ae!==null;){switch(ae.tag){case 27:if(Hl(ae.type)){Sn=ae.stateNode,Ti=!1;break e}break;case 5:Sn=ae.stateNode,Ti=!1;break e;case 3:case 4:Sn=ae.stateNode.containerInfo,Ti=!0;break e}ae=ae.return}if(Sn===null)throw Error(i(160));jc(U,W,E),Sn=null,Ti=!1,U=E.alternate,U!==null&&(U.return=null),E.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)sd(c,o),c=c.sibling}var _o=null;function sd(o,c){var m=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:vs(c,o),Dr(o),x&4&&(Ha(3,o,o.return),Wc(3,o),Ha(5,o,o.return));break;case 1:vs(c,o),Dr(o),x&512&&(mi||m===null||Ll(m,m.return)),x&64&&Ko&&(o=o.updateQueue,o!==null&&(x=o.callbacks,x!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:var E=_o;if(vs(c,o),Dr(o),x&512&&(mi||m===null||Ll(m,m.return)),x&4){var U=m!==null?m.memoizedState:null;if(x=o.memoizedState,m===null)if(x===null)if(o.stateNode===null){e:{x=o.type,m=o.memoizedProps,E=E.ownerDocument||E;t:switch(x){case"title":U=E.getElementsByTagName("title")[0],(!U||U[Gi]||U[Ln]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=E.createElement(x),E.head.insertBefore(U,E.querySelector("head > title"))),Bs(U,x,m),U[Ln]=o,et(U),x=U;break e;case"link":var W=px("link","href",E).get(x+(m.href||""));if(W){for(var ae=0;ae<W.length;ae++)if(U=W[ae],U.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&U.getAttribute("rel")===(m.rel==null?null:m.rel)&&U.getAttribute("title")===(m.title==null?null:m.title)&&U.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){W.splice(ae,1);break t}}U=E.createElement(x),Bs(U,x,m),E.head.appendChild(U);break;case"meta":if(W=px("meta","content",E).get(x+(m.content||""))){for(ae=0;ae<W.length;ae++)if(U=W[ae],U.getAttribute("content")===(m.content==null?null:""+m.content)&&U.getAttribute("name")===(m.name==null?null:m.name)&&U.getAttribute("property")===(m.property==null?null:m.property)&&U.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&U.getAttribute("charset")===(m.charSet==null?null:m.charSet)){W.splice(ae,1);break t}}U=E.createElement(x),Bs(U,x,m),E.head.appendChild(U);break;default:throw Error(i(468,x))}U[Ln]=o,et(U),x=U}o.stateNode=x}else mx(E,o.type,o.stateNode);else o.stateNode=dx(E,x,o.memoizedProps);else U!==x?(U===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):U.count--,x===null?mx(E,o.type,o.stateNode):dx(E,x,o.memoizedProps)):x===null&&o.stateNode!==null&&Wf(o,o.memoizedProps,m.memoizedProps)}break;case 27:vs(c,o),Dr(o),x&512&&(mi||m===null||Ll(m,m.return)),m!==null&&x&4&&Wf(o,o.memoizedProps,m.memoizedProps);break;case 5:if(vs(c,o),Dr(o),x&512&&(mi||m===null||Ll(m,m.return)),o.flags&32){E=o.stateNode;try{Or(E,"")}catch(Ze){Oe(o,o.return,Ze)}}x&4&&o.stateNode!=null&&(E=o.memoizedProps,Wf(o,E,m!==null?m.memoizedProps:E)),x&1024&&(vo=!0);break;case 6:if(vs(c,o),Dr(o),x&4){if(o.stateNode===null)throw Error(i(162));x=o.memoizedProps,m=o.stateNode;try{m.nodeValue=x}catch(Ze){Oe(o,o.return,Ze)}}break;case 3:if(Tp=null,E=_o,_o=kn(c.containerInfo),vs(c,o),_o=E,Dr(o),x&4&&m!==null&&m.memoizedState.isDehydrated)try{$m(c.containerInfo)}catch(Ze){Oe(o,o.return,Ze)}vo&&(vo=!1,Zu(o));break;case 4:x=_o,_o=kn(o.stateNode.containerInfo),vs(c,o),Dr(o),_o=x;break;case 12:vs(c,o),Dr(o);break;case 13:vs(c,o),Dr(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(er=Ke()),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,qc(o,x)));break;case 22:E=o.memoizedState!==null;var Te=m!==null&&m.memoizedState!==null,Je=Ko,bt=mi;if(Ko=Je||E,mi=bt||Te,vs(c,o),mi=bt,Ko=Je,Dr(o),x&8192)e:for(c=o.stateNode,c._visibility=E?c._visibility&-2:c._visibility|1,E&&(m===null||Te||Ko||mi||Va(o)),m=null,c=o;;){if(c.tag===5||c.tag===26){if(m===null){Te=m=c;try{if(U=Te.stateNode,E)W=U.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none";else{ae=Te.stateNode;var Ut=Te.memoizedProps.style,nt=Ut!=null&&Ut.hasOwnProperty("display")?Ut.display:null;ae.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(Ze){Oe(Te,Te.return,Ze)}}}else if(c.tag===6){if(m===null){Te=c;try{Te.stateNode.nodeValue=E?"":Te.memoizedProps}catch(Ze){Oe(Te,Te.return,Ze)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;m===c&&(m=null),c=c.return}m===c&&(m=null),c.sibling.return=c.return,c=c.sibling}x&4&&(x=o.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,qc(o,m))));break;case 19:vs(c,o),Dr(o),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,qc(o,x)));break;case 30:break;case 21:break;default:vs(c,o),Dr(o)}}function Dr(o){var c=o.flags;if(c&2){try{for(var m,x=o.return;x!==null;){if(vu(x)){m=x;break}x=x.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var E=m.stateNode,U=Pl(o);_u(o,U,E);break;case 5:var W=m.stateNode;m.flags&32&&(Or(W,""),m.flags&=-33);var ae=Pl(o);_u(o,ae,W);break;case 3:case 4:var Te=m.stateNode.containerInfo,Je=Pl(o);yu(o,Je,Te);break;default:throw Error(i(161))}}catch(bt){Oe(o,o.return,bt)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function Zu(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;Zu(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function aa(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)xu(o,c.alternate,c),c=c.sibling}function Va(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:Ha(4,c,c.return),Va(c);break;case 1:Ll(c,c.return);var m=c.stateNode;typeof m.componentWillUnmount=="function"&&Ol(c,c.return,m),Va(c);break;case 27:Wm(c.stateNode);case 26:case 5:Ll(c,c.return),Va(c);break;case 22:c.memoizedState===null&&Va(c);break;case 30:Va(c);break;default:Va(c)}o=o.sibling}}function Jo(o,c,m){for(m=m&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var x=c.alternate,E=o,U=c,W=U.flags;switch(U.tag){case 0:case 11:case 15:Jo(E,U,m),Wc(4,U);break;case 1:if(Jo(E,U,m),x=U,E=x.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Je){Oe(x,x.return,Je)}if(x=U,E=x.updateQueue,E!==null){var ae=x.stateNode;try{var Te=E.shared.hiddenCallbacks;if(Te!==null)for(E.shared.hiddenCallbacks=null,E=0;E<Te.length;E++)Lf(Te[E],ae)}catch(Je){Oe(x,x.return,Je)}}m&&W&64&&Yc(U),qu(U,U.return);break;case 27:qo(U);case 26:case 5:Jo(E,U,m),m&&x===null&&W&4&&Ku(U),qu(U,U.return);break;case 12:Jo(E,U,m);break;case 13:Jo(E,U,m),m&&W&4&&Ju(E,U);break;case 22:U.memoizedState===null&&Jo(E,U,m),qu(U,U.return);break;case 30:break;default:Jo(E,U,m)}c=c.sibling}}function mp(o,c){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&Bf(m))}function gp(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Bf(o))}function ir(o,c,m,x){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)vp(o,c,m,x),c=c.sibling}function vp(o,c,m,x){var E=c.flags;switch(c.tag){case 0:case 11:case 15:ir(o,c,m,x),E&2048&&Wc(9,c);break;case 1:ir(o,c,m,x);break;case 3:ir(o,c,m,x),E&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Bf(o)));break;case 12:if(E&2048){ir(o,c,m,x),o=c.stateNode;try{var U=c.memoizedProps,W=U.id,ae=U.onPostCommit;typeof ae=="function"&&ae(W,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Te){Oe(c,c.return,Te)}}else ir(o,c,m,x);break;case 13:ir(o,c,m,x);break;case 23:break;case 22:U=c.stateNode,W=c.alternate,c.memoizedState!==null?U._visibility&2?ir(o,c,m,x):Zo(o,c):U._visibility&2?ir(o,c,m,x):(U._visibility|=2,Au(o,c,m,x,(c.subtreeFlags&10256)!==0)),E&2048&&mp(W,c);break;case 24:ir(o,c,m,x),E&2048&&gp(c.alternate,c);break;default:ir(o,c,m,x)}}function Au(o,c,m,x,E){for(E=E&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var U=o,W=c,ae=m,Te=x,Je=W.flags;switch(W.tag){case 0:case 11:case 15:Au(U,W,ae,Te,E),Wc(8,W);break;case 23:break;case 22:var bt=W.stateNode;W.memoizedState!==null?bt._visibility&2?Au(U,W,ae,Te,E):Zo(U,W):(bt._visibility|=2,Au(U,W,ae,Te,E)),E&&Je&2048&&mp(W.alternate,W);break;case 24:Au(U,W,ae,Te,E),E&&Je&2048&&gp(W.alternate,W);break;default:Au(U,W,ae,Te,E)}c=c.sibling}}function Zo(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var m=o,x=c,E=x.flags;switch(x.tag){case 22:Zo(m,x),E&2048&&mp(x.alternate,x);break;case 24:Zo(m,x),E&2048&&gp(x.alternate,x);break;default:Zo(m,x)}c=c.sibling}}var wr=8192;function Yf(o){if(o.subtreeFlags&wr)for(o=o.child;o!==null;)Tv(o),o=o.sibling}function Tv(o){switch(o.tag){case 26:Yf(o),o.flags&wr&&o.memoizedState!==null&&TM(_o,o.memoizedState,o.memoizedProps);break;case 5:Yf(o);break;case 3:case 4:var c=_o;_o=kn(o.stateNode.containerInfo),Yf(o),_o=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=wr,wr=16777216,Yf(o),wr=c):Yf(o));break;default:Yf(o)}}function Ev(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function rr(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var x=c[m];$i=x,Il(x,o)}Ev(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Hm(o),o=o.sibling}function Hm(o){switch(o.tag){case 0:case 11:case 15:rr(o),o.flags&2048&&Ha(9,o,o.return);break;case 3:rr(o);break;case 12:rr(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&2&&(o.return===null||o.return.tag!==13)?(c._visibility&=-3,Nl(o)):rr(o);break;default:rr(o)}}function Nl(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var m=0;m<c.length;m++){var x=c[m];$i=x,Il(x,o)}Ev(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:Ha(8,c,c.return),Nl(c);break;case 22:m=c.stateNode,m._visibility&2&&(m._visibility&=-3,Nl(c));break;default:Nl(c)}o=o.sibling}}function Il(o,c){for(;$i!==null;){var m=$i;switch(m.tag){case 0:case 11:case 15:Ha(8,m,c);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:Bf(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,$i=x;else e:for(m=o;$i!==null;){x=$i;var E=x.sibling,U=x.return;if(qn(x),x===m){$i=null;break e}if(E!==null){E.return=U,$i=E;break e}$i=U}}}var Lr={getCacheForType:function(o){var c=Ji(Zi),m=c.data.get(o);return m===void 0&&(m=o(),c.data.set(o,m)),m}},ad=typeof WeakMap=="function"?WeakMap:Map,ki=0,Gn=null,ii=null,yn=0,Xn=0,Br=null,ka=!1,jf=!1,qf=!1,xo=0,Ar=0,Qo=0,Fl=0,Kc=0,Ao=0,Ei=0,Xi=null,Mn=null,ci=!1,er=0,ys=1/0,Xa=null,Wa=null,ts=0,js=null,sr=null,Ya=0,Su=0,od=null,ja=null,$o=0,Jc=null;function Sr(){if((ki&2)!==0&&yn!==0)return yn&-yn;if(k.T!==null){var o=zn;return o!==0?o:wv()}return nn()}function yp(){Ao===0&&(Ao=(yn&536870912)===0||ai?Ae():536870912);var o=Qi.current;return o!==null&&(o.flags|=32),Ao}function oa(o,c,m){(o===Gn&&(Xn===2||Xn===9)||o.cancelPendingCommit!==null)&&($u(o,0),el(o,yn,Ao,!1)),dt(o,m),((ki&2)===0||o!==Gn)&&(o===Gn&&((ki&2)===0&&(Fl|=m),Ar===4&&el(o,yn,Ao,!1)),nc(o))}function Kf(o,c,m){if((ki&6)!==0)throw Error(i(327));var x=!m&&(c&124)===0&&(c&o.expiredLanes)===0||We(o,c),E=x?w(o,c):p(o,c,!0),U=x;do{if(E===0){jf&&!x&&el(o,c,0,!1);break}else{if(m=o.current.alternate,U&&!Qu(m)){E=p(o,c,!1),U=!1;continue}if(E===2){if(U=c,o.errorRecoveryDisabledLanes&U)var W=0;else W=o.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){c=W;e:{var ae=o;E=Xi;var Te=ae.current.memoizedState.isDehydrated;if(Te&&($u(ae,W).flags|=256),W=p(ae,W,!1),W!==2){if(qf&&!Te){ae.errorRecoveryDisabledLanes|=U,Fl|=U,E=4;break e}U=Mn,Mn=E,U!==null&&(Mn===null?Mn=U:Mn.push.apply(Mn,U))}E=W}if(U=!1,E!==2)continue}}if(E===1){$u(o,0),el(o,c,0,!0);break}e:{switch(x=o,U=E,U){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:el(x,c,Ao,!ka);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(E=er+300-Ke(),10<E)){if(el(x,c,Ao,!ka),xe(x,0,!0)!==0)break e;x.timeoutHandle=ix(ld.bind(null,x,m,Mn,Xa,ci,c,Ao,Fl,Ei,ka,U,2,-0,0),E);break e}ld(x,m,Mn,Xa,ci,c,Ao,Fl,Ei,ka,U,0,-0,0)}}break}while(!0);nc(o)}function ld(o,c,m,x,E,U,W,ae,Te,Je,bt,Ut,nt,Ze){if(o.timeoutHandle=-1,Ut=c.subtreeFlags,(Ut&8192||(Ut&16785408)===16785408)&&(qs={stylesheets:null,count:0,unsuspend:MM},Tv(c),Ut=EM(),Ut!==null)){o.cancelPendingCommit=Ut(Ht.bind(null,o,c,U,m,x,E,W,ae,Te,bt,1,nt,Ze)),el(o,U,W,!Je);return}Ht(o,c,U,m,x,E,W,ae,Te)}function Qu(o){for(var c=o;;){var m=c.tag;if((m===0||m===11||m===15)&&c.flags&16384&&(m=c.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var E=m[x],U=E.getSnapshot;E=E.value;try{if(!ya(U(),E))return!1}catch{return!1}}if(m=c.child,c.subtreeFlags&16384&&m!==null)m.return=c,c=m;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function el(o,c,m,x){c&=~Kc,c&=~Fl,o.suspendedLanes|=c,o.pingedLanes&=~c,x&&(o.warmLanes|=c),x=o.expirationTimes;for(var E=c;0<E;){var U=31-yt(E),W=1<<U;x[U]=-1,E&=~W}m!==0&&Tt(o,m,c)}function Gl(){return(ki&6)===0?(zm(0),!1):!0}function Zc(){if(ii!==null){if(Xn===0)var o=ii.return;else o=ii,re=lu=null,Qd(o),jr=null,Ea=0,o=ii;for(;o!==null;)Xf(o.alternate,o),o=o.return;ii=null}}function $u(o,c){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,mM(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),Zc(),Gn=o,ii=m=nr(o.current,null),yn=c,Xn=0,Br=null,ka=!1,jf=We(o,c),qf=!1,Ei=Ao=Kc=Fl=Qo=Ar=0,Mn=Xi=null,ci=!1,(c&8)!==0&&(c|=c&32);var x=o.entangledLanes;if(x!==0)for(o=o.entanglements,x&=c;0<x;){var E=31-yt(x),U=1<<E;c|=o[E],x&=~U}return xo=c,Fu(),m}function _p(o,c){Vn=null,k.H=Gf,c===na||c===Ho?(c=ym(),Xn=3):c===vm?(c=ym(),Xn=4):Xn=c===Mv?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Br=c,ii===null&&(Ar=1,nd(o,Wr(c,o.current)))}function Jf(){var o=k.H;return k.H=Gf,o===null?Gf:o}function xp(){var o=k.A;return k.A=Lr,o}function h(){Ar=4,ka||(yn&4194048)!==yn&&Qi.current!==null||(jf=!0),(Qo&134217727)===0&&(Fl&134217727)===0||Gn===null||el(Gn,yn,Ao,!1)}function p(o,c,m){var x=ki;ki|=2;var E=Jf(),U=xp();(Gn!==o||yn!==c)&&(Xa=null,$u(o,c)),c=!1;var W=Ar;e:do try{if(Xn!==0&&ii!==null){var ae=ii,Te=Br;switch(Xn){case 8:Zc(),W=6;break e;case 3:case 2:case 9:case 6:Qi.current===null&&(c=!0);var Je=Xn;if(Xn=0,Br=null,Ee(o,ae,Te,Je),m&&jf){W=0;break e}break;default:Je=Xn,Xn=0,Br=null,Ee(o,ae,Te,Je)}}S(),W=Ar;break}catch(bt){_p(o,bt)}while(!0);return c&&o.shellSuspendCounter++,re=lu=null,ki=x,k.H=E,k.A=U,ii===null&&(Gn=null,yn=0,Fu()),W}function S(){for(;ii!==null;)z(ii)}function w(o,c){var m=ki;ki|=2;var x=Jf(),E=xp();Gn!==o||yn!==c?(Xa=null,ys=Ke()+500,$u(o,c)):jf=We(o,c);e:do try{if(Xn!==0&&ii!==null){c=ii;var U=Br;t:switch(Xn){case 1:Xn=0,Br=null,Ee(o,c,U,1);break;case 2:case 9:if(Jd(U)){Xn=0,Br=null,ue(c);break}c=function(){Xn!==2&&Xn!==9||Gn!==o||(Xn=7),nc(o)},U.then(c,c);break e;case 3:Xn=7;break e;case 4:Xn=5;break e;case 7:Jd(U)?(Xn=0,Br=null,ue(c)):(Xn=0,Br=null,Ee(o,c,U,7));break;case 5:var W=null;switch(ii.tag){case 26:W=ii.memoizedState;case 5:case 27:var ae=ii;if(!W||Us(W)){Xn=0,Br=null;var Te=ae.sibling;if(Te!==null)ii=Te;else{var Je=ae.return;Je!==null?(ii=Je,ke(Je)):ii=null}break t}}Xn=0,Br=null,Ee(o,c,U,5);break;case 6:Xn=0,Br=null,Ee(o,c,U,6);break;case 8:Zc(),Ar=6;break e;default:throw Error(i(462))}}L();break}catch(bt){_p(o,bt)}while(!0);return re=lu=null,k.H=x,k.A=E,ki=m,ii!==null?0:(Gn=null,yn=0,Fu(),Ar)}function L(){for(;ii!==null&&!ut();)z(ii)}function z(o){var c=mu(o.alternate,o,xo);o.memoizedProps=o.pendingProps,c===null?ke(o):ii=c}function ue(o){var c=o,m=c.alternate;switch(c.tag){case 15:case 0:c=sa(m,c,c.pendingProps,c.type,void 0,yn);break;case 11:c=sa(m,c,c.pendingProps,c.type.render,c.ref,yn);break;case 5:Qd(c);default:Xf(m,c),c=ii=Rf(c,xo),c=mu(m,c,xo)}o.memoizedProps=o.pendingProps,c===null?ke(o):ii=c}function Ee(o,c,m,x){re=lu=null,Qd(c),jr=null,Ea=0;var E=c.return;try{if(bv(o,E,c,m,yn)){Ar=1,nd(o,Wr(m,o.current)),ii=null;return}}catch(U){if(E!==null)throw ii=E,U;Ar=1,nd(o,Wr(m,o.current)),ii=null;return}c.flags&32768?(ai||x===1?o=!0:jf||(yn&536870912)!==0?o=!1:(ka=o=!0,(x===2||x===9||x===3||x===6)&&(x=Qi.current,x!==null&&x.tag===13&&(x.flags|=16384))),St(c,o)):ke(c)}function ke(o){var c=o;do{if((c.flags&32768)!==0){St(c,ka);return}o=c.return;var m=dp(c.alternate,c,xo);if(m!==null){ii=m;return}if(c=c.sibling,c!==null){ii=c;return}ii=c=o}while(c!==null);Ar===0&&(Ar=5)}function St(o,c){do{var m=Xc(o.alternate,o);if(m!==null){m.flags&=32767,ii=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!c&&(o=o.sibling,o!==null)){ii=o;return}ii=o=m}while(o!==null);Ar=6,ii=null}function Ht(o,c,m,x,E,U,W,ae,Te){o.cancelPendingCommit=null;do ec();while(ts!==0);if((ki&6)!==0)throw Error(i(327));if(c!==null){if(c===o.current)throw Error(i(177));if(U=c.lanes|c.childLanes,U|=Wd,Pt(o,m,U,W,ae,Te),o===Gn&&(ii=Gn=null,yn=0),sr=c,js=o,Ya=m,Su=U,od=E,ja=x,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,Ci(j,function(){return tc(),null})):(o.callbackNode=null,o.callbackPriority=0),x=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||x){x=k.T,k.T=null,E=ee.p,ee.p=2,W=ki,ki|=4;try{es(o,c,m)}finally{ki=W,ee.p=E,k.T=x}}ts=1,Zt(),en(),Hn()}}function Zt(){if(ts===1){ts=0;var o=js,c=sr,m=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||m){m=k.T,k.T=null;var x=ee.p;ee.p=2;var E=ki;ki|=4;try{sd(c,o);var U=Bv,W=fm(o.containerInfo),ae=U.focusedElem,Te=U.selectionRange;if(W!==ae&&ae&&ae.ownerDocument&&cm(ae.ownerDocument.documentElement,ae)){if(Te!==null&&Bh(ae)){var Je=Te.start,bt=Te.end;if(bt===void 0&&(bt=Je),"selectionStart"in ae)ae.selectionStart=Je,ae.selectionEnd=Math.min(bt,ae.value.length);else{var Ut=ae.ownerDocument||document,nt=Ut&&Ut.defaultView||window;if(nt.getSelection){var Ze=nt.getSelection(),Cn=ae.textContent.length,En=Math.min(Te.start,Cn),hr=Te.end===void 0?En:Math.min(Te.end,Cn);!Ze.extend&&En>hr&&(W=hr,hr=En,En=W);var ze=kd(ae,En),Ne=kd(ae,hr);if(ze&&Ne&&(Ze.rangeCount!==1||Ze.anchorNode!==ze.node||Ze.anchorOffset!==ze.offset||Ze.focusNode!==Ne.node||Ze.focusOffset!==Ne.offset)){var je=Ut.createRange();je.setStart(ze.node,ze.offset),Ze.removeAllRanges(),En>hr?(Ze.addRange(je),Ze.extend(Ne.node,Ne.offset)):(je.setEnd(Ne.node,Ne.offset),Ze.addRange(je))}}}}for(Ut=[],Ze=ae;Ze=Ze.parentNode;)Ze.nodeType===1&&Ut.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof ae.focus=="function"&&ae.focus(),ae=0;ae<Ut.length;ae++){var Ct=Ut[ae];Ct.element.scrollLeft=Ct.left,Ct.element.scrollTop=Ct.top}}Fv=!!bu,Bv=bu=null}finally{ki=E,ee.p=x,k.T=m}}o.current=c,ts=2}}function en(){if(ts===2){ts=0;var o=js,c=sr,m=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||m){m=k.T,k.T=null;var x=ee.p;ee.p=2;var E=ki;ki|=4;try{xu(o,c.alternate,c)}finally{ki=E,ee.p=x,k.T=m}}ts=3}}function Hn(){if(ts===4||ts===3){ts=0,$e();var o=js,c=sr,m=Ya,x=ja;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?ts=5:(ts=0,sr=js=null,qa(o,o.pendingLanes));var E=o.pendingLanes;if(E===0&&(Wa=null),Jt(m),c=c.stateNode,it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Ye,c,void 0,(c.current.flags&128)===128)}catch{}if(x!==null){c=k.T,E=ee.p,ee.p=2,k.T=null;try{for(var U=o.onRecoverableError,W=0;W<x.length;W++){var ae=x[W];U(ae.value,{componentStack:ae.stack})}}finally{k.T=c,ee.p=E}}(Ya&3)!==0&&ec(),nc(o),E=o.pendingLanes,(m&4194090)!==0&&(E&42)!==0?o===Jc?$o++:($o=0,Jc=o):$o=0,zm(0)}}function qa(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Bf(c)))}function ec(o){return Zt(),en(),Hn(),tc()}function tc(){if(ts!==5)return!1;var o=js,c=Su;Su=0;var m=Jt(Ya),x=k.T,E=ee.p;try{ee.p=32>m?32:m,k.T=null,m=od,od=null;var U=js,W=Ya;if(ts=0,sr=js=null,Ya=0,(ki&6)!==0)throw Error(i(331));var ae=ki;if(ki|=4,Hm(U.current),vp(U,U.current,W,m),ki=ae,zm(0,!1),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Ye,U)}catch{}return!0}finally{ee.p=E,k.T=x,qa(o,c)}}function tt(o,c,m){c=Wr(m,c),c=id(o.stateNode,c,2),o=El(o,c,2),o!==null&&(dt(o,2),nc(o))}function Oe(o,c,m){if(o.tag===3)tt(o,o,m);else for(;c!==null;){if(c.tag===3){tt(c,o,m);break}else if(c.tag===1){var x=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(Wa===null||!Wa.has(x))){o=Wr(m,o),m=Gm(2),x=El(c,m,2),x!==null&&(hp(m,x,c,o),dt(x,2),nc(x));break}}c=c.return}}function st(o,c,m){var x=o.pingCache;if(x===null){x=o.pingCache=new ad;var E=new Set;x.set(c,E)}else E=x.get(c),E===void 0&&(E=new Set,x.set(c,E));E.has(m)||(qf=!0,E.add(m),o=zt.bind(null,o,c,m),c.then(o,o))}function zt(o,c,m){var x=o.pingCache;x!==null&&x.delete(c),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,Gn===o&&(yn&m)===m&&(Ar===4||Ar===3&&(yn&62914560)===yn&&300>Ke()-er?(ki&2)===0&&$u(o,0):Kc|=m,Ei===yn&&(Ei=0)),nc(o)}function pn(o,c){c===0&&(c=De()),o=Al(o,c),o!==null&&(dt(o,c),nc(o))}function tr(o){var c=o.memoizedState,m=0;c!==null&&(m=c.retryLane),pn(o,m)}function Dn(o,c){var m=0;switch(o.tag){case 13:var x=o.stateNode,E=o.memoizedState;E!==null&&(m=E.retryLane);break;case 19:x=o.stateNode;break;case 22:x=o.stateNode._retryCache;break;default:throw Error(i(314))}x!==null&&x.delete(c),pn(o,m)}function Ci(o,c){return Nt(o,c)}var Pr=null,ei=null,tl=!1,ud=!1,Cv=!1,Zf=0;function nc(o){o!==ei&&o.next===null&&(ei===null?Pr=ei=o:ei=ei.next=o),ud=!0,tl||(tl=!0,gy())}function zm(o,c){if(!Cv&&ud){Cv=!0;do for(var m=!1,x=Pr;x!==null;){if(o!==0){var E=x.pendingLanes;if(E===0)var U=0;else{var W=x.suspendedLanes,ae=x.pingedLanes;U=(1<<31-yt(42|o)+1)-1,U&=E&~(W&~ae),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(m=!0,J_(x,U))}else U=yn,U=xe(x,x===Gn?U:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(U&3)===0||We(x,U)||(m=!0,J_(x,U));x=x.next}while(m);Cv=!1}}function oM(){Vm()}function Vm(){ud=tl=!1;var o=0;Zf!==0&&(pM()&&(o=Zf),Zf=0);for(var c=Ke(),m=null,x=Pr;x!==null;){var E=x.next,U=km(x,c);U===0?(x.next=null,m===null?Pr=E:m.next=E,E===null&&(ei=m)):(m=x,(o!==0||(U&3)!==0)&&(ud=!0)),x=E}zm(o)}function km(o,c){for(var m=o.suspendedLanes,x=o.pingedLanes,E=o.expirationTimes,U=o.pendingLanes&-62914561;0<U;){var W=31-yt(U),ae=1<<W,Te=E[W];Te===-1?((ae&m)===0||(ae&x)!==0)&&(E[W]=Rt(ae,c)):Te<=c&&(o.expiredLanes|=ae),U&=~ae}if(c=Gn,m=yn,m=xe(o,o===c?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x=o.callbackNode,m===0||o===c&&(Xn===2||Xn===9)||o.cancelPendingCommit!==null)return x!==null&&x!==null&&ie(x),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||We(o,m)){if(c=m&-m,c===o.callbackPriority)return c;switch(x!==null&&ie(x),Jt(m)){case 2:case 8:m=Ve;break;case 32:m=j;break;case 268435456:m=_e;break;default:m=j}return x=K_.bind(null,o),m=Nt(m,x),o.callbackPriority=c,o.callbackNode=m,c}return x!==null&&x!==null&&ie(x),o.callbackPriority=2,o.callbackNode=null,2}function K_(o,c){if(ts!==0&&ts!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(ec()&&o.callbackNode!==m)return null;var x=yn;return x=xe(o,o===Gn?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x===0?null:(Kf(o,x,c),km(o,Ke()),o.callbackNode!=null&&o.callbackNode===m?K_.bind(null,o):null)}function J_(o,c){if(ec())return null;Kf(o,c,!0)}function gy(){gM(function(){(ki&6)!==0?Nt(pt,oM):Vm()})}function wv(){return Zf===0&&(Zf=Ae()),Zf}function Z_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Uo(""+o)}function Q_(o,c){var m=c.ownerDocument.createElement("input");return m.name=c.name,m.value=c.value,o.id&&m.setAttribute("form",o.id),c.parentNode.insertBefore(m,c),o=new FormData(o),m.parentNode.removeChild(m),o}function lM(o,c,m,x,E){if(c==="submit"&&m&&m.stateNode===E){var U=Z_((E[Ai]||null).action),W=x.submitter;W&&(c=(c=W[Ai]||null)?Z_(c.formAction):W.getAttribute("formAction"),c!==null&&(U=c,W=null));var ae=new Qs("action","action",null,x,E);o.push({event:ae,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(Zf!==0){var Te=W?Q_(E,W):new FormData(E);Qh(m,{pending:!0,data:Te,method:E.method,action:U},null,Te)}}else typeof U=="function"&&(ae.preventDefault(),Te=W?Q_(E,W):new FormData(E),Qh(m,{pending:!0,data:Te,method:E.method,action:U},U,Te))},currentTarget:E}]})}}for(var vy=0;vy<Mi.length;vy++){var yy=Mi[vy],uM=yy.toLowerCase(),cM=yy[0].toUpperCase()+yy.slice(1);fs(uM,"on"+cM)}fs(Ms,"onAnimationEnd"),fs(dm,"onAnimationIteration"),fs(yr,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(Uh,"onTransitionRun"),fs(iu,"onTransitionStart"),fs(Fo,"onTransitionCancel"),fs(so,"onTransitionEnd"),q("onMouseEnter",["mouseout","mouseover"]),q("onMouseLeave",["mouseout","mouseover"]),q("onPointerEnter",["pointerout","pointerover"]),q("onPointerLeave",["pointerout","pointerover"]),Bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xm));function $_(o,c){c=(c&4)!==0;for(var m=0;m<o.length;m++){var x=o[m],E=x.event;x=x.listeners;e:{var U=void 0;if(c)for(var W=x.length-1;0<=W;W--){var ae=x[W],Te=ae.instance,Je=ae.currentTarget;if(ae=ae.listener,Te!==U&&E.isPropagationStopped())break e;U=ae,E.currentTarget=Je;try{U(E)}catch(bt){Dl(bt)}E.currentTarget=null,U=Te}else for(W=0;W<x.length;W++){if(ae=x[W],Te=ae.instance,Je=ae.currentTarget,ae=ae.listener,Te!==U&&E.isPropagationStopped())break e;U=ae,E.currentTarget=Je;try{U(E)}catch(bt){Dl(bt)}E.currentTarget=null,U=Te}}}}function gi(o,c){var m=c[or];m===void 0&&(m=c[or]=new Set);var x=o+"__bubble";m.has(x)||(ex(c,o,2,!1),m.add(x))}function _y(o,c,m){var x=0;c&&(x|=4),ex(m,o,x,c)}var So="_reactListening"+Math.random().toString(36).slice(2);function xy(o){if(!o[So]){o[So]=!0,ft.forEach(function(m){m!=="selectionchange"&&(fM.has(m)||_y(m,!1,o),_y(m,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[So]||(c[So]=!0,_y("selectionchange",!1,c))}}function ex(o,c,m,x){switch(_x(c)){case 2:var E=RM;break;case 8:E=Cp;break;default:E=Dy}m=E.bind(null,c,m,o),E=void 0,!Lo||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),x?E!==void 0?o.addEventListener(c,m,{capture:!0,passive:E}):o.addEventListener(c,m,!0):E!==void 0?o.addEventListener(c,m,{passive:E}):o.addEventListener(c,m,!1)}function Qc(o,c,m,x,E){var U=x;if((c&1)===0&&(c&2)===0&&x!==null)e:for(;;){if(x===null)return;var W=x.tag;if(W===3||W===4){var ae=x.stateNode.containerInfo;if(ae===E)break;if(W===4)for(W=x.return;W!==null;){var Te=W.tag;if((Te===3||Te===4)&&W.stateNode.containerInfo===E)return;W=W.return}for(;ae!==null;){if(W=K(ae),W===null)return;if(Te=W.tag,Te===5||Te===6||Te===26||Te===27){x=U=W;continue e}ae=ae.parentNode}}x=x.return}Sc(function(){var Je=U,bt=Oo(m),Ut=[];e:{var nt=Cc.get(o);if(nt!==void 0){var Ze=Qs,Cn=o;switch(o){case"keypress":if(li(m)===0)break e;case"keydown":case"keyup":Ze=Mh;break;case"focusin":Cn="focus",Ze=yl;break;case"focusout":Cn="blur",Ze=yl;break;case"beforeblur":case"afterblur":Ze=yl;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=Ba;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=xh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=om;break;case Ms:case dm:case yr:Ze=Ah;break;case so:Ze=$l;break;case"scroll":case"scrollend":Ze=bf;break;case"wheel":Ze=hy;break;case"copy":case"cut":case"paste":Ze=$s;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=Po;break;case"toggle":case"beforetoggle":Ze=No}var En=(c&4)!==0,hr=!En&&(o==="scroll"||o==="scrollend"),ze=En?nt!==null?nt+"Capture":null:nt;En=[];for(var Ne=Je,je;Ne!==null;){var Ct=Ne;if(je=Ct.stateNode,Ct=Ct.tag,Ct!==5&&Ct!==26&&Ct!==27||je===null||ze===null||(Ct=Jl(Ne,ze),Ct!=null&&En.push(On(Ne,Ct,je))),hr)break;Ne=Ne.return}0<En.length&&(nt=new Ze(nt,Cn,null,m,bt),Ut.push({event:nt,listeners:En}))}}if((c&7)===0){e:{if(nt=o==="mouseover"||o==="pointerover",Ze=o==="mouseout"||o==="pointerout",nt&&m!==no&&(Cn=m.relatedTarget||m.fromElement)&&(K(Cn)||Cn[Di]))break e;if((Ze||nt)&&(nt=bt.window===bt?bt:(nt=bt.ownerDocument)?nt.defaultView||nt.parentWindow:window,Ze?(Cn=m.relatedTarget||m.toElement,Ze=Je,Cn=Cn?K(Cn):null,Cn!==null&&(hr=s(Cn),En=Cn.tag,Cn!==hr||En!==5&&En!==27&&En!==6)&&(Cn=null)):(Ze=null,Cn=Je),Ze!==Cn)){if(En=Ba,Ct="onMouseLeave",ze="onMouseEnter",Ne="mouse",(o==="pointerout"||o==="pointerover")&&(En=Po,Ct="onPointerLeave",ze="onPointerEnter",Ne="pointer"),hr=Ze==null?nt:Ce(Ze),je=Cn==null?nt:Ce(Cn),nt=new En(Ct,Ne+"leave",Ze,m,bt),nt.target=hr,nt.relatedTarget=je,Ct=null,K(bt)===Je&&(En=new En(ze,Ne+"enter",Cn,m,bt),En.target=je,En.relatedTarget=hr,Ct=En),hr=Ct,Ze&&Cn)t:{for(En=Ze,ze=Cn,Ne=0,je=En;je;je=Ds(je))Ne++;for(je=0,Ct=ze;Ct;Ct=Ds(Ct))je++;for(;0<Ne-je;)En=Ds(En),Ne--;for(;0<je-Ne;)ze=Ds(ze),je--;for(;Ne--;){if(En===ze||ze!==null&&En===ze.alternate)break t;En=Ds(En),ze=Ds(ze)}En=null}else En=null;Ze!==null&&Kr(Ut,nt,Ze,En,!1),Cn!==null&&hr!==null&&Kr(Ut,hr,Cn,En,!0)}}e:{if(nt=Je?Ce(Je):window,Ze=nt.nodeName&&nt.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&nt.type==="file")var on=Gd;else if(Rh(nt))if(Hd)on=Iu;else{on=eu;var fi=rv}else Ze=nt.nodeName,!Ze||Ze.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?Je&&Uu(Je.elementType)&&(on=Gd):on=Nu;if(on&&(on=on(o,Je))){cs(Ut,on,m,bt);break e}fi&&fi(o,nt,Je),o==="focusout"&&Je&&nt.type==="number"&&Je.memoizedProps.value!=null&&Ui(nt,"number",nt.value)}switch(fi=Je?Ce(Je):window,o){case"focusin":(Rh(fi)||fi.contentEditable==="true")&&(tu=fi,nu=Je,Fe=null);break;case"focusout":Fe=nu=tu=null;break;case"mousedown":mt=!0;break;case"contextmenu":case"mouseup":case"dragend":mt=!1,lt(Ut,m,bt);break;case"selectionchange":if(hm)break;case"keydown":case"keyup":lt(Ut,m,bt)}var vn;if(Th)e:{switch(o){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else xl?Eh(o,m)&&(wn="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(wn="onCompositionStart");wn&&(Tc&&m.locale!=="ko"&&(xl||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&xl&&(vn=Sf()):(Ir=bt,bc="value"in Ir?Ir.value:Ir.textContent,xl=!0)),fi=Rv(Je,wn),0<fi.length&&(wn=new vr(wn,o,null,m,bt),Ut.push({event:wn,listeners:fi}),vn?wn.data=vn:(vn=Ch(m),vn!==null&&(wn.data=vn)))),(vn=Tf?wh(o,m):Fd(o,m))&&(wn=Rv(Je,"onBeforeInput"),0<wn.length&&(fi=new vr("onBeforeInput","beforeinput",null,m,bt),Ut.push({event:fi,listeners:wn}),fi.data=vn)),lM(Ut,o,Je,m,bt)}$_(Ut,c)})}function On(o,c,m){return{instance:o,listener:c,currentTarget:m}}function Rv(o,c){for(var m=c+"Capture",x=[];o!==null;){var E=o,U=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||U===null||(E=Jl(o,m),E!=null&&x.unshift(On(o,E,U)),E=Jl(o,c),E!=null&&x.push(On(o,E,U))),o.tag===3)return x;o=o.return}return[]}function Ds(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Kr(o,c,m,x,E){for(var U=c._reactName,W=[];m!==null&&m!==x;){var ae=m,Te=ae.alternate,Je=ae.stateNode;if(ae=ae.tag,Te!==null&&Te===x)break;ae!==5&&ae!==26&&ae!==27||Je===null||(Te=Je,E?(Je=Jl(m,U),Je!=null&&W.unshift(On(m,Je,Te))):E||(Je=Jl(m,U),Je!=null&&W.push(On(m,Je,Te)))),m=m.return}W.length!==0&&o.push({event:c,listeners:W})}var hM=/\r\n?/g,Qf=/\u0000|\uFFFD/g;function tx(o){return(typeof o=="string"?o:""+o).replace(hM,`
`).replace(Qf,"")}function nx(o,c){return c=tx(c),tx(o)===c}function Dv(){}function fr(o,c,m,x,E,U){switch(m){case"children":typeof x=="string"?c==="body"||c==="textarea"&&x===""||Or(o,x):(typeof x=="number"||typeof x=="bigint")&&c!=="body"&&Or(o,""+x);break;case"className":ct(o,"class",x);break;case"tabIndex":ct(o,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(o,m,x);break;case"style":ql(o,x,U);break;case"data":if(c!=="object"){ct(o,"data",x);break}case"src":case"href":if(x===""&&(c!=="a"||m!=="href")){o.removeAttribute(m);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(m);break}x=Uo(""+x),o.setAttribute(m,x);break;case"action":case"formAction":if(typeof x=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(m==="formAction"?(c!=="input"&&fr(o,c,"name",E.name,E,null),fr(o,c,"formEncType",E.formEncType,E,null),fr(o,c,"formMethod",E.formMethod,E,null),fr(o,c,"formTarget",E.formTarget,E,null)):(fr(o,c,"encType",E.encType,E,null),fr(o,c,"method",E.method,E,null),fr(o,c,"target",E.target,E,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(m);break}x=Uo(""+x),o.setAttribute(m,x);break;case"onClick":x!=null&&(o.onclick=Dv);break;case"onScroll":x!=null&&gi("scroll",o);break;case"onScrollEnd":x!=null&&gi("scrollend",o);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(m=x.__html,m!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"multiple":o.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":o.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){o.removeAttribute("xlink:href");break}m=Uo(""+x),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,""+x):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":x===!0?o.setAttribute(m,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,x):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?o.setAttribute(m,x):o.removeAttribute(m);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?o.removeAttribute(m):o.setAttribute(m,x);break;case"popover":gi("beforetoggle",o),gi("toggle",o),qe(o,"popover",x);break;case"xlinkActuate":vt(o,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":vt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":vt(o,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":vt(o,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":vt(o,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":vt(o,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":vt(o,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":vt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":vt(o,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":qe(o,"is",x);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=ml.get(m)||m,qe(o,m,x))}}function Ay(o,c,m,x,E,U){switch(m){case"style":ql(o,x,U);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(i(61));if(m=x.__html,m!=null){if(E.children!=null)throw Error(i(60));o.innerHTML=m}}break;case"children":typeof x=="string"?Or(o,x):(typeof x=="number"||typeof x=="bigint")&&Or(o,""+x);break;case"onScroll":x!=null&&gi("scroll",o);break;case"onScrollEnd":x!=null&&gi("scrollend",o);break;case"onClick":x!=null&&(o.onclick=Dv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ft.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),c=m.slice(2,E?m.length-7:void 0),U=o[Ai]||null,U=U!=null?U[m]:null,typeof U=="function"&&o.removeEventListener(c,U,E),typeof x=="function")){typeof U!="function"&&U!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(c,x,E);break e}m in o?o[m]=x:x===!0?o.setAttribute(m,""):qe(o,m,x)}}}function Bs(o,c,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gi("error",o),gi("load",o);var x=!1,E=!1,U;for(U in m)if(m.hasOwnProperty(U)){var W=m[U];if(W!=null)switch(U){case"src":x=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:fr(o,c,U,W,m,null)}}E&&fr(o,c,"srcSet",m.srcSet,m,null),x&&fr(o,c,"src",m.src,m,null);return;case"input":gi("invalid",o);var ae=U=W=E=null,Te=null,Je=null;for(x in m)if(m.hasOwnProperty(x)){var bt=m[x];if(bt!=null)switch(x){case"name":E=bt;break;case"type":W=bt;break;case"checked":Te=bt;break;case"defaultChecked":Je=bt;break;case"value":U=bt;break;case"defaultValue":ae=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(i(137,c));break;default:fr(o,c,x,bt,m,null)}}Pn(o,U,ae,Te,Je,W,E,!1),Si(o);return;case"select":gi("invalid",o),x=W=U=null;for(E in m)if(m.hasOwnProperty(E)&&(ae=m[E],ae!=null))switch(E){case"value":U=ae;break;case"defaultValue":W=ae;break;case"multiple":x=ae;default:fr(o,c,E,ae,m,null)}c=U,m=W,o.multiple=!!x,c!=null?Wn(o,!!x,c,!1):m!=null&&Wn(o,!!x,m,!0);return;case"textarea":gi("invalid",o),U=E=x=null;for(W in m)if(m.hasOwnProperty(W)&&(ae=m[W],ae!=null))switch(W){case"value":x=ae;break;case"defaultValue":E=ae;break;case"children":U=ae;break;case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(91));break;default:fr(o,c,W,ae,m,null)}mr(o,x,E,U),Si(o);return;case"option":for(Te in m)if(m.hasOwnProperty(Te)&&(x=m[Te],x!=null))switch(Te){case"selected":o.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:fr(o,c,Te,x,m,null)}return;case"dialog":gi("beforetoggle",o),gi("toggle",o),gi("cancel",o),gi("close",o);break;case"iframe":case"object":gi("load",o);break;case"video":case"audio":for(x=0;x<Xm.length;x++)gi(Xm[x],o);break;case"image":gi("error",o),gi("load",o);break;case"details":gi("toggle",o);break;case"embed":case"source":case"link":gi("error",o),gi("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in m)if(m.hasOwnProperty(Je)&&(x=m[Je],x!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:fr(o,c,Je,x,m,null)}return;default:if(Uu(c)){for(bt in m)m.hasOwnProperty(bt)&&(x=m[bt],x!==void 0&&Ay(o,c,bt,x,m,void 0));return}}for(ae in m)m.hasOwnProperty(ae)&&(x=m[ae],x!=null&&fr(o,c,ae,x,m,null))}function dM(o,c,m,x){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,U=null,W=null,ae=null,Te=null,Je=null,bt=null;for(Ze in m){var Ut=m[Ze];if(m.hasOwnProperty(Ze)&&Ut!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":Te=Ut;default:x.hasOwnProperty(Ze)||fr(o,c,Ze,null,x,Ut)}}for(var nt in x){var Ze=x[nt];if(Ut=m[nt],x.hasOwnProperty(nt)&&(Ze!=null||Ut!=null))switch(nt){case"type":U=Ze;break;case"name":E=Ze;break;case"checked":Je=Ze;break;case"defaultChecked":bt=Ze;break;case"value":W=Ze;break;case"defaultValue":ae=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(i(137,c));break;default:Ze!==Ut&&fr(o,c,nt,Ze,x,Ut)}}xn(o,W,ae,Te,Je,bt,U,E);return;case"select":Ze=W=ae=nt=null;for(U in m)if(Te=m[U],m.hasOwnProperty(U)&&Te!=null)switch(U){case"value":break;case"multiple":Ze=Te;default:x.hasOwnProperty(U)||fr(o,c,U,null,x,Te)}for(E in x)if(U=x[E],Te=m[E],x.hasOwnProperty(E)&&(U!=null||Te!=null))switch(E){case"value":nt=U;break;case"defaultValue":ae=U;break;case"multiple":W=U;default:U!==Te&&fr(o,c,E,U,x,Te)}c=ae,m=W,x=Ze,nt!=null?Wn(o,!!m,nt,!1):!!x!=!!m&&(c!=null?Wn(o,!!m,c,!0):Wn(o,!!m,m?[]:"",!1));return;case"textarea":Ze=nt=null;for(ae in m)if(E=m[ae],m.hasOwnProperty(ae)&&E!=null&&!x.hasOwnProperty(ae))switch(ae){case"value":break;case"children":break;default:fr(o,c,ae,null,x,E)}for(W in x)if(E=x[W],U=m[W],x.hasOwnProperty(W)&&(E!=null||U!=null))switch(W){case"value":nt=E;break;case"defaultValue":Ze=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:E!==U&&fr(o,c,W,E,x,U)}Oi(o,nt,Ze);return;case"option":for(var Cn in m)if(nt=m[Cn],m.hasOwnProperty(Cn)&&nt!=null&&!x.hasOwnProperty(Cn))switch(Cn){case"selected":o.selected=!1;break;default:fr(o,c,Cn,null,x,nt)}for(Te in x)if(nt=x[Te],Ze=m[Te],x.hasOwnProperty(Te)&&nt!==Ze&&(nt!=null||Ze!=null))switch(Te){case"selected":o.selected=nt&&typeof nt!="function"&&typeof nt!="symbol";break;default:fr(o,c,Te,nt,x,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var En in m)nt=m[En],m.hasOwnProperty(En)&&nt!=null&&!x.hasOwnProperty(En)&&fr(o,c,En,null,x,nt);for(Je in x)if(nt=x[Je],Ze=m[Je],x.hasOwnProperty(Je)&&nt!==Ze&&(nt!=null||Ze!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(i(137,c));break;default:fr(o,c,Je,nt,x,Ze)}return;default:if(Uu(c)){for(var hr in m)nt=m[hr],m.hasOwnProperty(hr)&&nt!==void 0&&!x.hasOwnProperty(hr)&&Ay(o,c,hr,void 0,x,nt);for(bt in x)nt=x[bt],Ze=m[bt],!x.hasOwnProperty(bt)||nt===Ze||nt===void 0&&Ze===void 0||Ay(o,c,bt,nt,x,Ze);return}}for(var ze in m)nt=m[ze],m.hasOwnProperty(ze)&&nt!=null&&!x.hasOwnProperty(ze)&&fr(o,c,ze,null,x,nt);for(Ut in x)nt=x[Ut],Ze=m[Ut],!x.hasOwnProperty(Ut)||nt===Ze||nt==null&&Ze==null||fr(o,c,Ut,nt,x,Ze)}var bu=null,Bv=null;function cd(o){return o.nodeType===9?o:o.ownerDocument}function Nr(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zr(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function Uv(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Sy=null;function pM(){var o=window.event;return o&&o.type==="popstate"?o===Sy?!1:(Sy=o,!0):(Sy=null,!1)}var ix=typeof setTimeout=="function"?setTimeout:void 0,mM=typeof clearTimeout=="function"?clearTimeout:void 0,rx=typeof Promise=="function"?Promise:void 0,gM=typeof queueMicrotask=="function"?queueMicrotask:typeof rx<"u"?function(o){return rx.resolve(null).then(o).catch(sx)}:ix;function sx(o){setTimeout(function(){throw o})}function Hl(o){return o==="head"}function Ov(o,c){var m=c,x=0,E=0;do{var U=m.nextSibling;if(o.removeChild(m),U&&U.nodeType===8)if(m=U.data,m==="/$"){if(0<x&&8>x){m=x;var W=o.ownerDocument;if(m&1&&Wm(W.documentElement),m&2&&Wm(W.body),m&4)for(m=W.head,Wm(m),W=m.firstChild;W;){var ae=W.nextSibling,Te=W.nodeName;W[Gi]||Te==="SCRIPT"||Te==="STYLE"||Te==="LINK"&&W.rel.toLowerCase()==="stylesheet"||m.removeChild(W),W=ae}}if(E===0){o.removeChild(U),$m(c);return}E--}else m==="$"||m==="$?"||m==="$!"?E++:x=m.charCodeAt(0)-48;else x=0;m=U}while(m);$m(c)}function by(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var m=c;switch(c=c.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":by(m),ni(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function ax(o,c,m,x){for(;o.nodeType===1;){var E=m;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!x&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(x){if(!o[Gi])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(U=o.getAttribute("rel"),U==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(U!==E.rel||o.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(U=o.getAttribute("src"),(U!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&U&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var U=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===U)return o}else return o;if(o=Mu(o.nextSibling),o===null)break}return null}function Lv(o,c,m){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=Mu(o.nextSibling),o===null))return null;return o}function Ka(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function Ap(o,c){var m=o.ownerDocument;if(o.data!=="$?"||m.readyState==="complete")c();else{var x=function(){c(),m.removeEventListener("DOMContentLoaded",x)};m.addEventListener("DOMContentLoaded",x),o._reactRetry=x}}function Mu(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}var My=null;function ox(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(c===0)return o;c--}else m==="/$"&&c++}o=o.previousSibling}return null}function lx(o,c,m){switch(c=cd(m),o){case"html":if(o=c.documentElement,!o)throw Error(i(452));return o;case"head":if(o=c.head,!o)throw Error(i(453));return o;case"body":if(o=c.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function Wm(o){for(var c=o.attributes;c.length;)o.removeAttributeNode(c[0]);ni(o)}var nl=new Map,ic=new Set;function kn(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var rc=ee.d;ee.d={f:zl,r:ux,D:vM,C:cx,L:Pv,m:yM,X:xM,S:_M,M:AM};function zl(){var o=rc.f(),c=Gl();return o||c}function ux(o){var c=le(o);c!==null&&c.tag===5&&c.type==="form"?op(c):rc.r(o)}var Sp=typeof document>"u"?null:document;function ji(o,c,m){var x=Sp;if(x&&typeof c=="string"&&c){var E=dn(c);E='link[rel="'+o+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),ic.has(E)||(ic.add(E),o={rel:o,crossOrigin:m,href:c},x.querySelector(E)===null&&(c=x.createElement("link"),Bs(c,"link",o),et(c),x.head.appendChild(c)))}}function vM(o){rc.D(o),ji("dns-prefetch",o,null)}function cx(o,c){rc.C(o,c),ji("preconnect",o,c)}function Pv(o,c,m){rc.L(o,c,m);var x=Sp;if(x&&o&&c){var E='link[rel="preload"][as="'+dn(c)+'"]';c==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+dn(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+dn(m.imageSizes)+'"]')):E+='[href="'+dn(o)+'"]';var U=E;switch(c){case"style":U=bp(o);break;case"script":U=Mp(o)}nl.has(U)||(o=d({rel:"preload",href:c==="image"&&m&&m.imageSrcSet?void 0:o,as:c},m),nl.set(U,o),x.querySelector(E)!==null||c==="style"&&x.querySelector(Ym(U))||c==="script"&&x.querySelector(jm(U))||(c=x.createElement("link"),Bs(c,"link",o),et(c),x.head.appendChild(c)))}}function yM(o,c){rc.m(o,c);var m=Sp;if(m&&o){var x=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+dn(x)+'"][href="'+dn(o)+'"]',U=E;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=Mp(o)}if(!nl.has(U)&&(o=d({rel:"modulepreload",href:o},c),nl.set(U,o),m.querySelector(E)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(jm(U)))return}x=m.createElement("link"),Bs(x,"link",o),et(x),m.head.appendChild(x)}}}function _M(o,c,m){rc.S(o,c,m);var x=Sp;if(x&&o){var E=Qe(x).hoistableStyles,U=bp(o);c=c||"default";var W=E.get(U);if(!W){var ae={loading:0,preload:null};if(W=x.querySelector(Ym(U)))ae.loading=5;else{o=d({rel:"stylesheet",href:o,"data-precedence":c},m),(m=nl.get(U))&&qm(o,m);var Te=W=x.createElement("link");et(Te),Bs(Te,"link",o),Te._p=new Promise(function(Je,bt){Te.onload=Je,Te.onerror=bt}),Te.addEventListener("load",function(){ae.loading|=1}),Te.addEventListener("error",function(){ae.loading|=2}),ae.loading|=4,Nv(W,c,x)}W={type:"stylesheet",instance:W,count:1,state:ae},E.set(U,W)}}}function xM(o,c){rc.X(o,c);var m=Sp;if(m&&o){var x=Qe(m).hoistableScripts,E=Mp(o),U=x.get(E);U||(U=m.querySelector(jm(E)),U||(o=d({src:o,async:!0},c),(c=nl.get(E))&&Ty(o,c),U=m.createElement("script"),et(U),Bs(U,"link",o),m.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},x.set(E,U))}}function AM(o,c){rc.M(o,c);var m=Sp;if(m&&o){var x=Qe(m).hoistableScripts,E=Mp(o),U=x.get(E);U||(U=m.querySelector(jm(E)),U||(o=d({src:o,async:!0,type:"module"},c),(c=nl.get(E))&&Ty(o,c),U=m.createElement("script"),et(U),Bs(U,"link",o),m.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},x.set(E,U))}}function fx(o,c,m,x){var E=(E=Se.current)?kn(E):null;if(!E)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(c=bp(m.href),m=Qe(E).hoistableStyles,x=m.get(c),x||(x={type:"style",instance:null,count:0,state:null},m.set(c,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=bp(m.href);var U=Qe(E).hoistableStyles,W=U.get(o);if(W||(E=E.ownerDocument||E,W={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(o,W),(U=E.querySelector(Ym(o)))&&!U._p&&(W.instance=U,W.state.loading=5),nl.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},nl.set(o,m),U||SM(E,o,m,W.state))),c&&x===null)throw Error(i(528,""));return W}if(c&&x!==null)throw Error(i(529,""));return null;case"script":return c=m.async,m=m.src,typeof m=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Mp(m),m=Qe(E).hoistableScripts,x=m.get(c),x||(x={type:"script",instance:null,count:0,state:null},m.set(c,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function bp(o){return'href="'+dn(o)+'"'}function Ym(o){return'link[rel="stylesheet"]['+o+"]"}function hx(o){return d({},o,{"data-precedence":o.precedence,precedence:null})}function SM(o,c,m,x){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?x.loading=1:(c=o.createElement("link"),x.preload=c,c.addEventListener("load",function(){return x.loading|=1}),c.addEventListener("error",function(){return x.loading|=2}),Bs(c,"link",m),et(c),o.head.appendChild(c))}function Mp(o){return'[src="'+dn(o)+'"]'}function jm(o){return"script[async]"+o}function dx(o,c,m){if(c.count++,c.instance===null)switch(c.type){case"style":var x=o.querySelector('style[data-href~="'+dn(m.href)+'"]');if(x)return c.instance=x,et(x),x;var E=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return x=(o.ownerDocument||o).createElement("style"),et(x),Bs(x,"style",E),Nv(x,m.precedence,o),c.instance=x;case"stylesheet":E=bp(m.href);var U=o.querySelector(Ym(E));if(U)return c.state.loading|=4,c.instance=U,et(U),U;x=hx(m),(E=nl.get(E))&&qm(x,E),U=(o.ownerDocument||o).createElement("link"),et(U);var W=U;return W._p=new Promise(function(ae,Te){W.onload=ae,W.onerror=Te}),Bs(U,"link",x),c.state.loading|=4,Nv(U,m.precedence,o),c.instance=U;case"script":return U=Mp(m.src),(E=o.querySelector(jm(U)))?(c.instance=E,et(E),E):(x=m,(E=nl.get(U))&&(x=d({},m),Ty(x,E)),o=o.ownerDocument||o,E=o.createElement("script"),et(E),Bs(E,"link",x),o.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(x=c.instance,c.state.loading|=4,Nv(x,m.precedence,o));return c.instance}function Nv(o,c,m){for(var x=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=x.length?x[x.length-1]:null,U=E,W=0;W<x.length;W++){var ae=x[W];if(ae.dataset.precedence===c)U=ae;else if(U!==E)break}U?U.parentNode.insertBefore(o,U.nextSibling):(c=m.nodeType===9?m.head:m,c.insertBefore(o,c.firstChild))}function qm(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function Ty(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var Tp=null;function px(o,c,m){if(Tp===null){var x=new Map,E=Tp=new Map;E.set(m,x)}else E=Tp,x=E.get(m),x||(x=new Map,E.set(m,x));if(x.has(o))return x;for(x.set(o,null),m=m.getElementsByTagName(o),E=0;E<m.length;E++){var U=m[E];if(!(U[Gi]||U[Ln]||o==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var W=U.getAttribute(c)||"";W=o+W;var ae=x.get(W);ae?ae.push(U):x.set(W,[U])}}return x}function mx(o,c,m){o=o.ownerDocument||o,o.head.insertBefore(m,c==="title"?o.querySelector("head > title"):null)}function bM(o,c,m){if(m===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function Us(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var qs=null;function MM(){}function TM(o,c,m){if(qs===null)throw Error(i(475));var x=qs;if(c.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=bp(m.href),U=o.querySelector(Ym(E));if(U){o=U._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(x.count++,x=Km.bind(x),o.then(x,x)),c.state.loading|=4,c.instance=U,et(U);return}U=o.ownerDocument||o,m=hx(m),(E=nl.get(E))&&qm(m,E),U=U.createElement("link"),et(U);var W=U;W._p=new Promise(function(ae,Te){W.onload=ae,W.onerror=Te}),Bs(U,"link",m),c.instance=U}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(x.count++,c=Km.bind(x),o.addEventListener("load",c),o.addEventListener("error",c))}}function EM(){if(qs===null)throw Error(i(475));var o=qs;return o.stylesheets&&o.count===0&&Ey(o,o.stylesheets),0<o.count?function(c){var m=setTimeout(function(){if(o.stylesheets&&Ey(o,o.stylesheets),o.unsuspend){var x=o.unsuspend;o.unsuspend=null,x()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(m)}}:null}function Km(){if(this.count--,this.count===0){if(this.stylesheets)Ey(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Iv=null;function Ey(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Iv=new Map,c.forEach(CM,o),Iv=null,Km.call(o))}function CM(o,c){if(!(c.state.loading&4)){var m=Iv.get(o);if(m)var x=m.get(null);else{m=new Map,Iv.set(o,m);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<E.length;U++){var W=E[U];(W.nodeName==="LINK"||W.getAttribute("media")!=="not all")&&(m.set(W.dataset.precedence,W),x=W)}x&&m.set(null,x)}E=c.instance,W=E.getAttribute("data-precedence"),U=m.get(W)||x,U===x&&m.set(null,E),m.set(W,E),this.count++,x=Km.bind(this),E.addEventListener("load",x),E.addEventListener("error",x),U?U.parentNode.insertBefore(E,U.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),c.state.loading|=4}}var Ep={$$typeof:D,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function wM(o,c,m,x,E,U,W,ae){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=He(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.hiddenUpdates=He(null),this.identifierPrefix=x,this.onUncaughtError=E,this.onCaughtError=U,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ae,this.incompleteTransitions=new Map}function gx(o,c,m,x,E,U,W,ae,Te,Je,bt,Ut){return o=new wM(o,c,m,W,ae,Te,Je,Ut),c=1,U===!0&&(c|=24),U=ta(3,null,null,c),o.current=U,U.stateNode=o,c=jd(),c.refCount++,o.pooledCache=c,c.refCount++,U.memoizedState={element:x,isDehydrated:m,cache:c},Lc(U),o}function vx(o){return o?(o=ru,o):ru}function Cy(o,c,m,x,E,U){E=vx(E),x.context===null?x.context=E:x.pendingContext=E,x=Tl(c),x.payload={element:m},U=U===void 0?null:U,U!==null&&(x.callback=U),m=El(o,x,c),m!==null&&(oa(m,o,c),Pc(m,o,c))}function wy(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<c?m:c}}function Ry(o,c){wy(o,c),(o=o.alternate)&&wy(o,c)}function yx(o){if(o.tag===13){var c=Al(o,67108864);c!==null&&oa(c,o,67108864),Ry(o,67108864)}}var Fv=!0;function RM(o,c,m,x){var E=k.T;k.T=null;var U=ee.p;try{ee.p=2,Dy(o,c,m,x)}finally{ee.p=U,k.T=E}}function Cp(o,c,m,x){var E=k.T;k.T=null;var U=ee.p;try{ee.p=8,Dy(o,c,m,x)}finally{ee.p=U,k.T=E}}function Dy(o,c,m,x){if(Fv){var E=By(x);if(E===null)Qc(o,c,x,Gv,m),xx(o,x);else if(BM(E,o,c,m,x))x.stopPropagation();else if(xx(o,x),c&4&&-1<DM.indexOf(o)){for(;E!==null;){var U=le(E);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var W=ot(U.pendingLanes);if(W!==0){var ae=U;for(ae.pendingLanes|=2,ae.entangledLanes|=2;W;){var Te=1<<31-yt(W);ae.entanglements[1]|=Te,W&=~Te}nc(U),(ki&6)===0&&(ys=Ke()+500,zm(0))}}break;case 13:ae=Al(U,2),ae!==null&&oa(ae,U,2),Gl(),Ry(U,2)}if(U=By(x),U===null&&Qc(o,c,x,Gv,m),U===E)break;E=U}E!==null&&x.stopPropagation()}else Qc(o,c,x,null,m)}}function By(o){return o=Oo(o),Uy(o)}var Gv=null;function Uy(o){if(Gv=null,o=K(o),o!==null){var c=s(o);if(c===null)o=null;else{var m=c.tag;if(m===13){if(o=a(c),o!==null)return o;o=null}else if(m===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Gv=o,null}function _x(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pe()){case pt:return 2;case Ve:return 8;case j:case Y:return 32;case _e:return 268435456;default:return 32}default:return 32}}var Hv=!1,$c=null,$f=null,eh=null,Jm=new Map,Zm=new Map,th=[],DM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xx(o,c){switch(o){case"focusin":case"focusout":$c=null;break;case"dragenter":case"dragleave":$f=null;break;case"mouseover":case"mouseout":eh=null;break;case"pointerover":case"pointerout":Jm.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zm.delete(c.pointerId)}}function Qm(o,c,m,x,E,U){return o===null||o.nativeEvent!==U?(o={blockedOn:c,domEventName:m,eventSystemFlags:x,nativeEvent:U,targetContainers:[E]},c!==null&&(c=le(c),c!==null&&yx(c)),o):(o.eventSystemFlags|=x,c=o.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),o)}function BM(o,c,m,x,E){switch(c){case"focusin":return $c=Qm($c,o,c,m,x,E),!0;case"dragenter":return $f=Qm($f,o,c,m,x,E),!0;case"mouseover":return eh=Qm(eh,o,c,m,x,E),!0;case"pointerover":var U=E.pointerId;return Jm.set(U,Qm(Jm.get(U)||null,o,c,m,x,E)),!0;case"gotpointercapture":return U=E.pointerId,Zm.set(U,Qm(Zm.get(U)||null,o,c,m,x,E)),!0}return!1}function Ax(o){var c=K(o.target);if(c!==null){var m=s(c);if(m!==null){if(c=m.tag,c===13){if(c=a(m),c!==null){o.blockedOn=c,ti(o.priority,function(){if(m.tag===13){var x=Sr();x=sn(x);var E=Al(m,x);E!==null&&oa(E,m,x),Ry(m,x)}});return}}else if(c===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function zv(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var m=By(o.nativeEvent);if(m===null){m=o.nativeEvent;var x=new m.constructor(m.type,m);no=x,m.target.dispatchEvent(x),no=null}else return c=le(m),c!==null&&yx(c),o.blockedOn=m,!1;c.shift()}return!0}function Sx(o,c,m){zv(o)&&m.delete(c)}function UM(){Hv=!1,$c!==null&&zv($c)&&($c=null),$f!==null&&zv($f)&&($f=null),eh!==null&&zv(eh)&&(eh=null),Jm.forEach(Sx),Zm.forEach(Sx)}function Vv(o,c){o.blockedOn===c&&(o.blockedOn=null,Hv||(Hv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,UM)))}var kv=null;function bx(o){kv!==o&&(kv=o,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){kv===o&&(kv=null);for(var c=0;c<o.length;c+=3){var m=o[c],x=o[c+1],E=o[c+2];if(typeof x!="function"){if(Uy(x||m)===null)continue;break}var U=le(m);U!==null&&(o.splice(c,3),c-=3,Qh(U,{pending:!0,data:E,method:m.method,action:x},x,E))}}))}function $m(o){function c(Te){return Vv(Te,o)}$c!==null&&Vv($c,o),$f!==null&&Vv($f,o),eh!==null&&Vv(eh,o),Jm.forEach(c),Zm.forEach(c);for(var m=0;m<th.length;m++){var x=th[m];x.blockedOn===o&&(x.blockedOn=null)}for(;0<th.length&&(m=th[0],m.blockedOn===null);)Ax(m),m.blockedOn===null&&th.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(x=0;x<m.length;x+=3){var E=m[x],U=m[x+1],W=E[Ai]||null;if(typeof U=="function")W||bx(m);else if(W){var ae=null;if(U&&U.hasAttribute("formAction")){if(E=U,W=U[Ai]||null)ae=W.formAction;else if(Uy(E)!==null)continue}else ae=W.action;typeof ae=="function"?m[x+1]=ae:(m.splice(x,3),x-=3),bx(m)}}}function Oy(o){this._internalRoot=o}Xv.prototype.render=Oy.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(i(409));var m=c.current,x=Sr();Cy(m,x,o,c,null,null)},Xv.prototype.unmount=Oy.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;Cy(o.current,2,null,o,null,null),Gl(),c[Di]=null}};function Xv(o){this._internalRoot=o}Xv.prototype.unstable_scheduleHydration=function(o){if(o){var c=nn();o={blockedOn:null,target:o,priority:c};for(var m=0;m<th.length&&c!==0&&c<th[m].priority;m++);th.splice(m,0,o),m===0&&Ax(o)}};var Mx=e.version;if(Mx!=="19.1.0")throw Error(i(527,Mx,"19.1.0"));ee.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=u(c),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var OM={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wv.isDisabled&&Wv.supportsFiber)try{Ye=Wv.inject(OM),it=Wv}catch{}}return Py.createRoot=function(o,c){if(!r(o))throw Error(i(299));var m=!1,x="",E=zf,U=Vf,W=Sv,ae=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(U=c.onCaughtError),c.onRecoverableError!==void 0&&(W=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(ae=c.unstable_transitionCallbacks)),c=gx(o,1,!1,null,null,m,x,E,U,W,ae,null),o[Di]=c.current,xy(o),new Oy(c)},Py.hydrateRoot=function(o,c,m){if(!r(o))throw Error(i(299));var x=!1,E="",U=zf,W=Vf,ae=Sv,Te=null,Je=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(U=m.onUncaughtError),m.onCaughtError!==void 0&&(W=m.onCaughtError),m.onRecoverableError!==void 0&&(ae=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Te=m.unstable_transitionCallbacks),m.formState!==void 0&&(Je=m.formState)),c=gx(o,1,!0,c,m??null,x,E,U,W,ae,Te,Je),c.context=vx(null),m=c.current,x=Sr(),x=sn(x),E=Tl(x),E.callback=null,El(m,E,x),m=x,c.current.lanes=m,dt(c,m),nc(c),o[Di]=c.current,xy(o),new Xv(c)},Py.version="19.1.0",Py}var kR;function EH(){if(kR)return FM.exports;kR=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),FM.exports=TH(),FM.exports}var CH=EH(),we=Q0();const Tg=ub(we);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const $0="176",vg={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},yg={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},fL=0,LE=1,hL=2,wH=3,dL=0,cb=1,d1=2,lf=3,gh=0,hl=1,Ru=2,oh=0,Ig=1,ZA=2,PE=3,NE=4,pL=5,Hp=100,mL=101,gL=102,vL=103,yL=104,_L=200,xL=201,AL=202,SL=203,QA=204,$A=205,bL=206,ML=207,TL=208,EL=209,CL=210,wL=211,RL=212,DL=213,BL=214,eS=0,tS=1,nS=2,Wg=3,iS=4,rS=5,sS=6,aS=7,__=0,UL=1,OL=2,lh=0,LL=1,PL=2,NL=3,n2=4,IL=5,FL=6,GL=7,IE="attached",HL="detached",jp=300,vh=301,qp=302,O0=303,G1=304,ey=306,Kp=1e3,Is=1001,L0=1002,Ra=1003,fb=1004,RH=1004,Eg=1005,DH=1005,qi=1006,C0=1007,BH=1007,pc=1008,FE=1008,dl=1009,hb=1010,db=1011,P0=1012,x_=1013,yh=1014,ss=1015,wa=1016,pb=1017,mb=1018,N0=1020,i2=35902,r2=1021,s2=1022,Fs=1023,I0=1026,F0=1027,A_=1028,S_=1029,a2=1030,gb=1031,UH=1032,vb=1033,p1=33776,m1=33777,g1=33778,v1=33779,oS=35840,lS=35841,uS=35842,cS=35843,fS=36196,hS=37492,dS=37496,pS=37808,mS=37809,gS=37810,vS=37811,yS=37812,_S=37813,xS=37814,AS=37815,SS=37816,bS=37817,MS=37818,TS=37819,ES=37820,CS=37821,y1=36492,wS=36494,RS=36495,o2=36283,DS=36284,BS=36285,US=36286,zL=2200,VL=2201,kL=2202,G0=2300,H0=2301,LA=2302,Cg=2400,wg=2401,H1=2402,yb=2500,l2=2501,XL=0,u2=1,OS=2,WL=3200,c2=3201,OH=3202,LH=3203,nm=0,YL=1,Sd="",$a="srgb",gf="srgb-linear",z1="linear",br="srgb",PH=0,_g=7680,NH=7681,IH=7682,FH=7683,GH=34055,HH=34056,zH=5386,VH=512,kH=513,XH=514,WH=515,YH=516,jH=517,qH=518,GE=519,jL=512,qL=513,KL=514,f2=515,JL=516,ZL=517,QL=518,$L=519,V1=35044,KH=35048,JH=35040,ZH=35045,QH=35049,$H=35041,ez=35046,tz=35050,nz=35042,iz="100",HE="300 es",mc=2e3,k1=2001,rz={COMPUTE:"compute",RENDER:"render"},sz={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},az={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};let _h=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const Mo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let XR=1234567;const Fg=Math.PI/180,z0=180/Math.PI;function Du(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Mo[n&255]+Mo[n>>8&255]+Mo[n>>16&255]+Mo[n>>24&255]+"-"+Mo[e&255]+Mo[e>>8&255]+"-"+Mo[e>>16&15|64]+Mo[e>>24&255]+"-"+Mo[t&63|128]+Mo[t>>8&255]+"-"+Mo[t>>16&255]+Mo[t>>24&255]+Mo[i&255]+Mo[i>>8&255]+Mo[i>>16&255]+Mo[i>>24&255]).toLowerCase()}function Jn(n,e,t){return Math.max(e,Math.min(t,n))}function h2(n,e){return(n%e+e)%e}function oz(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function lz(n,e,t){return n!==e?(t-n)/(e-n):0}function _1(n,e,t){return(1-t)*n+t*e}function uz(n,e,t,i){return _1(n,e,1-Math.exp(-t*i))}function cz(n,e=1){return e-Math.abs(h2(n,e*2)-e)}function fz(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function hz(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function dz(n,e){return n+Math.floor(Math.random()*(e-n+1))}function pz(n,e){return n+Math.random()*(e-n)}function mz(n){return n*(.5-Math.random())}function gz(n){n!==void 0&&(XR=n);let e=XR+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function vz(n){return n*Fg}function yz(n){return n*z0}function _z(n){return(n&n-1)===0&&n!==0}function xz(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Az(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Sz(n,e,t,i,r){const s=Math.cos,a=Math.sin,l=s(t/2),u=a(t/2),f=s((e+i)/2),d=a((e+i)/2),v=s((e-i)/2),y=a((e-i)/2),A=s((i-e)/2),b=a((i-e)/2);switch(r){case"XYX":n.set(l*d,u*v,u*y,l*f);break;case"YZY":n.set(u*y,l*d,u*v,l*f);break;case"ZXZ":n.set(u*v,u*y,l*d,l*f);break;case"XZX":n.set(l*d,u*b,u*A,l*f);break;case"YXY":n.set(u*A,l*d,u*b,l*f);break;case"ZYZ":n.set(u*b,u*A,l*d,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function ll(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function si(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const eP={DEG2RAD:Fg,RAD2DEG:z0,generateUUID:Du,clamp:Jn,euclideanModulo:h2,mapLinear:oz,inverseLerp:lz,lerp:_1,damp:uz,pingpong:cz,smoothstep:fz,smootherstep:hz,randInt:dz,randFloat:pz,randFloatSpread:mz,seededRandom:gz,degToRad:vz,radToDeg:yz,isPowerOfTwo:_z,ceilPowerOfTwo:xz,floorPowerOfTwo:Az,setQuaternionFromProperEuler:Sz,normalize:si,denormalize:ll};class xt{constructor(e=0,t=0){xt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Jn(this.x,e.x,t.x),this.y=Jn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Jn(this.x,e,t),this.y=Jn(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Jn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Kn{constructor(e,t,i,r,s,a,l,u,f){Kn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,l,u,f)}set(e,t,i,r,s,a,l,u,f){const d=this.elements;return d[0]=e,d[1]=r,d[2]=l,d[3]=t,d[4]=s,d[5]=u,d[6]=i,d[7]=a,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],l=i[3],u=i[6],f=i[1],d=i[4],v=i[7],y=i[2],A=i[5],b=i[8],C=r[0],T=r[3],M=r[6],B=r[1],D=r[4],O=r[7],P=r[2],F=r[5],V=r[8];return s[0]=a*C+l*B+u*P,s[3]=a*T+l*D+u*F,s[6]=a*M+l*O+u*V,s[1]=f*C+d*B+v*P,s[4]=f*T+d*D+v*F,s[7]=f*M+d*O+v*V,s[2]=y*C+A*B+b*P,s[5]=y*T+A*D+b*F,s[8]=y*M+A*O+b*V,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],f=e[7],d=e[8];return t*a*d-t*l*f-i*s*d+i*l*u+r*s*f-r*a*u}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],f=e[7],d=e[8],v=d*a-l*f,y=l*u-d*s,A=f*s-a*u,b=t*v+i*y+r*A;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/b;return e[0]=v*C,e[1]=(r*f-d*i)*C,e[2]=(l*i-r*a)*C,e[3]=y*C,e[4]=(d*t-r*u)*C,e[5]=(r*s-l*t)*C,e[6]=A*C,e[7]=(i*u-f*t)*C,e[8]=(a*t-i*s)*C,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,l){const u=Math.cos(s),f=Math.sin(s);return this.set(i*u,i*f,-i*(u*a+f*l)+a+e,-r*f,r*u,-r*(-f*a+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(kM.makeScale(e,t)),this}rotate(e){return this.premultiply(kM.makeRotation(-e)),this}translate(e,t){return this.premultiply(kM.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const kM=new Kn;function tP(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const bz={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function m0(n,e){return new bz[n](e)}function X1(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function nP(){const n=X1("canvas");return n.style.display="block",n}const WR={};function PA(n){n in WR||(WR[n]=!0,console.warn(n))}function Mz(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function Tz(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function Ez(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const YR=new Kn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),jR=new Kn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Cz(){const n={enabled:!0,workingColorSpace:gf,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===br&&(r.r=Ed(r.r),r.g=Ed(r.g),r.b=Ed(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===br&&(r.r=w0(r.r),r.g=w0(r.g),r.b=w0(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Sd?z1:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[gf]:{primaries:e,whitePoint:i,transfer:z1,toXYZ:YR,fromXYZ:jR,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:$a},outputColorSpaceConfig:{drawingBufferColorSpace:$a}},[$a]:{primaries:e,whitePoint:i,transfer:br,toXYZ:YR,fromXYZ:jR,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:$a}}}),n}const Ni=Cz();function Ed(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function w0(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Yv;class iP{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Yv===void 0&&(Yv=X1("canvas")),Yv.width=e.width,Yv.height=e.height;const r=Yv.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Yv}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=X1("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Ed(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ed(t[i]/255)*255):t[i]=Ed(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let wz=0;class zp{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:wz++}),this.uuid=Du(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,l=r.length;a<l;a++)r[a].isDataTexture?s.push(XM(r[a].image)):s.push(XM(r[a]))}else s=XM(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function XM(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?iP.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Rz=0;class ar extends _h{constructor(e=ar.DEFAULT_IMAGE,t=ar.DEFAULT_MAPPING,i=Is,r=Is,s=qi,a=pc,l=Fs,u=dl,f=ar.DEFAULT_ANISOTROPY,d=Sd){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Rz++}),this.uuid=Du(),this.name="",this.source=new zp(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=u,this.offset=new xt(0,0),this.repeat=new xt(1,1),this.center=new xt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Kn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isTextureArray=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isTextureArray=e.isTextureArray,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jp)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Kp:e.x=e.x-Math.floor(e.x);break;case Is:e.x=e.x<0?0:1;break;case L0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Kp:e.y=e.y-Math.floor(e.y);break;case Is:e.y=e.y<0?0:1;break;case L0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ar.DEFAULT_IMAGE=null;ar.DEFAULT_MAPPING=jp;ar.DEFAULT_ANISOTROPY=1;class Ii{constructor(e=0,t=0,i=0,r=1){Ii.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const u=e.elements,f=u[0],d=u[4],v=u[8],y=u[1],A=u[5],b=u[9],C=u[2],T=u[6],M=u[10];if(Math.abs(d-y)<.01&&Math.abs(v-C)<.01&&Math.abs(b-T)<.01){if(Math.abs(d+y)<.1&&Math.abs(v+C)<.1&&Math.abs(b+T)<.1&&Math.abs(f+A+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(f+1)/2,O=(A+1)/2,P=(M+1)/2,F=(d+y)/4,V=(v+C)/4,G=(b+T)/4;return D>O&&D>P?D<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(D),r=F/i,s=V/i):O>P?O<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(O),i=F/r,s=G/r):P<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(P),i=V/s,r=G/s),this.set(i,r,s,t),this}let B=Math.sqrt((T-b)*(T-b)+(v-C)*(v-C)+(y-d)*(y-d));return Math.abs(B)<.001&&(B=1),this.x=(T-b)/B,this.y=(v-C)/B,this.z=(y-d)/B,this.w=Math.acos((f+A+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Jn(this.x,e.x,t.x),this.y=Jn(this.y,e.y,t.y),this.z=Jn(this.z,e.z,t.z),this.w=Jn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Jn(this.x,e,t),this.y=Jn(this.y,e,t),this.z=Jn(this.z,e,t),this.w=Jn(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class _b extends _h{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth?i.depth:1,this.scissor=new Ii(0,0,e,t),this.scissorTest=!1,this.viewport=new Ii(0,0,e,t);const r={width:e,height:t,depth:this.depth};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:qi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,multiview:!1},i);const s=new ar(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let l=0;l<a;l++)this.textures[l]=s.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new zp(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class _c extends _b{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class b_ extends ar{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ra,this.minFilter=Ra,this.wrapR=Is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Dz extends _c{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new b_(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class xb extends ar{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ra,this.minFilter=Ra,this.wrapR=Is,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Bz extends _c{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new xb(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Da{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,l){let u=i[r+0],f=i[r+1],d=i[r+2],v=i[r+3];const y=s[a+0],A=s[a+1],b=s[a+2],C=s[a+3];if(l===0){e[t+0]=u,e[t+1]=f,e[t+2]=d,e[t+3]=v;return}if(l===1){e[t+0]=y,e[t+1]=A,e[t+2]=b,e[t+3]=C;return}if(v!==C||u!==y||f!==A||d!==b){let T=1-l;const M=u*y+f*A+d*b+v*C,B=M>=0?1:-1,D=1-M*M;if(D>Number.EPSILON){const P=Math.sqrt(D),F=Math.atan2(P,M*B);T=Math.sin(T*F)/P,l=Math.sin(l*F)/P}const O=l*B;if(u=u*T+y*O,f=f*T+A*O,d=d*T+b*O,v=v*T+C*O,T===1-l){const P=1/Math.sqrt(u*u+f*f+d*d+v*v);u*=P,f*=P,d*=P,v*=P}}e[t]=u,e[t+1]=f,e[t+2]=d,e[t+3]=v}static multiplyQuaternionsFlat(e,t,i,r,s,a){const l=i[r],u=i[r+1],f=i[r+2],d=i[r+3],v=s[a],y=s[a+1],A=s[a+2],b=s[a+3];return e[t]=l*b+d*v+u*A-f*y,e[t+1]=u*b+d*y+f*v-l*A,e[t+2]=f*b+d*A+l*y-u*v,e[t+3]=d*b-l*v-u*y-f*A,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,l=Math.cos,u=Math.sin,f=l(i/2),d=l(r/2),v=l(s/2),y=u(i/2),A=u(r/2),b=u(s/2);switch(a){case"XYZ":this._x=y*d*v+f*A*b,this._y=f*A*v-y*d*b,this._z=f*d*b+y*A*v,this._w=f*d*v-y*A*b;break;case"YXZ":this._x=y*d*v+f*A*b,this._y=f*A*v-y*d*b,this._z=f*d*b-y*A*v,this._w=f*d*v+y*A*b;break;case"ZXY":this._x=y*d*v-f*A*b,this._y=f*A*v+y*d*b,this._z=f*d*b+y*A*v,this._w=f*d*v-y*A*b;break;case"ZYX":this._x=y*d*v-f*A*b,this._y=f*A*v+y*d*b,this._z=f*d*b-y*A*v,this._w=f*d*v+y*A*b;break;case"YZX":this._x=y*d*v+f*A*b,this._y=f*A*v+y*d*b,this._z=f*d*b-y*A*v,this._w=f*d*v-y*A*b;break;case"XZY":this._x=y*d*v-f*A*b,this._y=f*A*v-y*d*b,this._z=f*d*b+y*A*v,this._w=f*d*v+y*A*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],l=t[5],u=t[9],f=t[2],d=t[6],v=t[10],y=i+l+v;if(y>0){const A=.5/Math.sqrt(y+1);this._w=.25/A,this._x=(d-u)*A,this._y=(s-f)*A,this._z=(a-r)*A}else if(i>l&&i>v){const A=2*Math.sqrt(1+i-l-v);this._w=(d-u)/A,this._x=.25*A,this._y=(r+a)/A,this._z=(s+f)/A}else if(l>v){const A=2*Math.sqrt(1+l-i-v);this._w=(s-f)/A,this._x=(r+a)/A,this._y=.25*A,this._z=(u+d)/A}else{const A=2*Math.sqrt(1+v-i-l);this._w=(a-r)/A,this._x=(s+f)/A,this._y=(u+d)/A,this._z=.25*A}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Jn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,l=t._x,u=t._y,f=t._z,d=t._w;return this._x=i*d+a*l+r*f-s*u,this._y=r*d+a*u+s*l-i*f,this._z=s*d+a*f+i*u-r*l,this._w=a*d-i*l-r*u-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let l=a*e._w+i*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const A=1-t;return this._w=A*a+t*this._w,this._x=A*i+t*this._x,this._y=A*r+t*this._y,this._z=A*s+t*this._z,this.normalize(),this}const f=Math.sqrt(u),d=Math.atan2(f,l),v=Math.sin((1-t)*d)/f,y=Math.sin(t*d)/f;return this._w=a*v+this._w*y,this._x=i*v+this._x*y,this._y=r*v+this._y*y,this._z=s*v+this._z*y,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class he{constructor(e=0,t=0,i=0){he.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(qR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(qR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,l=e.z,u=e.w,f=2*(a*r-l*i),d=2*(l*t-s*r),v=2*(s*i-a*t);return this.x=t+u*f+a*v-l*d,this.y=i+u*d+l*f-s*v,this.z=r+u*v+s*d-a*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Jn(this.x,e.x,t.x),this.y=Jn(this.y,e.y,t.y),this.z=Jn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Jn(this.x,e,t),this.y=Jn(this.y,e,t),this.z=Jn(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jn(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,l=t.y,u=t.z;return this.x=r*u-s*l,this.y=s*a-i*u,this.z=i*l-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return WM.copy(this).projectOnVector(e),this.sub(WM)}reflect(e){return this.sub(WM.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Jn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const WM=new he,qR=new Da;class la{constructor(e=new he(1/0,1/0,1/0),t=new he(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(tf.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(tf.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=tf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,l=s.count;a<l;a++)e.isMesh===!0?e.getVertexPosition(a,tf):tf.fromBufferAttribute(s,a),tf.applyMatrix4(e.matrixWorld),this.expandByPoint(tf);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Ex.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Ex.copy(i.boundingBox)),Ex.applyMatrix4(e.matrixWorld),this.union(Ex)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,tf),tf.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ny),Cx.subVectors(this.max,Ny),jv.subVectors(e.a,Ny),qv.subVectors(e.b,Ny),Kv.subVectors(e.c,Ny),wp.subVectors(qv,jv),Rp.subVectors(Kv,qv),eg.subVectors(jv,Kv);let t=[0,-wp.z,wp.y,0,-Rp.z,Rp.y,0,-eg.z,eg.y,wp.z,0,-wp.x,Rp.z,0,-Rp.x,eg.z,0,-eg.x,-wp.y,wp.x,0,-Rp.y,Rp.x,0,-eg.y,eg.x,0];return!YM(t,jv,qv,Kv,Cx)||(t=[1,0,0,0,1,0,0,0,1],!YM(t,jv,qv,Kv,Cx))?!1:(wx.crossVectors(wp,Rp),t=[wx.x,wx.y,wx.z],YM(t,jv,qv,Kv,Cx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,tf).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(tf).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(hd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hd),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const hd=[new he,new he,new he,new he,new he,new he,new he,new he],tf=new he,Ex=new la,jv=new he,qv=new he,Kv=new he,wp=new he,Rp=new he,eg=new he,Ny=new he,Cx=new he,wx=new he,tg=new he;function YM(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){tg.fromArray(n,s);const l=r.x*Math.abs(tg.x)+r.y*Math.abs(tg.y)+r.z*Math.abs(tg.z),u=e.dot(tg),f=t.dot(tg),d=i.dot(tg);if(Math.max(-Math.max(u,f,d),Math.min(u,f,d))>l)return!1}return!0}const Uz=new la,Iy=new he,jM=new he;class ua{constructor(e=new he,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Uz.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Iy.subVectors(e,this.center);const t=Iy.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Iy,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(jM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Iy.copy(e.center).add(jM)),this.expandByPoint(Iy.copy(e.center).sub(jM))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const dd=new he,qM=new he,Rx=new he,Dp=new he,KM=new he,Dx=new he,JM=new he;class Qg{constructor(e=new he,t=new he(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,dd)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=dd.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(dd.copy(this.origin).addScaledVector(this.direction,t),dd.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){qM.copy(e).add(t).multiplyScalar(.5),Rx.copy(t).sub(e).normalize(),Dp.copy(this.origin).sub(qM);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Rx),l=Dp.dot(this.direction),u=-Dp.dot(Rx),f=Dp.lengthSq(),d=Math.abs(1-a*a);let v,y,A,b;if(d>0)if(v=a*u-l,y=a*l-u,b=s*d,v>=0)if(y>=-b)if(y<=b){const C=1/d;v*=C,y*=C,A=v*(v+a*y+2*l)+y*(a*v+y+2*u)+f}else y=s,v=Math.max(0,-(a*y+l)),A=-v*v+y*(y+2*u)+f;else y=-s,v=Math.max(0,-(a*y+l)),A=-v*v+y*(y+2*u)+f;else y<=-b?(v=Math.max(0,-(-a*s+l)),y=v>0?-s:Math.min(Math.max(-s,-u),s),A=-v*v+y*(y+2*u)+f):y<=b?(v=0,y=Math.min(Math.max(-s,-u),s),A=y*(y+2*u)+f):(v=Math.max(0,-(a*s+l)),y=v>0?s:Math.min(Math.max(-s,-u),s),A=-v*v+y*(y+2*u)+f);else y=a>0?-s:s,v=Math.max(0,-(a*y+l)),A=-v*v+y*(y+2*u)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,v),r&&r.copy(qM).addScaledVector(Rx,y),A}intersectSphere(e,t){dd.subVectors(e.center,this.origin);const i=dd.dot(this.direction),r=dd.dot(dd)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),l=i-a,u=i+a;return u<0?null:l<0?this.at(u,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,l,u;const f=1/this.direction.x,d=1/this.direction.y,v=1/this.direction.z,y=this.origin;return f>=0?(i=(e.min.x-y.x)*f,r=(e.max.x-y.x)*f):(i=(e.max.x-y.x)*f,r=(e.min.x-y.x)*f),d>=0?(s=(e.min.y-y.y)*d,a=(e.max.y-y.y)*d):(s=(e.max.y-y.y)*d,a=(e.min.y-y.y)*d),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),v>=0?(l=(e.min.z-y.z)*v,u=(e.max.z-y.z)*v):(l=(e.max.z-y.z)*v,u=(e.min.z-y.z)*v),i>u||l>r)||((l>i||i!==i)&&(i=l),(u<r||r!==r)&&(r=u),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,dd)!==null}intersectTriangle(e,t,i,r,s){KM.subVectors(t,e),Dx.subVectors(i,e),JM.crossVectors(KM,Dx);let a=this.direction.dot(JM),l;if(a>0){if(r)return null;l=1}else if(a<0)l=-1,a=-a;else return null;Dp.subVectors(this.origin,e);const u=l*this.direction.dot(Dx.crossVectors(Dp,Dx));if(u<0)return null;const f=l*this.direction.dot(KM.cross(Dp));if(f<0||u+f>a)return null;const d=-l*Dp.dot(JM);return d<0?null:this.at(d/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Tn{constructor(e,t,i,r,s,a,l,u,f,d,v,y,A,b,C,T){Tn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,l,u,f,d,v,y,A,b,C,T)}set(e,t,i,r,s,a,l,u,f,d,v,y,A,b,C,T){const M=this.elements;return M[0]=e,M[4]=t,M[8]=i,M[12]=r,M[1]=s,M[5]=a,M[9]=l,M[13]=u,M[2]=f,M[6]=d,M[10]=v,M[14]=y,M[3]=A,M[7]=b,M[11]=C,M[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Tn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Jv.setFromMatrixColumn(e,0).length(),s=1/Jv.setFromMatrixColumn(e,1).length(),a=1/Jv.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),l=Math.sin(i),u=Math.cos(r),f=Math.sin(r),d=Math.cos(s),v=Math.sin(s);if(e.order==="XYZ"){const y=a*d,A=a*v,b=l*d,C=l*v;t[0]=u*d,t[4]=-u*v,t[8]=f,t[1]=A+b*f,t[5]=y-C*f,t[9]=-l*u,t[2]=C-y*f,t[6]=b+A*f,t[10]=a*u}else if(e.order==="YXZ"){const y=u*d,A=u*v,b=f*d,C=f*v;t[0]=y+C*l,t[4]=b*l-A,t[8]=a*f,t[1]=a*v,t[5]=a*d,t[9]=-l,t[2]=A*l-b,t[6]=C+y*l,t[10]=a*u}else if(e.order==="ZXY"){const y=u*d,A=u*v,b=f*d,C=f*v;t[0]=y-C*l,t[4]=-a*v,t[8]=b+A*l,t[1]=A+b*l,t[5]=a*d,t[9]=C-y*l,t[2]=-a*f,t[6]=l,t[10]=a*u}else if(e.order==="ZYX"){const y=a*d,A=a*v,b=l*d,C=l*v;t[0]=u*d,t[4]=b*f-A,t[8]=y*f+C,t[1]=u*v,t[5]=C*f+y,t[9]=A*f-b,t[2]=-f,t[6]=l*u,t[10]=a*u}else if(e.order==="YZX"){const y=a*u,A=a*f,b=l*u,C=l*f;t[0]=u*d,t[4]=C-y*v,t[8]=b*v+A,t[1]=v,t[5]=a*d,t[9]=-l*d,t[2]=-f*d,t[6]=A*v+b,t[10]=y-C*v}else if(e.order==="XZY"){const y=a*u,A=a*f,b=l*u,C=l*f;t[0]=u*d,t[4]=-v,t[8]=f*d,t[1]=y*v+C,t[5]=a*d,t[9]=A*v-b,t[2]=b*v-A,t[6]=l*d,t[10]=C*v+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Oz,e,Lz)}lookAt(e,t,i){const r=this.elements;return Cu.subVectors(e,t),Cu.lengthSq()===0&&(Cu.z=1),Cu.normalize(),Bp.crossVectors(i,Cu),Bp.lengthSq()===0&&(Math.abs(i.z)===1?Cu.x+=1e-4:Cu.z+=1e-4,Cu.normalize(),Bp.crossVectors(i,Cu)),Bp.normalize(),Bx.crossVectors(Cu,Bp),r[0]=Bp.x,r[4]=Bx.x,r[8]=Cu.x,r[1]=Bp.y,r[5]=Bx.y,r[9]=Cu.y,r[2]=Bp.z,r[6]=Bx.z,r[10]=Cu.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],l=i[4],u=i[8],f=i[12],d=i[1],v=i[5],y=i[9],A=i[13],b=i[2],C=i[6],T=i[10],M=i[14],B=i[3],D=i[7],O=i[11],P=i[15],F=r[0],V=r[4],G=r[8],I=r[12],N=r[1],Q=r[5],$=r[9],te=r[13],se=r[2],ye=r[6],k=r[10],ee=r[14],ne=r[3],de=r[7],X=r[11],J=r[15];return s[0]=a*F+l*N+u*se+f*ne,s[4]=a*V+l*Q+u*ye+f*de,s[8]=a*G+l*$+u*k+f*X,s[12]=a*I+l*te+u*ee+f*J,s[1]=d*F+v*N+y*se+A*ne,s[5]=d*V+v*Q+y*ye+A*de,s[9]=d*G+v*$+y*k+A*X,s[13]=d*I+v*te+y*ee+A*J,s[2]=b*F+C*N+T*se+M*ne,s[6]=b*V+C*Q+T*ye+M*de,s[10]=b*G+C*$+T*k+M*X,s[14]=b*I+C*te+T*ee+M*J,s[3]=B*F+D*N+O*se+P*ne,s[7]=B*V+D*Q+O*ye+P*de,s[11]=B*G+D*$+O*k+P*X,s[15]=B*I+D*te+O*ee+P*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],l=e[5],u=e[9],f=e[13],d=e[2],v=e[6],y=e[10],A=e[14],b=e[3],C=e[7],T=e[11],M=e[15];return b*(+s*u*v-r*f*v-s*l*y+i*f*y+r*l*A-i*u*A)+C*(+t*u*A-t*f*y+s*a*y-r*a*A+r*f*d-s*u*d)+T*(+t*f*v-t*l*A-s*a*v+i*a*A+s*l*d-i*f*d)+M*(-r*l*d-t*u*v+t*l*y+r*a*v-i*a*y+i*u*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],f=e[7],d=e[8],v=e[9],y=e[10],A=e[11],b=e[12],C=e[13],T=e[14],M=e[15],B=v*T*f-C*y*f+C*u*A-l*T*A-v*u*M+l*y*M,D=b*y*f-d*T*f-b*u*A+a*T*A+d*u*M-a*y*M,O=d*C*f-b*v*f+b*l*A-a*C*A-d*l*M+a*v*M,P=b*v*u-d*C*u-b*l*y+a*C*y+d*l*T-a*v*T,F=t*B+i*D+r*O+s*P;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/F;return e[0]=B*V,e[1]=(C*y*s-v*T*s-C*r*A+i*T*A+v*r*M-i*y*M)*V,e[2]=(l*T*s-C*u*s+C*r*f-i*T*f-l*r*M+i*u*M)*V,e[3]=(v*u*s-l*y*s-v*r*f+i*y*f+l*r*A-i*u*A)*V,e[4]=D*V,e[5]=(d*T*s-b*y*s+b*r*A-t*T*A-d*r*M+t*y*M)*V,e[6]=(b*u*s-a*T*s-b*r*f+t*T*f+a*r*M-t*u*M)*V,e[7]=(a*y*s-d*u*s+d*r*f-t*y*f-a*r*A+t*u*A)*V,e[8]=O*V,e[9]=(b*v*s-d*C*s-b*i*A+t*C*A+d*i*M-t*v*M)*V,e[10]=(a*C*s-b*l*s+b*i*f-t*C*f-a*i*M+t*l*M)*V,e[11]=(d*l*s-a*v*s-d*i*f+t*v*f+a*i*A-t*l*A)*V,e[12]=P*V,e[13]=(d*C*r-b*v*r+b*i*y-t*C*y-d*i*T+t*v*T)*V,e[14]=(b*l*r-a*C*r-b*i*u+t*C*u+a*i*T-t*l*T)*V,e[15]=(a*v*r-d*l*r+d*i*u-t*v*u-a*i*y+t*l*y)*V,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,l=e.y,u=e.z,f=s*a,d=s*l;return this.set(f*a+i,f*l-r*u,f*u+r*l,0,f*l+r*u,d*l+i,d*u-r*a,0,f*u-r*l,d*u+r*a,s*u*u+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,l=t._z,u=t._w,f=s+s,d=a+a,v=l+l,y=s*f,A=s*d,b=s*v,C=a*d,T=a*v,M=l*v,B=u*f,D=u*d,O=u*v,P=i.x,F=i.y,V=i.z;return r[0]=(1-(C+M))*P,r[1]=(A+O)*P,r[2]=(b-D)*P,r[3]=0,r[4]=(A-O)*F,r[5]=(1-(y+M))*F,r[6]=(T+B)*F,r[7]=0,r[8]=(b+D)*V,r[9]=(T-B)*V,r[10]=(1-(y+C))*V,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Jv.set(r[0],r[1],r[2]).length();const a=Jv.set(r[4],r[5],r[6]).length(),l=Jv.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],nf.copy(this);const f=1/s,d=1/a,v=1/l;return nf.elements[0]*=f,nf.elements[1]*=f,nf.elements[2]*=f,nf.elements[4]*=d,nf.elements[5]*=d,nf.elements[6]*=d,nf.elements[8]*=v,nf.elements[9]*=v,nf.elements[10]*=v,t.setFromRotationMatrix(nf),i.x=s,i.y=a,i.z=l,this}makePerspective(e,t,i,r,s,a,l=mc){const u=this.elements,f=2*s/(t-e),d=2*s/(i-r),v=(t+e)/(t-e),y=(i+r)/(i-r);let A,b;if(l===mc)A=-(a+s)/(a-s),b=-2*a*s/(a-s);else if(l===k1)A=-a/(a-s),b=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return u[0]=f,u[4]=0,u[8]=v,u[12]=0,u[1]=0,u[5]=d,u[9]=y,u[13]=0,u[2]=0,u[6]=0,u[10]=A,u[14]=b,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,i,r,s,a,l=mc){const u=this.elements,f=1/(t-e),d=1/(i-r),v=1/(a-s),y=(t+e)*f,A=(i+r)*d;let b,C;if(l===mc)b=(a+s)*v,C=-2*v;else if(l===k1)b=s*v,C=-1*v;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return u[0]=2*f,u[4]=0,u[8]=0,u[12]=-y,u[1]=0,u[5]=2*d,u[9]=0,u[13]=-A,u[2]=0,u[6]=0,u[10]=C,u[14]=-b,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Jv=new he,nf=new Tn,Oz=new he(0,0,0),Lz=new he(1,1,1),Bp=new he,Bx=new he,Cu=new he,KR=new Tn,JR=new Da;class Bu{constructor(e=0,t=0,i=0,r=Bu.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],l=r[8],u=r[1],f=r[5],d=r[9],v=r[2],y=r[6],A=r[10];switch(t){case"XYZ":this._y=Math.asin(Jn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,A),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(y,f),this._z=0);break;case"YXZ":this._x=Math.asin(-Jn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,A),this._z=Math.atan2(u,f)):(this._y=Math.atan2(-v,s),this._z=0);break;case"ZXY":this._x=Math.asin(Jn(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(-v,A),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-Jn(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(y,A),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(Jn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-v,s)):(this._x=0,this._y=Math.atan2(l,A));break;case"XZY":this._z=Math.asin(-Jn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(y,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-d,A),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return KR.makeRotationFromQuaternion(e),this.setFromRotationMatrix(KR,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return JR.setFromEuler(this),this.setFromQuaternion(JR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Bu.DEFAULT_ORDER="XYZ";class V0{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Pz=0;const ZR=new he,Zv=new Da,pd=new Tn,Ux=new he,Fy=new he,Nz=new he,Iz=new Da,QR=new he(1,0,0),$R=new he(0,1,0),eD=new he(0,0,1),tD={type:"added"},Fz={type:"removed"},Qv={type:"childadded",child:null},ZM={type:"childremoved",child:null};class Fi extends _h{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pz++}),this.uuid=Du(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Fi.DEFAULT_UP.clone();const e=new he,t=new Bu,i=new Da,r=new he(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Tn},normalMatrix:{value:new Kn}}),this.matrix=new Tn,this.matrixWorld=new Tn,this.matrixAutoUpdate=Fi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Fi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new V0,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Zv.setFromAxisAngle(e,t),this.quaternion.multiply(Zv),this}rotateOnWorldAxis(e,t){return Zv.setFromAxisAngle(e,t),this.quaternion.premultiply(Zv),this}rotateX(e){return this.rotateOnAxis(QR,e)}rotateY(e){return this.rotateOnAxis($R,e)}rotateZ(e){return this.rotateOnAxis(eD,e)}translateOnAxis(e,t){return ZR.copy(e).applyQuaternion(this.quaternion),this.position.add(ZR.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(QR,e)}translateY(e){return this.translateOnAxis($R,e)}translateZ(e){return this.translateOnAxis(eD,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(pd.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Ux.copy(e):Ux.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Fy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pd.lookAt(Fy,Ux,this.up):pd.lookAt(Ux,Fy,this.up),this.quaternion.setFromRotationMatrix(pd),r&&(pd.extractRotation(r.matrixWorld),Zv.setFromRotationMatrix(pd),this.quaternion.premultiply(Zv.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(tD),Qv.child=e,this.dispatchEvent(Qv),Qv.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Fz),ZM.child=e,this.dispatchEvent(ZM),ZM.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),pd.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),pd.multiply(e.parent.matrixWorld)),e.applyMatrix4(pd),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(tD),Qv.child=e,this.dispatchEvent(Qv),Qv.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fy,e,Nz),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fy,Iz,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?{min:l.boundingBox.min.toArray(),max:l.boundingBox.max.toArray()}:void 0,boundingSphere:l.boundingSphere?{radius:l.boundingSphere.radius,center:l.boundingSphere.center.toArray()}:void 0})),r.instanceInfo=this._instanceInfo.map(l=>({...l})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:this.boundingSphere.center.toArray(),radius:this.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:this.boundingBox.min.toArray(),max:this.boundingBox.max.toArray()}));function s(l,u){return l[u.uuid]===void 0&&(l[u.uuid]=u.toJSON(e)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const u=l.shapes;if(Array.isArray(u))for(let f=0,d=u.length;f<d;f++){const v=u[f];s(e.shapes,v)}else s(e.shapes,u)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let u=0,f=this.material.length;u<f;u++)l.push(s(e.materials,this.material[u]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const u=this.animations[l];r.animations.push(s(e.animations,u))}}if(t){const l=a(e.geometries),u=a(e.materials),f=a(e.textures),d=a(e.images),v=a(e.shapes),y=a(e.skeletons),A=a(e.animations),b=a(e.nodes);l.length>0&&(i.geometries=l),u.length>0&&(i.materials=u),f.length>0&&(i.textures=f),d.length>0&&(i.images=d),v.length>0&&(i.shapes=v),y.length>0&&(i.skeletons=y),A.length>0&&(i.animations=A),b.length>0&&(i.nodes=b)}return i.object=r,i;function a(l){const u=[];for(const f in l){const d=l[f];delete d.metadata,u.push(d)}return u}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Fi.DEFAULT_UP=new he(0,1,0);Fi.DEFAULT_MATRIX_AUTO_UPDATE=!0;Fi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const rf=new he,md=new he,QM=new he,gd=new he,$v=new he,e0=new he,nD=new he,$M=new he,eT=new he,tT=new he,nT=new Ii,iT=new Ii,rT=new Ii;class Xl{constructor(e=new he,t=new he,i=new he){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),rf.subVectors(e,t),r.cross(rf);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){rf.subVectors(r,t),md.subVectors(i,t),QM.subVectors(e,t);const a=rf.dot(rf),l=rf.dot(md),u=rf.dot(QM),f=md.dot(md),d=md.dot(QM),v=a*f-l*l;if(v===0)return s.set(0,0,0),null;const y=1/v,A=(f*u-l*d)*y,b=(a*d-l*u)*y;return s.set(1-A-b,b,A)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,gd)===null?!1:gd.x>=0&&gd.y>=0&&gd.x+gd.y<=1}static getInterpolation(e,t,i,r,s,a,l,u){return this.getBarycoord(e,t,i,r,gd)===null?(u.x=0,u.y=0,"z"in u&&(u.z=0),"w"in u&&(u.w=0),null):(u.setScalar(0),u.addScaledVector(s,gd.x),u.addScaledVector(a,gd.y),u.addScaledVector(l,gd.z),u)}static getInterpolatedAttribute(e,t,i,r,s,a){return nT.setScalar(0),iT.setScalar(0),rT.setScalar(0),nT.fromBufferAttribute(e,t),iT.fromBufferAttribute(e,i),rT.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(nT,s.x),a.addScaledVector(iT,s.y),a.addScaledVector(rT,s.z),a}static isFrontFacing(e,t,i,r){return rf.subVectors(i,t),md.subVectors(e,t),rf.cross(md).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return rf.subVectors(this.c,this.b),md.subVectors(this.a,this.b),rf.cross(md).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Xl.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Xl.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Xl.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Xl.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Xl.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,l;$v.subVectors(r,i),e0.subVectors(s,i),$M.subVectors(e,i);const u=$v.dot($M),f=e0.dot($M);if(u<=0&&f<=0)return t.copy(i);eT.subVectors(e,r);const d=$v.dot(eT),v=e0.dot(eT);if(d>=0&&v<=d)return t.copy(r);const y=u*v-d*f;if(y<=0&&u>=0&&d<=0)return a=u/(u-d),t.copy(i).addScaledVector($v,a);tT.subVectors(e,s);const A=$v.dot(tT),b=e0.dot(tT);if(b>=0&&A<=b)return t.copy(s);const C=A*f-u*b;if(C<=0&&f>=0&&b<=0)return l=f/(f-b),t.copy(i).addScaledVector(e0,l);const T=d*b-A*v;if(T<=0&&v-d>=0&&A-b>=0)return nD.subVectors(s,r),l=(v-d)/(v-d+(A-b)),t.copy(r).addScaledVector(nD,l);const M=1/(T+C+y);return a=C*M,l=y*M,t.copy(i).addScaledVector($v,a).addScaledVector(e0,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const rP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Up={h:0,s:0,l:0},Ox={h:0,s:0,l:0};function sT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class jt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=$a){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ni.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Ni.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ni.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Ni.workingColorSpace){if(e=h2(e,1),t=Jn(t,0,1),i=Jn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=sT(a,s,e+1/3),this.g=sT(a,s,e),this.b=sT(a,s,e-1/3)}return Ni.toWorkingColorSpace(this,r),this}setStyle(e,t=$a){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],l=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=$a){const i=rP[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ed(e.r),this.g=Ed(e.g),this.b=Ed(e.b),this}copyLinearToSRGB(e){return this.r=w0(e.r),this.g=w0(e.g),this.b=w0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=$a){return Ni.fromWorkingColorSpace(To.copy(this),e),Math.round(Jn(To.r*255,0,255))*65536+Math.round(Jn(To.g*255,0,255))*256+Math.round(Jn(To.b*255,0,255))}getHexString(e=$a){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ni.workingColorSpace){Ni.fromWorkingColorSpace(To.copy(this),t);const i=To.r,r=To.g,s=To.b,a=Math.max(i,r,s),l=Math.min(i,r,s);let u,f;const d=(l+a)/2;if(l===a)u=0,f=0;else{const v=a-l;switch(f=d<=.5?v/(a+l):v/(2-a-l),a){case i:u=(r-s)/v+(r<s?6:0);break;case r:u=(s-i)/v+2;break;case s:u=(i-r)/v+4;break}u/=6}return e.h=u,e.s=f,e.l=d,e}getRGB(e,t=Ni.workingColorSpace){return Ni.fromWorkingColorSpace(To.copy(this),t),e.r=To.r,e.g=To.g,e.b=To.b,e}getStyle(e=$a){Ni.fromWorkingColorSpace(To.copy(this),e);const t=To.r,i=To.g,r=To.b;return e!==$a?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Up),this.setHSL(Up.h+e,Up.s+t,Up.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Up),e.getHSL(Ox);const i=_1(Up.h,Ox.h,t),r=_1(Up.s,Ox.s,t),s=_1(Up.l,Ox.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const To=new jt;jt.NAMES=rP;let Gz=0;class ca extends _h{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Gz++}),this.uuid=Du(),this.name="",this.type="Material",this.blending=Ig,this.side=gh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=QA,this.blendDst=$A,this.blendEquation=Hp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new jt(0,0,0),this.blendAlpha=0,this.depthFunc=Wg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=GE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_g,this.stencilZFail=_g,this.stencilZPass=_g,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ig&&(i.blending=this.blending),this.side!==gh&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==QA&&(i.blendSrc=this.blendSrc),this.blendDst!==$A&&(i.blendDst=this.blendDst),this.blendEquation!==Hp&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Wg&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==GE&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==_g&&(i.stencilFail=this.stencilFail),this.stencilZFail!==_g&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==_g&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const l in s){const u=s[l];delete u.metadata,a.push(u)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ul extends ca{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bu,this.combine=__,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const bd=Hz();function Hz(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let u=0;u<256;++u){const f=u-127;f<-27?(i[u]=0,i[u|256]=32768,r[u]=24,r[u|256]=24):f<-14?(i[u]=1024>>-f-14,i[u|256]=1024>>-f-14|32768,r[u]=-f-1,r[u|256]=-f-1):f<=15?(i[u]=f+15<<10,i[u|256]=f+15<<10|32768,r[u]=13,r[u|256]=13):f<128?(i[u]=31744,i[u|256]=64512,r[u]=24,r[u|256]=24):(i[u]=31744,i[u|256]=64512,r[u]=13,r[u|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let u=1;u<1024;++u){let f=u<<13,d=0;for(;(f&8388608)===0;)f<<=1,d-=8388608;f&=-8388609,d+=947912704,s[u]=f|d}for(let u=1024;u<2048;++u)s[u]=939524096+(u-1024<<13);for(let u=1;u<31;++u)a[u]=u<<23;a[31]=1199570944,a[32]=2147483648;for(let u=33;u<63;++u)a[u]=2147483648+(u-32<<23);a[63]=3347054592;for(let u=1;u<64;++u)u!==32&&(l[u]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:l}}function kl(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Jn(n,-65504,65504),bd.floatView[0]=n;const e=bd.uint32View[0],t=e>>23&511;return bd.baseTable[t]+((e&8388607)>>bd.shiftTable[t])}function s1(n){const e=n>>10;return bd.uint32View[0]=bd.mantissaTable[bd.offsetTable[e]+(n&1023)]+bd.exponentTable[e],bd.floatView[0]}class Rg{static toHalfFloat(e){return kl(e)}static fromHalfFloat(e){return s1(e)}}const Js=new he,Lx=new xt;let zz=0;class Ki{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:zz++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=V1,this.updateRanges=[],this.gpuType=ss,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Lx.fromBufferAttribute(this,t),Lx.applyMatrix3(e),this.setXY(t,Lx.x,Lx.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.applyMatrix3(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.applyMatrix4(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.applyNormalMatrix(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.transformDirection(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ll(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=si(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ll(t,this.array)),t}setX(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ll(t,this.array)),t}setY(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ll(t,this.array)),t}setZ(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ll(t,this.array)),t}setW(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=si(t,this.array),i=si(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=si(t,this.array),i=si(i,this.array),r=si(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=si(t,this.array),i=si(i,this.array),r=si(r,this.array),s=si(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==V1&&(e.usage=this.usage),e}}class Vz extends Ki{constructor(e,t,i){super(new Int8Array(e),t,i)}}class kz extends Ki{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Xz extends Ki{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Wz extends Ki{constructor(e,t,i){super(new Int16Array(e),t,i)}}class d2 extends Ki{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Yz extends Ki{constructor(e,t,i){super(new Int32Array(e),t,i)}}class p2 extends Ki{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class jz extends Ki{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=s1(this.array[e*this.itemSize]);return this.normalized&&(t=ll(t,this.array)),t}setX(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize]=kl(t),this}getY(e){let t=s1(this.array[e*this.itemSize+1]);return this.normalized&&(t=ll(t,this.array)),t}setY(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize+1]=kl(t),this}getZ(e){let t=s1(this.array[e*this.itemSize+2]);return this.normalized&&(t=ll(t,this.array)),t}setZ(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize+2]=kl(t),this}getW(e){let t=s1(this.array[e*this.itemSize+3]);return this.normalized&&(t=ll(t,this.array)),t}setW(e,t){return this.normalized&&(t=si(t,this.array)),this.array[e*this.itemSize+3]=kl(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=si(t,this.array),i=si(i,this.array)),this.array[e+0]=kl(t),this.array[e+1]=kl(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=si(t,this.array),i=si(i,this.array),r=si(r,this.array)),this.array[e+0]=kl(t),this.array[e+1]=kl(i),this.array[e+2]=kl(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=si(t,this.array),i=si(i,this.array),r=si(r,this.array),s=si(s,this.array)),this.array[e+0]=kl(t),this.array[e+1]=kl(i),this.array[e+2]=kl(r),this.array[e+3]=kl(s),this}}class un extends Ki{constructor(e,t,i){super(new Float32Array(e),t,i)}}let qz=0;const sc=new Tn,aT=new Fi,t0=new he,wu=new la,Gy=new la,Ca=new he;class Qn extends _h{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:qz++}),this.uuid=Du(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(tP(e)?p2:d2)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Kn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return sc.makeRotationFromQuaternion(e),this.applyMatrix4(sc),this}rotateX(e){return sc.makeRotationX(e),this.applyMatrix4(sc),this}rotateY(e){return sc.makeRotationY(e),this.applyMatrix4(sc),this}rotateZ(e){return sc.makeRotationZ(e),this.applyMatrix4(sc),this}translate(e,t,i){return sc.makeTranslation(e,t,i),this.applyMatrix4(sc),this}scale(e,t,i){return sc.makeScale(e,t,i),this.applyMatrix4(sc),this}lookAt(e){return aT.lookAt(e),aT.updateMatrix(),this.applyMatrix4(aT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(t0).negate(),this.translate(t0.x,t0.y,t0.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new un(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new la);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new he(-1/0,-1/0,-1/0),new he(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];wu.setFromBufferAttribute(s),this.morphTargetsRelative?(Ca.addVectors(this.boundingBox.min,wu.min),this.boundingBox.expandByPoint(Ca),Ca.addVectors(this.boundingBox.max,wu.max),this.boundingBox.expandByPoint(Ca)):(this.boundingBox.expandByPoint(wu.min),this.boundingBox.expandByPoint(wu.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ua);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new he,1/0);return}if(e){const i=this.boundingSphere.center;if(wu.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const l=t[s];Gy.setFromBufferAttribute(l),this.morphTargetsRelative?(Ca.addVectors(wu.min,Gy.min),wu.expandByPoint(Ca),Ca.addVectors(wu.max,Gy.max),wu.expandByPoint(Ca)):(wu.expandByPoint(Gy.min),wu.expandByPoint(Gy.max))}wu.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Ca.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ca));if(t)for(let s=0,a=t.length;s<a;s++){const l=t[s],u=this.morphTargetsRelative;for(let f=0,d=l.count;f<d;f++)Ca.fromBufferAttribute(l,f),u&&(t0.fromBufferAttribute(e,f),Ca.add(t0)),r=Math.max(r,i.distanceToSquared(Ca))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ki(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),l=[],u=[];for(let G=0;G<i.count;G++)l[G]=new he,u[G]=new he;const f=new he,d=new he,v=new he,y=new xt,A=new xt,b=new xt,C=new he,T=new he;function M(G,I,N){f.fromBufferAttribute(i,G),d.fromBufferAttribute(i,I),v.fromBufferAttribute(i,N),y.fromBufferAttribute(s,G),A.fromBufferAttribute(s,I),b.fromBufferAttribute(s,N),d.sub(f),v.sub(f),A.sub(y),b.sub(y);const Q=1/(A.x*b.y-b.x*A.y);isFinite(Q)&&(C.copy(d).multiplyScalar(b.y).addScaledVector(v,-A.y).multiplyScalar(Q),T.copy(v).multiplyScalar(A.x).addScaledVector(d,-b.x).multiplyScalar(Q),l[G].add(C),l[I].add(C),l[N].add(C),u[G].add(T),u[I].add(T),u[N].add(T))}let B=this.groups;B.length===0&&(B=[{start:0,count:e.count}]);for(let G=0,I=B.length;G<I;++G){const N=B[G],Q=N.start,$=N.count;for(let te=Q,se=Q+$;te<se;te+=3)M(e.getX(te+0),e.getX(te+1),e.getX(te+2))}const D=new he,O=new he,P=new he,F=new he;function V(G){P.fromBufferAttribute(r,G),F.copy(P);const I=l[G];D.copy(I),D.sub(P.multiplyScalar(P.dot(I))).normalize(),O.crossVectors(F,I);const Q=O.dot(u[G])<0?-1:1;a.setXYZW(G,D.x,D.y,D.z,Q)}for(let G=0,I=B.length;G<I;++G){const N=B[G],Q=N.start,$=N.count;for(let te=Q,se=Q+$;te<se;te+=3)V(e.getX(te+0)),V(e.getX(te+1)),V(e.getX(te+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ki(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let y=0,A=i.count;y<A;y++)i.setXYZ(y,0,0,0);const r=new he,s=new he,a=new he,l=new he,u=new he,f=new he,d=new he,v=new he;if(e)for(let y=0,A=e.count;y<A;y+=3){const b=e.getX(y+0),C=e.getX(y+1),T=e.getX(y+2);r.fromBufferAttribute(t,b),s.fromBufferAttribute(t,C),a.fromBufferAttribute(t,T),d.subVectors(a,s),v.subVectors(r,s),d.cross(v),l.fromBufferAttribute(i,b),u.fromBufferAttribute(i,C),f.fromBufferAttribute(i,T),l.add(d),u.add(d),f.add(d),i.setXYZ(b,l.x,l.y,l.z),i.setXYZ(C,u.x,u.y,u.z),i.setXYZ(T,f.x,f.y,f.z)}else for(let y=0,A=t.count;y<A;y+=3)r.fromBufferAttribute(t,y+0),s.fromBufferAttribute(t,y+1),a.fromBufferAttribute(t,y+2),d.subVectors(a,s),v.subVectors(r,s),d.cross(v),i.setXYZ(y+0,d.x,d.y,d.z),i.setXYZ(y+1,d.x,d.y,d.z),i.setXYZ(y+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ca.fromBufferAttribute(e,t),Ca.normalize(),e.setXYZ(t,Ca.x,Ca.y,Ca.z)}toNonIndexed(){function e(l,u){const f=l.array,d=l.itemSize,v=l.normalized,y=new f.constructor(u.length*d);let A=0,b=0;for(let C=0,T=u.length;C<T;C++){l.isInterleavedBufferAttribute?A=u[C]*l.data.stride+l.offset:A=u[C]*d;for(let M=0;M<d;M++)y[b++]=f[A++]}return new Ki(y,d,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Qn,i=this.index.array,r=this.attributes;for(const l in r){const u=r[l],f=e(u,i);t.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const u=[],f=s[l];for(let d=0,v=f.length;d<v;d++){const y=f[d],A=e(y,i);u.push(A)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,u=a.length;l<u;l++){const f=a[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const u=this.parameters;for(const f in u)u[f]!==void 0&&(e[f]=u[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const u in i){const f=i[u];e.data.attributes[u]=f.toJSON(e.data)}const r={};let s=!1;for(const u in this.morphAttributes){const f=this.morphAttributes[u],d=[];for(let v=0,y=f.length;v<y;v++){const A=f[v];d.push(A.toJSON(e.data))}d.length>0&&(r[u]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const f in r){const d=r[f];this.setAttribute(f,d.clone(t))}const s=e.morphAttributes;for(const f in s){const d=[],v=s[f];for(let y=0,A=v.length;y<A;y++)d.push(v[y].clone(t));this.morphAttributes[f]=d}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let f=0,d=a.length;f<d;f++){const v=a[f];this.addGroup(v.start,v.count,v.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const u=e.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const iD=new Tn,ng=new Qg,Px=new ua,rD=new he,Nx=new he,Ix=new he,Fx=new he,oT=new he,Gx=new he,sD=new he,Hx=new he;class Ur extends Fi{constructor(e=new Qn,t=new ul){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){Gx.set(0,0,0);for(let u=0,f=s.length;u<f;u++){const d=l[u],v=s[u];d!==0&&(oT.fromBufferAttribute(v,e),a?Gx.addScaledVector(oT,d):Gx.addScaledVector(oT.sub(t),d))}t.add(Gx)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Px.copy(i.boundingSphere),Px.applyMatrix4(s),ng.copy(e.ray).recast(e.near),!(Px.containsPoint(ng.origin)===!1&&(ng.intersectSphere(Px,rD)===null||ng.origin.distanceToSquared(rD)>(e.far-e.near)**2))&&(iD.copy(s).invert(),ng.copy(e.ray).applyMatrix4(iD),!(i.boundingBox!==null&&ng.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,ng)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,l=s.index,u=s.attributes.position,f=s.attributes.uv,d=s.attributes.uv1,v=s.attributes.normal,y=s.groups,A=s.drawRange;if(l!==null)if(Array.isArray(a))for(let b=0,C=y.length;b<C;b++){const T=y[b],M=a[T.materialIndex],B=Math.max(T.start,A.start),D=Math.min(l.count,Math.min(T.start+T.count,A.start+A.count));for(let O=B,P=D;O<P;O+=3){const F=l.getX(O),V=l.getX(O+1),G=l.getX(O+2);r=zx(this,M,e,i,f,d,v,F,V,G),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=T.materialIndex,t.push(r))}}else{const b=Math.max(0,A.start),C=Math.min(l.count,A.start+A.count);for(let T=b,M=C;T<M;T+=3){const B=l.getX(T),D=l.getX(T+1),O=l.getX(T+2);r=zx(this,a,e,i,f,d,v,B,D,O),r&&(r.faceIndex=Math.floor(T/3),t.push(r))}}else if(u!==void 0)if(Array.isArray(a))for(let b=0,C=y.length;b<C;b++){const T=y[b],M=a[T.materialIndex],B=Math.max(T.start,A.start),D=Math.min(u.count,Math.min(T.start+T.count,A.start+A.count));for(let O=B,P=D;O<P;O+=3){const F=O,V=O+1,G=O+2;r=zx(this,M,e,i,f,d,v,F,V,G),r&&(r.faceIndex=Math.floor(O/3),r.face.materialIndex=T.materialIndex,t.push(r))}}else{const b=Math.max(0,A.start),C=Math.min(u.count,A.start+A.count);for(let T=b,M=C;T<M;T+=3){const B=T,D=T+1,O=T+2;r=zx(this,a,e,i,f,d,v,B,D,O),r&&(r.faceIndex=Math.floor(T/3),t.push(r))}}}}function Kz(n,e,t,i,r,s,a,l){let u;if(e.side===hl?u=i.intersectTriangle(a,s,r,!0,l):u=i.intersectTriangle(r,s,a,e.side===gh,l),u===null)return null;Hx.copy(l),Hx.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Hx);return f<t.near||f>t.far?null:{distance:f,point:Hx.clone(),object:n}}function zx(n,e,t,i,r,s,a,l,u,f){n.getVertexPosition(l,Nx),n.getVertexPosition(u,Ix),n.getVertexPosition(f,Fx);const d=Kz(n,e,t,i,Nx,Ix,Fx,sD);if(d){const v=new he;Xl.getBarycoord(sD,Nx,Ix,Fx,v),r&&(d.uv=Xl.getInterpolatedAttribute(r,l,u,f,v,new xt)),s&&(d.uv1=Xl.getInterpolatedAttribute(s,l,u,f,v,new xt)),a&&(d.normal=Xl.getInterpolatedAttribute(a,l,u,f,v,new he),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const y={a:l,b:u,c:f,normal:new he,materialIndex:0};Xl.getNormal(Nx,Ix,Fx,y.normal),d.face=y,d.barycoord=v}return d}class $g extends Qn{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const l=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const u=[],f=[],d=[],v=[];let y=0,A=0;b("z","y","x",-1,-1,i,t,e,a,s,0),b("z","y","x",1,-1,i,t,-e,a,s,1),b("x","z","y",1,1,e,i,t,r,a,2),b("x","z","y",1,-1,e,i,-t,r,a,3),b("x","y","z",1,-1,e,t,i,r,s,4),b("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(u),this.setAttribute("position",new un(f,3)),this.setAttribute("normal",new un(d,3)),this.setAttribute("uv",new un(v,2));function b(C,T,M,B,D,O,P,F,V,G,I){const N=O/V,Q=P/G,$=O/2,te=P/2,se=F/2,ye=V+1,k=G+1;let ee=0,ne=0;const de=new he;for(let X=0;X<k;X++){const J=X*Q-te;for(let ce=0;ce<ye;ce++){const ge=ce*N-$;de[C]=ge*B,de[T]=J*D,de[M]=se,f.push(de.x,de.y,de.z),de[C]=0,de[T]=0,de[M]=F>0?1:-1,d.push(de.x,de.y,de.z),v.push(ce/V),v.push(1-X/G),ee+=1}}for(let X=0;X<G;X++)for(let J=0;J<V;J++){const ce=y+J+ye*X,ge=y+J+ye*(X+1),oe=y+(J+1)+ye*(X+1),ve=y+(J+1)+ye*X;u.push(ce,ge,ve),u.push(ge,oe,ve),ne+=6}l.addGroup(A,ne,I),A+=ne,y+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $g(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function k0(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function sl(n){const e={};for(let t=0;t<n.length;t++){const i=k0(n[t]);for(const r in i)e[r]=i[r]}return e}function Jz(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function sP(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ni.workingColorSpace}const m2={clone:k0,merge:sl};var Zz=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Qz=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class pl extends ca{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Zz,this.fragmentShader=Qz,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=k0(e.uniforms),this.uniformsGroups=Jz(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Ab extends Fi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Tn,this.projectionMatrix=new Tn,this.projectionMatrixInverse=new Tn,this.coordinateSystem=mc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Op=new he,aD=new xt,oD=new xt;class Ss extends Ab{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=z0*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Fg*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return z0*2*Math.atan(Math.tan(Fg*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Op.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Op.x,Op.y).multiplyScalar(-e/Op.z),Op.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Op.x,Op.y).multiplyScalar(-e/Op.z)}getViewSize(e,t){return this.getViewBounds(e,aD,oD),t.subVectors(oD,aD)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Fg*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const u=a.fullWidth,f=a.fullHeight;s+=a.offsetX*r/u,t-=a.offsetY*i/f,r*=a.width/u,i*=a.height/f}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const n0=-90,i0=1;class aP extends Fi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ss(n0,i0,e,t);r.layers=this.layers,this.add(r);const s=new Ss(n0,i0,e,t);s.layers=this.layers,this.add(s);const a=new Ss(n0,i0,e,t);a.layers=this.layers,this.add(a);const l=new Ss(n0,i0,e,t);l.layers=this.layers,this.add(l);const u=new Ss(n0,i0,e,t);u.layers=this.layers,this.add(u);const f=new Ss(n0,i0,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,l,u]=t;for(const f of t)this.remove(f);if(e===mc)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),u.up.set(0,1,0),u.lookAt(0,0,-1);else if(e===k1)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),u.up.set(0,-1,0),u.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,l,u,f,d]=this.children,v=e.getRenderTarget(),y=e.getActiveCubeFace(),A=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const C=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,l),e.setRenderTarget(i,3,r),e.render(t,u),e.setRenderTarget(i,4,r),e.render(t,f),i.texture.generateMipmaps=C,e.setRenderTarget(i,5,r),e.render(t,d),e.setRenderTarget(v,y,A),e.xr.enabled=b,i.texture.needsPMREMUpdate=!0}}class M_ extends ar{constructor(e=[],t=vh,i,r,s,a,l,u,f,d){super(e,t,i,r,s,a,l,u,f,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class g2 extends _c{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new M_(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:qi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new $g(5,5,5),s=new pl({name:"CubemapFromEquirect",uniforms:k0(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:hl,blending:oh});s.uniforms.tEquirect.value=t;const a=new Ur(r,s),l=t.minFilter;return t.minFilter===pc&&(t.minFilter=qi),new aP(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class Md extends Fi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const $z={type:"move"};class NA{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Md,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Md,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new he,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new he),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Md,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new he,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new he),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const l=this._targetRay,u=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){a=!0;for(const C of e.hand.values()){const T=t.getJointPose(C,i),M=this._getHandJoint(f,C);T!==null&&(M.matrix.fromArray(T.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=T.radius),M.visible=T!==null}const d=f.joints["index-finger-tip"],v=f.joints["thumb-tip"],y=d.position.distanceTo(v.position),A=.02,b=.005;f.inputState.pinching&&y>A+b?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&y<=A-b&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else u!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent($z)))}return l!==null&&(l.visible=r!==null),u!==null&&(u.visible=s!==null),f!==null&&(f.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Md;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class T_{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new jt(e),this.density=t}clone(){return new T_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Sb{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new jt(e),this.near=t,this.far=i}clone(){return new Sb(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let E_=class extends Fi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Bu,this.environmentIntensity=1,this.environmentRotation=new Bu,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class C_{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=V1,this.updateRanges=[],this.version=0,this.uuid=Du()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Du()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Du()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const rl=new he;class Jp{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)rl.fromBufferAttribute(this,t),rl.applyMatrix4(e),this.setXYZ(t,rl.x,rl.y,rl.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)rl.fromBufferAttribute(this,t),rl.applyNormalMatrix(e),this.setXYZ(t,rl.x,rl.y,rl.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)rl.fromBufferAttribute(this,t),rl.transformDirection(e),this.setXYZ(t,rl.x,rl.y,rl.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ll(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=si(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=si(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=si(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=si(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=si(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ll(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ll(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ll(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ll(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=si(t,this.array),i=si(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=si(t,this.array),i=si(i,this.array),r=si(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=si(t,this.array),i=si(i,this.array),r=si(r,this.array),s=si(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ki(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Jp(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class v2 extends ca{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new jt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let r0;const Hy=new he,s0=new he,a0=new he,o0=new xt,zy=new xt,oP=new Tn,Vx=new he,Vy=new he,kx=new he,lD=new xt,lT=new xt,uD=new xt;class lP extends Fi{constructor(e=new v2){if(super(),this.isSprite=!0,this.type="Sprite",r0===void 0){r0=new Qn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new C_(t,5);r0.setIndex([0,1,2,0,2,3]),r0.setAttribute("position",new Jp(i,3,0,!1)),r0.setAttribute("uv",new Jp(i,2,3,!1))}this.geometry=r0,this.material=e,this.center=new xt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),s0.setFromMatrixScale(this.matrixWorld),oP.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),a0.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&s0.multiplyScalar(-a0.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;Xx(Vx.set(-.5,-.5,0),a0,a,s0,r,s),Xx(Vy.set(.5,-.5,0),a0,a,s0,r,s),Xx(kx.set(.5,.5,0),a0,a,s0,r,s),lD.set(0,0),lT.set(1,0),uD.set(1,1);let l=e.ray.intersectTriangle(Vx,Vy,kx,!1,Hy);if(l===null&&(Xx(Vy.set(-.5,.5,0),a0,a,s0,r,s),lT.set(0,1),l=e.ray.intersectTriangle(Vx,kx,Vy,!1,Hy),l===null))return;const u=e.ray.origin.distanceTo(Hy);u<e.near||u>e.far||t.push({distance:u,point:Hy.clone(),uv:Xl.getInterpolation(Hy,Vx,Vy,kx,lD,lT,uD,new xt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Xx(n,e,t,i,r,s){o0.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(zy.x=s*o0.x-r*o0.y,zy.y=r*o0.x+s*o0.y):zy.copy(o0),n.copy(e),n.x+=zy.x,n.y+=zy.y,n.applyMatrix4(oP)}const Wx=new he,cD=new he;class uP extends Fi{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Wx.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Wx);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Wx.setFromMatrixPosition(e.matrixWorld),cD.setFromMatrixPosition(this.matrixWorld);const i=Wx.distanceTo(cD)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const fD=new he,hD=new Ii,dD=new Ii,e5=new he,pD=new Tn,Yx=new he,uT=new ua,mD=new Tn,cT=new Qg;class y2 extends Ur{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=IE,this.bindMatrix=new Tn,this.bindMatrixInverse=new Tn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new la),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Yx),this.boundingBox.expandByPoint(Yx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ua),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Yx),this.boundingSphere.expandByPoint(Yx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),uT.copy(this.boundingSphere),uT.applyMatrix4(r),e.ray.intersectsSphere(uT)!==!1&&(mD.copy(r).invert(),cT.copy(e.ray).applyMatrix4(mD),!(this.boundingBox!==null&&cT.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,cT)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ii,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===IE?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===HL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;hD.fromBufferAttribute(r.attributes.skinIndex,e),dD.fromBufferAttribute(r.attributes.skinWeight,e),fD.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=dD.getComponent(s);if(a!==0){const l=hD.getComponent(s);pD.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(e5.copy(fD).applyMatrix4(pD),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class bb extends Fi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class mf extends ar{constructor(e=null,t=1,i=1,r,s,a,l,u,f=Ra,d=Ra,v,y){super(null,a,l,u,f,d,r,s,v,y),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const gD=new Tn,t5=new Tn;class w_{constructor(e=[],t=[]){this.uuid=Du(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Tn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Tn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const l=e[s]?e[s].matrixWorld:t5;gD.multiplyMatrices(l,t[s]),gD.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new w_(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new mf(t,e,e,Fs,ss);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new bb),this.bones.push(a),this.boneInverses.push(new Tn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class Zp extends Ki{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const l0=new Tn,vD=new Tn,jx=[],yD=new la,n5=new Tn,ky=new Ur,Xy=new ua;class _2 extends Ur{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Zp(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,n5)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new la),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,l0),yD.copy(e.boundingBox).applyMatrix4(l0),this.boundingBox.union(yD)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ua),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,l0),Xy.copy(e.boundingSphere).applyMatrix4(l0),this.boundingSphere.union(Xy)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,a=e*s+1;for(let l=0;l<i.length;l++)i[l]=r[a+l]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(ky.geometry=this.geometry,ky.material=this.material,ky.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Xy.copy(this.boundingSphere),Xy.applyMatrix4(i),e.ray.intersectsSphere(Xy)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,l0),vD.multiplyMatrices(i,l0),ky.matrixWorld=vD,ky.raycast(e,jx);for(let a=0,l=jx.length;a<l;a++){const u=jx[a];u.instanceId=s,u.object=this,t.push(u)}jx.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Zp(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new mf(new Float32Array(r*this.count),r,this.count,A_,ss));const s=this.morphTexture.source.data.data;let a=0;for(let f=0;f<i.length;f++)a+=i[f];const l=this.geometry.morphTargetsRelative?1:1-a,u=r*e;s[u]=l,s.set(i,u+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const fT=new he,i5=new he,r5=new Kn;class Ad{constructor(e=new he(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=fT.subVectors(i,t).cross(i5.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(fT),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||r5.getNormalMatrix(e),r=this.coplanarPoint(fT).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ig=new ua,qx=new he;class ty{constructor(e=new Ad,t=new Ad,i=new Ad,r=new Ad,s=new Ad,a=new Ad){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=mc){const i=this.planes,r=e.elements,s=r[0],a=r[1],l=r[2],u=r[3],f=r[4],d=r[5],v=r[6],y=r[7],A=r[8],b=r[9],C=r[10],T=r[11],M=r[12],B=r[13],D=r[14],O=r[15];if(i[0].setComponents(u-s,y-f,T-A,O-M).normalize(),i[1].setComponents(u+s,y+f,T+A,O+M).normalize(),i[2].setComponents(u+a,y+d,T+b,O+B).normalize(),i[3].setComponents(u-a,y-d,T-b,O-B).normalize(),i[4].setComponents(u-l,y-v,T-C,O-D).normalize(),t===mc)i[5].setComponents(u+l,y+v,T+C,O+D).normalize();else if(t===k1)i[5].setComponents(l,v,C,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ig.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ig.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ig)}intersectsSprite(e){return ig.center.set(0,0,0),ig.radius=.7071067811865476,ig.applyMatrix4(e.matrixWorld),this.intersectsSphere(ig)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(qx.x=r.normal.x>0?e.max.x:e.min.x,qx.y=r.normal.y>0?e.max.y:e.min.y,qx.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(qx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const ih=new Tn,rh=new ty;class Mb{constructor(){this.coordinateSystem=mc}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(ih.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),rh.setFromProjectionMatrix(ih,this.coordinateSystem),rh.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(ih.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),rh.setFromProjectionMatrix(ih,this.coordinateSystem),rh.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(ih.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),rh.setFromProjectionMatrix(ih,this.coordinateSystem),rh.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(ih.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),rh.setFromProjectionMatrix(ih,this.coordinateSystem),rh.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const r=t.cameras[i];if(ih.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),rh.setFromProjectionMatrix(ih,this.coordinateSystem),rh.containsPoint(e))return!0}return!1}clone(){return new Mb}}function hT(n,e){return n-e}function s5(n,e){return n.z-e.z}function a5(n,e){return e.z-n.z}class o5{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,a=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const l=s[this.index];a.push(l),this.index++,l.start=e,l.count=t,l.z=i,l.index=r}reset(){this.list.length=0,this.index=0}}const Vl=new Tn,l5=new jt(1,1,1),_D=new ty,u5=new Mb,Kx=new la,rg=new ua,Wy=new he,xD=new he,c5=new he,dT=new o5,Eo=new Ur,Jx=[];function f5(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let a=0;a<i;a++)e.setComponent(s+t,a,n.getComponent(s,a))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function sg(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class cP extends Ur{constructor(e,t,i=t*2,r){super(new Qn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new mf(t,e,e,Fs,ss);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new mf(t,e,e,S_,yh);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new mf(t,e,e,Fs,ss);i.colorSpace=Ni.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const a=e.getAttribute(s),{array:l,itemSize:u,normalized:f}=a,d=new l.constructor(i*u),v=new Ki(d,u,f);t.setAttribute(s,v)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Ki(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new la);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Vl),this.getBoundingBoxAt(s,Kx).applyMatrix4(Vl),e.union(Kx)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ua);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Vl),this.getBoundingSphereAt(s,rg).applyMatrix4(Vl),e.union(rg)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(hT),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Vl.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const a=this._colorsTexture;return a&&(l5.toArray(a.image.data,r*4),a.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const a=e.getIndex();if(a!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?a.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let u;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(hT),u=this._availableGeometryIds.shift(),s[u]=r):(u=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(u,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),a=t.getIndex(),l=this._geometryInfo[e];if(r&&a.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const u=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const d in i.attributes){const v=t.getAttribute(d),y=i.getAttribute(d);f5(v,y,u);const A=v.itemSize;for(let b=v.count,C=f;b<C;b++){const T=u+b;for(let M=0;M<A;M++)y.setComponent(T,M,0)}y.needsUpdate=!0,y.addUpdateRange(u*A,f*A)}if(r){const d=l.indexStart,v=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let y=0;y<a.count;y++)s.setX(d+y,u+a.getX(y));for(let y=a.count,A=v;y<A;y++)s.setX(d+y,u);s.needsUpdate=!0,s.addUpdateRange(d,l.reservedIndexCount)}return l.start=r?l.indexStart:l.vertexStart,l.count=r?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((a,l)=>l).sort((a,l)=>i[a].vertexStart-i[l].vertexStart),s=this.geometry;for(let a=0,l=i.length;a<l;a++){const u=r[a],f=i[u];if(f.active!==!1){if(s.index!==null){if(f.indexStart!==t){const{indexStart:d,vertexStart:v,reservedIndexCount:y}=f,A=s.index,b=A.array,C=e-v;for(let T=d;T<d+y;T++)b[T]=b[T]+C;A.array.copyWithin(t,d,d+y),A.addUpdateRange(t,y),f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:d,reservedVertexCount:v}=f,y=s.attributes;for(const A in y){const b=y[A],{array:C,itemSize:T}=b;C.copyWithin(e*T,d*T,(d+v)*T),b.addUpdateRange(e*T,v*T)}f.vertexStart=e}e+=f.reservedVertexCount,f.start=s.index?f.indexStart:f.vertexStart,this._nextIndexStart=s.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new la,a=i.index,l=i.attributes.position;for(let u=r.start,f=r.start+r.count;u<f;u++){let d=u;a&&(d=a.getX(d)),s.expandByPoint(Wy.fromBufferAttribute(l,d))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new ua;this.getBoundingBoxAt(e,Kx),Kx.getCenter(s.center);const a=i.index,l=i.attributes.position;let u=0;for(let f=r.start,d=r.start+r.count;f<d;f++){let v=f;a&&(v=a.getX(v)),Wy.fromBufferAttribute(l,v),u=Math.max(u,s.center.distanceToSquared(Wy))}s.radius=Math.sqrt(u),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(hT);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);sg(this._multiDrawCounts,r),sg(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const a=this._indirectTexture,l=this._matricesTexture,u=this._colorsTexture;a.dispose(),this._initIndirectTexture(),sg(a.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),sg(l.image.data,this._matricesTexture.image.data),u&&(u.dispose(),this._initColorsTexture(),sg(u.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...i.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(u=>u.indexStart+u.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Qn,this._initializeGeometry(s));const a=this.geometry;s.index&&sg(s.index.array,a.index.array);for(const l in s.attributes)sg(s.attributes[l].array,a.attributes[l].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,a=this.geometry;Eo.material=this.material,Eo.geometry.index=a.index,Eo.geometry.attributes=a.attributes,Eo.geometry.boundingBox===null&&(Eo.geometry.boundingBox=new la),Eo.geometry.boundingSphere===null&&(Eo.geometry.boundingSphere=new ua);for(let l=0,u=i.length;l<u;l++){if(!i[l].visible||!i[l].active)continue;const f=i[l].geometryIndex,d=r[f];Eo.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(l,Eo.matrixWorld).premultiply(s),this.getBoundingBoxAt(f,Eo.geometry.boundingBox),this.getBoundingSphereAt(f,Eo.geometry.boundingSphere),Eo.raycast(e,Jx);for(let v=0,y=Jx.length;v<y;v++){const A=Jx[v];A.object=this,A.batchId=l,t.push(A)}Jx.length=0}Eo.material=null,Eo.geometry.index=null,Eo.geometry.attributes={},Eo.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const a=r.getIndex(),l=a===null?1:a.array.BYTES_PER_ELEMENT,u=this._instanceInfo,f=this._multiDrawStarts,d=this._multiDrawCounts,v=this._geometryInfo,y=this.perObjectFrustumCulled,A=this._indirectTexture,b=A.image.data,C=i.isArrayCamera?u5:_D;y&&!i.isArrayCamera&&(Vl.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),_D.setFromProjectionMatrix(Vl,e.coordinateSystem));let T=0;if(this.sortObjects){Vl.copy(this.matrixWorld).invert(),Wy.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Vl),xD.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Vl);for(let D=0,O=u.length;D<O;D++)if(u[D].visible&&u[D].active){const P=u[D].geometryIndex;this.getMatrixAt(D,Vl),this.getBoundingSphereAt(P,rg).applyMatrix4(Vl);let F=!1;if(y&&(F=!C.intersectsSphere(rg,i)),!F){const V=v[P],G=c5.subVectors(rg.center,Wy).dot(xD);dT.push(V.start,V.count,G,D)}}const M=dT.list,B=this.customSort;B===null?M.sort(s.transparent?a5:s5):B.call(this,M,i);for(let D=0,O=M.length;D<O;D++){const P=M[D];f[T]=P.start*l,d[T]=P.count,b[T]=P.index,T++}dT.reset()}else for(let M=0,B=u.length;M<B;M++)if(u[M].visible&&u[M].active){const D=u[M].geometryIndex;let O=!1;if(y&&(this.getMatrixAt(M,Vl),this.getBoundingSphereAt(D,rg).applyMatrix4(Vl),O=!C.intersectsSphere(rg,i)),!O){const P=v[D];f[T]=P.start*l,d[T]=P.count,b[T]=M,T++}}A.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,a){this.onBeforeRender(e,null,r,s,a)}}class Bo extends ca{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new jt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const LS=new he,PS=new he,AD=new Tn,Yy=new Qg,Zx=new ua,pT=new he,SD=new he;class wd extends Fi{constructor(e=new Qn,t=new Bo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)LS.fromBufferAttribute(t,r-1),PS.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=LS.distanceTo(PS);e.setAttribute("lineDistance",new un(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Zx.copy(i.boundingSphere),Zx.applyMatrix4(r),Zx.radius+=s,e.ray.intersectsSphere(Zx)===!1)return;AD.copy(r).invert(),Yy.copy(e.ray).applyMatrix4(AD);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=this.isLineSegments?2:1,d=i.index,y=i.attributes.position;if(d!==null){const A=Math.max(0,a.start),b=Math.min(d.count,a.start+a.count);for(let C=A,T=b-1;C<T;C+=f){const M=d.getX(C),B=d.getX(C+1),D=Qx(this,e,Yy,u,M,B,C);D&&t.push(D)}if(this.isLineLoop){const C=d.getX(b-1),T=d.getX(A),M=Qx(this,e,Yy,u,C,T,b-1);M&&t.push(M)}}else{const A=Math.max(0,a.start),b=Math.min(y.count,a.start+a.count);for(let C=A,T=b-1;C<T;C+=f){const M=Qx(this,e,Yy,u,C,C+1,C);M&&t.push(M)}if(this.isLineLoop){const C=Qx(this,e,Yy,u,b-1,A,b-1);C&&t.push(C)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function Qx(n,e,t,i,r,s,a){const l=n.geometry.attributes.position;if(LS.fromBufferAttribute(l,r),PS.fromBufferAttribute(l,s),t.distanceSqToSegment(LS,PS,pT,SD)>i)return;pT.applyMatrix4(n.matrixWorld);const f=e.ray.origin.distanceTo(pT);if(!(f<e.near||f>e.far))return{distance:f,point:SD.clone().applyMatrix4(n.matrixWorld),index:a,face:null,faceIndex:null,barycoord:null,object:n}}const bD=new he,MD=new he;class yf extends wd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)bD.fromBufferAttribute(t,r),MD.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+bD.distanceTo(MD);e.setAttribute("lineDistance",new un(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class x2 extends wd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Tb extends ca{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new jt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const TD=new Tn,zE=new Qg,$x=new ua,eA=new he;class A2 extends Fi{constructor(e=new Qn,t=new Tb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),$x.copy(i.boundingSphere),$x.applyMatrix4(r),$x.radius+=s,e.ray.intersectsSphere($x)===!1)return;TD.copy(r).invert(),zE.copy(e.ray).applyMatrix4(TD);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,f=i.index,v=i.attributes.position;if(f!==null){const y=Math.max(0,a.start),A=Math.min(f.count,a.start+a.count);for(let b=y,C=A;b<C;b++){const T=f.getX(b);eA.fromBufferAttribute(v,T),ED(eA,T,u,r,e,t,this)}}else{const y=Math.max(0,a.start),A=Math.min(v.count,a.start+a.count);for(let b=y,C=A;b<C;b++)eA.fromBufferAttribute(v,b),ED(eA,b,u,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function ED(n,e,t,i,r,s,a){const l=zE.distanceSqToPoint(n);if(l<t){const u=new he;zE.closestPointToPoint(n,u),u.applyMatrix4(i);const f=r.ray.origin.distanceTo(u);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,faceIndex:null,barycoord:null,object:a})}}class fP extends ar{constructor(e,t,i,r,s=qi,a=qi,l,u,f){super(e,t,i,r,s,a,l,u,f),this.isVideoTexture=!0,this.generateMipmaps=!1;const d=this;function v(){d.needsUpdate=!0,e.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(v)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class h5 extends fP{constructor(e,t,i,r,s,a,l,u){super({},e,t,i,r,s,a,l,u),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class d5 extends ar{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ra,this.minFilter=Ra,this.generateMipmaps=!1,this.needsUpdate=!0}}class Eb extends ar{constructor(e,t,i,r,s,a,l,u,f,d,v,y){super(null,a,l,u,f,d,r,s,v,y),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class p5 extends Eb{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Is,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class m5 extends Eb{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,vh),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class g5 extends ar{constructor(e,t,i,r,s,a,l,u,f){super(e,t,i,r,s,a,l,u,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Cb extends ar{constructor(e,t,i=yh,r,s,a,l=Ra,u=Ra,f,d=I0){if(d!==I0&&d!==F0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,r,s,a,l,u,d,i,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new zp(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class v5 extends Cb{constructor(e=1,t=1,i=1){super(e,t),this.isDepthArrayTexture=!0,this.image={width:e,height:t,depth:i},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class wb extends Qn{constructor(e=1,t=1,i=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const a=[],l=[],u=[],f=[],d=t/2,v=Math.PI/2*e,y=t,A=2*v+y,b=i*2+s,C=r+1,T=new he,M=new he;for(let B=0;B<=b;B++){let D=0,O=0,P=0,F=0;if(B<=i){const I=B/i,N=I*Math.PI/2;O=-d-e*Math.cos(N),P=e*Math.sin(N),F=-e*Math.cos(N),D=I*v}else if(B<=i+s){const I=(B-i)/s;O=-d+I*t,P=e,F=0,D=v+I*y}else{const I=(B-i-s)/i,N=I*Math.PI/2;O=d+e*Math.sin(N),P=e*Math.cos(N),F=e*Math.sin(N),D=v+y+I*v}const V=Math.max(0,Math.min(1,D/A));let G=0;B===0?G=.5/r:B===b&&(G=-.5/r);for(let I=0;I<=r;I++){const N=I/r,Q=N*Math.PI*2,$=Math.sin(Q),te=Math.cos(Q);M.x=-P*te,M.y=O,M.z=P*$,l.push(M.x,M.y,M.z),T.set(-P*te,F,P*$),T.normalize(),u.push(T.x,T.y,T.z),f.push(N+G,V)}if(B>0){const I=(B-1)*C;for(let N=0;N<r;N++){const Q=I+N,$=I+N+1,te=B*C+N,se=B*C+N+1;a.push(Q,$,te),a.push($,se,te)}}}this.setIndex(a),this.setAttribute("position",new un(l,3)),this.setAttribute("normal",new un(u,3)),this.setAttribute("uv",new un(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wb(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Rb extends Qn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],l=[],u=[],f=new he,d=new xt;a.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let v=0,y=3;v<=t;v++,y+=3){const A=i+v/t*r;f.x=e*Math.cos(A),f.y=e*Math.sin(A),a.push(f.x,f.y,f.z),l.push(0,0,1),d.x=(a[y]/e+1)/2,d.y=(a[y+1]/e+1)/2,u.push(d.x,d.y)}for(let v=1;v<=t;v++)s.push(v,v+1,0);this.setIndex(s),this.setAttribute("position",new un(a,3)),this.setAttribute("normal",new un(l,3)),this.setAttribute("uv",new un(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class R_ extends Qn{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,l=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:u};const f=this;r=Math.floor(r),s=Math.floor(s);const d=[],v=[],y=[],A=[];let b=0;const C=[],T=i/2;let M=0;B(),a===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(d),this.setAttribute("position",new un(v,3)),this.setAttribute("normal",new un(y,3)),this.setAttribute("uv",new un(A,2));function B(){const O=new he,P=new he;let F=0;const V=(t-e)/i;for(let G=0;G<=s;G++){const I=[],N=G/s,Q=N*(t-e)+e;for(let $=0;$<=r;$++){const te=$/r,se=te*u+l,ye=Math.sin(se),k=Math.cos(se);P.x=Q*ye,P.y=-N*i+T,P.z=Q*k,v.push(P.x,P.y,P.z),O.set(ye,V,k).normalize(),y.push(O.x,O.y,O.z),A.push(te,1-N),I.push(b++)}C.push(I)}for(let G=0;G<r;G++)for(let I=0;I<s;I++){const N=C[I][G],Q=C[I+1][G],$=C[I+1][G+1],te=C[I][G+1];(e>0||I!==0)&&(d.push(N,Q,te),F+=3),(t>0||I!==s-1)&&(d.push(Q,$,te),F+=3)}f.addGroup(M,F,0),M+=F}function D(O){const P=b,F=new xt,V=new he;let G=0;const I=O===!0?e:t,N=O===!0?1:-1;for(let $=1;$<=r;$++)v.push(0,T*N,0),y.push(0,N,0),A.push(.5,.5),b++;const Q=b;for(let $=0;$<=r;$++){const se=$/r*u+l,ye=Math.cos(se),k=Math.sin(se);V.x=I*k,V.y=T*N,V.z=I*ye,v.push(V.x,V.y,V.z),y.push(0,N,0),F.x=ye*.5+.5,F.y=k*.5*N+.5,A.push(F.x,F.y),b++}for(let $=0;$<r;$++){const te=P+$,se=Q+$;O===!0?d.push(se,se+1,te):d.push(se+1,se,te),G+=3}f.addGroup(M,G,O===!0?1:2),M+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R_(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class D_ extends R_{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,l=Math.PI*2){super(0,e,t,i,r,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new D_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class im extends Qn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];l(r),f(i),d(),this.setAttribute("position",new un(s,3)),this.setAttribute("normal",new un(s.slice(),3)),this.setAttribute("uv",new un(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(B){const D=new he,O=new he,P=new he;for(let F=0;F<t.length;F+=3)A(t[F+0],D),A(t[F+1],O),A(t[F+2],P),u(D,O,P,B)}function u(B,D,O,P){const F=P+1,V=[];for(let G=0;G<=F;G++){V[G]=[];const I=B.clone().lerp(O,G/F),N=D.clone().lerp(O,G/F),Q=F-G;for(let $=0;$<=Q;$++)$===0&&G===F?V[G][$]=I:V[G][$]=I.clone().lerp(N,$/Q)}for(let G=0;G<F;G++)for(let I=0;I<2*(F-G)-1;I++){const N=Math.floor(I/2);I%2===0?(y(V[G][N+1]),y(V[G+1][N]),y(V[G][N])):(y(V[G][N+1]),y(V[G+1][N+1]),y(V[G+1][N]))}}function f(B){const D=new he;for(let O=0;O<s.length;O+=3)D.x=s[O+0],D.y=s[O+1],D.z=s[O+2],D.normalize().multiplyScalar(B),s[O+0]=D.x,s[O+1]=D.y,s[O+2]=D.z}function d(){const B=new he;for(let D=0;D<s.length;D+=3){B.x=s[D+0],B.y=s[D+1],B.z=s[D+2];const O=T(B)/2/Math.PI+.5,P=M(B)/Math.PI+.5;a.push(O,1-P)}b(),v()}function v(){for(let B=0;B<a.length;B+=6){const D=a[B+0],O=a[B+2],P=a[B+4],F=Math.max(D,O,P),V=Math.min(D,O,P);F>.9&&V<.1&&(D<.2&&(a[B+0]+=1),O<.2&&(a[B+2]+=1),P<.2&&(a[B+4]+=1))}}function y(B){s.push(B.x,B.y,B.z)}function A(B,D){const O=B*3;D.x=e[O+0],D.y=e[O+1],D.z=e[O+2]}function b(){const B=new he,D=new he,O=new he,P=new he,F=new xt,V=new xt,G=new xt;for(let I=0,N=0;I<s.length;I+=9,N+=6){B.set(s[I+0],s[I+1],s[I+2]),D.set(s[I+3],s[I+4],s[I+5]),O.set(s[I+6],s[I+7],s[I+8]),F.set(a[N+0],a[N+1]),V.set(a[N+2],a[N+3]),G.set(a[N+4],a[N+5]),P.copy(B).add(D).add(O).divideScalar(3);const Q=T(P);C(F,N+0,B,Q),C(V,N+2,D,Q),C(G,N+4,O,Q)}}function C(B,D,O,P){P<0&&B.x===1&&(a[D]=B.x-1),O.x===0&&O.z===0&&(a[D]=P/2/Math.PI+.5)}function T(B){return Math.atan2(B.z,-B.x)}function M(B){return Math.atan2(-B.y,Math.sqrt(B.x*B.x+B.z*B.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new im(e.vertices,e.indices,e.radius,e.details)}}class Db extends im{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Db(e.radius,e.detail)}}const tA=new he,nA=new he,mT=new he,iA=new Xl;class hP extends Qn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Fg*t),a=e.getIndex(),l=e.getAttribute("position"),u=a?a.count:l.count,f=[0,0,0],d=["a","b","c"],v=new Array(3),y={},A=[];for(let b=0;b<u;b+=3){a?(f[0]=a.getX(b),f[1]=a.getX(b+1),f[2]=a.getX(b+2)):(f[0]=b,f[1]=b+1,f[2]=b+2);const{a:C,b:T,c:M}=iA;if(C.fromBufferAttribute(l,f[0]),T.fromBufferAttribute(l,f[1]),M.fromBufferAttribute(l,f[2]),iA.getNormal(mT),v[0]=`${Math.round(C.x*r)},${Math.round(C.y*r)},${Math.round(C.z*r)}`,v[1]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,v[2]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let B=0;B<3;B++){const D=(B+1)%3,O=v[B],P=v[D],F=iA[d[B]],V=iA[d[D]],G=`${O}_${P}`,I=`${P}_${O}`;I in y&&y[I]?(mT.dot(y[I].normal)<=s&&(A.push(F.x,F.y,F.z),A.push(V.x,V.y,V.z)),y[I]=null):G in y||(y[G]={index0:f[B],index1:f[D],normal:mT.clone()})}}for(const b in y)if(y[b]){const{index0:C,index1:T}=y[b];tA.fromBufferAttribute(l,C),nA.fromBufferAttribute(l,T),A.push(tA.x,tA.y,tA.z),A.push(nA.x,nA.y,nA.z)}this.setAttribute("position",new un(A,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class _f{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let l=0,u=s-1,f;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),f=i[r]-a,f<0)l=r+1;else if(f>0)u=r-1;else{u=r;break}if(r=u,i[r]===a)return r/(s-1);const d=i[r],y=i[r+1]-d,A=(a-d)/y;return(r+A)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),l=this.getPoint(s),u=t||(a.isVector2?new xt:new he);return u.copy(l).sub(a).normalize(),u}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new he,r=[],s=[],a=[],l=new he,u=new Tn;for(let A=0;A<=e;A++){const b=A/e;r[A]=this.getTangentAt(b,new he)}s[0]=new he,a[0]=new he;let f=Number.MAX_VALUE;const d=Math.abs(r[0].x),v=Math.abs(r[0].y),y=Math.abs(r[0].z);d<=f&&(f=d,i.set(1,0,0)),v<=f&&(f=v,i.set(0,1,0)),y<=f&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),a[0].crossVectors(r[0],s[0]);for(let A=1;A<=e;A++){if(s[A]=s[A-1].clone(),a[A]=a[A-1].clone(),l.crossVectors(r[A-1],r[A]),l.length()>Number.EPSILON){l.normalize();const b=Math.acos(Jn(r[A-1].dot(r[A]),-1,1));s[A].applyMatrix4(u.makeRotationAxis(l,b))}a[A].crossVectors(r[A],s[A])}if(t===!0){let A=Math.acos(Jn(s[0].dot(s[e]),-1,1));A/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(A=-A);for(let b=1;b<=e;b++)s[b].applyMatrix4(u.makeRotationAxis(r[b],A*b)),a[b].crossVectors(r[b],s[b])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Bb extends _f{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=u}getPoint(e,t=new xt){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),v=Math.sin(this.aRotation),y=u-this.aX,A=f-this.aY;u=y*d-A*v+this.aX,f=y*v+A*d+this.aY}return i.set(u,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class dP extends Bb{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function S2(){let n=0,e=0,t=0,i=0;function r(s,a,l,u){n=s,e=l,t=-3*s+3*a-2*l-u,i=2*s-2*a+l+u}return{initCatmullRom:function(s,a,l,u,f){r(a,l,f*(l-s),f*(u-a))},initNonuniformCatmullRom:function(s,a,l,u,f,d,v){let y=(a-s)/f-(l-s)/(f+d)+(l-a)/d,A=(l-a)/d-(u-a)/(d+v)+(u-l)/v;y*=d,A*=d,r(a,l,y,A)},calc:function(s){const a=s*s,l=a*s;return n+e*s+t*a+i*l}}}const rA=new he,gT=new S2,vT=new S2,yT=new S2;class pP extends _f{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new he){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:u===0&&l===s-1&&(l=s-2,u=1);let f,d;this.closed||l>0?f=r[(l-1)%s]:(rA.subVectors(r[0],r[1]).add(r[0]),f=rA);const v=r[l%s],y=r[(l+1)%s];if(this.closed||l+2<s?d=r[(l+2)%s]:(rA.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=rA),this.curveType==="centripetal"||this.curveType==="chordal"){const A=this.curveType==="chordal"?.5:.25;let b=Math.pow(f.distanceToSquared(v),A),C=Math.pow(v.distanceToSquared(y),A),T=Math.pow(y.distanceToSquared(d),A);C<1e-4&&(C=1),b<1e-4&&(b=C),T<1e-4&&(T=C),gT.initNonuniformCatmullRom(f.x,v.x,y.x,d.x,b,C,T),vT.initNonuniformCatmullRom(f.y,v.y,y.y,d.y,b,C,T),yT.initNonuniformCatmullRom(f.z,v.z,y.z,d.z,b,C,T)}else this.curveType==="catmullrom"&&(gT.initCatmullRom(f.x,v.x,y.x,d.x,this.tension),vT.initCatmullRom(f.y,v.y,y.y,d.y,this.tension),yT.initCatmullRom(f.z,v.z,y.z,d.z,this.tension));return i.set(gT.calc(u),vT.calc(u),yT.calc(u)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new he().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function CD(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,l=n*n,u=n*l;return(2*t-2*i+s+a)*u+(-3*t+3*i-2*s-a)*l+s*n+t}function y5(n,e){const t=1-n;return t*t*e}function _5(n,e){return 2*(1-n)*n*e}function x5(n,e){return n*n*e}function x1(n,e,t,i){return y5(n,e)+_5(n,t)+x5(n,i)}function A5(n,e){const t=1-n;return t*t*t*e}function S5(n,e){const t=1-n;return 3*t*t*n*e}function b5(n,e){return 3*(1-n)*n*n*e}function M5(n,e){return n*n*n*e}function A1(n,e,t,i,r){return A5(n,e)+S5(n,t)+b5(n,i)+M5(n,r)}class b2 extends _f{constructor(e=new xt,t=new xt,i=new xt,r=new xt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new xt){const i=t,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(A1(e,r.x,s.x,a.x,l.x),A1(e,r.y,s.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class mP extends _f{constructor(e=new he,t=new he,i=new he,r=new he){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new he){const i=t,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(A1(e,r.x,s.x,a.x,l.x),A1(e,r.y,s.y,a.y,l.y),A1(e,r.z,s.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class M2 extends _f{constructor(e=new xt,t=new xt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new xt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new xt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gP extends _f{constructor(e=new he,t=new he){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new he){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new he){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class T2 extends _f{constructor(e=new xt,t=new xt,i=new xt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new xt){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(x1(e,r.x,s.x,a.x),x1(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class E2 extends _f{constructor(e=new he,t=new he,i=new he){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new he){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(x1(e,r.x,s.x,a.x),x1(e,r.y,s.y,a.y),x1(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class C2 extends _f{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new xt){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),l=s-a,u=r[a===0?a:a-1],f=r[a],d=r[a>r.length-2?r.length-1:a+1],v=r[a>r.length-3?r.length-1:a+2];return i.set(CD(l,u.x,f.x,d.x,v.x),CD(l,u.y,f.y,d.y,v.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new xt().fromArray(r))}return this}}var NS=Object.freeze({__proto__:null,ArcCurve:dP,CatmullRomCurve3:pP,CubicBezierCurve:b2,CubicBezierCurve3:mP,EllipseCurve:Bb,LineCurve:M2,LineCurve3:gP,QuadraticBezierCurve:T2,QuadraticBezierCurve3:E2,SplineCurve:C2});class vP extends _f{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new NS[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,l=this.curves[s],u=l.getLength(),f=u===0?0:1-a/u;return l.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,u=a.getPoints(l);for(let f=0;f<u.length;f++){const d=u[f];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new NS[r.type]().fromJSON(r))}return this}}class IS extends vP{constructor(e){super(),this.type="Path",this.currentPoint=new xt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new M2(this.currentPoint.clone(),new xt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new T2(this.currentPoint.clone(),new xt(e,t),new xt(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const l=new b2(this.currentPoint.clone(),new xt(e,t),new xt(i,r),new xt(s,a));return this.curves.push(l),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new C2(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(e+l,t+u,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,l,u){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+f,t+d,i,r,s,a,l,u),this}absellipse(e,t,i,r,s,a,l,u){const f=new Bb(e,t,i,r,s,a,l,u);if(this.curves.length>0){const v=f.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Gg extends IS{constructor(e){super(e),this.uuid=Du(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new IS().fromJSON(r))}return this}}function T5(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=yP(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let l,u,f;if(i&&(s=D5(n,e,s,t)),n.length>80*t){l=1/0,u=1/0;let d=-1/0,v=-1/0;for(let y=t;y<r;y+=t){const A=n[y],b=n[y+1];A<l&&(l=A),b<u&&(u=b),A>d&&(d=A),b>v&&(v=b)}f=Math.max(d-l,v-u),f=f!==0?32767/f:0}return W1(s,a,t,l,u,f,0),a}function yP(n,e,t,i,r){let s;if(r===z5(n,e,t,i)>0)for(let a=e;a<t;a+=i)s=wD(a/i|0,n[a],n[a+1],s);else for(let a=t-i;a>=e;a-=i)s=wD(a/i|0,n[a],n[a+1],s);return s&&X0(s,s.next)&&(j1(s),s=s.next),s}function Yg(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(X0(t,t.next)||ns(t.prev,t,t.next)===0)){if(j1(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function W1(n,e,t,i,r,s,a){if(!n)return;!a&&s&&P5(n,i,r,s);let l=n;for(;n.prev!==n.next;){const u=n.prev,f=n.next;if(s?C5(n,i,r,s):E5(n)){e.push(u.i,n.i,f.i),j1(n),n=f.next,l=f.next;continue}if(n=f,n===l){a?a===1?(n=w5(Yg(n),e),W1(n,e,t,i,r,s,2)):a===2&&R5(n,e,t,i,r,s):W1(Yg(n),e,t,i,r,s,1);break}}}function E5(n){const e=n.prev,t=n,i=n.next;if(ns(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,l=e.y,u=t.y,f=i.y,d=Math.min(r,s,a),v=Math.min(l,u,f),y=Math.max(r,s,a),A=Math.max(l,u,f);let b=i.next;for(;b!==e;){if(b.x>=d&&b.x<=y&&b.y>=v&&b.y<=A&&a1(r,l,s,u,a,f,b.x,b.y)&&ns(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function C5(n,e,t,i){const r=n.prev,s=n,a=n.next;if(ns(r,s,a)>=0)return!1;const l=r.x,u=s.x,f=a.x,d=r.y,v=s.y,y=a.y,A=Math.min(l,u,f),b=Math.min(d,v,y),C=Math.max(l,u,f),T=Math.max(d,v,y),M=VE(A,b,e,t,i),B=VE(C,T,e,t,i);let D=n.prevZ,O=n.nextZ;for(;D&&D.z>=M&&O&&O.z<=B;){if(D.x>=A&&D.x<=C&&D.y>=b&&D.y<=T&&D!==r&&D!==a&&a1(l,d,u,v,f,y,D.x,D.y)&&ns(D.prev,D,D.next)>=0||(D=D.prevZ,O.x>=A&&O.x<=C&&O.y>=b&&O.y<=T&&O!==r&&O!==a&&a1(l,d,u,v,f,y,O.x,O.y)&&ns(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;D&&D.z>=M;){if(D.x>=A&&D.x<=C&&D.y>=b&&D.y<=T&&D!==r&&D!==a&&a1(l,d,u,v,f,y,D.x,D.y)&&ns(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;O&&O.z<=B;){if(O.x>=A&&O.x<=C&&O.y>=b&&O.y<=T&&O!==r&&O!==a&&a1(l,d,u,v,f,y,O.x,O.y)&&ns(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function w5(n,e){let t=n;do{const i=t.prev,r=t.next.next;!X0(i,r)&&xP(i,t,t.next,r)&&Y1(i,r)&&Y1(r,i)&&(e.push(i.i,t.i,r.i),j1(t),j1(t.next),t=n=r),t=t.next}while(t!==n);return Yg(t)}function R5(n,e,t,i,r,s){let a=n;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&F5(a,l)){let u=AP(a,l);a=Yg(a,a.next),u=Yg(u,u.next),W1(a,e,t,i,r,s,0),W1(u,e,t,i,r,s,0);return}l=l.next}a=a.next}while(a!==n)}function D5(n,e,t,i){const r=[];for(let s=0,a=e.length;s<a;s++){const l=e[s]*i,u=s<a-1?e[s+1]*i:n.length,f=yP(n,l,u,i,!1);f===f.next&&(f.steiner=!0),r.push(I5(f))}r.sort(B5);for(let s=0;s<r.length;s++)t=U5(r[s],t);return t}function B5(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=i-r}return t}function U5(n,e){const t=O5(n,e);if(!t)return e;const i=AP(t,n);return Yg(i,i.next),Yg(t,t.next)}function O5(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,a;if(X0(n,t))return t;do{if(X0(n,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const v=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=i&&v>s&&(s=v,a=t.x<t.next.x?t:t.next,v===i))return a}t=t.next}while(t!==e);if(!a)return null;const l=a,u=a.x,f=a.y;let d=1/0;t=a;do{if(i>=t.x&&t.x>=u&&i!==t.x&&_P(r<f?i:s,r,u,f,r<f?s:i,r,t.x,t.y)){const v=Math.abs(r-t.y)/(i-t.x);Y1(t,n)&&(v<d||v===d&&(t.x>a.x||t.x===a.x&&L5(a,t)))&&(a=t,d=v)}t=t.next}while(t!==l);return a}function L5(n,e){return ns(n.prev,n,e.prev)<0&&ns(e.next,n,n.next)<0}function P5(n,e,t,i){let r=n;do r.z===0&&(r.z=VE(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,N5(r)}function N5(n){let e,t=1;do{let i=n,r;n=null;let s=null;for(e=0;i;){e++;let a=i,l=0;for(let f=0;f<t&&(l++,a=a.nextZ,!!a);f++);let u=t;for(;l>0||u>0&&a;)l!==0&&(u===0||!a||i.z<=a.z)?(r=i,i=i.nextZ,l--):(r=a,a=a.nextZ,u--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;i=a}s.nextZ=null,t*=2}while(e>1);return n}function VE(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function I5(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function _P(n,e,t,i,r,s,a,l){return(r-a)*(e-l)>=(n-a)*(s-l)&&(n-a)*(i-l)>=(t-a)*(e-l)&&(t-a)*(s-l)>=(r-a)*(i-l)}function a1(n,e,t,i,r,s,a,l){return!(n===a&&e===l)&&_P(n,e,t,i,r,s,a,l)}function F5(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!G5(n,e)&&(Y1(n,e)&&Y1(e,n)&&H5(n,e)&&(ns(n.prev,n,e.prev)||ns(n,e.prev,e))||X0(n,e)&&ns(n.prev,n,n.next)>0&&ns(e.prev,e,e.next)>0)}function ns(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function X0(n,e){return n.x===e.x&&n.y===e.y}function xP(n,e,t,i){const r=aA(ns(n,e,t)),s=aA(ns(n,e,i)),a=aA(ns(t,i,n)),l=aA(ns(t,i,e));return!!(r!==s&&a!==l||r===0&&sA(n,t,e)||s===0&&sA(n,i,e)||a===0&&sA(t,n,i)||l===0&&sA(t,e,i))}function sA(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function aA(n){return n>0?1:n<0?-1:0}function G5(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&xP(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Y1(n,e){return ns(n.prev,n,n.next)<0?ns(n,e,n.next)>=0&&ns(n,n.prev,e)>=0:ns(n,e,n.prev)<0||ns(n,n.next,e)<0}function H5(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function AP(n,e){const t=kE(n.i,n.x,n.y),i=kE(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function wD(n,e,t,i){const r=kE(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function j1(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function kE(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function z5(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class V5{static triangulate(e,t,i=2){return T5(e,t,i)}}class hf{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return hf.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];RD(e),DD(i,e);let a=e.length;t.forEach(RD);for(let u=0;u<t.length;u++)r.push(a),a+=t[u].length,DD(i,t[u]);const l=V5.triangulate(i,r);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function RD(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function DD(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ub extends Qn{constructor(e=new Gg([new xt(.5,.5),new xt(-.5,.5),new xt(-.5,-.5),new xt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,u=e.length;l<u;l++){const f=e[l];a(f)}this.setAttribute("position",new un(r,3)),this.setAttribute("uv",new un(s,2)),this.computeVertexNormals();function a(l){const u=[],f=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,v=t.depth!==void 0?t.depth:1;let y=t.bevelEnabled!==void 0?t.bevelEnabled:!0,A=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:A-.1,C=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,B=t.UVGenerator!==void 0?t.UVGenerator:k5;let D,O=!1,P,F,V,G;M&&(D=M.getSpacedPoints(d),O=!0,y=!1,P=M.computeFrenetFrames(d,!1),F=new he,V=new he,G=new he),y||(T=0,A=0,b=0,C=0);const I=l.extractPoints(f);let N=I.shape;const Q=I.holes;if(!hf.isClockWise(N)){N=N.reverse();for(let ie=0,ut=Q.length;ie<ut;ie++){const $e=Q[ie];hf.isClockWise($e)&&(Q[ie]=$e.reverse())}}function te(ie){const $e=10000000000000001e-36;let Ke=ie[0];for(let Pe=1;Pe<=ie.length;Pe++){const pt=Pe%ie.length,Ve=ie[pt],j=Ve.x-Ke.x,Y=Ve.y-Ke.y,_e=j*j+Y*Y,Ie=Math.max(Math.abs(Ve.x),Math.abs(Ve.y),Math.abs(Ke.x),Math.abs(Ke.y)),Ge=$e*Ie*Ie;if(_e<=Ge){ie.splice(pt,1),Pe--;continue}Ke=Ve}}te(N),Q.forEach(te);const se=Q.length,ye=N;for(let ie=0;ie<se;ie++){const ut=Q[ie];N=N.concat(ut)}function k(ie,ut,$e){return ut||console.error("THREE.ExtrudeGeometry: vec does not exist"),ie.clone().addScaledVector(ut,$e)}const ee=N.length;function ne(ie,ut,$e){let Ke,Pe,pt;const Ve=ie.x-ut.x,j=ie.y-ut.y,Y=$e.x-ie.x,_e=$e.y-ie.y,Ie=Ve*Ve+j*j,Ge=Ve*_e-j*Y;if(Math.abs(Ge)>Number.EPSILON){const Ye=Math.sqrt(Ie),it=Math.sqrt(Y*Y+_e*_e),rt=ut.x-j/Ye,yt=ut.y+Ve/Ye,Vt=$e.x-_e/it,ht=$e.y+Y/it,Lt=((Vt-rt)*_e-(ht-yt)*Y)/(Ve*_e-j*Y);Ke=rt+Ve*Lt-ie.x,Pe=yt+j*Lt-ie.y;const Et=Ke*Ke+Pe*Pe;if(Et<=2)return new xt(Ke,Pe);pt=Math.sqrt(Et/2)}else{let Ye=!1;Ve>Number.EPSILON?Y>Number.EPSILON&&(Ye=!0):Ve<-Number.EPSILON?Y<-Number.EPSILON&&(Ye=!0):Math.sign(j)===Math.sign(_e)&&(Ye=!0),Ye?(Ke=-j,Pe=Ve,pt=Math.sqrt(Ie)):(Ke=Ve,Pe=j,pt=Math.sqrt(Ie/2))}return new xt(Ke/pt,Pe/pt)}const de=[];for(let ie=0,ut=ye.length,$e=ut-1,Ke=ie+1;ie<ut;ie++,$e++,Ke++)$e===ut&&($e=0),Ke===ut&&(Ke=0),de[ie]=ne(ye[ie],ye[$e],ye[Ke]);const X=[];let J,ce=de.concat();for(let ie=0,ut=se;ie<ut;ie++){const $e=Q[ie];J=[];for(let Ke=0,Pe=$e.length,pt=Pe-1,Ve=Ke+1;Ke<Pe;Ke++,pt++,Ve++)pt===Pe&&(pt=0),Ve===Pe&&(Ve=0),J[Ke]=ne($e[Ke],$e[pt],$e[Ve]);X.push(J),ce=ce.concat(J)}let ge;if(T===0)ge=hf.triangulateShape(ye,Q);else{const ie=[],ut=[];for(let $e=0;$e<T;$e++){const Ke=$e/T,Pe=A*Math.cos(Ke*Math.PI/2),pt=b*Math.sin(Ke*Math.PI/2)+C;for(let Ve=0,j=ye.length;Ve<j;Ve++){const Y=k(ye[Ve],de[Ve],pt);gt(Y.x,Y.y,-Pe),Ke===0&&ie.push(Y)}for(let Ve=0,j=se;Ve<j;Ve++){const Y=Q[Ve];J=X[Ve];const _e=[];for(let Ie=0,Ge=Y.length;Ie<Ge;Ie++){const Ye=k(Y[Ie],J[Ie],pt);gt(Ye.x,Ye.y,-Pe),Ke===0&&_e.push(Ye)}Ke===0&&ut.push(_e)}}ge=hf.triangulateShape(ie,ut)}const oe=ge.length,ve=b+C;for(let ie=0;ie<ee;ie++){const ut=y?k(N[ie],ce[ie],ve):N[ie];O?(V.copy(P.normals[0]).multiplyScalar(ut.x),F.copy(P.binormals[0]).multiplyScalar(ut.y),G.copy(D[0]).add(V).add(F),gt(G.x,G.y,G.z)):gt(ut.x,ut.y,0)}for(let ie=1;ie<=d;ie++)for(let ut=0;ut<ee;ut++){const $e=y?k(N[ut],ce[ut],ve):N[ut];O?(V.copy(P.normals[ie]).multiplyScalar($e.x),F.copy(P.binormals[ie]).multiplyScalar($e.y),G.copy(D[ie]).add(V).add(F),gt(G.x,G.y,G.z)):gt($e.x,$e.y,v/d*ie)}for(let ie=T-1;ie>=0;ie--){const ut=ie/T,$e=A*Math.cos(ut*Math.PI/2),Ke=b*Math.sin(ut*Math.PI/2)+C;for(let Pe=0,pt=ye.length;Pe<pt;Pe++){const Ve=k(ye[Pe],de[Pe],Ke);gt(Ve.x,Ve.y,v+$e)}for(let Pe=0,pt=Q.length;Pe<pt;Pe++){const Ve=Q[Pe];J=X[Pe];for(let j=0,Y=Ve.length;j<Y;j++){const _e=k(Ve[j],J[j],Ke);O?gt(_e.x,_e.y+D[d-1].y,D[d-1].x+$e):gt(_e.x,_e.y,v+$e)}}}Se(),Re();function Se(){const ie=r.length/3;if(y){let ut=0,$e=ee*ut;for(let Ke=0;Ke<oe;Ke++){const Pe=ge[Ke];Mt(Pe[2]+$e,Pe[1]+$e,Pe[0]+$e)}ut=d+T*2,$e=ee*ut;for(let Ke=0;Ke<oe;Ke++){const Pe=ge[Ke];Mt(Pe[0]+$e,Pe[1]+$e,Pe[2]+$e)}}else{for(let ut=0;ut<oe;ut++){const $e=ge[ut];Mt($e[2],$e[1],$e[0])}for(let ut=0;ut<oe;ut++){const $e=ge[ut];Mt($e[0]+ee*d,$e[1]+ee*d,$e[2]+ee*d)}}i.addGroup(ie,r.length/3-ie,0)}function Re(){const ie=r.length/3;let ut=0;Le(ye,ut),ut+=ye.length;for(let $e=0,Ke=Q.length;$e<Ke;$e++){const Pe=Q[$e];Le(Pe,ut),ut+=Pe.length}i.addGroup(ie,r.length/3-ie,1)}function Le(ie,ut){let $e=ie.length;for(;--$e>=0;){const Ke=$e;let Pe=$e-1;Pe<0&&(Pe=ie.length-1);for(let pt=0,Ve=d+T*2;pt<Ve;pt++){const j=ee*pt,Y=ee*(pt+1),_e=ut+Ke+j,Ie=ut+Pe+j,Ge=ut+Pe+Y,Ye=ut+Ke+Y;At(_e,Ie,Ge,Ye)}}}function gt(ie,ut,$e){u.push(ie),u.push(ut),u.push($e)}function Mt(ie,ut,$e){at(ie),at(ut),at($e);const Ke=r.length/3,Pe=B.generateTopUV(i,r,Ke-3,Ke-2,Ke-1);Nt(Pe[0]),Nt(Pe[1]),Nt(Pe[2])}function At(ie,ut,$e,Ke){at(ie),at(ut),at(Ke),at(ut),at($e),at(Ke);const Pe=r.length/3,pt=B.generateSideWallUV(i,r,Pe-6,Pe-3,Pe-2,Pe-1);Nt(pt[0]),Nt(pt[1]),Nt(pt[3]),Nt(pt[1]),Nt(pt[2]),Nt(pt[3])}function at(ie){r.push(u[ie*3+0]),r.push(u[ie*3+1]),r.push(u[ie*3+2])}function Nt(ie){s.push(ie.x),s.push(ie.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return X5(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new NS[r.type]().fromJSON(r)),new Ub(i,e.options)}}const k5={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],l=e[i*3],u=e[i*3+1],f=e[r*3],d=e[r*3+1];return[new xt(s,a),new xt(l,u),new xt(f,d)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],l=e[t*3+1],u=e[t*3+2],f=e[i*3],d=e[i*3+1],v=e[i*3+2],y=e[r*3],A=e[r*3+1],b=e[r*3+2],C=e[s*3],T=e[s*3+1],M=e[s*3+2];return Math.abs(l-d)<Math.abs(a-f)?[new xt(a,1-u),new xt(f,1-v),new xt(y,1-b),new xt(C,1-M)]:[new xt(l,1-u),new xt(d,1-v),new xt(A,1-b),new xt(T,1-M)]}};function X5(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class B_ extends im{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new B_(e.radius,e.detail)}}class Ob extends Qn{constructor(e=[new xt(0,-.5),new xt(.5,0),new xt(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Jn(r,0,Math.PI*2);const s=[],a=[],l=[],u=[],f=[],d=1/t,v=new he,y=new xt,A=new he,b=new he,C=new he;let T=0,M=0;for(let B=0;B<=e.length-1;B++)switch(B){case 0:T=e[B+1].x-e[B].x,M=e[B+1].y-e[B].y,A.x=M*1,A.y=-T,A.z=M*0,C.copy(A),A.normalize(),u.push(A.x,A.y,A.z);break;case e.length-1:u.push(C.x,C.y,C.z);break;default:T=e[B+1].x-e[B].x,M=e[B+1].y-e[B].y,A.x=M*1,A.y=-T,A.z=M*0,b.copy(A),A.x+=C.x,A.y+=C.y,A.z+=C.z,A.normalize(),u.push(A.x,A.y,A.z),C.copy(b)}for(let B=0;B<=t;B++){const D=i+B*d*r,O=Math.sin(D),P=Math.cos(D);for(let F=0;F<=e.length-1;F++){v.x=e[F].x*O,v.y=e[F].y,v.z=e[F].x*P,a.push(v.x,v.y,v.z),y.x=B/t,y.y=F/(e.length-1),l.push(y.x,y.y);const V=u[3*F+0]*O,G=u[3*F+1],I=u[3*F+0]*P;f.push(V,G,I)}}for(let B=0;B<t;B++)for(let D=0;D<e.length-1;D++){const O=D+B*e.length,P=O,F=O+e.length,V=O+e.length+1,G=O+1;s.push(P,F,G),s.push(V,G,F)}this.setIndex(s),this.setAttribute("position",new un(a,3)),this.setAttribute("uv",new un(l,2)),this.setAttribute("normal",new un(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ob(e.points,e.segments,e.phiStart,e.phiLength)}}class U_ extends im{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new U_(e.radius,e.detail)}}class xf extends Qn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,l=Math.floor(i),u=Math.floor(r),f=l+1,d=u+1,v=e/l,y=t/u,A=[],b=[],C=[],T=[];for(let M=0;M<d;M++){const B=M*y-a;for(let D=0;D<f;D++){const O=D*v-s;b.push(O,-B,0),C.push(0,0,1),T.push(D/l),T.push(1-M/u)}}for(let M=0;M<u;M++)for(let B=0;B<l;B++){const D=B+f*M,O=B+f*(M+1),P=B+1+f*(M+1),F=B+1+f*M;A.push(D,O,F),A.push(O,P,F)}this.setIndex(A),this.setAttribute("position",new un(b,3)),this.setAttribute("normal",new un(C,3)),this.setAttribute("uv",new un(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xf(e.width,e.height,e.widthSegments,e.heightSegments)}}class Lb extends Qn{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const l=[],u=[],f=[],d=[];let v=e;const y=(t-e)/r,A=new he,b=new xt;for(let C=0;C<=r;C++){for(let T=0;T<=i;T++){const M=s+T/i*a;A.x=v*Math.cos(M),A.y=v*Math.sin(M),u.push(A.x,A.y,A.z),f.push(0,0,1),b.x=(A.x/t+1)/2,b.y=(A.y/t+1)/2,d.push(b.x,b.y)}v+=y}for(let C=0;C<r;C++){const T=C*(i+1);for(let M=0;M<i;M++){const B=M+T,D=B,O=B+i+1,P=B+i+2,F=B+1;l.push(D,O,F),l.push(O,P,F)}}this.setIndex(l),this.setAttribute("position",new un(u,3)),this.setAttribute("normal",new un(f,3)),this.setAttribute("uv",new un(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Pb extends Qn{constructor(e=new Gg([new xt(0,.5),new xt(-.5,-.5),new xt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let l=0,u=0;if(Array.isArray(e)===!1)f(e);else for(let d=0;d<e.length;d++)f(e[d]),this.addGroup(l,u,d),l+=u,u=0;this.setIndex(i),this.setAttribute("position",new un(r,3)),this.setAttribute("normal",new un(s,3)),this.setAttribute("uv",new un(a,2));function f(d){const v=r.length/3,y=d.extractPoints(t);let A=y.shape;const b=y.holes;hf.isClockWise(A)===!1&&(A=A.reverse());for(let T=0,M=b.length;T<M;T++){const B=b[T];hf.isClockWise(B)===!0&&(b[T]=B.reverse())}const C=hf.triangulateShape(A,b);for(let T=0,M=b.length;T<M;T++){const B=b[T];A=A.concat(B)}for(let T=0,M=A.length;T<M;T++){const B=A[T];r.push(B.x,B.y,0),s.push(0,0,1),a.push(B.x,B.y)}for(let T=0,M=C.length;T<M;T++){const B=C[T],D=B[0]+v,O=B[1]+v,P=B[2]+v;i.push(D,O,P),u+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return W5(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new Pb(i,e.curveSegments)}}function W5(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class O_ extends Qn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const u=Math.min(a+l,Math.PI);let f=0;const d=[],v=new he,y=new he,A=[],b=[],C=[],T=[];for(let M=0;M<=i;M++){const B=[],D=M/i;let O=0;M===0&&a===0?O=.5/t:M===i&&u===Math.PI&&(O=-.5/t);for(let P=0;P<=t;P++){const F=P/t;v.x=-e*Math.cos(r+F*s)*Math.sin(a+D*l),v.y=e*Math.cos(a+D*l),v.z=e*Math.sin(r+F*s)*Math.sin(a+D*l),b.push(v.x,v.y,v.z),y.copy(v).normalize(),C.push(y.x,y.y,y.z),T.push(F+O,1-D),B.push(f++)}d.push(B)}for(let M=0;M<i;M++)for(let B=0;B<t;B++){const D=d[M][B+1],O=d[M][B],P=d[M+1][B],F=d[M+1][B+1];(M!==0||a>0)&&A.push(D,O,F),(M!==i-1||u<Math.PI)&&A.push(O,P,F)}this.setIndex(A),this.setAttribute("position",new un(b,3)),this.setAttribute("normal",new un(C,3)),this.setAttribute("uv",new un(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new O_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Nb extends im{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nb(e.radius,e.detail)}}class Ib extends Qn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],f=[],d=new he,v=new he,y=new he;for(let A=0;A<=i;A++)for(let b=0;b<=r;b++){const C=b/r*s,T=A/i*Math.PI*2;v.x=(e+t*Math.cos(T))*Math.cos(C),v.y=(e+t*Math.cos(T))*Math.sin(C),v.z=t*Math.sin(T),l.push(v.x,v.y,v.z),d.x=e*Math.cos(C),d.y=e*Math.sin(C),y.subVectors(v,d).normalize(),u.push(y.x,y.y,y.z),f.push(b/r),f.push(A/i)}for(let A=1;A<=i;A++)for(let b=1;b<=r;b++){const C=(r+1)*A+b-1,T=(r+1)*(A-1)+b-1,M=(r+1)*(A-1)+b,B=(r+1)*A+b;a.push(C,T,B),a.push(T,M,B)}this.setIndex(a),this.setAttribute("position",new un(l,3)),this.setAttribute("normal",new un(u,3)),this.setAttribute("uv",new un(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ib(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Fb extends Qn{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const l=[],u=[],f=[],d=[],v=new he,y=new he,A=new he,b=new he,C=new he,T=new he,M=new he;for(let D=0;D<=i;++D){const O=D/i*s*Math.PI*2;B(O,s,a,e,A),B(O+.01,s,a,e,b),T.subVectors(b,A),M.addVectors(b,A),C.crossVectors(T,M),M.crossVectors(C,T),C.normalize(),M.normalize();for(let P=0;P<=r;++P){const F=P/r*Math.PI*2,V=-t*Math.cos(F),G=t*Math.sin(F);v.x=A.x+(V*M.x+G*C.x),v.y=A.y+(V*M.y+G*C.y),v.z=A.z+(V*M.z+G*C.z),u.push(v.x,v.y,v.z),y.subVectors(v,A).normalize(),f.push(y.x,y.y,y.z),d.push(D/i),d.push(P/r)}}for(let D=1;D<=i;D++)for(let O=1;O<=r;O++){const P=(r+1)*(D-1)+(O-1),F=(r+1)*D+(O-1),V=(r+1)*D+O,G=(r+1)*(D-1)+O;l.push(P,F,G),l.push(F,V,G)}this.setIndex(l),this.setAttribute("position",new un(u,3)),this.setAttribute("normal",new un(f,3)),this.setAttribute("uv",new un(d,2));function B(D,O,P,F,V){const G=Math.cos(D),I=Math.sin(D),N=P/O*D,Q=Math.cos(N);V.x=F*(2+Q)*.5*G,V.y=F*(2+Q)*I*.5,V.z=F*Math.sin(N)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Gb extends Qn{constructor(e=new E2(new he(-1,-1,0),new he(-1,1,0),new he(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new he,u=new he,f=new xt;let d=new he;const v=[],y=[],A=[],b=[];C(),this.setIndex(b),this.setAttribute("position",new un(v,3)),this.setAttribute("normal",new un(y,3)),this.setAttribute("uv",new un(A,2));function C(){for(let D=0;D<t;D++)T(D);T(s===!1?t:0),B(),M()}function T(D){d=e.getPointAt(D/t,d);const O=a.normals[D],P=a.binormals[D];for(let F=0;F<=r;F++){const V=F/r*Math.PI*2,G=Math.sin(V),I=-Math.cos(V);u.x=I*O.x+G*P.x,u.y=I*O.y+G*P.y,u.z=I*O.z+G*P.z,u.normalize(),y.push(u.x,u.y,u.z),l.x=d.x+i*u.x,l.y=d.y+i*u.y,l.z=d.z+i*u.z,v.push(l.x,l.y,l.z)}}function M(){for(let D=1;D<=t;D++)for(let O=1;O<=r;O++){const P=(r+1)*(D-1)+(O-1),F=(r+1)*D+(O-1),V=(r+1)*D+O,G=(r+1)*(D-1)+O;b.push(P,F,G),b.push(F,V,G)}}function B(){for(let D=0;D<=t;D++)for(let O=0;O<=r;O++)f.x=D/t,f.y=O/r,A.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Gb(new NS[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class SP extends Qn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new he,s=new he;if(e.index!==null){const a=e.attributes.position,l=e.index;let u=e.groups;u.length===0&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,d=u.length;f<d;++f){const v=u[f],y=v.start,A=v.count;for(let b=y,C=y+A;b<C;b+=3)for(let T=0;T<3;T++){const M=l.getX(b+T),B=l.getX(b+(T+1)%3);r.fromBufferAttribute(a,M),s.fromBufferAttribute(a,B),BD(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let l=0,u=a.count/3;l<u;l++)for(let f=0;f<3;f++){const d=3*l+f,v=3*l+(f+1)%3;r.fromBufferAttribute(a,d),s.fromBufferAttribute(a,v),BD(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new un(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function BD(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var UD=Object.freeze({__proto__:null,BoxGeometry:$g,CapsuleGeometry:wb,CircleGeometry:Rb,ConeGeometry:D_,CylinderGeometry:R_,DodecahedronGeometry:Db,EdgesGeometry:hP,ExtrudeGeometry:Ub,IcosahedronGeometry:B_,LatheGeometry:Ob,OctahedronGeometry:U_,PlaneGeometry:xf,PolyhedronGeometry:im,RingGeometry:Lb,ShapeGeometry:Pb,SphereGeometry:O_,TetrahedronGeometry:Nb,TorusGeometry:Ib,TorusKnotGeometry:Fb,TubeGeometry:Gb,WireframeGeometry:SP});class bP extends ca{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new jt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class MP extends pl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class L_ extends ca{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new jt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nm,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bu,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xc extends L_{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new xt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Jn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new jt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new jt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new jt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class TP extends ca{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new jt(16777215),this.specular=new jt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nm,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bu,this.combine=__,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class EP extends ca{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new jt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nm,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class CP extends ca{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nm,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class wP extends ca{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new jt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new jt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nm,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Bu,this.combine=__,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Hb extends ca{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=WL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class zb extends ca{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class RP extends ca{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new jt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nm,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class DP extends Bo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Dg(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function BP(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function UP(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function XE(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const l=t[s]*e;for(let u=0;u!==e;++u)r[a++]=n[l+u]}return r}function w2(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push(...a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function Y5(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let u=0;u<s.tracks.length;++u){const f=s.tracks[u],d=f.getValueSize(),v=[],y=[];for(let A=0;A<f.times.length;++A){const b=f.times[A]*r;if(!(b<t||b>=i)){v.push(f.times[A]);for(let C=0;C<d;++C)y.push(f.values[A*d+C])}}v.length!==0&&(f.times=Dg(v,f.times.constructor),f.values=Dg(y,f.values.constructor),a.push(f))}s.tracks=a;let l=1/0;for(let u=0;u<s.tracks.length;++u)l>s.tracks[u].times[0]&&(l=s.tracks[u].times[0]);for(let u=0;u<s.tracks.length;++u)s.tracks[u].shift(-1*l);return s.resetDuration(),s}function j5(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const l=t.tracks[a],u=l.ValueTypeName;if(u==="bool"||u==="string")continue;const f=n.tracks.find(function(M){return M.name===l.name&&M.ValueTypeName===u});if(f===void 0)continue;let d=0;const v=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=v/3);let y=0;const A=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=A/3);const b=l.times.length-1;let C;if(s<=l.times[0]){const M=d,B=v-d;C=l.values.slice(M,B)}else if(s>=l.times[b]){const M=b*v+d,B=M+v-d;C=l.values.slice(M,B)}else{const M=l.createInterpolant(),B=d,D=v-d;M.evaluate(s),C=M.resultBuffer.slice(B,D)}u==="quaternion"&&new Da().fromArray(C).normalize().conjugate().toArray(C);const T=f.times.length;for(let M=0;M<T;++M){const B=M*A+y;if(u==="quaternion")Da.multiplyQuaternionsFlat(f.values,B,C,0,f.values,B);else{const D=A-y*2;for(let O=0;O<D;++O)f.values[B+O]-=C[O]}}}return n.blendMode=l2,n}class q5{static convertArray(e,t){return Dg(e,t)}static isTypedArray(e){return BP(e)}static getKeyframeOrder(e){return UP(e)}static sortedArray(e,t,i){return XE(e,t,i)}static flattenJSON(e,t,i,r){w2(e,t,i,r)}static subclip(e,t,i,r,s=30){return Y5(e,t,i,r,s)}static makeClipAdditive(e,t=0,i=e,r=30){return j5(e,t,i,r)}}class ny{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(i=2,s=l);for(let u=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===u)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const l=i+a>>>1;e<t[l]?a=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class OP extends ny{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Cg,endingEnd:Cg}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,l=r[s],u=r[a];if(l===void 0)switch(this.getSettings_().endingStart){case wg:s=e,l=2*t-i;break;case H1:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(u===void 0)switch(this.getSettings_().endingEnd){case wg:a=e,u=2*i-t;break;case H1:a=1,u=i+r[1]-r[0];break;default:a=e-1,u=t}const f=(i-t)*.5,d=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(u-i),this._offsetPrev=s*d,this._offsetNext=a*d}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=e*l,f=u-l,d=this._offsetPrev,v=this._offsetNext,y=this._weightPrev,A=this._weightNext,b=(i-t)/(r-t),C=b*b,T=C*b,M=-y*T+2*y*C-y*b,B=(1+y)*T+(-1.5-2*y)*C+(-.5+y)*b+1,D=(-1-A)*T+(1.5+A)*C+.5*b,O=A*T-A*C;for(let P=0;P!==l;++P)s[P]=M*a[d+P]+B*a[f+P]+D*a[u+P]+O*a[v+P];return s}}class R2 extends ny{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=e*l,f=u-l,d=(i-t)/(r-t),v=1-d;for(let y=0;y!==l;++y)s[y]=a[f+y]*v+a[u+y]*d;return s}}class LP extends ny{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ac{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Dg(t,this.TimeBufferType),this.values=Dg(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Dg(e.times,Array),values:Dg(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new LP(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new R2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new OP(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case G0:t=this.InterpolantFactoryMethodDiscrete;break;case H0:t=this.InterpolantFactoryMethodLinear;break;case LA:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return G0;case this.InterpolantFactoryMethodLinear:return H0;case this.InterpolantFactoryMethodSmooth:return LA}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const l=this.getValueSize();this.times=i.slice(s,a),this.values=this.values.slice(s*l,a*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==s;l++){const u=i[l];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(a!==null&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,a),e=!1;break}a=u}if(r!==void 0&&BP(r))for(let l=0,u=r.length;l!==u;++l){const f=r[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===LA,s=e.length-1;let a=1;for(let l=1;l<s;++l){let u=!1;const f=e[l],d=e[l+1];if(f!==d&&(l!==1||f!==e[0]))if(r)u=!0;else{const v=l*i,y=v-i,A=v+i;for(let b=0;b!==i;++b){const C=t[v+b];if(C!==t[y+b]||C!==t[A+b]){u=!0;break}}}if(u){if(l!==a){e[a]=e[l];const v=l*i,y=a*i;for(let A=0;A!==i;++A)t[y+A]=t[v+A]}++a}}if(s>0){e[a]=e[s];for(let l=s*i,u=a*i,f=0;f!==i;++f)t[u+f]=t[l+f];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ac.prototype.ValueTypeName="";Ac.prototype.TimeBufferType=Float32Array;Ac.prototype.ValueBufferType=Float32Array;Ac.prototype.DefaultInterpolation=H0;class ev extends Ac{constructor(e,t,i){super(e,t,i)}}ev.prototype.ValueTypeName="bool";ev.prototype.ValueBufferType=Array;ev.prototype.DefaultInterpolation=G0;ev.prototype.InterpolantFactoryMethodLinear=void 0;ev.prototype.InterpolantFactoryMethodSmooth=void 0;class D2 extends Ac{constructor(e,t,i,r){super(e,t,i,r)}}D2.prototype.ValueTypeName="color";class jg extends Ac{constructor(e,t,i,r){super(e,t,i,r)}}jg.prototype.ValueTypeName="number";class PP extends ny{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=(i-t)/(r-t);let f=e*l;for(let d=f+l;f!==d;f+=4)Da.slerpFlat(s,0,a,f-l,a,f,u);return s}}class qg extends Ac{constructor(e,t,i,r){super(e,t,i,r)}InterpolantFactoryMethodLinear(e){return new PP(this.times,this.values,this.getValueSize(),e)}}qg.prototype.ValueTypeName="quaternion";qg.prototype.InterpolantFactoryMethodSmooth=void 0;class tv extends Ac{constructor(e,t,i){super(e,t,i)}}tv.prototype.ValueTypeName="string";tv.prototype.ValueBufferType=Array;tv.prototype.DefaultInterpolation=G0;tv.prototype.InterpolantFactoryMethodLinear=void 0;tv.prototype.InterpolantFactoryMethodSmooth=void 0;class Kg extends Ac{constructor(e,t,i,r){super(e,t,i,r)}}Kg.prototype.ValueTypeName="vector";class W0{constructor(e="",t=-1,i=[],r=yb){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Du(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,l=i.length;a!==l;++a)t.push(J5(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(Ac.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let l=0;l<s;l++){let u=[],f=[];u.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const d=UP(u);u=XE(u,1,d),f=XE(f,1,d),!r&&u[0]===0&&(u.push(s),f.push(f[0])),a.push(new jg(".morphTargetInfluences["+t[l].name+"]",u,f).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const f=e[l],d=f.name.match(s);if(d&&d.length>1){const v=d[1];let y=r[v];y||(r[v]=y=[]),y.push(f)}}const a=[];for(const l in r)a.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return a}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(v,y,A,b,C){if(A.length!==0){const T=[],M=[];w2(A,T,M,b),T.length!==0&&C.push(new v(y,T,M))}},r=[],s=e.name||"default",a=e.fps||30,l=e.blendMode;let u=e.length||-1;const f=e.hierarchy||[];for(let v=0;v<f.length;v++){const y=f[v].keys;if(!(!y||y.length===0))if(y[0].morphTargets){const A={};let b;for(b=0;b<y.length;b++)if(y[b].morphTargets)for(let C=0;C<y[b].morphTargets.length;C++)A[y[b].morphTargets[C]]=-1;for(const C in A){const T=[],M=[];for(let B=0;B!==y[b].morphTargets.length;++B){const D=y[b];T.push(D.time),M.push(D.morphTarget===C?1:0)}r.push(new jg(".morphTargetInfluence["+C+"]",T,M))}u=A.length*a}else{const A=".bones["+t[v].name+"]";i(Kg,A+".position",y,"pos",r),i(qg,A+".quaternion",y,"rot",r),i(Kg,A+".scale",y,"scl",r)}}return r.length===0?null:new this(s,u,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function K5(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return jg;case"vector":case"vector2":case"vector3":case"vector4":return Kg;case"color":return D2;case"quaternion":return qg;case"bool":case"boolean":return ev;case"string":return tv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function J5(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=K5(n.type);if(n.times===void 0){const t=[],i=[];w2(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Td={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Vb{constructor(e,t,i){const r=this;let s=!1,a=0,l=0,u;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){l++,s===!1&&r.onStart!==void 0&&r.onStart(d,a,l),s=!0},this.itemEnd=function(d){a++,r.onProgress!==void 0&&r.onProgress(d,a,l),a===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return u?u(d):d},this.setURLModifier=function(d){return u=d,this},this.addHandler=function(d,v){return f.push(d,v),this},this.removeHandler=function(d){const v=f.indexOf(d);return v!==-1&&f.splice(v,2),this},this.getHandler=function(d){for(let v=0,y=f.length;v<y;v+=2){const A=f[v],b=f[v+1];if(A.global&&(A.lastIndex=0),A.test(d))return b}return null}}}const NP=new Vb;class to{constructor(e){this.manager=e!==void 0?e:NP,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}to.DEFAULT_MATERIAL_NAME="__DEFAULT";const vd={};class Z5 extends Error{constructor(e,t){super(e),this.response=t}}class eo extends to{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Td.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(vd[e]!==void 0){vd[e].push({onLoad:t,onProgress:i,onError:r});return}vd[e]=[],vd[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(a).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const d=vd[e],v=f.body.getReader(),y=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),A=y?parseInt(y):0,b=A!==0;let C=0;const T=new ReadableStream({start(M){B();function B(){v.read().then(({done:D,value:O})=>{if(D)M.close();else{C+=O.byteLength;const P=new ProgressEvent("progress",{lengthComputable:b,loaded:C,total:A});for(let F=0,V=d.length;F<V;F++){const G=d[F];G.onProgress&&G.onProgress(P)}M.enqueue(O),B()}},D=>{M.error(D)})}}});return new Response(T)}else throw new Z5(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(u){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(d=>new DOMParser().parseFromString(d,l));case"json":return f.json();default:if(l==="")return f.text();{const v=/charset="?([^;"\s]*)"?/i.exec(l),y=v&&v[1]?v[1].toLowerCase():void 0,A=new TextDecoder(y);return f.arrayBuffer().then(b=>A.decode(b))}}}).then(f=>{Td.add(e,f);const d=vd[e];delete vd[e];for(let v=0,y=d.length;v<y;v++){const A=d[v];A.onLoad&&A.onLoad(f)}}).catch(f=>{const d=vd[e];if(d===void 0)throw this.manager.itemError(e),f;delete vd[e];for(let v=0,y=d.length;v<y;v++){const A=d[v];A.onError&&A.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Q5 extends to{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new eo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=W0.parse(e[i]);t.push(r)}return t}}class $5 extends to{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],l=new Eb,u=new eo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(s.withCredentials);let f=0;function d(v){u.load(e[v],function(y){const A=s.parse(y,!0);a[v]={width:A.width,height:A.height,format:A.format,mipmaps:A.mipmaps},f+=1,f===6&&(A.mipmapCount===1&&(l.minFilter=qi),l.image=a,l.format=A.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let v=0,y=e.length;v<y;++v)d(v);else u.load(e,function(v){const y=s.parse(v,!0);if(y.isCubemap){const A=y.mipmaps.length/y.mipmapCount;for(let b=0;b<A;b++){a[b]={mipmaps:[]};for(let C=0;C<y.mipmapCount;C++)a[b].mipmaps.push(y.mipmaps[b*y.mipmapCount+C]),a[b].format=y.format,a[b].width=y.width,a[b].height=y.height}l.image=a}else l.image.width=y.width,l.image.height=y.height,l.mipmaps=y.mipmaps;y.mipmapCount===1&&(l.minFilter=qi),l.format=y.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}class q1 extends to{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Td.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const l=X1("img");function u(){d(),Td.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(v){d(),r&&r(v),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){l.removeEventListener("load",u,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class IP extends to{constructor(e){super(e)}load(e,t,i,r){const s=new M_;s.colorSpace=$a;const a=new q1(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function u(f){a.load(e[f],function(d){s.images[f]=d,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)u(f);return s}}class B2 extends to{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new mf,l=new eo(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(u){let f;try{f=s.parse(u)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}f.image!==void 0?a.image=f.image:f.data!==void 0&&(a.image.width=f.width,a.image.height=f.height,a.image.data=f.data),a.wrapS=f.wrapS!==void 0?f.wrapS:Is,a.wrapT=f.wrapT!==void 0?f.wrapT:Is,a.magFilter=f.magFilter!==void 0?f.magFilter:qi,a.minFilter=f.minFilter!==void 0?f.minFilter:qi,a.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(a.colorSpace=f.colorSpace),f.flipY!==void 0&&(a.flipY=f.flipY),f.format!==void 0&&(a.format=f.format),f.type!==void 0&&(a.type=f.type),f.mipmaps!==void 0&&(a.mipmaps=f.mipmaps,a.minFilter=pc),f.mipmapCount===1&&(a.minFilter=qi),f.generateMipmaps!==void 0&&(a.generateMipmaps=f.generateMipmaps),a.needsUpdate=!0,t&&t(a,f)},i,r),a}}class FP extends to{constructor(e){super(e)}load(e,t,i,r){const s=new ar,a=new q1(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class rm extends Fi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new jt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class GP extends rm{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Fi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new jt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const _T=new Tn,OD=new he,LD=new he;class U2{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new xt(512,512),this.mapType=dl,this.map=null,this.mapPass=null,this.matrix=new Tn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ty,this._frameExtents=new xt(1,1),this._viewportCount=1,this._viewports=[new Ii(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;OD.setFromMatrixPosition(e.matrixWorld),t.position.copy(OD),LD.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(LD),t.updateMatrixWorld(),_T.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_T),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(_T)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class eV extends U2{constructor(){super(new Ss(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=z0*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class O2 extends rm{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Fi.DEFAULT_UP),this.updateMatrix(),this.target=new Fi,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new eV}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const PD=new Tn,jy=new he,xT=new he;class tV extends U2{constructor(){super(new Ss(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new xt(4,2),this._viewportCount=6,this._viewports=[new Ii(2,1,1,1),new Ii(0,1,1,1),new Ii(3,1,1,1),new Ii(1,1,1,1),new Ii(3,0,1,1),new Ii(1,0,1,1)],this._cubeDirections=[new he(1,0,0),new he(-1,0,0),new he(0,0,1),new he(0,0,-1),new he(0,1,0),new he(0,-1,0)],this._cubeUps=[new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,1,0),new he(0,0,1),new he(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),jy.setFromMatrixPosition(e.matrixWorld),i.position.copy(jy),xT.copy(i.position),xT.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(xT),i.updateMatrixWorld(),r.makeTranslation(-jy.x,-jy.y,-jy.z),PD.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PD)}}class L2 extends rm{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new tV}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class uh extends Ab{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,l=r+t,u=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,a=s+f*this.view.width,l-=d*this.view.offsetY,u=l-d*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,u,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class nV extends U2{constructor(){super(new uh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class P2 extends rm{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Fi.DEFAULT_UP),this.updateMatrix(),this.target=new Fi,this.shadow=new nV}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class HP extends rm{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class zP extends rm{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class VP{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new he)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class kP extends rm{constructor(e=new VP,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class kb extends to{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new eo(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new jt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new jt().setHex(a.value);break;case"v2":r.uniforms[s].value=new xt().fromArray(a.value);break;case"v3":r.uniforms[s].value=new he().fromArray(a.value);break;case"v4":r.uniforms[s].value=new Ii().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Kn().fromArray(a.value);break;case"m4":r.uniforms[s].value=new Tn().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new xt().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new xt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return kb.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:bP,SpriteMaterial:v2,RawShaderMaterial:MP,ShaderMaterial:pl,PointsMaterial:Tb,MeshPhysicalMaterial:xc,MeshStandardMaterial:L_,MeshPhongMaterial:TP,MeshToonMaterial:EP,MeshNormalMaterial:CP,MeshLambertMaterial:wP,MeshDepthMaterial:Hb,MeshDistanceMaterial:zb,MeshBasicMaterial:ul,MeshMatcapMaterial:RP,LineDashedMaterial:DP,LineBasicMaterial:Bo,Material:ca};return new t[e]}}class Wp{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class N2 extends Qn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class XP extends to{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new eo(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(A,b){if(t[b]!==void 0)return t[b];const T=A.interleavedBuffers[b],M=s(A,T.buffer),B=m0(T.type,M),D=new C_(B,T.stride);return D.uuid=T.uuid,t[b]=D,D}function s(A,b){if(i[b]!==void 0)return i[b];const T=A.arrayBuffers[b],M=new Uint32Array(T).buffer;return i[b]=M,M}const a=e.isInstancedBufferGeometry?new N2:new Qn,l=e.data.index;if(l!==void 0){const A=m0(l.type,l.array);a.setIndex(new Ki(A,1))}const u=e.data.attributes;for(const A in u){const b=u[A];let C;if(b.isInterleavedBufferAttribute){const T=r(e.data,b.data);C=new Jp(T,b.itemSize,b.offset,b.normalized)}else{const T=m0(b.type,b.array),M=b.isInstancedBufferAttribute?Zp:Ki;C=new M(T,b.itemSize,b.normalized)}b.name!==void 0&&(C.name=b.name),b.usage!==void 0&&C.setUsage(b.usage),a.setAttribute(A,C)}const f=e.data.morphAttributes;if(f)for(const A in f){const b=f[A],C=[];for(let T=0,M=b.length;T<M;T++){const B=b[T];let D;if(B.isInterleavedBufferAttribute){const O=r(e.data,B.data);D=new Jp(O,B.itemSize,B.offset,B.normalized)}else{const O=m0(B.type,B.array);D=new Ki(O,B.itemSize,B.normalized)}B.name!==void 0&&(D.name=B.name),C.push(D)}a.morphAttributes[A]=C}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const v=e.data.groups||e.data.drawcalls||e.data.offsets;if(v!==void 0)for(let A=0,b=v.length;A!==b;++A){const C=v[A];a.addGroup(C.start,C.count,C.materialIndex)}const y=e.data.boundingSphere;if(y!==void 0){const A=new he;y.center!==void 0&&A.fromArray(y.center),a.boundingSphere=new ua(A,y.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class iV extends to{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?Wp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new eo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let f=null;try{f=JSON.parse(u)}catch(v){r!==void 0&&r(v),console.error("THREE:ObjectLoader: Can't parse "+e+".",v.message);return}const d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Wp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new eo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),l=JSON.parse(a),u=l.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,s,u,l,i),d=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,d),this.bindLightTargets(f),t!==void 0){let v=!1;for(const y in a)if(a[y].data instanceof HTMLImageElement){v=!0;break}v===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,r,l,a,t),f=this.parseSkeletons(e.skeletons,u);return this.bindSkeletons(u,f),this.bindLightTargets(u),u}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Gg().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=new w_().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new XP;for(let s=0,a=e.length;s<a;s++){let l;const u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(u);break;default:u.type in UD?l=UD[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,u.name!==void 0&&(l.name=u.name),u.userData!==void 0&&(l.userData=u.userData),i[u.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new kb;s.setTextures(t);for(let a=0,l=e.length;a<l;a++){const u=e[a];i[u.uuid]===void 0&&(i[u.uuid]=s.parse(u)),r[u.uuid]=i[u.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=W0.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(u){return i.manager.itemStart(u),s.load(u,function(){i.manager.itemEnd(u)},void 0,function(){i.manager.itemError(u),i.manager.itemEnd(u)})}function l(u){if(typeof u=="string"){const f=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return a(d)}else return u.data?{data:m0(u.type,u.data),width:u.width,height:u.height}:null}if(e!==void 0&&e.length>0){const u=new Vb(t);s=new q1(u),s.setCrossOrigin(this.crossOrigin);for(let f=0,d=e.length;f<d;f++){const v=e[f],y=v.url;if(Array.isArray(y)){const A=[];for(let b=0,C=y.length;b<C;b++){const T=y[b],M=l(T);M!==null&&(M instanceof HTMLImageElement?A.push(M):A.push(new mf(M.data,M.width,M.height)))}r[v.uuid]=new zp(A)}else{const A=l(v.url);r[v.uuid]=new zp(A)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const l=a,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(u)}else return a.data?{data:m0(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new q1(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const u=e[a],f=u.url;if(Array.isArray(f)){const d=[];for(let v=0,y=f.length;v<y;v++){const A=f[v],b=await s(A);b!==null&&(b instanceof HTMLImageElement?d.push(b):d.push(new mf(b.data,b.width,b.height)))}i[u.uuid]=new zp(d)}else{const d=await s(u.url);i[u.uuid]=new zp(d)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=t[l.image],f=u.data;let d;Array.isArray(f)?(d=new M_,f.length===6&&(d.needsUpdate=!0)):(f&&f.data?d=new mf:d=new ar,f&&(d.needsUpdate=!0)),d.source=u,d.uuid=l.uuid,l.name!==void 0&&(d.name=l.name),l.mapping!==void 0&&(d.mapping=i(l.mapping,rV)),l.channel!==void 0&&(d.channel=l.channel),l.offset!==void 0&&d.offset.fromArray(l.offset),l.repeat!==void 0&&d.repeat.fromArray(l.repeat),l.center!==void 0&&d.center.fromArray(l.center),l.rotation!==void 0&&(d.rotation=l.rotation),l.wrap!==void 0&&(d.wrapS=i(l.wrap[0],ND),d.wrapT=i(l.wrap[1],ND)),l.format!==void 0&&(d.format=l.format),l.internalFormat!==void 0&&(d.internalFormat=l.internalFormat),l.type!==void 0&&(d.type=l.type),l.colorSpace!==void 0&&(d.colorSpace=l.colorSpace),l.minFilter!==void 0&&(d.minFilter=i(l.minFilter,ID)),l.magFilter!==void 0&&(d.magFilter=i(l.magFilter,ID)),l.anisotropy!==void 0&&(d.anisotropy=l.anisotropy),l.flipY!==void 0&&(d.flipY=l.flipY),l.generateMipmaps!==void 0&&(d.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(d.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(d.compareFunction=l.compareFunction),l.userData!==void 0&&(d.userData=l.userData),r[l.uuid]=d}return r}parseObject(e,t,i,r,s){let a;function l(y){return t[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",y),t[y]}function u(y){if(y!==void 0){if(Array.isArray(y)){const A=[];for(let b=0,C=y.length;b<C;b++){const T=y[b];i[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),A.push(i[T])}return A}return i[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",y),i[y]}}function f(y){return r[y]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",y),r[y]}let d,v;switch(e.type){case"Scene":a=new E_,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new jt(e.background):a.background=f(e.background)),e.environment!==void 0&&(a.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new Sb(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new T_(e.fog.color,e.fog.density)),e.fog.name!==""&&(a.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&a.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(a.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new Ss(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new uh(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new HP(e.color,e.intensity);break;case"DirectionalLight":a=new P2(e.color,e.intensity),a.target=e.target||"";break;case"PointLight":a=new L2(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new zP(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new O2(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),a.target=e.target||"";break;case"HemisphereLight":a=new GP(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new kP().fromJSON(e);break;case"SkinnedMesh":d=l(e.geometry),v=u(e.material),a=new y2(d,v),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":d=l(e.geometry),v=u(e.material),a=new Ur(d,v);break;case"InstancedMesh":d=l(e.geometry),v=u(e.material);const y=e.count,A=e.instanceMatrix,b=e.instanceColor;a=new _2(d,v,y),a.instanceMatrix=new Zp(new Float32Array(A.array),16),b!==void 0&&(a.instanceColor=new Zp(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":d=l(e.geometry),v=u(e.material),a=new cP(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,v),a.geometry=d,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(C=>{let T=null,M=null;return C.boundingBox!==void 0&&(T=new la,T.min.fromArray(C.boundingBox.min),T.max.fromArray(C.boundingBox.max)),C.boundingSphere!==void 0&&(M=new ua,M.radius=C.boundingSphere.radius,M.center.fromArray(C.boundingSphere.center)),{...C,boundingBox:T,boundingSphere:M}}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=f(e.matricesTexture.uuid),a._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(a._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(a.boundingSphere=new ua,a.boundingSphere.center.fromArray(e.boundingSphere.center),a.boundingSphere.radius=e.boundingSphere.radius),e.boundingBox!==void 0&&(a.boundingBox=new la,a.boundingBox.min.fromArray(e.boundingBox.min),a.boundingBox.max.fromArray(e.boundingBox.max));break;case"LOD":a=new uP;break;case"Line":a=new wd(l(e.geometry),u(e.material));break;case"LineLoop":a=new x2(l(e.geometry),u(e.material));break;case"LineSegments":a=new yf(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new A2(l(e.geometry),u(e.material));break;case"Sprite":a=new lP(u(e.material));break;case"Group":a=new Md;break;case"Bone":a=new bb;break;default:a=new Fi}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(a.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const y=e.children;for(let A=0;A<y.length;A++)a.add(this.parseObject(y[A],t,i,r,s))}if(e.animations!==void 0){const y=e.animations;for(let A=0;A<y.length;A++){const b=y[A];a.animations.push(s[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const y=e.levels;for(let A=0;A<y.length;A++){const b=y[A],C=a.getObjectByProperty("uuid",b.object);C!==void 0&&a.addLevel(C,b.distance,b.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Fi}})}}const rV={UVMapping:jp,CubeReflectionMapping:vh,CubeRefractionMapping:qp,EquirectangularReflectionMapping:O0,EquirectangularRefractionMapping:G1,CubeUVReflectionMapping:ey},ND={RepeatWrapping:Kp,ClampToEdgeWrapping:Is,MirroredRepeatWrapping:L0},ID={NearestFilter:Ra,NearestMipmapNearestFilter:fb,NearestMipmapLinearFilter:Eg,LinearFilter:qi,LinearMipmapNearestFilter:C0,LinearMipmapLinearFilter:pc};class WP extends to{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Td.get(e);if(a!==void 0){if(s.manager.itemStart(e),a.then){a.then(f=>{t&&t(f),s.manager.itemEnd(e)}).catch(f=>{r&&r(f)});return}return setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const u=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(f){return Td.add(e,f),t&&t(f),s.manager.itemEnd(e),f}).catch(function(f){r&&r(f),Td.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Td.add(e,u),s.manager.itemStart(e)}}let oA;class I2{static getContext(){return oA===void 0&&(oA=new(window.AudioContext||window.webkitAudioContext)),oA}static setContext(e){oA=e}}class sV extends to{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new eo(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(u){try{const f=u.slice(0);I2.getContext().decodeAudioData(f,function(v){t(v)}).catch(l)}catch(f){l(f)}},i,r);function l(u){r?r(u):console.error(u),s.manager.itemError(e)}}}const FD=new Tn,GD=new Tn,ag=new Tn;class aV{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ss,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ss,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ag.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(Fg*t.fov*.5)/t.zoom;let l,u;GD.elements[12]=-r,FD.elements[12]=r,l=-a*t.aspect+s,u=a*t.aspect+s,ag.elements[0]=2*t.near/(u-l),ag.elements[8]=(u+l)/(u-l),this.cameraL.projectionMatrix.copy(ag),l=-a*t.aspect-s,u=a*t.aspect-s,ag.elements[0]=2*t.near/(u-l),ag.elements[8]=(u+l)/(u-l),this.cameraR.projectionMatrix.copy(ag)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(GD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(FD)}}class YP extends Ss{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class F2{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=HD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=HD();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function HD(){return performance.now()}const og=new he,zD=new Da,oV=new he,lg=new he;class lV extends Fi{constructor(){super(),this.type="AudioListener",this.context=I2.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new F2}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(og,zD,oV),lg.set(0,0,-1).applyQuaternion(zD),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(og.x,r),t.positionY.linearRampToValueAtTime(og.y,r),t.positionZ.linearRampToValueAtTime(og.z,r),t.forwardX.linearRampToValueAtTime(lg.x,r),t.forwardY.linearRampToValueAtTime(lg.y,r),t.forwardZ.linearRampToValueAtTime(lg.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(og.x,og.y,og.z),t.setOrientation(lg.x,lg.y,lg.z,i.x,i.y,i.z)}}class jP extends Fi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const ug=new he,VD=new Da,uV=new he,cg=new he;class cV extends jP{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ug,VD,uV),cg.set(0,0,1).applyQuaternion(VD);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ug.x,i),t.positionY.linearRampToValueAtTime(ug.y,i),t.positionZ.linearRampToValueAtTime(ug.z,i),t.orientationX.linearRampToValueAtTime(cg.x,i),t.orientationY.linearRampToValueAtTime(cg.y,i),t.orientationZ.linearRampToValueAtTime(cg.z,i)}else t.setPosition(ug.x,ug.y,ug.z),t.setOrientation(cg.x,cg.y,cg.z)}}class fV{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class qP{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==r;++l)i[s+l]=i[l];a=t}else{a+=t;const l=t/a;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const u=t*this._origIndex;this._mixBufferRegion(i,r,u,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let u=t,f=t+t;u!==f;++u)if(i[u]!==i[u+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){Da.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;Da.multiplyQuaternionsFlat(e,a,e,t,e,i),Da.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let l=0;l!==s;++l){const u=t+l;e[u]=e[u]*a+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]+e[i+a]*r}}}const G2="\\[\\]\\.:\\/",hV=new RegExp("["+G2+"]","g"),H2="[^"+G2+"]",dV="[^"+G2.replace("\\.","")+"]",pV=/((?:WC+[\/:])*)/.source.replace("WC",H2),mV=/(WCOD+)?/.source.replace("WCOD",dV),gV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",H2),vV=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",H2),yV=new RegExp("^"+pV+mV+gV+vV+"$"),_V=["material","materials","bones","map"];class xV{constructor(e,t,i){const r=i||Wi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Wi{constructor(e,t,i){this.path=t,this.parsedPath=i||Wi.parseTrackName(t),this.node=Wi.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Wi.Composite(e,t,i):new Wi(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(hV,"")}static parseTrackName(e){const t=yV.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);_V.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===t||l.uuid===t)return l;const u=i(l.children);if(u)return u}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Wi.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===f){f=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const a=e[r];if(a===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}u=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(u=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Wi.Composite=xV;Wi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Wi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Wi.prototype.GetterByBindingType=[Wi.prototype._getValue_direct,Wi.prototype._getValue_array,Wi.prototype._getValue_arrayElement,Wi.prototype._getValue_toArray];Wi.prototype.SetterByBindingTypeAndVersioning=[[Wi.prototype._setValue_direct,Wi.prototype._setValue_direct_setNeedsUpdate,Wi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Wi.prototype._setValue_array,Wi.prototype._setValue_array_setNeedsUpdate,Wi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Wi.prototype._setValue_arrayElement,Wi.prototype._setValue_arrayElement_setNeedsUpdate,Wi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Wi.prototype._setValue_fromArray,Wi.prototype._setValue_fromArray_setNeedsUpdate,Wi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AV{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Du(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let l,u=e.length,f=this.nCachedObjects_;for(let d=0,v=arguments.length;d!==v;++d){const y=arguments[d],A=y.uuid;let b=t[A];if(b===void 0){b=u++,t[A]=b,e.push(y);for(let C=0,T=a;C!==T;++C)s[C].push(new Wi(y,i[C],r[C]))}else if(b<f){l=e[b];const C=--f,T=e[C];t[T.uuid]=b,e[b]=T,t[A]=C,e[C]=y;for(let M=0,B=a;M!==B;++M){const D=s[M],O=D[C];let P=D[b];D[b]=O,P===void 0&&(P=new Wi(y,i[M],r[M])),D[C]=P}}else e[b]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],f=u.uuid,d=t[f];if(d!==void 0&&d>=s){const v=s++,y=e[v];t[y.uuid]=d,e[d]=y,t[f]=v,e[v]=u;for(let A=0,b=r;A!==b;++A){const C=i[A],T=C[v],M=C[d];C[d]=T,C[v]=M}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let l=0,u=arguments.length;l!==u;++l){const f=arguments[l],d=f.uuid,v=t[d];if(v!==void 0)if(delete t[d],v<s){const y=--s,A=e[y],b=--a,C=e[b];t[A.uuid]=v,e[v]=A,t[C.uuid]=y,e[y]=C,e.pop();for(let T=0,M=r;T!==M;++T){const B=i[T],D=B[y],O=B[b];B[v]=D,B[y]=O,B.pop()}}else{const y=--a,A=e[y];y>0&&(t[A.uuid]=v),e[v]=A,e.pop();for(let b=0,C=r;b!==C;++b){const T=i[b];T[v]=T[y],T.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,l=this._parsedPaths,u=this._objects,f=u.length,d=this.nCachedObjects_,v=new Array(f);r=s.length,i[e]=r,a.push(e),l.push(t),s.push(v);for(let y=d,A=u.length;y!==A;++y){const b=u[y];v[y]=new Wi(b,e,t)}return v}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length-1,u=a[l],f=e[l];t[f]=i,a[i]=u,a.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class KP{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,l=new Array(a),u={endingStart:Cg,endingEnd:Cg};for(let f=0;f!==a;++f){const d=s[f].createInterpolant(null);l[f]=d,d.settings=u}this._interpolantSettings=u,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=VL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const r=this._clip.duration,s=e._clip.duration,a=s/r,l=r/s;e.warp(1,a,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const u=l.parameterPositions,f=l.sampleValues;return u[0]=s,u[1]=s+i,f[0]=e/a,f[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const u=(e-s)*i;u<0||i===0?t=0:(this._startTime=null,t=i*u)}t*=this._updateTimeScale(e);const a=this._updateTime(t),l=this._updateWeight(e);if(l>0){const u=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case l2:for(let d=0,v=u.length;d!==v;++d)u[d].evaluate(a),f[d].accumulateAdditive(l);break;case yb:default:for(let d=0,v=u.length;d!==v;++d)u[d].evaluate(a),f[d].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===kL;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===zL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const u=this.repetitions-s;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(u===1){const f=e<0;this._setEndings(f,!f,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=wg,r.endingEnd=wg):(e?r.endingStart=this.zeroSlopeAtStart?wg:Cg:r.endingStart=H1,t?r.endingEnd=this.zeroSlopeAtEnd?wg:Cg:r.endingEnd=H1)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,u[0]=t,l[1]=s+e,u[1]=i,this}}const SV=new Float32Array(1);class bV extends _h{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,l=e._interpolants,u=i.uuid,f=this._bindingsByRootAndName;let d=f[u];d===void 0&&(d={},f[u]=d);for(let v=0;v!==s;++v){const y=r[v],A=y.name;let b=d[A];if(b!==void 0)++b.referenceCount,a[v]=b;else{if(b=a[v],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,u,A));continue}const C=t&&t._propertyBindings[v].binding.parsedPath;b=new qP(Wi.create(i,A,C),y.ValueTypeName,y.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,u,A),a[v]=b}l[v].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,l=a[s],u=l.knownActions,f=u[u.length-1],d=e._byClipCacheIndex;f._byClipCacheIndex=d,u[d]=f,u.pop(),e._byClipCacheIndex=null;const v=l.actionByRoot,y=(e._localRoot||this._root).uuid;delete v[y],u.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,l=a[r],u=t[t.length-1],f=e._cacheIndex;u._cacheIndex=f,t[f]=u,t.pop(),delete l[s],Object.keys(l).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new R2(new Float32Array(2),new Float32Array(2),1,SV),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?W0.findByName(r,e):e;const l=a!==null?a.uuid:e,u=this._actionsByClip[l];let f=null;if(i===void 0&&(a!==null?i=a.blendMode:i=yb),u!==void 0){const v=u.actionByRoot[s];if(v!==void 0&&v.blendMode===i)return v;f=u.knownActions[0],a===null&&(a=f._clip)}if(a===null)return null;const d=new KP(this,a,t,i);return this._bindAction(d,f),this._addInactiveAction(d,l,s),d}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?W0.findByName(i,e):e,a=s?s.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,a);const l=this._bindings,u=this._nActiveBindings;for(let f=0;f!==u;++f)l[f].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let l=0,u=a.length;l!==u;++l){const f=a[l];this._deactivateAction(f);const d=f._cacheIndex,v=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,v._cacheIndex=d,t[d]=v,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const l=i[a].actionByRoot,u=l[t];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const l=s[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class MV extends _b{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new xb(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class TV extends _b{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new b_(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class z2{constructor(e){this.value=e}clone(){return new z2(this.value.clone===void 0?this.value:this.value.clone())}}let EV=0;class CV extends _h{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:EV++}),this.name="",this.usage=V1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let a=0;a<s.length;a++)this.uniforms.push(s[a].clone())}return this}clone(){return new this.constructor().copy(this)}}class wV extends C_{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class RV{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const kD=new Tn;class V2{constructor(e,t,i=0,r=1/0){this.ray=new Qg(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new V0,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return kD.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(kD),this}intersectObject(e,t=!0,i=[]){return WE(e,this,i,t),i.sort(XD),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)WE(e[r],this,i,t);return i.sort(XD),i}}function XD(n,e){return n.distance-e.distance}function WE(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let a=0,l=s.length;a<l;a++)WE(s[a],e,t,!0)}}class FS{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Jn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Jn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class DV{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class k2{constructor(e,t,i,r){k2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const WD=new xt;class BV{constructor(e=new xt(1/0,1/0),t=new xt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=WD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,WD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const YD=new he,lA=new he;class UV{constructor(e=new he,t=new he){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){YD.subVectors(e,this.start),lA.subVectors(this.end,this.start);const i=lA.dot(lA);let s=lA.dot(YD)/i;return t&&(s=Jn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const jD=new he;class OV extends Fi{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Qn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,u=32;a<u;a++,l++){const f=a/u*Math.PI*2,d=l/u*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new un(r,3));const s=new Bo({fog:!1,toneMapped:!1});this.cone=new yf(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),jD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(jD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Lp=new he,uA=new Tn,AT=new Tn;class LV extends yf{constructor(e){const t=JP(e),i=new Qn,r=[],s=[],a=new jt(0,0,1),l=new jt(0,1,0);for(let f=0;f<t.length;f++){const d=t[f];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new un(r,3)),i.setAttribute("color",new un(s,3));const u=new Bo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,u),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");AT.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(uA.multiplyMatrices(AT,l.matrixWorld),Lp.setFromMatrixPosition(uA),r.setXYZ(a,Lp.x,Lp.y,Lp.z),uA.multiplyMatrices(AT,l.parent.matrixWorld),Lp.setFromMatrixPosition(uA),r.setXYZ(a+1,Lp.x,Lp.y,Lp.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function JP(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...JP(n.children[t]));return e}class PV extends Ur{constructor(e,t,i){const r=new O_(t,4,2),s=new ul({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const NV=new he,qD=new jt,KD=new jt;class IV extends Fi{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new U_(t);r.rotateY(Math.PI*.5),this.material=new ul({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new Ki(a,3)),this.add(new Ur(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");qD.copy(this.light.color),KD.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?qD:KD;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(NV.setFromMatrixPosition(this.light.matrixWorld).negate())}}class FV extends yf{constructor(e=10,t=10,i=4473924,r=8947848){i=new jt(i),r=new jt(r);const s=t/2,a=e/t,l=e/2,u=[],f=[];for(let y=0,A=0,b=-l;y<=t;y++,b+=a){u.push(-l,0,b,l,0,b),u.push(b,0,-l,b,0,l);const C=y===s?i:r;C.toArray(f,A),A+=3,C.toArray(f,A),A+=3,C.toArray(f,A),A+=3,C.toArray(f,A),A+=3}const d=new Qn;d.setAttribute("position",new un(u,3)),d.setAttribute("color",new un(f,3));const v=new Bo({vertexColors:!0,toneMapped:!1});super(d,v),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class GV extends yf{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new jt(s),a=new jt(a);const l=[],u=[];if(t>1)for(let v=0;v<t;v++){const y=v/t*(Math.PI*2),A=Math.sin(y)*e,b=Math.cos(y)*e;l.push(0,0,0),l.push(A,0,b);const C=v&1?s:a;u.push(C.r,C.g,C.b),u.push(C.r,C.g,C.b)}for(let v=0;v<i;v++){const y=v&1?s:a,A=e-e/i*v;for(let b=0;b<r;b++){let C=b/r*(Math.PI*2),T=Math.sin(C)*A,M=Math.cos(C)*A;l.push(T,0,M),u.push(y.r,y.g,y.b),C=(b+1)/r*(Math.PI*2),T=Math.sin(C)*A,M=Math.cos(C)*A,l.push(T,0,M),u.push(y.r,y.g,y.b)}}const f=new Qn;f.setAttribute("position",new un(l,3)),f.setAttribute("color",new un(u,3));const d=new Bo({vertexColors:!0,toneMapped:!1});super(f,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const JD=new he,cA=new he,ZD=new he;class HV extends Fi{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Qn;r.setAttribute("position",new un([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Bo({fog:!1,toneMapped:!1});this.lightPlane=new wd(r,s),this.add(this.lightPlane),r=new Qn,r.setAttribute("position",new un([0,0,0,0,0,1],3)),this.targetLine=new wd(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),JD.setFromMatrixPosition(this.light.matrixWorld),cA.setFromMatrixPosition(this.light.target.matrixWorld),ZD.subVectors(cA,JD),this.lightPlane.lookAt(cA),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(cA),this.targetLine.scale.z=ZD.length()}}const fA=new he,_s=new Ab;class zV extends yf{constructor(e){const t=new Qn,i=new Bo({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(b,C){u(b),u(C)}function u(b){r.push(0,0,0),s.push(0,0,0),a[b]===void 0&&(a[b]=[]),a[b].push(r.length/3-1)}t.setAttribute("position",new un(r,3)),t.setAttribute("color",new un(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const f=new jt(16755200),d=new jt(16711680),v=new jt(43775),y=new jt(16777215),A=new jt(3355443);this.setColors(f,d,v,y,A)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;_s.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===mc?-1:0;Ls("c",t,e,_s,0,0,s),Ls("t",t,e,_s,0,0,1),Ls("n1",t,e,_s,-1,-1,s),Ls("n2",t,e,_s,i,-1,s),Ls("n3",t,e,_s,-1,r,s),Ls("n4",t,e,_s,i,r,s),Ls("f1",t,e,_s,-1,-1,1),Ls("f2",t,e,_s,i,-1,1),Ls("f3",t,e,_s,-1,r,1),Ls("f4",t,e,_s,i,r,1),Ls("u1",t,e,_s,i*.7,r*1.1,s),Ls("u2",t,e,_s,-1*.7,r*1.1,s),Ls("u3",t,e,_s,0,r*2,s),Ls("cf1",t,e,_s,-1,0,1),Ls("cf2",t,e,_s,i,0,1),Ls("cf3",t,e,_s,0,-1,1),Ls("cf4",t,e,_s,0,r,1),Ls("cn1",t,e,_s,-1,0,s),Ls("cn2",t,e,_s,i,0,s),Ls("cn3",t,e,_s,0,-1,s),Ls("cn4",t,e,_s,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ls(n,e,t,i,r,s,a){fA.set(r,s,a).unproject(i);const l=e[n];if(l!==void 0){const u=t.getAttribute("position");for(let f=0,d=l.length;f<d;f++)u.setXYZ(l[f],fA.x,fA.y,fA.z)}}const hA=new la;class VV extends yf{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Qn;s.setIndex(new Ki(i,1)),s.setAttribute("position",new Ki(r,3)),super(s,new Bo({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&hA.setFromObject(this.object),hA.isEmpty())return;const e=hA.min,t=hA.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class kV extends yf{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Qn;s.setIndex(new Ki(i,1)),s.setAttribute("position",new un(r,3)),super(s,new Bo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class XV extends wd{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Qn;a.setAttribute("position",new un(s,3)),a.computeBoundingSphere(),super(a,new Bo({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],u=new Qn;u.setAttribute("position",new un(l,3)),u.computeBoundingSphere(),this.add(new Ur(u,new ul({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const QD=new he;let dA,ST;class WV extends Fi{constructor(e=new he(0,0,1),t=new he(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",dA===void 0&&(dA=new Qn,dA.setAttribute("position",new un([0,0,0,0,1,0],3)),ST=new D_(.5,1,5,1),ST.translate(0,-.5,0)),this.position.copy(t),this.line=new wd(dA,new Bo({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ur(ST,new ul({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{QD.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(QD,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class YV extends yf{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Qn;r.setAttribute("position",new un(t,3)),r.setAttribute("color",new un(i,3));const s=new Bo({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new jt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class jV{constructor(){this.type="ShapePath",this.color=new jt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new IS,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const B=[];for(let D=0,O=M.length;D<O;D++){const P=M[D],F=new Gg;F.curves=P.curves,B.push(F)}return B}function i(M,B){const D=B.length;let O=!1;for(let P=D-1,F=0;F<D;P=F++){let V=B[P],G=B[F],I=G.x-V.x,N=G.y-V.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(V=B[F],I=-I,G=B[P],N=-N),M.y<V.y||M.y>G.y)continue;if(M.y===V.y){if(M.x===V.x)return!0}else{const Q=N*(M.x-V.x)-I*(M.y-V.y);if(Q===0)return!0;if(Q<0)continue;O=!O}}else{if(M.y!==V.y)continue;if(G.x<=M.x&&M.x<=V.x||V.x<=M.x&&M.x<=G.x)return!0}}return O}const r=hf.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,l,u;const f=[];if(s.length===1)return l=s[0],u=new Gg,u.curves=l.curves,f.push(u),f;let d=!r(s[0].getPoints());d=e?!d:d;const v=[],y=[];let A=[],b=0,C;y[b]=void 0,A[b]=[];for(let M=0,B=s.length;M<B;M++)l=s[M],C=l.getPoints(),a=r(C),a=e?!a:a,a?(!d&&y[b]&&b++,y[b]={s:new Gg,p:C},y[b].s.curves=l.curves,d&&b++,A[b]=[]):A[b].push({h:l,p:C[0]});if(!y[0])return t(s);if(y.length>1){let M=!1,B=0;for(let D=0,O=y.length;D<O;D++)v[D]=[];for(let D=0,O=y.length;D<O;D++){const P=A[D];for(let F=0;F<P.length;F++){const V=P[F];let G=!0;for(let I=0;I<y.length;I++)i(V.p,y[I].p)&&(D!==I&&B++,G?(G=!1,v[I].push(V)):M=!0);G&&v[D].push(V)}}B>0&&M===!1&&(A=v)}let T;for(let M=0,B=y.length;M<B;M++){u=y[M].s,f.push(u),T=A[M];for(let D=0,O=T.length;D<O;D++)u.holes.push(T[D].h)}return f}}class qV extends _h{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function KV(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function JV(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function ZV(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function YE(n,e,t,i){const r=QV(i);switch(t){case r2:return n*e;case A_:return n*e/r.components*r.byteLength;case S_:return n*e/r.components*r.byteLength;case a2:return n*e*2/r.components*r.byteLength;case gb:return n*e*2/r.components*r.byteLength;case s2:return n*e*3/r.components*r.byteLength;case Fs:return n*e*4/r.components*r.byteLength;case vb:return n*e*4/r.components*r.byteLength;case p1:case m1:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case g1:case v1:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case lS:case cS:return Math.max(n,16)*Math.max(e,8)/4;case oS:case uS:return Math.max(n,8)*Math.max(e,8)/2;case fS:case hS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case dS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case pS:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case mS:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case gS:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case vS:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case yS:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case _S:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case xS:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case AS:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case SS:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case bS:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case MS:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case TS:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case ES:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case CS:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case y1:case wS:case RS:return Math.ceil(n/4)*Math.ceil(e/4)*16;case o2:case DS:return Math.ceil(n/4)*Math.ceil(e/4)*8;case BS:case US:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function QV(n){switch(n){case dl:case hb:return{byteLength:1,components:1};case P0:case db:case wa:return{byteLength:2,components:1};case pb:case mb:return{byteLength:2,components:4};case yh:case x_:case ss:return{byteLength:4,components:1};case i2:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class $V{static contain(e,t){return KV(e,t)}static cover(e,t){return JV(e,t)}static fill(e){return ZV(e)}static getByteLength(e,t,i,r){return YE(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:$0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=$0);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function ZP(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function e6(n){const e=new WeakMap;function t(l,u){const f=l.array,d=l.usage,v=f.byteLength,y=n.createBuffer();n.bindBuffer(u,y),n.bufferData(u,f,d),l.onUploadCallback();let A;if(f instanceof Float32Array)A=n.FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?A=n.HALF_FLOAT:A=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)A=n.SHORT;else if(f instanceof Uint32Array)A=n.UNSIGNED_INT;else if(f instanceof Int32Array)A=n.INT;else if(f instanceof Int8Array)A=n.BYTE;else if(f instanceof Uint8Array)A=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)A=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:y,type:A,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:v}}function i(l,u,f){const d=u.array,v=u.updateRanges;if(n.bindBuffer(f,l),v.length===0)n.bufferSubData(f,0,d);else{v.sort((A,b)=>A.start-b.start);let y=0;for(let A=1;A<v.length;A++){const b=v[y],C=v[A];C.start<=b.start+b.count+1?b.count=Math.max(b.count,C.start+C.count-b.start):(++y,v[y]=C)}v.length=y+1;for(let A=0,b=v.length;A<b;A++){const C=v[A];n.bufferSubData(f,C.start*d.BYTES_PER_ELEMENT,d,C.start,C.count)}u.clearUpdateRanges()}u.onUploadCallback()}function r(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function s(l){l.isInterleavedBufferAttribute&&(l=l.data);const u=e.get(l);u&&(n.deleteBuffer(u.buffer),e.delete(l))}function a(l,u){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const d=e.get(l);(!d||d.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=e.get(l);if(f===void 0)e.set(l,t(l,u));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(f.buffer,l,u),f.version=l.version}}return{get:r,remove:s,update:a}}var t6=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,n6=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,i6=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,r6=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,s6=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,a6=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,o6=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,l6=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,u6=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,c6=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,f6=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,h6=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,d6=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,p6=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,m6=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,g6=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,v6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,y6=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,_6=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,x6=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,A6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,S6=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,b6=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,M6=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,T6=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,E6=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,C6=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,w6=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,R6=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,D6=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,B6="gl_FragColor = linearToOutputTexel( gl_FragColor );",U6=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,O6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,L6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,P6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,N6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,I6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,F6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,G6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,H6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,z6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,V6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,k6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,X6=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,W6=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Y6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,j6=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,q6=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,K6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,J6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Z6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Q6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,$6=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,e8=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,t8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,n8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,i8=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,r8=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,s8=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,a8=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,o8=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,l8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,u8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,c8=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,f8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,h8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,d8=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,p8=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,m8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,g8=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,v8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,y8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,_8=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,x8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,A8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,S8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,b8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,M8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,T8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,E8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,C8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,w8=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,R8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,D8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,B8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,U8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,O8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,L8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,P8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,N8=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,I8=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,F8=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,G8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,H8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,z8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,V8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,k8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,X8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,W8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Y8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,j8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,q8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,K8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,J8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Z8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Q8=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,$8=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const e9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,t9=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,n9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,i9=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,r9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,s9=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,a9=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,o9=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,l9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,u9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,c9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,f9=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,h9=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,d9=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,p9=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,m9=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,v9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y9=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,_9=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,x9=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,A9=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,S9=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,b9=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,M9=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,T9=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E9=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,C9=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,w9=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,R9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,D9=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,B9=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,U9=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,O9=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ri={alphahash_fragment:t6,alphahash_pars_fragment:n6,alphamap_fragment:i6,alphamap_pars_fragment:r6,alphatest_fragment:s6,alphatest_pars_fragment:a6,aomap_fragment:o6,aomap_pars_fragment:l6,batching_pars_vertex:u6,batching_vertex:c6,begin_vertex:f6,beginnormal_vertex:h6,bsdfs:d6,iridescence_fragment:p6,bumpmap_pars_fragment:m6,clipping_planes_fragment:g6,clipping_planes_pars_fragment:v6,clipping_planes_pars_vertex:y6,clipping_planes_vertex:_6,color_fragment:x6,color_pars_fragment:A6,color_pars_vertex:S6,color_vertex:b6,common:M6,cube_uv_reflection_fragment:T6,defaultnormal_vertex:E6,displacementmap_pars_vertex:C6,displacementmap_vertex:w6,emissivemap_fragment:R6,emissivemap_pars_fragment:D6,colorspace_fragment:B6,colorspace_pars_fragment:U6,envmap_fragment:O6,envmap_common_pars_fragment:L6,envmap_pars_fragment:P6,envmap_pars_vertex:N6,envmap_physical_pars_fragment:j6,envmap_vertex:I6,fog_vertex:F6,fog_pars_vertex:G6,fog_fragment:H6,fog_pars_fragment:z6,gradientmap_pars_fragment:V6,lightmap_pars_fragment:k6,lights_lambert_fragment:X6,lights_lambert_pars_fragment:W6,lights_pars_begin:Y6,lights_toon_fragment:q6,lights_toon_pars_fragment:K6,lights_phong_fragment:J6,lights_phong_pars_fragment:Z6,lights_physical_fragment:Q6,lights_physical_pars_fragment:$6,lights_fragment_begin:e8,lights_fragment_maps:t8,lights_fragment_end:n8,logdepthbuf_fragment:i8,logdepthbuf_pars_fragment:r8,logdepthbuf_pars_vertex:s8,logdepthbuf_vertex:a8,map_fragment:o8,map_pars_fragment:l8,map_particle_fragment:u8,map_particle_pars_fragment:c8,metalnessmap_fragment:f8,metalnessmap_pars_fragment:h8,morphinstance_vertex:d8,morphcolor_vertex:p8,morphnormal_vertex:m8,morphtarget_pars_vertex:g8,morphtarget_vertex:v8,normal_fragment_begin:y8,normal_fragment_maps:_8,normal_pars_fragment:x8,normal_pars_vertex:A8,normal_vertex:S8,normalmap_pars_fragment:b8,clearcoat_normal_fragment_begin:M8,clearcoat_normal_fragment_maps:T8,clearcoat_pars_fragment:E8,iridescence_pars_fragment:C8,opaque_fragment:w8,packing:R8,premultiplied_alpha_fragment:D8,project_vertex:B8,dithering_fragment:U8,dithering_pars_fragment:O8,roughnessmap_fragment:L8,roughnessmap_pars_fragment:P8,shadowmap_pars_fragment:N8,shadowmap_pars_vertex:I8,shadowmap_vertex:F8,shadowmask_pars_fragment:G8,skinbase_vertex:H8,skinning_pars_vertex:z8,skinning_vertex:V8,skinnormal_vertex:k8,specularmap_fragment:X8,specularmap_pars_fragment:W8,tonemapping_fragment:Y8,tonemapping_pars_fragment:j8,transmission_fragment:q8,transmission_pars_fragment:K8,uv_pars_fragment:J8,uv_pars_vertex:Z8,uv_vertex:Q8,worldpos_vertex:$8,background_vert:e9,background_frag:t9,backgroundCube_vert:n9,backgroundCube_frag:i9,cube_vert:r9,cube_frag:s9,depth_vert:a9,depth_frag:o9,distanceRGBA_vert:l9,distanceRGBA_frag:u9,equirect_vert:c9,equirect_frag:f9,linedashed_vert:h9,linedashed_frag:d9,meshbasic_vert:p9,meshbasic_frag:m9,meshlambert_vert:g9,meshlambert_frag:v9,meshmatcap_vert:y9,meshmatcap_frag:_9,meshnormal_vert:x9,meshnormal_frag:A9,meshphong_vert:S9,meshphong_frag:b9,meshphysical_vert:M9,meshphysical_frag:T9,meshtoon_vert:E9,meshtoon_frag:C9,points_vert:w9,points_frag:R9,shadow_vert:D9,shadow_frag:B9,sprite_vert:U9,sprite_frag:O9},Qt={common:{diffuse:{value:new jt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Kn},alphaMap:{value:null},alphaMapTransform:{value:new Kn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Kn}},envmap:{envMap:{value:null},envMapRotation:{value:new Kn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Kn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Kn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Kn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Kn},normalScale:{value:new xt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Kn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Kn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Kn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Kn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new jt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new jt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Kn},alphaTest:{value:0},uvTransform:{value:new Kn}},sprite:{diffuse:{value:new jt(16777215)},opacity:{value:1},center:{value:new xt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Kn},alphaMap:{value:null},alphaMapTransform:{value:new Kn},alphaTest:{value:0}}},uf={basic:{uniforms:sl([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.fog]),vertexShader:ri.meshbasic_vert,fragmentShader:ri.meshbasic_frag},lambert:{uniforms:sl([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,Qt.lights,{emissive:{value:new jt(0)}}]),vertexShader:ri.meshlambert_vert,fragmentShader:ri.meshlambert_frag},phong:{uniforms:sl([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,Qt.lights,{emissive:{value:new jt(0)},specular:{value:new jt(1118481)},shininess:{value:30}}]),vertexShader:ri.meshphong_vert,fragmentShader:ri.meshphong_frag},standard:{uniforms:sl([Qt.common,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.roughnessmap,Qt.metalnessmap,Qt.fog,Qt.lights,{emissive:{value:new jt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ri.meshphysical_vert,fragmentShader:ri.meshphysical_frag},toon:{uniforms:sl([Qt.common,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.gradientmap,Qt.fog,Qt.lights,{emissive:{value:new jt(0)}}]),vertexShader:ri.meshtoon_vert,fragmentShader:ri.meshtoon_frag},matcap:{uniforms:sl([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,{matcap:{value:null}}]),vertexShader:ri.meshmatcap_vert,fragmentShader:ri.meshmatcap_frag},points:{uniforms:sl([Qt.points,Qt.fog]),vertexShader:ri.points_vert,fragmentShader:ri.points_frag},dashed:{uniforms:sl([Qt.common,Qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ri.linedashed_vert,fragmentShader:ri.linedashed_frag},depth:{uniforms:sl([Qt.common,Qt.displacementmap]),vertexShader:ri.depth_vert,fragmentShader:ri.depth_frag},normal:{uniforms:sl([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,{opacity:{value:1}}]),vertexShader:ri.meshnormal_vert,fragmentShader:ri.meshnormal_frag},sprite:{uniforms:sl([Qt.sprite,Qt.fog]),vertexShader:ri.sprite_vert,fragmentShader:ri.sprite_frag},background:{uniforms:{uvTransform:{value:new Kn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ri.background_vert,fragmentShader:ri.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Kn}},vertexShader:ri.backgroundCube_vert,fragmentShader:ri.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ri.cube_vert,fragmentShader:ri.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ri.equirect_vert,fragmentShader:ri.equirect_frag},distanceRGBA:{uniforms:sl([Qt.common,Qt.displacementmap,{referencePosition:{value:new he},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ri.distanceRGBA_vert,fragmentShader:ri.distanceRGBA_frag},shadow:{uniforms:sl([Qt.lights,Qt.fog,{color:{value:new jt(0)},opacity:{value:1}}]),vertexShader:ri.shadow_vert,fragmentShader:ri.shadow_frag}};uf.physical={uniforms:sl([uf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Kn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Kn},clearcoatNormalScale:{value:new xt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Kn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Kn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Kn},sheen:{value:0},sheenColor:{value:new jt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Kn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Kn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Kn},transmissionSamplerSize:{value:new xt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Kn},attenuationDistance:{value:0},attenuationColor:{value:new jt(0)},specularColor:{value:new jt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Kn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Kn},anisotropyVector:{value:new xt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Kn}}]),vertexShader:ri.meshphysical_vert,fragmentShader:ri.meshphysical_frag};const pA={r:0,b:0,g:0},fg=new Bu,L9=new Tn;function P9(n,e,t,i,r,s,a){const l=new jt(0);let u=s===!0?0:1,f,d,v=null,y=0,A=null;function b(D){let O=D.isScene===!0?D.background:null;return O&&O.isTexture&&(O=(D.backgroundBlurriness>0?t:e).get(O)),O}function C(D){let O=!1;const P=b(D);P===null?M(l,u):P&&P.isColor&&(M(P,1),O=!0);const F=n.xr.getEnvironmentBlendMode();F==="additive"?i.buffers.color.setClear(0,0,0,1,a):F==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||O)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function T(D,O){const P=b(O);P&&(P.isCubeTexture||P.mapping===ey)?(d===void 0&&(d=new Ur(new $g(1,1,1),new pl({name:"BackgroundCubeMaterial",uniforms:k0(uf.backgroundCube.uniforms),vertexShader:uf.backgroundCube.vertexShader,fragmentShader:uf.backgroundCube.fragmentShader,side:hl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(F,V,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),fg.copy(O.backgroundRotation),fg.x*=-1,fg.y*=-1,fg.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(fg.y*=-1,fg.z*=-1),d.material.uniforms.envMap.value=P,d.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(L9.makeRotationFromEuler(fg)),d.material.toneMapped=Ni.getTransfer(P.colorSpace)!==br,(v!==P||y!==P.version||A!==n.toneMapping)&&(d.material.needsUpdate=!0,v=P,y=P.version,A=n.toneMapping),d.layers.enableAll(),D.unshift(d,d.geometry,d.material,0,0,null)):P&&P.isTexture&&(f===void 0&&(f=new Ur(new xf(2,2),new pl({name:"BackgroundMaterial",uniforms:k0(uf.background.uniforms),vertexShader:uf.background.vertexShader,fragmentShader:uf.background.fragmentShader,side:gh,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=P,f.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,f.material.toneMapped=Ni.getTransfer(P.colorSpace)!==br,P.matrixAutoUpdate===!0&&P.updateMatrix(),f.material.uniforms.uvTransform.value.copy(P.matrix),(v!==P||y!==P.version||A!==n.toneMapping)&&(f.material.needsUpdate=!0,v=P,y=P.version,A=n.toneMapping),f.layers.enableAll(),D.unshift(f,f.geometry,f.material,0,0,null))}function M(D,O){D.getRGB(pA,sP(n)),i.buffers.color.setClear(pA.r,pA.g,pA.b,O,a)}function B(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(D,O=1){l.set(D),u=O,M(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(D){u=D,M(l,u)},render:C,addToRenderList:T,dispose:B}}function N9(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=y(null);let s=r,a=!1;function l(N,Q,$,te,se){let ye=!1;const k=v(te,$,Q);s!==k&&(s=k,f(s.object)),ye=A(N,te,$,se),ye&&b(N,te,$,se),se!==null&&e.update(se,n.ELEMENT_ARRAY_BUFFER),(ye||a)&&(a=!1,O(N,Q,$,te),se!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(se).buffer))}function u(){return n.createVertexArray()}function f(N){return n.bindVertexArray(N)}function d(N){return n.deleteVertexArray(N)}function v(N,Q,$){const te=$.wireframe===!0;let se=i[N.id];se===void 0&&(se={},i[N.id]=se);let ye=se[Q.id];ye===void 0&&(ye={},se[Q.id]=ye);let k=ye[te];return k===void 0&&(k=y(u()),ye[te]=k),k}function y(N){const Q=[],$=[],te=[];for(let se=0;se<t;se++)Q[se]=0,$[se]=0,te[se]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Q,enabledAttributes:$,attributeDivisors:te,object:N,attributes:{},index:null}}function A(N,Q,$,te){const se=s.attributes,ye=Q.attributes;let k=0;const ee=$.getAttributes();for(const ne in ee)if(ee[ne].location>=0){const X=se[ne];let J=ye[ne];if(J===void 0&&(ne==="instanceMatrix"&&N.instanceMatrix&&(J=N.instanceMatrix),ne==="instanceColor"&&N.instanceColor&&(J=N.instanceColor)),X===void 0||X.attribute!==J||J&&X.data!==J.data)return!0;k++}return s.attributesNum!==k||s.index!==te}function b(N,Q,$,te){const se={},ye=Q.attributes;let k=0;const ee=$.getAttributes();for(const ne in ee)if(ee[ne].location>=0){let X=ye[ne];X===void 0&&(ne==="instanceMatrix"&&N.instanceMatrix&&(X=N.instanceMatrix),ne==="instanceColor"&&N.instanceColor&&(X=N.instanceColor));const J={};J.attribute=X,X&&X.data&&(J.data=X.data),se[ne]=J,k++}s.attributes=se,s.attributesNum=k,s.index=te}function C(){const N=s.newAttributes;for(let Q=0,$=N.length;Q<$;Q++)N[Q]=0}function T(N){M(N,0)}function M(N,Q){const $=s.newAttributes,te=s.enabledAttributes,se=s.attributeDivisors;$[N]=1,te[N]===0&&(n.enableVertexAttribArray(N),te[N]=1),se[N]!==Q&&(n.vertexAttribDivisor(N,Q),se[N]=Q)}function B(){const N=s.newAttributes,Q=s.enabledAttributes;for(let $=0,te=Q.length;$<te;$++)Q[$]!==N[$]&&(n.disableVertexAttribArray($),Q[$]=0)}function D(N,Q,$,te,se,ye,k){k===!0?n.vertexAttribIPointer(N,Q,$,se,ye):n.vertexAttribPointer(N,Q,$,te,se,ye)}function O(N,Q,$,te){C();const se=te.attributes,ye=$.getAttributes(),k=Q.defaultAttributeValues;for(const ee in ye){const ne=ye[ee];if(ne.location>=0){let de=se[ee];if(de===void 0&&(ee==="instanceMatrix"&&N.instanceMatrix&&(de=N.instanceMatrix),ee==="instanceColor"&&N.instanceColor&&(de=N.instanceColor)),de!==void 0){const X=de.normalized,J=de.itemSize,ce=e.get(de);if(ce===void 0)continue;const ge=ce.buffer,oe=ce.type,ve=ce.bytesPerElement,Se=oe===n.INT||oe===n.UNSIGNED_INT||de.gpuType===x_;if(de.isInterleavedBufferAttribute){const Re=de.data,Le=Re.stride,gt=de.offset;if(Re.isInstancedInterleavedBuffer){for(let Mt=0;Mt<ne.locationSize;Mt++)M(ne.location+Mt,Re.meshPerAttribute);N.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let Mt=0;Mt<ne.locationSize;Mt++)T(ne.location+Mt);n.bindBuffer(n.ARRAY_BUFFER,ge);for(let Mt=0;Mt<ne.locationSize;Mt++)D(ne.location+Mt,J/ne.locationSize,oe,X,Le*ve,(gt+J/ne.locationSize*Mt)*ve,Se)}else{if(de.isInstancedBufferAttribute){for(let Re=0;Re<ne.locationSize;Re++)M(ne.location+Re,de.meshPerAttribute);N.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let Re=0;Re<ne.locationSize;Re++)T(ne.location+Re);n.bindBuffer(n.ARRAY_BUFFER,ge);for(let Re=0;Re<ne.locationSize;Re++)D(ne.location+Re,J/ne.locationSize,oe,X,J*ve,J/ne.locationSize*Re*ve,Se)}}else if(k!==void 0){const X=k[ee];if(X!==void 0)switch(X.length){case 2:n.vertexAttrib2fv(ne.location,X);break;case 3:n.vertexAttrib3fv(ne.location,X);break;case 4:n.vertexAttrib4fv(ne.location,X);break;default:n.vertexAttrib1fv(ne.location,X)}}}}B()}function P(){G();for(const N in i){const Q=i[N];for(const $ in Q){const te=Q[$];for(const se in te)d(te[se].object),delete te[se];delete Q[$]}delete i[N]}}function F(N){if(i[N.id]===void 0)return;const Q=i[N.id];for(const $ in Q){const te=Q[$];for(const se in te)d(te[se].object),delete te[se];delete Q[$]}delete i[N.id]}function V(N){for(const Q in i){const $=i[Q];if($[N.id]===void 0)continue;const te=$[N.id];for(const se in te)d(te[se].object),delete te[se];delete $[N.id]}}function G(){I(),a=!0,s!==r&&(s=r,f(s.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:l,reset:G,resetDefaultState:I,dispose:P,releaseStatesOfGeometry:F,releaseStatesOfProgram:V,initAttributes:C,enableAttribute:T,disableUnusedAttributes:B}}function I9(n,e,t){let i;function r(f){i=f}function s(f,d){n.drawArrays(i,f,d),t.update(d,i,1)}function a(f,d,v){v!==0&&(n.drawArraysInstanced(i,f,d,v),t.update(d,i,v))}function l(f,d,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,f,0,d,0,v);let A=0;for(let b=0;b<v;b++)A+=d[b];t.update(A,i,1)}function u(f,d,v,y){if(v===0)return;const A=e.get("WEBGL_multi_draw");if(A===null)for(let b=0;b<f.length;b++)a(f[b],d[b],y[b]);else{A.multiDrawArraysInstancedWEBGL(i,f,0,d,0,y,0,v);let b=0;for(let C=0;C<v;C++)b+=d[C]*y[C];t.update(b,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=l,this.renderMultiDrawInstances=u}function F9(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const V=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(V){return!(V!==Fs&&i.convert(V)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(V){const G=V===wa&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(V!==dl&&i.convert(V)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&V!==ss&&!G)}function u(V){if(V==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";V="mediump"}return V==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const d=u(f);d!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",d,"instead."),f=d);const v=t.logarithmicDepthBuffer===!0,y=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),A=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=n.getParameter(n.MAX_TEXTURE_SIZE),T=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),B=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),D=n.getParameter(n.MAX_VARYING_VECTORS),O=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),P=b>0,F=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:u,textureFormatReadable:a,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:v,reverseDepthBuffer:y,maxTextures:A,maxVertexTextures:b,maxTextureSize:C,maxCubemapSize:T,maxAttributes:M,maxVertexUniforms:B,maxVaryings:D,maxFragmentUniforms:O,vertexTextures:P,maxSamples:F}}function G9(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Ad,l=new Kn,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(v,y){const A=v.length!==0||y||i!==0||r;return r=y,i=v.length,A},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(v,y){t=d(v,y,0)},this.setState=function(v,y,A){const b=v.clippingPlanes,C=v.clipIntersection,T=v.clipShadows,M=n.get(v);if(!r||b===null||b.length===0||s&&!T)s?d(null):f();else{const B=s?0:i,D=B*4;let O=M.clippingState||null;u.value=O,O=d(b,y,D,A);for(let P=0;P!==D;++P)O[P]=t[P];M.clippingState=O,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=B}};function f(){u.value!==t&&(u.value=t,u.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(v,y,A,b){const C=v!==null?v.length:0;let T=null;if(C!==0){if(T=u.value,b!==!0||T===null){const M=A+C*4,B=y.matrixWorldInverse;l.getNormalMatrix(B),(T===null||T.length<M)&&(T=new Float32Array(M));for(let D=0,O=A;D!==C;++D,O+=4)a.copy(v[D]).applyMatrix4(B,l),a.normal.toArray(T,O),T[O+3]=a.constant}u.value=T,u.needsUpdate=!0}return e.numPlanes=C,e.numIntersection=0,T}}function H9(n){let e=new WeakMap;function t(a,l){return l===O0?a.mapping=vh:l===G1&&(a.mapping=qp),a}function i(a){if(a&&a.isTexture){const l=a.mapping;if(l===O0||l===G1)if(e.has(a)){const u=e.get(a).texture;return t(u,a.mapping)}else{const u=a.image;if(u&&u.height>0){const f=new g2(u.height);return f.fromEquirectangularTexture(n,a),e.set(a,f),a.addEventListener("dispose",r),t(f.texture,a.mapping)}else return null}}return a}function r(a){const l=a.target;l.removeEventListener("dispose",r);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const g0=4,$D=[.125,.215,.35,.446,.526,.582],bg=20,bT=new uh,eB=new jt;let MT=null,TT=0,ET=0,CT=!1;const xg=(1+Math.sqrt(5))/2,u0=1/xg,tB=[new he(-xg,u0,0),new he(xg,u0,0),new he(-u0,0,xg),new he(u0,0,xg),new he(0,xg,-u0),new he(0,xg,u0),new he(-1,1,-1),new he(1,1,-1),new he(-1,1,1),new he(1,1,1)],z9=new he;class jE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:a=256,position:l=z9}=s;MT=this._renderer.getRenderTarget(),TT=this._renderer.getActiveCubeFace(),ET=this._renderer.getActiveMipmapLevel(),CT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,i,r,u,l),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=rB(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=iB(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(MT,TT,ET),this._renderer.xr.enabled=CT,e.scissorTest=!1,mA(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===vh||e.mapping===qp?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),MT=this._renderer.getRenderTarget(),TT=this._renderer.getActiveCubeFace(),ET=this._renderer.getActiveMipmapLevel(),CT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:qi,minFilter:qi,generateMipmaps:!1,type:wa,format:Fs,colorSpace:gf,depthBuffer:!1},r=nB(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=nB(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=V9(s)),this._blurMaterial=k9(s,e,t)}return r}_compileMaterial(e){const t=new Ur(this._lodPlanes[0],e);this._renderer.compile(t,bT)}_sceneToCubeUV(e,t,i,r,s){const u=new Ss(90,1,t,i),f=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],v=this._renderer,y=v.autoClear,A=v.toneMapping;v.getClearColor(eB),v.toneMapping=lh,v.autoClear=!1;const b=new ul({name:"PMREM.Background",side:hl,depthWrite:!1,depthTest:!1}),C=new Ur(new $g,b);let T=!1;const M=e.background;M?M.isColor&&(b.color.copy(M),e.background=null,T=!0):(b.color.copy(eB),T=!0);for(let B=0;B<6;B++){const D=B%3;D===0?(u.up.set(0,f[B],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x+d[B],s.y,s.z)):D===1?(u.up.set(0,0,f[B]),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y+d[B],s.z)):(u.up.set(0,f[B],0),u.position.set(s.x,s.y,s.z),u.lookAt(s.x,s.y,s.z+d[B]));const O=this._cubeSize;mA(r,D*O,B>2?O:0,O,O),v.setRenderTarget(r),T&&v.render(C,u),v.render(e,u)}C.geometry.dispose(),C.material.dispose(),v.toneMapping=A,v.autoClear=y,e.background=M}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===vh||e.mapping===qp;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=rB()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=iB());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Ur(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const u=this._cubeSize;mA(t,0,0,3*u,2*u),i.setRenderTarget(t),i.render(a,bT)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),l=tB[(r-s-1)%tB.length];this._blur(e,s-1,s,a,l)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,l){const u=this._renderer,f=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,v=new Ur(this._lodPlanes[r],f),y=f.uniforms,A=this._sizeLods[i]-1,b=isFinite(s)?Math.PI/(2*A):2*Math.PI/(2*bg-1),C=s/b,T=isFinite(s)?1+Math.floor(d*C):bg;T>bg&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${bg}`);const M=[];let B=0;for(let V=0;V<bg;++V){const G=V/C,I=Math.exp(-G*G/2);M.push(I),V===0?B+=I:V<T&&(B+=2*I)}for(let V=0;V<M.length;V++)M[V]=M[V]/B;y.envMap.value=e.texture,y.samples.value=T,y.weights.value=M,y.latitudinal.value=a==="latitudinal",l&&(y.poleAxis.value=l);const{_lodMax:D}=this;y.dTheta.value=b,y.mipInt.value=D-i;const O=this._sizeLods[r],P=3*O*(r>D-g0?r-D+g0:0),F=4*(this._cubeSize-O);mA(t,P,F,3*O,2*O),u.setRenderTarget(t),u.render(v,bT)}}function V9(n){const e=[],t=[],i=[];let r=n;const s=n-g0+1+$D.length;for(let a=0;a<s;a++){const l=Math.pow(2,r);t.push(l);let u=1/l;a>n-g0?u=$D[a-n+g0-1]:a===0&&(u=0),i.push(u);const f=1/(l-2),d=-f,v=1+f,y=[d,d,v,d,v,v,d,d,v,v,d,v],A=6,b=6,C=3,T=2,M=1,B=new Float32Array(C*b*A),D=new Float32Array(T*b*A),O=new Float32Array(M*b*A);for(let F=0;F<A;F++){const V=F%3*2/3-1,G=F>2?0:-1,I=[V,G,0,V+2/3,G,0,V+2/3,G+1,0,V,G,0,V+2/3,G+1,0,V,G+1,0];B.set(I,C*b*F),D.set(y,T*b*F);const N=[F,F,F,F,F,F];O.set(N,M*b*F)}const P=new Qn;P.setAttribute("position",new Ki(B,C)),P.setAttribute("uv",new Ki(D,T)),P.setAttribute("faceIndex",new Ki(O,M)),e.push(P),r>g0&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function nB(n,e,t){const i=new _c(n,e,t);return i.texture.mapping=ey,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function mA(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function k9(n,e,t){const i=new Float32Array(bg),r=new he(0,1,0);return new pl({name:"SphericalGaussianBlur",defines:{n:bg,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:X2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:oh,depthTest:!1,depthWrite:!1})}function iB(){return new pl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:X2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:oh,depthTest:!1,depthWrite:!1})}function rB(){return new pl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:X2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:oh,depthTest:!1,depthWrite:!1})}function X2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function X9(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const u=l.mapping,f=u===O0||u===G1,d=u===vh||u===qp;if(f||d){let v=e.get(l);const y=v!==void 0?v.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==y)return t===null&&(t=new jE(n)),v=f?t.fromEquirectangular(l,v):t.fromCubemap(l,v),v.texture.pmremVersion=l.pmremVersion,e.set(l,v),v.texture;if(v!==void 0)return v.texture;{const A=l.image;return f&&A&&A.height>0||d&&A&&r(A)?(t===null&&(t=new jE(n)),v=f?t.fromEquirectangular(l):t.fromCubemap(l),v.texture.pmremVersion=l.pmremVersion,e.set(l,v),l.addEventListener("dispose",s),v.texture):null}}}return l}function r(l){let u=0;const f=6;for(let d=0;d<f;d++)l[d]!==void 0&&u++;return u===f}function s(l){const u=l.target;u.removeEventListener("dispose",s);const f=e.get(u);f!==void 0&&(e.delete(u),f.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function W9(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&PA("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Y9(n,e,t,i){const r={},s=new WeakMap;function a(v){const y=v.target;y.index!==null&&e.remove(y.index);for(const b in y.attributes)e.remove(y.attributes[b]);y.removeEventListener("dispose",a),delete r[y.id];const A=s.get(y);A&&(e.remove(A),s.delete(y)),i.releaseStatesOfGeometry(y),y.isInstancedBufferGeometry===!0&&delete y._maxInstanceCount,t.memory.geometries--}function l(v,y){return r[y.id]===!0||(y.addEventListener("dispose",a),r[y.id]=!0,t.memory.geometries++),y}function u(v){const y=v.attributes;for(const A in y)e.update(y[A],n.ARRAY_BUFFER)}function f(v){const y=[],A=v.index,b=v.attributes.position;let C=0;if(A!==null){const B=A.array;C=A.version;for(let D=0,O=B.length;D<O;D+=3){const P=B[D+0],F=B[D+1],V=B[D+2];y.push(P,F,F,V,V,P)}}else if(b!==void 0){const B=b.array;C=b.version;for(let D=0,O=B.length/3-1;D<O;D+=3){const P=D+0,F=D+1,V=D+2;y.push(P,F,F,V,V,P)}}else return;const T=new(tP(y)?p2:d2)(y,1);T.version=C;const M=s.get(v);M&&e.remove(M),s.set(v,T)}function d(v){const y=s.get(v);if(y){const A=v.index;A!==null&&y.version<A.version&&f(v)}else f(v);return s.get(v)}return{get:l,update:u,getWireframeAttribute:d}}function j9(n,e,t){let i;function r(y){i=y}let s,a;function l(y){s=y.type,a=y.bytesPerElement}function u(y,A){n.drawElements(i,A,s,y*a),t.update(A,i,1)}function f(y,A,b){b!==0&&(n.drawElementsInstanced(i,A,s,y*a,b),t.update(A,i,b))}function d(y,A,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,A,0,s,y,0,b);let T=0;for(let M=0;M<b;M++)T+=A[M];t.update(T,i,1)}function v(y,A,b,C){if(b===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let M=0;M<y.length;M++)f(y[M]/a,A[M],C[M]);else{T.multiDrawElementsInstancedWEBGL(i,A,0,s,y,0,C,0,b);let M=0;for(let B=0;B<b;B++)M+=A[B]*C[B];t.update(M,i,1)}}this.setMode=r,this.setIndex=l,this.render=u,this.renderInstances=f,this.renderMultiDraw=d,this.renderMultiDrawInstances=v}function q9(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,l){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function K9(n,e,t){const i=new WeakMap,r=new Ii;function s(a,l,u){const f=a.morphTargetInfluences,d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,v=d!==void 0?d.length:0;let y=i.get(l);if(y===void 0||y.count!==v){let N=function(){G.dispose(),i.delete(l),l.removeEventListener("dispose",N)};var A=N;y!==void 0&&y.texture.dispose();const b=l.morphAttributes.position!==void 0,C=l.morphAttributes.normal!==void 0,T=l.morphAttributes.color!==void 0,M=l.morphAttributes.position||[],B=l.morphAttributes.normal||[],D=l.morphAttributes.color||[];let O=0;b===!0&&(O=1),C===!0&&(O=2),T===!0&&(O=3);let P=l.attributes.position.count*O,F=1;P>e.maxTextureSize&&(F=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const V=new Float32Array(P*F*4*v),G=new b_(V,P,F,v);G.type=ss,G.needsUpdate=!0;const I=O*4;for(let Q=0;Q<v;Q++){const $=M[Q],te=B[Q],se=D[Q],ye=P*F*4*Q;for(let k=0;k<$.count;k++){const ee=k*I;b===!0&&(r.fromBufferAttribute($,k),V[ye+ee+0]=r.x,V[ye+ee+1]=r.y,V[ye+ee+2]=r.z,V[ye+ee+3]=0),C===!0&&(r.fromBufferAttribute(te,k),V[ye+ee+4]=r.x,V[ye+ee+5]=r.y,V[ye+ee+6]=r.z,V[ye+ee+7]=0),T===!0&&(r.fromBufferAttribute(se,k),V[ye+ee+8]=r.x,V[ye+ee+9]=r.y,V[ye+ee+10]=r.z,V[ye+ee+11]=se.itemSize===4?r.w:1)}}y={count:v,texture:G,size:new xt(P,F)},i.set(l,y),l.addEventListener("dispose",N)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)u.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let b=0;for(let T=0;T<f.length;T++)b+=f[T];const C=l.morphTargetsRelative?1:1-b;u.getUniforms().setValue(n,"morphTargetBaseInfluence",C),u.getUniforms().setValue(n,"morphTargetInfluences",f)}u.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),u.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}return{update:s}}function J9(n,e,t,i){let r=new WeakMap;function s(u){const f=i.render.frame,d=u.geometry,v=e.get(u,d);if(r.get(v)!==f&&(e.update(v),r.set(v,f)),u.isInstancedMesh&&(u.hasEventListener("dispose",l)===!1&&u.addEventListener("dispose",l),r.get(u)!==f&&(t.update(u.instanceMatrix,n.ARRAY_BUFFER),u.instanceColor!==null&&t.update(u.instanceColor,n.ARRAY_BUFFER),r.set(u,f))),u.isSkinnedMesh){const y=u.skeleton;r.get(y)!==f&&(y.update(),r.set(y,f))}return v}function a(){r=new WeakMap}function l(u){const f=u.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:a}}const QP=new ar,sB=new Cb(1,1),$P=new b_,eN=new xb,tN=new M_,aB=[],oB=[],lB=new Float32Array(16),uB=new Float32Array(9),cB=new Float32Array(4);function iy(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=aB[r];if(s===void 0&&(s=new Float32Array(r),aB[r]=s),e!==0){i.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=t,n[a].toArray(s,l)}return s}function fa(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ha(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Xb(n,e){let t=oB[e];t===void 0&&(t=new Int32Array(e),oB[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Z9(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Q9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fa(t,e))return;n.uniform2fv(this.addr,e),ha(t,e)}}function $9(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(fa(t,e))return;n.uniform3fv(this.addr,e),ha(t,e)}}function ek(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fa(t,e))return;n.uniform4fv(this.addr,e),ha(t,e)}}function tk(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(fa(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ha(t,e)}else{if(fa(t,i))return;cB.set(i),n.uniformMatrix2fv(this.addr,!1,cB),ha(t,i)}}function nk(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(fa(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ha(t,e)}else{if(fa(t,i))return;uB.set(i),n.uniformMatrix3fv(this.addr,!1,uB),ha(t,i)}}function ik(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(fa(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ha(t,e)}else{if(fa(t,i))return;lB.set(i),n.uniformMatrix4fv(this.addr,!1,lB),ha(t,i)}}function rk(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function sk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fa(t,e))return;n.uniform2iv(this.addr,e),ha(t,e)}}function ak(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(fa(t,e))return;n.uniform3iv(this.addr,e),ha(t,e)}}function ok(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fa(t,e))return;n.uniform4iv(this.addr,e),ha(t,e)}}function lk(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function uk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(fa(t,e))return;n.uniform2uiv(this.addr,e),ha(t,e)}}function ck(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(fa(t,e))return;n.uniform3uiv(this.addr,e),ha(t,e)}}function fk(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(fa(t,e))return;n.uniform4uiv(this.addr,e),ha(t,e)}}function hk(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(sB.compareFunction=f2,s=sB):s=QP,t.setTexture2D(e||s,r)}function dk(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||eN,r)}function pk(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||tN,r)}function mk(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||$P,r)}function gk(n){switch(n){case 5126:return Z9;case 35664:return Q9;case 35665:return $9;case 35666:return ek;case 35674:return tk;case 35675:return nk;case 35676:return ik;case 5124:case 35670:return rk;case 35667:case 35671:return sk;case 35668:case 35672:return ak;case 35669:case 35673:return ok;case 5125:return lk;case 36294:return uk;case 36295:return ck;case 36296:return fk;case 35678:case 36198:case 36298:case 36306:case 35682:return hk;case 35679:case 36299:case 36307:return dk;case 35680:case 36300:case 36308:case 36293:return pk;case 36289:case 36303:case 36311:case 36292:return mk}}function vk(n,e){n.uniform1fv(this.addr,e)}function yk(n,e){const t=iy(e,this.size,2);n.uniform2fv(this.addr,t)}function _k(n,e){const t=iy(e,this.size,3);n.uniform3fv(this.addr,t)}function xk(n,e){const t=iy(e,this.size,4);n.uniform4fv(this.addr,t)}function Ak(n,e){const t=iy(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Sk(n,e){const t=iy(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function bk(n,e){const t=iy(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Mk(n,e){n.uniform1iv(this.addr,e)}function Tk(n,e){n.uniform2iv(this.addr,e)}function Ek(n,e){n.uniform3iv(this.addr,e)}function Ck(n,e){n.uniform4iv(this.addr,e)}function wk(n,e){n.uniform1uiv(this.addr,e)}function Rk(n,e){n.uniform2uiv(this.addr,e)}function Dk(n,e){n.uniform3uiv(this.addr,e)}function Bk(n,e){n.uniform4uiv(this.addr,e)}function Uk(n,e,t){const i=this.cache,r=e.length,s=Xb(t,r);fa(i,s)||(n.uniform1iv(this.addr,s),ha(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||QP,s[a])}function Ok(n,e,t){const i=this.cache,r=e.length,s=Xb(t,r);fa(i,s)||(n.uniform1iv(this.addr,s),ha(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||eN,s[a])}function Lk(n,e,t){const i=this.cache,r=e.length,s=Xb(t,r);fa(i,s)||(n.uniform1iv(this.addr,s),ha(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||tN,s[a])}function Pk(n,e,t){const i=this.cache,r=e.length,s=Xb(t,r);fa(i,s)||(n.uniform1iv(this.addr,s),ha(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||$P,s[a])}function Nk(n){switch(n){case 5126:return vk;case 35664:return yk;case 35665:return _k;case 35666:return xk;case 35674:return Ak;case 35675:return Sk;case 35676:return bk;case 5124:case 35670:return Mk;case 35667:case 35671:return Tk;case 35668:case 35672:return Ek;case 35669:case 35673:return Ck;case 5125:return wk;case 36294:return Rk;case 36295:return Dk;case 36296:return Bk;case 35678:case 36198:case 36298:case 36306:case 35682:return Uk;case 35679:case 36299:case 36307:return Ok;case 35680:case 36300:case 36308:case 36293:return Lk;case 36289:case 36303:case 36311:case 36292:return Pk}}class Ik{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=gk(t.type)}}class Fk{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Nk(t.type)}}class Gk{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const wT=/(\w+)(\])?(\[|\.)?/g;function fB(n,e){n.seq.push(e),n.map[e.id]=e}function Hk(n,e,t){const i=n.name,r=i.length;for(wT.lastIndex=0;;){const s=wT.exec(i),a=wT.lastIndex;let l=s[1];const u=s[2]==="]",f=s[3];if(u&&(l=l|0),f===void 0||f==="["&&a+2===r){fB(t,f===void 0?new Ik(l,n,e):new Fk(l,n,e));break}else{let v=t.map[l];v===void 0&&(v=new Gk(l),fB(t,v)),t=v}}}class IA{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);Hk(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const l=t[s],u=i[l.id];u.needsUpdate!==!1&&l.setValue(e,u.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function hB(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const zk=37297;let Vk=0;function kk(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const l=a+1;i.push(`${l===e?">":" "} ${l}: ${t[a]}`)}return i.join(`
`)}const dB=new Kn;function Xk(n){Ni._getMatrix(dB,Ni.workingColorSpace,n);const e=`mat3( ${dB.elements.map(t=>t.toFixed(4))} )`;switch(Ni.getTransfer(n)){case z1:return[e,"LinearTransferOETF"];case br:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function pB(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+kk(n.getShaderSource(e),a)}else return r}function Wk(n,e){const t=Xk(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Yk(n,e){let t;switch(e){case LL:t="Linear";break;case PL:t="Reinhard";break;case NL:t="Cineon";break;case n2:t="ACESFilmic";break;case FL:t="AgX";break;case GL:t="Neutral";break;case IL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const gA=new he;function jk(){Ni.getLuminanceCoefficients(gA);const n=gA.x.toFixed(4),e=gA.y.toFixed(4),t=gA.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function qk(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(o1).join(`
`)}function Kk(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Jk(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:l}}return t}function o1(n){return n!==""}function mB(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function gB(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Zk=/^[ \t]*#include +<([\w\d./]+)>/gm;function qE(n){return n.replace(Zk,$k)}const Qk=new Map;function $k(n,e){let t=ri[e];if(t===void 0){const i=Qk.get(e);if(i!==void 0)t=ri[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return qE(t)}const e7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function vB(n){return n.replace(e7,t7)}function t7(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function yB(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function n7(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===cb?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===d1?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===lf&&(e="SHADOWMAP_TYPE_VSM"),e}function i7(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case vh:case qp:e="ENVMAP_TYPE_CUBE";break;case ey:e="ENVMAP_TYPE_CUBE_UV";break}return e}function r7(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case qp:e="ENVMAP_MODE_REFRACTION";break}return e}function s7(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case __:e="ENVMAP_BLENDING_MULTIPLY";break;case UL:e="ENVMAP_BLENDING_MIX";break;case OL:e="ENVMAP_BLENDING_ADD";break}return e}function a7(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function o7(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,l=t.fragmentShader;const u=n7(t),f=i7(t),d=r7(t),v=s7(t),y=a7(t),A=qk(t),b=Kk(s),C=r.createProgram();let T,M,B=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(o1).join(`
`),T.length>0&&(T+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(o1).join(`
`),M.length>0&&(M+=`
`)):(T=[yB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(o1).join(`
`),M=[yB(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",t.envMap?"#define "+v:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==lh?"#define TONE_MAPPING":"",t.toneMapping!==lh?ri.tonemapping_pars_fragment:"",t.toneMapping!==lh?Yk("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ri.colorspace_pars_fragment,Wk("linearToOutputTexel",t.outputColorSpace),jk(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(o1).join(`
`)),a=qE(a),a=mB(a,t),a=gB(a,t),l=qE(l),l=mB(l,t),l=gB(l,t),a=vB(a),l=vB(l),t.isRawShaderMaterial!==!0&&(B=`#version 300 es
`,T=[A,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,M=["#define varying in",t.glslVersion===HE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===HE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const D=B+T+a,O=B+M+l,P=hB(r,r.VERTEX_SHADER,D),F=hB(r,r.FRAGMENT_SHADER,O);r.attachShader(C,P),r.attachShader(C,F),t.index0AttributeName!==void 0?r.bindAttribLocation(C,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(C,0,"position"),r.linkProgram(C);function V(Q){if(n.debug.checkShaderErrors){const $=r.getProgramInfoLog(C).trim(),te=r.getShaderInfoLog(P).trim(),se=r.getShaderInfoLog(F).trim();let ye=!0,k=!0;if(r.getProgramParameter(C,r.LINK_STATUS)===!1)if(ye=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,C,P,F);else{const ee=pB(r,P,"vertex"),ne=pB(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(C,r.VALIDATE_STATUS)+`

Material Name: `+Q.name+`
Material Type: `+Q.type+`

Program Info Log: `+$+`
`+ee+`
`+ne)}else $!==""?console.warn("THREE.WebGLProgram: Program Info Log:",$):(te===""||se==="")&&(k=!1);k&&(Q.diagnostics={runnable:ye,programLog:$,vertexShader:{log:te,prefix:T},fragmentShader:{log:se,prefix:M}})}r.deleteShader(P),r.deleteShader(F),G=new IA(r,C),I=Jk(r,C)}let G;this.getUniforms=function(){return G===void 0&&V(this),G};let I;this.getAttributes=function(){return I===void 0&&V(this),I};let N=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return N===!1&&(N=r.getProgramParameter(C,zk)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(C),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Vk++,this.cacheKey=e,this.usedTimes=1,this.program=C,this.vertexShader=P,this.fragmentShader=F,this}let l7=0;class u7{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new c7(e),t.set(e,i)),i}}class c7{constructor(e){this.id=l7++,this.code=e,this.usedTimes=0}}function f7(n,e,t,i,r,s,a){const l=new V0,u=new u7,f=new Set,d=[],v=r.logarithmicDepthBuffer,y=r.vertexTextures;let A=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(I){return f.add(I),I===0?"uv":`uv${I}`}function T(I,N,Q,$,te){const se=$.fog,ye=te.geometry,k=I.isMeshStandardMaterial?$.environment:null,ee=(I.isMeshStandardMaterial?t:e).get(I.envMap||k),ne=ee&&ee.mapping===ey?ee.image.height:null,de=b[I.type];I.precision!==null&&(A=r.getMaxPrecision(I.precision),A!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",A,"instead."));const X=ye.morphAttributes.position||ye.morphAttributes.normal||ye.morphAttributes.color,J=X!==void 0?X.length:0;let ce=0;ye.morphAttributes.position!==void 0&&(ce=1),ye.morphAttributes.normal!==void 0&&(ce=2),ye.morphAttributes.color!==void 0&&(ce=3);let ge,oe,ve,Se;if(de){const nn=uf[de];ge=nn.vertexShader,oe=nn.fragmentShader}else ge=I.vertexShader,oe=I.fragmentShader,u.update(I),ve=u.getVertexShaderID(I),Se=u.getFragmentShaderID(I);const Re=n.getRenderTarget(),Le=n.state.buffers.depth.getReversed(),gt=te.isInstancedMesh===!0,Mt=te.isBatchedMesh===!0,At=!!I.map,at=!!I.matcap,Nt=!!ee,ie=!!I.aoMap,ut=!!I.lightMap,$e=!!I.bumpMap,Ke=!!I.normalMap,Pe=!!I.displacementMap,pt=!!I.emissiveMap,Ve=!!I.metalnessMap,j=!!I.roughnessMap,Y=I.anisotropy>0,_e=I.clearcoat>0,Ie=I.dispersion>0,Ge=I.iridescence>0,Ye=I.sheen>0,it=I.transmission>0,rt=Y&&!!I.anisotropyMap,yt=_e&&!!I.clearcoatMap,Vt=_e&&!!I.clearcoatNormalMap,ht=_e&&!!I.clearcoatRoughnessMap,Lt=Ge&&!!I.iridescenceMap,Et=Ge&&!!I.iridescenceThicknessMap,_t=Ye&&!!I.sheenColorMap,ot=Ye&&!!I.sheenRoughnessMap,xe=!!I.specularMap,We=!!I.specularColorMap,Rt=!!I.specularIntensityMap,Ae=it&&!!I.transmissionMap,De=it&&!!I.thicknessMap,He=!!I.gradientMap,dt=!!I.alphaMap,Pt=I.alphaTest>0,Tt=!!I.alphaHash,qt=!!I.extensions;let sn=lh;I.toneMapped&&(Re===null||Re.isXRRenderTarget===!0)&&(sn=n.toneMapping);const Jt={shaderID:de,shaderType:I.type,shaderName:I.name,vertexShader:ge,fragmentShader:oe,defines:I.defines,customVertexShaderID:ve,customFragmentShaderID:Se,isRawShaderMaterial:I.isRawShaderMaterial===!0,glslVersion:I.glslVersion,precision:A,batching:Mt,batchingColor:Mt&&te._colorsTexture!==null,instancing:gt,instancingColor:gt&&te.instanceColor!==null,instancingMorph:gt&&te.morphTexture!==null,supportsVertexTextures:y,outputColorSpace:Re===null?n.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:gf,alphaToCoverage:!!I.alphaToCoverage,map:At,matcap:at,envMap:Nt,envMapMode:Nt&&ee.mapping,envMapCubeUVHeight:ne,aoMap:ie,lightMap:ut,bumpMap:$e,normalMap:Ke,displacementMap:y&&Pe,emissiveMap:pt,normalMapObjectSpace:Ke&&I.normalMapType===YL,normalMapTangentSpace:Ke&&I.normalMapType===nm,metalnessMap:Ve,roughnessMap:j,anisotropy:Y,anisotropyMap:rt,clearcoat:_e,clearcoatMap:yt,clearcoatNormalMap:Vt,clearcoatRoughnessMap:ht,dispersion:Ie,iridescence:Ge,iridescenceMap:Lt,iridescenceThicknessMap:Et,sheen:Ye,sheenColorMap:_t,sheenRoughnessMap:ot,specularMap:xe,specularColorMap:We,specularIntensityMap:Rt,transmission:it,transmissionMap:Ae,thicknessMap:De,gradientMap:He,opaque:I.transparent===!1&&I.blending===Ig&&I.alphaToCoverage===!1,alphaMap:dt,alphaTest:Pt,alphaHash:Tt,combine:I.combine,mapUv:At&&C(I.map.channel),aoMapUv:ie&&C(I.aoMap.channel),lightMapUv:ut&&C(I.lightMap.channel),bumpMapUv:$e&&C(I.bumpMap.channel),normalMapUv:Ke&&C(I.normalMap.channel),displacementMapUv:Pe&&C(I.displacementMap.channel),emissiveMapUv:pt&&C(I.emissiveMap.channel),metalnessMapUv:Ve&&C(I.metalnessMap.channel),roughnessMapUv:j&&C(I.roughnessMap.channel),anisotropyMapUv:rt&&C(I.anisotropyMap.channel),clearcoatMapUv:yt&&C(I.clearcoatMap.channel),clearcoatNormalMapUv:Vt&&C(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ht&&C(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Lt&&C(I.iridescenceMap.channel),iridescenceThicknessMapUv:Et&&C(I.iridescenceThicknessMap.channel),sheenColorMapUv:_t&&C(I.sheenColorMap.channel),sheenRoughnessMapUv:ot&&C(I.sheenRoughnessMap.channel),specularMapUv:xe&&C(I.specularMap.channel),specularColorMapUv:We&&C(I.specularColorMap.channel),specularIntensityMapUv:Rt&&C(I.specularIntensityMap.channel),transmissionMapUv:Ae&&C(I.transmissionMap.channel),thicknessMapUv:De&&C(I.thicknessMap.channel),alphaMapUv:dt&&C(I.alphaMap.channel),vertexTangents:!!ye.attributes.tangent&&(Ke||Y),vertexColors:I.vertexColors,vertexAlphas:I.vertexColors===!0&&!!ye.attributes.color&&ye.attributes.color.itemSize===4,pointsUvs:te.isPoints===!0&&!!ye.attributes.uv&&(At||dt),fog:!!se,useFog:I.fog===!0,fogExp2:!!se&&se.isFogExp2,flatShading:I.flatShading===!0,sizeAttenuation:I.sizeAttenuation===!0,logarithmicDepthBuffer:v,reverseDepthBuffer:Le,skinning:te.isSkinnedMesh===!0,morphTargets:ye.morphAttributes.position!==void 0,morphNormals:ye.morphAttributes.normal!==void 0,morphColors:ye.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:ce,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numSpotLightMaps:N.spotLightMap.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numSpotLightShadowsWithMaps:N.numSpotLightShadowsWithMaps,numLightProbes:N.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:I.dithering,shadowMapEnabled:n.shadowMap.enabled&&Q.length>0,shadowMapType:n.shadowMap.type,toneMapping:sn,decodeVideoTexture:At&&I.map.isVideoTexture===!0&&Ni.getTransfer(I.map.colorSpace)===br,decodeVideoTextureEmissive:pt&&I.emissiveMap.isVideoTexture===!0&&Ni.getTransfer(I.emissiveMap.colorSpace)===br,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Ru,flipSided:I.side===hl,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:qt&&I.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(qt&&I.extensions.multiDraw===!0||Mt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Jt.vertexUv1s=f.has(1),Jt.vertexUv2s=f.has(2),Jt.vertexUv3s=f.has(3),f.clear(),Jt}function M(I){const N=[];if(I.shaderID?N.push(I.shaderID):(N.push(I.customVertexShaderID),N.push(I.customFragmentShaderID)),I.defines!==void 0)for(const Q in I.defines)N.push(Q),N.push(I.defines[Q]);return I.isRawShaderMaterial===!1&&(B(N,I),D(N,I),N.push(n.outputColorSpace)),N.push(I.customProgramCacheKey),N.join()}function B(I,N){I.push(N.precision),I.push(N.outputColorSpace),I.push(N.envMapMode),I.push(N.envMapCubeUVHeight),I.push(N.mapUv),I.push(N.alphaMapUv),I.push(N.lightMapUv),I.push(N.aoMapUv),I.push(N.bumpMapUv),I.push(N.normalMapUv),I.push(N.displacementMapUv),I.push(N.emissiveMapUv),I.push(N.metalnessMapUv),I.push(N.roughnessMapUv),I.push(N.anisotropyMapUv),I.push(N.clearcoatMapUv),I.push(N.clearcoatNormalMapUv),I.push(N.clearcoatRoughnessMapUv),I.push(N.iridescenceMapUv),I.push(N.iridescenceThicknessMapUv),I.push(N.sheenColorMapUv),I.push(N.sheenRoughnessMapUv),I.push(N.specularMapUv),I.push(N.specularColorMapUv),I.push(N.specularIntensityMapUv),I.push(N.transmissionMapUv),I.push(N.thicknessMapUv),I.push(N.combine),I.push(N.fogExp2),I.push(N.sizeAttenuation),I.push(N.morphTargetsCount),I.push(N.morphAttributeCount),I.push(N.numDirLights),I.push(N.numPointLights),I.push(N.numSpotLights),I.push(N.numSpotLightMaps),I.push(N.numHemiLights),I.push(N.numRectAreaLights),I.push(N.numDirLightShadows),I.push(N.numPointLightShadows),I.push(N.numSpotLightShadows),I.push(N.numSpotLightShadowsWithMaps),I.push(N.numLightProbes),I.push(N.shadowMapType),I.push(N.toneMapping),I.push(N.numClippingPlanes),I.push(N.numClipIntersection),I.push(N.depthPacking)}function D(I,N){l.disableAll(),N.supportsVertexTextures&&l.enable(0),N.instancing&&l.enable(1),N.instancingColor&&l.enable(2),N.instancingMorph&&l.enable(3),N.matcap&&l.enable(4),N.envMap&&l.enable(5),N.normalMapObjectSpace&&l.enable(6),N.normalMapTangentSpace&&l.enable(7),N.clearcoat&&l.enable(8),N.iridescence&&l.enable(9),N.alphaTest&&l.enable(10),N.vertexColors&&l.enable(11),N.vertexAlphas&&l.enable(12),N.vertexUv1s&&l.enable(13),N.vertexUv2s&&l.enable(14),N.vertexUv3s&&l.enable(15),N.vertexTangents&&l.enable(16),N.anisotropy&&l.enable(17),N.alphaHash&&l.enable(18),N.batching&&l.enable(19),N.dispersion&&l.enable(20),N.batchingColor&&l.enable(21),I.push(l.mask),l.disableAll(),N.fog&&l.enable(0),N.useFog&&l.enable(1),N.flatShading&&l.enable(2),N.logarithmicDepthBuffer&&l.enable(3),N.reverseDepthBuffer&&l.enable(4),N.skinning&&l.enable(5),N.morphTargets&&l.enable(6),N.morphNormals&&l.enable(7),N.morphColors&&l.enable(8),N.premultipliedAlpha&&l.enable(9),N.shadowMapEnabled&&l.enable(10),N.doubleSided&&l.enable(11),N.flipSided&&l.enable(12),N.useDepthPacking&&l.enable(13),N.dithering&&l.enable(14),N.transmission&&l.enable(15),N.sheen&&l.enable(16),N.opaque&&l.enable(17),N.pointsUvs&&l.enable(18),N.decodeVideoTexture&&l.enable(19),N.decodeVideoTextureEmissive&&l.enable(20),N.alphaToCoverage&&l.enable(21),I.push(l.mask)}function O(I){const N=b[I.type];let Q;if(N){const $=uf[N];Q=m2.clone($.uniforms)}else Q=I.uniforms;return Q}function P(I,N){let Q;for(let $=0,te=d.length;$<te;$++){const se=d[$];if(se.cacheKey===N){Q=se,++Q.usedTimes;break}}return Q===void 0&&(Q=new o7(n,N,I,s),d.push(Q)),Q}function F(I){if(--I.usedTimes===0){const N=d.indexOf(I);d[N]=d[d.length-1],d.pop(),I.destroy()}}function V(I){u.remove(I)}function G(){u.dispose()}return{getParameters:T,getProgramCacheKey:M,getUniforms:O,acquireProgram:P,releaseProgram:F,releaseShaderCache:V,programs:d,dispose:G}}function h7(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let l=n.get(a);return l===void 0&&(l={},n.set(a,l)),l}function i(a){n.delete(a)}function r(a,l,u){n.get(a)[l]=u}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function d7(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function _B(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function xB(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(v,y,A,b,C,T){let M=n[e];return M===void 0?(M={id:v.id,object:v,geometry:y,material:A,groupOrder:b,renderOrder:v.renderOrder,z:C,group:T},n[e]=M):(M.id=v.id,M.object=v,M.geometry=y,M.material=A,M.groupOrder=b,M.renderOrder=v.renderOrder,M.z=C,M.group=T),e++,M}function l(v,y,A,b,C,T){const M=a(v,y,A,b,C,T);A.transmission>0?i.push(M):A.transparent===!0?r.push(M):t.push(M)}function u(v,y,A,b,C,T){const M=a(v,y,A,b,C,T);A.transmission>0?i.unshift(M):A.transparent===!0?r.unshift(M):t.unshift(M)}function f(v,y){t.length>1&&t.sort(v||d7),i.length>1&&i.sort(y||_B),r.length>1&&r.sort(y||_B)}function d(){for(let v=e,y=n.length;v<y;v++){const A=n[v];if(A.id===null)break;A.id=null,A.object=null,A.geometry=null,A.material=null,A.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:u,finish:d,sort:f}}function p7(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new xB,n.set(i,[a])):r>=s.length?(a=new xB,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function m7(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new he,color:new jt};break;case"SpotLight":t={position:new he,direction:new he,color:new jt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new he,color:new jt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new he,skyColor:new jt,groundColor:new jt};break;case"RectAreaLight":t={color:new jt,position:new he,halfWidth:new he,halfHeight:new he};break}return n[e.id]=t,t}}}function g7(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let v7=0;function y7(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function _7(n){const e=new m7,t=g7(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)i.probe.push(new he);const r=new he,s=new Tn,a=new Tn;function l(f){let d=0,v=0,y=0;for(let I=0;I<9;I++)i.probe[I].set(0,0,0);let A=0,b=0,C=0,T=0,M=0,B=0,D=0,O=0,P=0,F=0,V=0;f.sort(y7);for(let I=0,N=f.length;I<N;I++){const Q=f[I],$=Q.color,te=Q.intensity,se=Q.distance,ye=Q.shadow&&Q.shadow.map?Q.shadow.map.texture:null;if(Q.isAmbientLight)d+=$.r*te,v+=$.g*te,y+=$.b*te;else if(Q.isLightProbe){for(let k=0;k<9;k++)i.probe[k].addScaledVector(Q.sh.coefficients[k],te);V++}else if(Q.isDirectionalLight){const k=e.get(Q);if(k.color.copy(Q.color).multiplyScalar(Q.intensity),Q.castShadow){const ee=Q.shadow,ne=t.get(Q);ne.shadowIntensity=ee.intensity,ne.shadowBias=ee.bias,ne.shadowNormalBias=ee.normalBias,ne.shadowRadius=ee.radius,ne.shadowMapSize=ee.mapSize,i.directionalShadow[A]=ne,i.directionalShadowMap[A]=ye,i.directionalShadowMatrix[A]=Q.shadow.matrix,B++}i.directional[A]=k,A++}else if(Q.isSpotLight){const k=e.get(Q);k.position.setFromMatrixPosition(Q.matrixWorld),k.color.copy($).multiplyScalar(te),k.distance=se,k.coneCos=Math.cos(Q.angle),k.penumbraCos=Math.cos(Q.angle*(1-Q.penumbra)),k.decay=Q.decay,i.spot[C]=k;const ee=Q.shadow;if(Q.map&&(i.spotLightMap[P]=Q.map,P++,ee.updateMatrices(Q),Q.castShadow&&F++),i.spotLightMatrix[C]=ee.matrix,Q.castShadow){const ne=t.get(Q);ne.shadowIntensity=ee.intensity,ne.shadowBias=ee.bias,ne.shadowNormalBias=ee.normalBias,ne.shadowRadius=ee.radius,ne.shadowMapSize=ee.mapSize,i.spotShadow[C]=ne,i.spotShadowMap[C]=ye,O++}C++}else if(Q.isRectAreaLight){const k=e.get(Q);k.color.copy($).multiplyScalar(te),k.halfWidth.set(Q.width*.5,0,0),k.halfHeight.set(0,Q.height*.5,0),i.rectArea[T]=k,T++}else if(Q.isPointLight){const k=e.get(Q);if(k.color.copy(Q.color).multiplyScalar(Q.intensity),k.distance=Q.distance,k.decay=Q.decay,Q.castShadow){const ee=Q.shadow,ne=t.get(Q);ne.shadowIntensity=ee.intensity,ne.shadowBias=ee.bias,ne.shadowNormalBias=ee.normalBias,ne.shadowRadius=ee.radius,ne.shadowMapSize=ee.mapSize,ne.shadowCameraNear=ee.camera.near,ne.shadowCameraFar=ee.camera.far,i.pointShadow[b]=ne,i.pointShadowMap[b]=ye,i.pointShadowMatrix[b]=Q.shadow.matrix,D++}i.point[b]=k,b++}else if(Q.isHemisphereLight){const k=e.get(Q);k.skyColor.copy(Q.color).multiplyScalar(te),k.groundColor.copy(Q.groundColor).multiplyScalar(te),i.hemi[M]=k,M++}}T>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Qt.LTC_FLOAT_1,i.rectAreaLTC2=Qt.LTC_FLOAT_2):(i.rectAreaLTC1=Qt.LTC_HALF_1,i.rectAreaLTC2=Qt.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=v,i.ambient[2]=y;const G=i.hash;(G.directionalLength!==A||G.pointLength!==b||G.spotLength!==C||G.rectAreaLength!==T||G.hemiLength!==M||G.numDirectionalShadows!==B||G.numPointShadows!==D||G.numSpotShadows!==O||G.numSpotMaps!==P||G.numLightProbes!==V)&&(i.directional.length=A,i.spot.length=C,i.rectArea.length=T,i.point.length=b,i.hemi.length=M,i.directionalShadow.length=B,i.directionalShadowMap.length=B,i.pointShadow.length=D,i.pointShadowMap.length=D,i.spotShadow.length=O,i.spotShadowMap.length=O,i.directionalShadowMatrix.length=B,i.pointShadowMatrix.length=D,i.spotLightMatrix.length=O+P-F,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=F,i.numLightProbes=V,G.directionalLength=A,G.pointLength=b,G.spotLength=C,G.rectAreaLength=T,G.hemiLength=M,G.numDirectionalShadows=B,G.numPointShadows=D,G.numSpotShadows=O,G.numSpotMaps=P,G.numLightProbes=V,i.version=v7++)}function u(f,d){let v=0,y=0,A=0,b=0,C=0;const T=d.matrixWorldInverse;for(let M=0,B=f.length;M<B;M++){const D=f[M];if(D.isDirectionalLight){const O=i.directional[v];O.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(T),v++}else if(D.isSpotLight){const O=i.spot[A];O.position.setFromMatrixPosition(D.matrixWorld),O.position.applyMatrix4(T),O.direction.setFromMatrixPosition(D.matrixWorld),r.setFromMatrixPosition(D.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(T),A++}else if(D.isRectAreaLight){const O=i.rectArea[b];O.position.setFromMatrixPosition(D.matrixWorld),O.position.applyMatrix4(T),a.identity(),s.copy(D.matrixWorld),s.premultiply(T),a.extractRotation(s),O.halfWidth.set(D.width*.5,0,0),O.halfHeight.set(0,D.height*.5,0),O.halfWidth.applyMatrix4(a),O.halfHeight.applyMatrix4(a),b++}else if(D.isPointLight){const O=i.point[y];O.position.setFromMatrixPosition(D.matrixWorld),O.position.applyMatrix4(T),y++}else if(D.isHemisphereLight){const O=i.hemi[C];O.direction.setFromMatrixPosition(D.matrixWorld),O.direction.transformDirection(T),C++}}}return{setup:l,setupView:u,state:i}}function AB(n){const e=new _7(n),t=[],i=[];function r(d){f.camera=d,t.length=0,i.length=0}function s(d){t.push(d)}function a(d){i.push(d)}function l(){e.setup(t)}function u(d){e.setupView(t,d)}const f={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:f,setupLights:l,setupLightsView:u,pushLight:s,pushShadow:a}}function x7(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let l;return a===void 0?(l=new AB(n),e.set(r,[l])):s>=a.length?(l=new AB(n),a.push(l)):l=a[s],l}function i(){e=new WeakMap}return{get:t,dispose:i}}const A7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,S7=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function b7(n,e,t){let i=new ty;const r=new xt,s=new xt,a=new Ii,l=new Hb({depthPacking:c2}),u=new zb,f={},d=t.maxTextureSize,v={[gh]:hl,[hl]:gh,[Ru]:Ru},y=new pl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new xt},radius:{value:4}},vertexShader:A7,fragmentShader:S7}),A=y.clone();A.defines.HORIZONTAL_PASS=1;const b=new Qn;b.setAttribute("position",new Ki(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new Ur(b,y),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=cb;let M=this.type;this.render=function(F,V,G){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||F.length===0)return;const I=n.getRenderTarget(),N=n.getActiveCubeFace(),Q=n.getActiveMipmapLevel(),$=n.state;$.setBlending(oh),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);const te=M!==lf&&this.type===lf,se=M===lf&&this.type!==lf;for(let ye=0,k=F.length;ye<k;ye++){const ee=F[ye],ne=ee.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;r.copy(ne.mapSize);const de=ne.getFrameExtents();if(r.multiply(de),s.copy(ne.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/de.x),r.x=s.x*de.x,ne.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/de.y),r.y=s.y*de.y,ne.mapSize.y=s.y)),ne.map===null||te===!0||se===!0){const J=this.type!==lf?{minFilter:Ra,magFilter:Ra}:{};ne.map!==null&&ne.map.dispose(),ne.map=new _c(r.x,r.y,J),ne.map.texture.name=ee.name+".shadowMap",ne.camera.updateProjectionMatrix()}n.setRenderTarget(ne.map),n.clear();const X=ne.getViewportCount();for(let J=0;J<X;J++){const ce=ne.getViewport(J);a.set(s.x*ce.x,s.y*ce.y,s.x*ce.z,s.y*ce.w),$.viewport(a),ne.updateMatrices(ee,J),i=ne.getFrustum(),O(V,G,ne.camera,ee,this.type)}ne.isPointLightShadow!==!0&&this.type===lf&&B(ne,G),ne.needsUpdate=!1}M=this.type,T.needsUpdate=!1,n.setRenderTarget(I,N,Q)};function B(F,V){const G=e.update(C);y.defines.VSM_SAMPLES!==F.blurSamples&&(y.defines.VSM_SAMPLES=F.blurSamples,A.defines.VSM_SAMPLES=F.blurSamples,y.needsUpdate=!0,A.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new _c(r.x,r.y)),y.uniforms.shadow_pass.value=F.map.texture,y.uniforms.resolution.value=F.mapSize,y.uniforms.radius.value=F.radius,n.setRenderTarget(F.mapPass),n.clear(),n.renderBufferDirect(V,null,G,y,C,null),A.uniforms.shadow_pass.value=F.mapPass.texture,A.uniforms.resolution.value=F.mapSize,A.uniforms.radius.value=F.radius,n.setRenderTarget(F.map),n.clear(),n.renderBufferDirect(V,null,G,A,C,null)}function D(F,V,G,I){let N=null;const Q=G.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(Q!==void 0)N=Q;else if(N=G.isPointLight===!0?u:l,n.localClippingEnabled&&V.clipShadows===!0&&Array.isArray(V.clippingPlanes)&&V.clippingPlanes.length!==0||V.displacementMap&&V.displacementScale!==0||V.alphaMap&&V.alphaTest>0||V.map&&V.alphaTest>0||V.alphaToCoverage===!0){const $=N.uuid,te=V.uuid;let se=f[$];se===void 0&&(se={},f[$]=se);let ye=se[te];ye===void 0&&(ye=N.clone(),se[te]=ye,V.addEventListener("dispose",P)),N=ye}if(N.visible=V.visible,N.wireframe=V.wireframe,I===lf?N.side=V.shadowSide!==null?V.shadowSide:V.side:N.side=V.shadowSide!==null?V.shadowSide:v[V.side],N.alphaMap=V.alphaMap,N.alphaTest=V.alphaToCoverage===!0?.5:V.alphaTest,N.map=V.map,N.clipShadows=V.clipShadows,N.clippingPlanes=V.clippingPlanes,N.clipIntersection=V.clipIntersection,N.displacementMap=V.displacementMap,N.displacementScale=V.displacementScale,N.displacementBias=V.displacementBias,N.wireframeLinewidth=V.wireframeLinewidth,N.linewidth=V.linewidth,G.isPointLight===!0&&N.isMeshDistanceMaterial===!0){const $=n.properties.get(N);$.light=G}return N}function O(F,V,G,I,N){if(F.visible===!1)return;if(F.layers.test(V.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&N===lf)&&(!F.frustumCulled||i.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,F.matrixWorld);const te=e.update(F),se=F.material;if(Array.isArray(se)){const ye=te.groups;for(let k=0,ee=ye.length;k<ee;k++){const ne=ye[k],de=se[ne.materialIndex];if(de&&de.visible){const X=D(F,de,I,N);F.onBeforeShadow(n,F,V,G,te,X,ne),n.renderBufferDirect(G,null,te,X,F,ne),F.onAfterShadow(n,F,V,G,te,X,ne)}}}else if(se.visible){const ye=D(F,se,I,N);F.onBeforeShadow(n,F,V,G,te,ye,null),n.renderBufferDirect(G,null,te,ye,F,null),F.onAfterShadow(n,F,V,G,te,ye,null)}}const $=F.children;for(let te=0,se=$.length;te<se;te++)O($[te],V,G,I,N)}function P(F){F.target.removeEventListener("dispose",P);for(const G in f){const I=f[G],N=F.target.uuid;N in I&&(I[N].dispose(),delete I[N])}}}const M7={[eS]:tS,[nS]:sS,[iS]:aS,[Wg]:rS,[tS]:eS,[sS]:nS,[aS]:iS,[rS]:Wg};function T7(n,e){function t(){let Ae=!1;const De=new Ii;let He=null;const dt=new Ii(0,0,0,0);return{setMask:function(Pt){He!==Pt&&!Ae&&(n.colorMask(Pt,Pt,Pt,Pt),He=Pt)},setLocked:function(Pt){Ae=Pt},setClear:function(Pt,Tt,qt,sn,Jt){Jt===!0&&(Pt*=sn,Tt*=sn,qt*=sn),De.set(Pt,Tt,qt,sn),dt.equals(De)===!1&&(n.clearColor(Pt,Tt,qt,sn),dt.copy(De))},reset:function(){Ae=!1,He=null,dt.set(-1,0,0,0)}}}function i(){let Ae=!1,De=!1,He=null,dt=null,Pt=null;return{setReversed:function(Tt){if(De!==Tt){const qt=e.get("EXT_clip_control");Tt?qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.ZERO_TO_ONE_EXT):qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.NEGATIVE_ONE_TO_ONE_EXT),De=Tt;const sn=Pt;Pt=null,this.setClear(sn)}},getReversed:function(){return De},setTest:function(Tt){Tt?Re(n.DEPTH_TEST):Le(n.DEPTH_TEST)},setMask:function(Tt){He!==Tt&&!Ae&&(n.depthMask(Tt),He=Tt)},setFunc:function(Tt){if(De&&(Tt=M7[Tt]),dt!==Tt){switch(Tt){case eS:n.depthFunc(n.NEVER);break;case tS:n.depthFunc(n.ALWAYS);break;case nS:n.depthFunc(n.LESS);break;case Wg:n.depthFunc(n.LEQUAL);break;case iS:n.depthFunc(n.EQUAL);break;case rS:n.depthFunc(n.GEQUAL);break;case sS:n.depthFunc(n.GREATER);break;case aS:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}dt=Tt}},setLocked:function(Tt){Ae=Tt},setClear:function(Tt){Pt!==Tt&&(De&&(Tt=1-Tt),n.clearDepth(Tt),Pt=Tt)},reset:function(){Ae=!1,He=null,dt=null,Pt=null,De=!1}}}function r(){let Ae=!1,De=null,He=null,dt=null,Pt=null,Tt=null,qt=null,sn=null,Jt=null;return{setTest:function(nn){Ae||(nn?Re(n.STENCIL_TEST):Le(n.STENCIL_TEST))},setMask:function(nn){De!==nn&&!Ae&&(n.stencilMask(nn),De=nn)},setFunc:function(nn,ti,Fn){(He!==nn||dt!==ti||Pt!==Fn)&&(n.stencilFunc(nn,ti,Fn),He=nn,dt=ti,Pt=Fn)},setOp:function(nn,ti,Fn){(Tt!==nn||qt!==ti||sn!==Fn)&&(n.stencilOp(nn,ti,Fn),Tt=nn,qt=ti,sn=Fn)},setLocked:function(nn){Ae=nn},setClear:function(nn){Jt!==nn&&(n.clearStencil(nn),Jt=nn)},reset:function(){Ae=!1,De=null,He=null,dt=null,Pt=null,Tt=null,qt=null,sn=null,Jt=null}}}const s=new t,a=new i,l=new r,u=new WeakMap,f=new WeakMap;let d={},v={},y=new WeakMap,A=[],b=null,C=!1,T=null,M=null,B=null,D=null,O=null,P=null,F=null,V=new jt(0,0,0),G=0,I=!1,N=null,Q=null,$=null,te=null,se=null;const ye=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let k=!1,ee=0;const ne=n.getParameter(n.VERSION);ne.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(ne)[1]),k=ee>=1):ne.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(ne)[1]),k=ee>=2);let de=null,X={};const J=n.getParameter(n.SCISSOR_BOX),ce=n.getParameter(n.VIEWPORT),ge=new Ii().fromArray(J),oe=new Ii().fromArray(ce);function ve(Ae,De,He,dt){const Pt=new Uint8Array(4),Tt=n.createTexture();n.bindTexture(Ae,Tt),n.texParameteri(Ae,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Ae,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let qt=0;qt<He;qt++)Ae===n.TEXTURE_3D||Ae===n.TEXTURE_2D_ARRAY?n.texImage3D(De,0,n.RGBA,1,1,dt,0,n.RGBA,n.UNSIGNED_BYTE,Pt):n.texImage2D(De+qt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Pt);return Tt}const Se={};Se[n.TEXTURE_2D]=ve(n.TEXTURE_2D,n.TEXTURE_2D,1),Se[n.TEXTURE_CUBE_MAP]=ve(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Se[n.TEXTURE_2D_ARRAY]=ve(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Se[n.TEXTURE_3D]=ve(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),l.setClear(0),Re(n.DEPTH_TEST),a.setFunc(Wg),$e(!1),Ke(LE),Re(n.CULL_FACE),ie(oh);function Re(Ae){d[Ae]!==!0&&(n.enable(Ae),d[Ae]=!0)}function Le(Ae){d[Ae]!==!1&&(n.disable(Ae),d[Ae]=!1)}function gt(Ae,De){return v[Ae]!==De?(n.bindFramebuffer(Ae,De),v[Ae]=De,Ae===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=De),Ae===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=De),!0):!1}function Mt(Ae,De){let He=A,dt=!1;if(Ae){He=y.get(De),He===void 0&&(He=[],y.set(De,He));const Pt=Ae.textures;if(He.length!==Pt.length||He[0]!==n.COLOR_ATTACHMENT0){for(let Tt=0,qt=Pt.length;Tt<qt;Tt++)He[Tt]=n.COLOR_ATTACHMENT0+Tt;He.length=Pt.length,dt=!0}}else He[0]!==n.BACK&&(He[0]=n.BACK,dt=!0);dt&&n.drawBuffers(He)}function At(Ae){return b!==Ae?(n.useProgram(Ae),b=Ae,!0):!1}const at={[Hp]:n.FUNC_ADD,[mL]:n.FUNC_SUBTRACT,[gL]:n.FUNC_REVERSE_SUBTRACT};at[vL]=n.MIN,at[yL]=n.MAX;const Nt={[_L]:n.ZERO,[xL]:n.ONE,[AL]:n.SRC_COLOR,[QA]:n.SRC_ALPHA,[CL]:n.SRC_ALPHA_SATURATE,[TL]:n.DST_COLOR,[bL]:n.DST_ALPHA,[SL]:n.ONE_MINUS_SRC_COLOR,[$A]:n.ONE_MINUS_SRC_ALPHA,[EL]:n.ONE_MINUS_DST_COLOR,[ML]:n.ONE_MINUS_DST_ALPHA,[wL]:n.CONSTANT_COLOR,[RL]:n.ONE_MINUS_CONSTANT_COLOR,[DL]:n.CONSTANT_ALPHA,[BL]:n.ONE_MINUS_CONSTANT_ALPHA};function ie(Ae,De,He,dt,Pt,Tt,qt,sn,Jt,nn){if(Ae===oh){C===!0&&(Le(n.BLEND),C=!1);return}if(C===!1&&(Re(n.BLEND),C=!0),Ae!==pL){if(Ae!==T||nn!==I){if((M!==Hp||O!==Hp)&&(n.blendEquation(n.FUNC_ADD),M=Hp,O=Hp),nn)switch(Ae){case Ig:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ZA:n.blendFunc(n.ONE,n.ONE);break;case PE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case NE:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case Ig:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case ZA:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case PE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case NE:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}B=null,D=null,P=null,F=null,V.set(0,0,0),G=0,T=Ae,I=nn}return}Pt=Pt||De,Tt=Tt||He,qt=qt||dt,(De!==M||Pt!==O)&&(n.blendEquationSeparate(at[De],at[Pt]),M=De,O=Pt),(He!==B||dt!==D||Tt!==P||qt!==F)&&(n.blendFuncSeparate(Nt[He],Nt[dt],Nt[Tt],Nt[qt]),B=He,D=dt,P=Tt,F=qt),(sn.equals(V)===!1||Jt!==G)&&(n.blendColor(sn.r,sn.g,sn.b,Jt),V.copy(sn),G=Jt),T=Ae,I=!1}function ut(Ae,De){Ae.side===Ru?Le(n.CULL_FACE):Re(n.CULL_FACE);let He=Ae.side===hl;De&&(He=!He),$e(He),Ae.blending===Ig&&Ae.transparent===!1?ie(oh):ie(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.blendColor,Ae.blendAlpha,Ae.premultipliedAlpha),a.setFunc(Ae.depthFunc),a.setTest(Ae.depthTest),a.setMask(Ae.depthWrite),s.setMask(Ae.colorWrite);const dt=Ae.stencilWrite;l.setTest(dt),dt&&(l.setMask(Ae.stencilWriteMask),l.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),l.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),pt(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?Re(n.SAMPLE_ALPHA_TO_COVERAGE):Le(n.SAMPLE_ALPHA_TO_COVERAGE)}function $e(Ae){N!==Ae&&(Ae?n.frontFace(n.CW):n.frontFace(n.CCW),N=Ae)}function Ke(Ae){Ae!==fL?(Re(n.CULL_FACE),Ae!==Q&&(Ae===LE?n.cullFace(n.BACK):Ae===hL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Le(n.CULL_FACE),Q=Ae}function Pe(Ae){Ae!==$&&(k&&n.lineWidth(Ae),$=Ae)}function pt(Ae,De,He){Ae?(Re(n.POLYGON_OFFSET_FILL),(te!==De||se!==He)&&(n.polygonOffset(De,He),te=De,se=He)):Le(n.POLYGON_OFFSET_FILL)}function Ve(Ae){Ae?Re(n.SCISSOR_TEST):Le(n.SCISSOR_TEST)}function j(Ae){Ae===void 0&&(Ae=n.TEXTURE0+ye-1),de!==Ae&&(n.activeTexture(Ae),de=Ae)}function Y(Ae,De,He){He===void 0&&(de===null?He=n.TEXTURE0+ye-1:He=de);let dt=X[He];dt===void 0&&(dt={type:void 0,texture:void 0},X[He]=dt),(dt.type!==Ae||dt.texture!==De)&&(de!==He&&(n.activeTexture(He),de=He),n.bindTexture(Ae,De||Se[Ae]),dt.type=Ae,dt.texture=De)}function _e(){const Ae=X[de];Ae!==void 0&&Ae.type!==void 0&&(n.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function Ie(){try{n.compressedTexImage2D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ge(){try{n.compressedTexImage3D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ye(){try{n.texSubImage2D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function it(){try{n.texSubImage3D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function rt(){try{n.compressedTexSubImage2D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function yt(){try{n.compressedTexSubImage3D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Vt(){try{n.texStorage2D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function ht(){try{n.texStorage3D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Lt(){try{n.texImage2D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Et(){try{n.texImage3D(...arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function _t(Ae){ge.equals(Ae)===!1&&(n.scissor(Ae.x,Ae.y,Ae.z,Ae.w),ge.copy(Ae))}function ot(Ae){oe.equals(Ae)===!1&&(n.viewport(Ae.x,Ae.y,Ae.z,Ae.w),oe.copy(Ae))}function xe(Ae,De){let He=f.get(De);He===void 0&&(He=new WeakMap,f.set(De,He));let dt=He.get(Ae);dt===void 0&&(dt=n.getUniformBlockIndex(De,Ae.name),He.set(Ae,dt))}function We(Ae,De){const dt=f.get(De).get(Ae);u.get(De)!==dt&&(n.uniformBlockBinding(De,dt,Ae.__bindingPointIndex),u.set(De,dt))}function Rt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},de=null,X={},v={},y=new WeakMap,A=[],b=null,C=!1,T=null,M=null,B=null,D=null,O=null,P=null,F=null,V=new jt(0,0,0),G=0,I=!1,N=null,Q=null,$=null,te=null,se=null,ge.set(0,0,n.canvas.width,n.canvas.height),oe.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),l.reset()}return{buffers:{color:s,depth:a,stencil:l},enable:Re,disable:Le,bindFramebuffer:gt,drawBuffers:Mt,useProgram:At,setBlending:ie,setMaterial:ut,setFlipSided:$e,setCullFace:Ke,setLineWidth:Pe,setPolygonOffset:pt,setScissorTest:Ve,activeTexture:j,bindTexture:Y,unbindTexture:_e,compressedTexImage2D:Ie,compressedTexImage3D:Ge,texImage2D:Lt,texImage3D:Et,updateUBOMapping:xe,uniformBlockBinding:We,texStorage2D:Vt,texStorage3D:ht,texSubImage2D:Ye,texSubImage3D:it,compressedTexSubImage2D:rt,compressedTexSubImage3D:yt,scissor:_t,viewport:ot,reset:Rt}}function E7(n,e,t,i,r,s,a){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new xt,d=new WeakMap;let v;const y=new WeakMap;let A=!1;try{A=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(j,Y){return A?new OffscreenCanvas(j,Y):X1("canvas")}function C(j,Y,_e){let Ie=1;const Ge=Ve(j);if((Ge.width>_e||Ge.height>_e)&&(Ie=_e/Math.max(Ge.width,Ge.height)),Ie<1)if(typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&j instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&j instanceof ImageBitmap||typeof VideoFrame<"u"&&j instanceof VideoFrame){const Ye=Math.floor(Ie*Ge.width),it=Math.floor(Ie*Ge.height);v===void 0&&(v=b(Ye,it));const rt=Y?b(Ye,it):v;return rt.width=Ye,rt.height=it,rt.getContext("2d").drawImage(j,0,0,Ye,it),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ge.width+"x"+Ge.height+") to ("+Ye+"x"+it+")."),rt}else return"data"in j&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ge.width+"x"+Ge.height+")."),j;return j}function T(j){return j.generateMipmaps}function M(j){n.generateMipmap(j)}function B(j){return j.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:j.isWebGL3DRenderTarget?n.TEXTURE_3D:j.isWebGLArrayRenderTarget||j.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function D(j,Y,_e,Ie,Ge=!1){if(j!==null){if(n[j]!==void 0)return n[j];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+j+"'")}let Ye=Y;if(Y===n.RED&&(_e===n.FLOAT&&(Ye=n.R32F),_e===n.HALF_FLOAT&&(Ye=n.R16F),_e===n.UNSIGNED_BYTE&&(Ye=n.R8)),Y===n.RED_INTEGER&&(_e===n.UNSIGNED_BYTE&&(Ye=n.R8UI),_e===n.UNSIGNED_SHORT&&(Ye=n.R16UI),_e===n.UNSIGNED_INT&&(Ye=n.R32UI),_e===n.BYTE&&(Ye=n.R8I),_e===n.SHORT&&(Ye=n.R16I),_e===n.INT&&(Ye=n.R32I)),Y===n.RG&&(_e===n.FLOAT&&(Ye=n.RG32F),_e===n.HALF_FLOAT&&(Ye=n.RG16F),_e===n.UNSIGNED_BYTE&&(Ye=n.RG8)),Y===n.RG_INTEGER&&(_e===n.UNSIGNED_BYTE&&(Ye=n.RG8UI),_e===n.UNSIGNED_SHORT&&(Ye=n.RG16UI),_e===n.UNSIGNED_INT&&(Ye=n.RG32UI),_e===n.BYTE&&(Ye=n.RG8I),_e===n.SHORT&&(Ye=n.RG16I),_e===n.INT&&(Ye=n.RG32I)),Y===n.RGB_INTEGER&&(_e===n.UNSIGNED_BYTE&&(Ye=n.RGB8UI),_e===n.UNSIGNED_SHORT&&(Ye=n.RGB16UI),_e===n.UNSIGNED_INT&&(Ye=n.RGB32UI),_e===n.BYTE&&(Ye=n.RGB8I),_e===n.SHORT&&(Ye=n.RGB16I),_e===n.INT&&(Ye=n.RGB32I)),Y===n.RGBA_INTEGER&&(_e===n.UNSIGNED_BYTE&&(Ye=n.RGBA8UI),_e===n.UNSIGNED_SHORT&&(Ye=n.RGBA16UI),_e===n.UNSIGNED_INT&&(Ye=n.RGBA32UI),_e===n.BYTE&&(Ye=n.RGBA8I),_e===n.SHORT&&(Ye=n.RGBA16I),_e===n.INT&&(Ye=n.RGBA32I)),Y===n.RGB&&_e===n.UNSIGNED_INT_5_9_9_9_REV&&(Ye=n.RGB9_E5),Y===n.RGBA){const it=Ge?z1:Ni.getTransfer(Ie);_e===n.FLOAT&&(Ye=n.RGBA32F),_e===n.HALF_FLOAT&&(Ye=n.RGBA16F),_e===n.UNSIGNED_BYTE&&(Ye=it===br?n.SRGB8_ALPHA8:n.RGBA8),_e===n.UNSIGNED_SHORT_4_4_4_4&&(Ye=n.RGBA4),_e===n.UNSIGNED_SHORT_5_5_5_1&&(Ye=n.RGB5_A1)}return(Ye===n.R16F||Ye===n.R32F||Ye===n.RG16F||Ye===n.RG32F||Ye===n.RGBA16F||Ye===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ye}function O(j,Y){let _e;return j?Y===null||Y===yh||Y===N0?_e=n.DEPTH24_STENCIL8:Y===ss?_e=n.DEPTH32F_STENCIL8:Y===P0&&(_e=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Y===null||Y===yh||Y===N0?_e=n.DEPTH_COMPONENT24:Y===ss?_e=n.DEPTH_COMPONENT32F:Y===P0&&(_e=n.DEPTH_COMPONENT16),_e}function P(j,Y){return T(j)===!0||j.isFramebufferTexture&&j.minFilter!==Ra&&j.minFilter!==qi?Math.log2(Math.max(Y.width,Y.height))+1:j.mipmaps!==void 0&&j.mipmaps.length>0?j.mipmaps.length:j.isCompressedTexture&&Array.isArray(j.image)?Y.mipmaps.length:1}function F(j){const Y=j.target;Y.removeEventListener("dispose",F),G(Y),Y.isVideoTexture&&d.delete(Y)}function V(j){const Y=j.target;Y.removeEventListener("dispose",V),N(Y)}function G(j){const Y=i.get(j);if(Y.__webglInit===void 0)return;const _e=j.source,Ie=y.get(_e);if(Ie){const Ge=Ie[Y.__cacheKey];Ge.usedTimes--,Ge.usedTimes===0&&I(j),Object.keys(Ie).length===0&&y.delete(_e)}i.remove(j)}function I(j){const Y=i.get(j);n.deleteTexture(Y.__webglTexture);const _e=j.source,Ie=y.get(_e);delete Ie[Y.__cacheKey],a.memory.textures--}function N(j){const Y=i.get(j);if(j.depthTexture&&(j.depthTexture.dispose(),i.remove(j.depthTexture)),j.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++){if(Array.isArray(Y.__webglFramebuffer[Ie]))for(let Ge=0;Ge<Y.__webglFramebuffer[Ie].length;Ge++)n.deleteFramebuffer(Y.__webglFramebuffer[Ie][Ge]);else n.deleteFramebuffer(Y.__webglFramebuffer[Ie]);Y.__webglDepthbuffer&&n.deleteRenderbuffer(Y.__webglDepthbuffer[Ie])}else{if(Array.isArray(Y.__webglFramebuffer))for(let Ie=0;Ie<Y.__webglFramebuffer.length;Ie++)n.deleteFramebuffer(Y.__webglFramebuffer[Ie]);else n.deleteFramebuffer(Y.__webglFramebuffer);if(Y.__webglDepthbuffer&&n.deleteRenderbuffer(Y.__webglDepthbuffer),Y.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Y.__webglMultisampledFramebuffer),Y.__webglColorRenderbuffer)for(let Ie=0;Ie<Y.__webglColorRenderbuffer.length;Ie++)Y.__webglColorRenderbuffer[Ie]&&n.deleteRenderbuffer(Y.__webglColorRenderbuffer[Ie]);Y.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Y.__webglDepthRenderbuffer)}const _e=j.textures;for(let Ie=0,Ge=_e.length;Ie<Ge;Ie++){const Ye=i.get(_e[Ie]);Ye.__webglTexture&&(n.deleteTexture(Ye.__webglTexture),a.memory.textures--),i.remove(_e[Ie])}i.remove(j)}let Q=0;function $(){Q=0}function te(){const j=Q;return j>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+j+" texture units while this GPU supports only "+r.maxTextures),Q+=1,j}function se(j){const Y=[];return Y.push(j.wrapS),Y.push(j.wrapT),Y.push(j.wrapR||0),Y.push(j.magFilter),Y.push(j.minFilter),Y.push(j.anisotropy),Y.push(j.internalFormat),Y.push(j.format),Y.push(j.type),Y.push(j.generateMipmaps),Y.push(j.premultiplyAlpha),Y.push(j.flipY),Y.push(j.unpackAlignment),Y.push(j.colorSpace),Y.join()}function ye(j,Y){const _e=i.get(j);if(j.isVideoTexture&&Pe(j),j.isRenderTargetTexture===!1&&j.version>0&&_e.__version!==j.version){const Ie=j.image;if(Ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(_e,j,Y);return}}t.bindTexture(n.TEXTURE_2D,_e.__webglTexture,n.TEXTURE0+Y)}function k(j,Y){const _e=i.get(j);if(j.version>0&&_e.__version!==j.version){oe(_e,j,Y);return}t.bindTexture(n.TEXTURE_2D_ARRAY,_e.__webglTexture,n.TEXTURE0+Y)}function ee(j,Y){const _e=i.get(j);if(j.version>0&&_e.__version!==j.version){oe(_e,j,Y);return}t.bindTexture(n.TEXTURE_3D,_e.__webglTexture,n.TEXTURE0+Y)}function ne(j,Y){const _e=i.get(j);if(j.version>0&&_e.__version!==j.version){ve(_e,j,Y);return}t.bindTexture(n.TEXTURE_CUBE_MAP,_e.__webglTexture,n.TEXTURE0+Y)}const de={[Kp]:n.REPEAT,[Is]:n.CLAMP_TO_EDGE,[L0]:n.MIRRORED_REPEAT},X={[Ra]:n.NEAREST,[fb]:n.NEAREST_MIPMAP_NEAREST,[Eg]:n.NEAREST_MIPMAP_LINEAR,[qi]:n.LINEAR,[C0]:n.LINEAR_MIPMAP_NEAREST,[pc]:n.LINEAR_MIPMAP_LINEAR},J={[jL]:n.NEVER,[$L]:n.ALWAYS,[qL]:n.LESS,[f2]:n.LEQUAL,[KL]:n.EQUAL,[QL]:n.GEQUAL,[JL]:n.GREATER,[ZL]:n.NOTEQUAL};function ce(j,Y){if(Y.type===ss&&e.has("OES_texture_float_linear")===!1&&(Y.magFilter===qi||Y.magFilter===C0||Y.magFilter===Eg||Y.magFilter===pc||Y.minFilter===qi||Y.minFilter===C0||Y.minFilter===Eg||Y.minFilter===pc)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(j,n.TEXTURE_WRAP_S,de[Y.wrapS]),n.texParameteri(j,n.TEXTURE_WRAP_T,de[Y.wrapT]),(j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY)&&n.texParameteri(j,n.TEXTURE_WRAP_R,de[Y.wrapR]),n.texParameteri(j,n.TEXTURE_MAG_FILTER,X[Y.magFilter]),n.texParameteri(j,n.TEXTURE_MIN_FILTER,X[Y.minFilter]),Y.compareFunction&&(n.texParameteri(j,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(j,n.TEXTURE_COMPARE_FUNC,J[Y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Y.magFilter===Ra||Y.minFilter!==Eg&&Y.minFilter!==pc||Y.type===ss&&e.has("OES_texture_float_linear")===!1)return;if(Y.anisotropy>1||i.get(Y).__currentAnisotropy){const _e=e.get("EXT_texture_filter_anisotropic");n.texParameterf(j,_e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Y.anisotropy,r.getMaxAnisotropy())),i.get(Y).__currentAnisotropy=Y.anisotropy}}}function ge(j,Y){let _e=!1;j.__webglInit===void 0&&(j.__webglInit=!0,Y.addEventListener("dispose",F));const Ie=Y.source;let Ge=y.get(Ie);Ge===void 0&&(Ge={},y.set(Ie,Ge));const Ye=se(Y);if(Ye!==j.__cacheKey){Ge[Ye]===void 0&&(Ge[Ye]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,_e=!0),Ge[Ye].usedTimes++;const it=Ge[j.__cacheKey];it!==void 0&&(Ge[j.__cacheKey].usedTimes--,it.usedTimes===0&&I(Y)),j.__cacheKey=Ye,j.__webglTexture=Ge[Ye].texture}return _e}function oe(j,Y,_e){let Ie=n.TEXTURE_2D;(Y.isDataArrayTexture||Y.isCompressedArrayTexture)&&(Ie=n.TEXTURE_2D_ARRAY),Y.isData3DTexture&&(Ie=n.TEXTURE_3D);const Ge=ge(j,Y),Ye=Y.source;t.bindTexture(Ie,j.__webglTexture,n.TEXTURE0+_e);const it=i.get(Ye);if(Ye.version!==it.__version||Ge===!0){t.activeTexture(n.TEXTURE0+_e);const rt=Ni.getPrimaries(Ni.workingColorSpace),yt=Y.colorSpace===Sd?null:Ni.getPrimaries(Y.colorSpace),Vt=Y.colorSpace===Sd||rt===yt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Vt);let ht=C(Y.image,!1,r.maxTextureSize);ht=pt(Y,ht);const Lt=s.convert(Y.format,Y.colorSpace),Et=s.convert(Y.type);let _t=D(Y.internalFormat,Lt,Et,Y.colorSpace,Y.isVideoTexture);ce(Ie,Y);let ot;const xe=Y.mipmaps,We=Y.isVideoTexture!==!0,Rt=it.__version===void 0||Ge===!0,Ae=Ye.dataReady,De=P(Y,ht);if(Y.isDepthTexture)_t=O(Y.format===F0,Y.type),Rt&&(We?t.texStorage2D(n.TEXTURE_2D,1,_t,ht.width,ht.height):t.texImage2D(n.TEXTURE_2D,0,_t,ht.width,ht.height,0,Lt,Et,null));else if(Y.isDataTexture)if(xe.length>0){We&&Rt&&t.texStorage2D(n.TEXTURE_2D,De,_t,xe[0].width,xe[0].height);for(let He=0,dt=xe.length;He<dt;He++)ot=xe[He],We?Ae&&t.texSubImage2D(n.TEXTURE_2D,He,0,0,ot.width,ot.height,Lt,Et,ot.data):t.texImage2D(n.TEXTURE_2D,He,_t,ot.width,ot.height,0,Lt,Et,ot.data);Y.generateMipmaps=!1}else We?(Rt&&t.texStorage2D(n.TEXTURE_2D,De,_t,ht.width,ht.height),Ae&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ht.width,ht.height,Lt,Et,ht.data)):t.texImage2D(n.TEXTURE_2D,0,_t,ht.width,ht.height,0,Lt,Et,ht.data);else if(Y.isCompressedTexture)if(Y.isCompressedArrayTexture){We&&Rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,De,_t,xe[0].width,xe[0].height,ht.depth);for(let He=0,dt=xe.length;He<dt;He++)if(ot=xe[He],Y.format!==Fs)if(Lt!==null)if(We){if(Ae)if(Y.layerUpdates.size>0){const Pt=YE(ot.width,ot.height,Y.format,Y.type);for(const Tt of Y.layerUpdates){const qt=ot.data.subarray(Tt*Pt/ot.data.BYTES_PER_ELEMENT,(Tt+1)*Pt/ot.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,He,0,0,Tt,ot.width,ot.height,1,Lt,qt)}Y.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,He,0,0,0,ot.width,ot.height,ht.depth,Lt,ot.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,He,_t,ot.width,ot.height,ht.depth,0,ot.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else We?Ae&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,He,0,0,0,ot.width,ot.height,ht.depth,Lt,Et,ot.data):t.texImage3D(n.TEXTURE_2D_ARRAY,He,_t,ot.width,ot.height,ht.depth,0,Lt,Et,ot.data)}else{We&&Rt&&t.texStorage2D(n.TEXTURE_2D,De,_t,xe[0].width,xe[0].height);for(let He=0,dt=xe.length;He<dt;He++)ot=xe[He],Y.format!==Fs?Lt!==null?We?Ae&&t.compressedTexSubImage2D(n.TEXTURE_2D,He,0,0,ot.width,ot.height,Lt,ot.data):t.compressedTexImage2D(n.TEXTURE_2D,He,_t,ot.width,ot.height,0,ot.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):We?Ae&&t.texSubImage2D(n.TEXTURE_2D,He,0,0,ot.width,ot.height,Lt,Et,ot.data):t.texImage2D(n.TEXTURE_2D,He,_t,ot.width,ot.height,0,Lt,Et,ot.data)}else if(Y.isDataArrayTexture)if(We){if(Rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,De,_t,ht.width,ht.height,ht.depth),Ae)if(Y.layerUpdates.size>0){const He=YE(ht.width,ht.height,Y.format,Y.type);for(const dt of Y.layerUpdates){const Pt=ht.data.subarray(dt*He/ht.data.BYTES_PER_ELEMENT,(dt+1)*He/ht.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,dt,ht.width,ht.height,1,Lt,Et,Pt)}Y.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ht.width,ht.height,ht.depth,Lt,Et,ht.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,_t,ht.width,ht.height,ht.depth,0,Lt,Et,ht.data);else if(Y.isData3DTexture)We?(Rt&&t.texStorage3D(n.TEXTURE_3D,De,_t,ht.width,ht.height,ht.depth),Ae&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ht.width,ht.height,ht.depth,Lt,Et,ht.data)):t.texImage3D(n.TEXTURE_3D,0,_t,ht.width,ht.height,ht.depth,0,Lt,Et,ht.data);else if(Y.isFramebufferTexture){if(Rt)if(We)t.texStorage2D(n.TEXTURE_2D,De,_t,ht.width,ht.height);else{let He=ht.width,dt=ht.height;for(let Pt=0;Pt<De;Pt++)t.texImage2D(n.TEXTURE_2D,Pt,_t,He,dt,0,Lt,Et,null),He>>=1,dt>>=1}}else if(xe.length>0){if(We&&Rt){const He=Ve(xe[0]);t.texStorage2D(n.TEXTURE_2D,De,_t,He.width,He.height)}for(let He=0,dt=xe.length;He<dt;He++)ot=xe[He],We?Ae&&t.texSubImage2D(n.TEXTURE_2D,He,0,0,Lt,Et,ot):t.texImage2D(n.TEXTURE_2D,He,_t,Lt,Et,ot);Y.generateMipmaps=!1}else if(We){if(Rt){const He=Ve(ht);t.texStorage2D(n.TEXTURE_2D,De,_t,He.width,He.height)}Ae&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Lt,Et,ht)}else t.texImage2D(n.TEXTURE_2D,0,_t,Lt,Et,ht);T(Y)&&M(Ie),it.__version=Ye.version,Y.onUpdate&&Y.onUpdate(Y)}j.__version=Y.version}function ve(j,Y,_e){if(Y.image.length!==6)return;const Ie=ge(j,Y),Ge=Y.source;t.bindTexture(n.TEXTURE_CUBE_MAP,j.__webglTexture,n.TEXTURE0+_e);const Ye=i.get(Ge);if(Ge.version!==Ye.__version||Ie===!0){t.activeTexture(n.TEXTURE0+_e);const it=Ni.getPrimaries(Ni.workingColorSpace),rt=Y.colorSpace===Sd?null:Ni.getPrimaries(Y.colorSpace),yt=Y.colorSpace===Sd||it===rt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,yt);const Vt=Y.isCompressedTexture||Y.image[0].isCompressedTexture,ht=Y.image[0]&&Y.image[0].isDataTexture,Lt=[];for(let dt=0;dt<6;dt++)!Vt&&!ht?Lt[dt]=C(Y.image[dt],!0,r.maxCubemapSize):Lt[dt]=ht?Y.image[dt].image:Y.image[dt],Lt[dt]=pt(Y,Lt[dt]);const Et=Lt[0],_t=s.convert(Y.format,Y.colorSpace),ot=s.convert(Y.type),xe=D(Y.internalFormat,_t,ot,Y.colorSpace),We=Y.isVideoTexture!==!0,Rt=Ye.__version===void 0||Ie===!0,Ae=Ge.dataReady;let De=P(Y,Et);ce(n.TEXTURE_CUBE_MAP,Y);let He;if(Vt){We&&Rt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,De,xe,Et.width,Et.height);for(let dt=0;dt<6;dt++){He=Lt[dt].mipmaps;for(let Pt=0;Pt<He.length;Pt++){const Tt=He[Pt];Y.format!==Fs?_t!==null?We?Ae&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Pt,0,0,Tt.width,Tt.height,_t,Tt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Pt,xe,Tt.width,Tt.height,0,Tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):We?Ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Pt,0,0,Tt.width,Tt.height,_t,ot,Tt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Pt,xe,Tt.width,Tt.height,0,_t,ot,Tt.data)}}}else{if(He=Y.mipmaps,We&&Rt){He.length>0&&De++;const dt=Ve(Lt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,De,xe,dt.width,dt.height)}for(let dt=0;dt<6;dt++)if(ht){We?Ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,0,0,Lt[dt].width,Lt[dt].height,_t,ot,Lt[dt].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,xe,Lt[dt].width,Lt[dt].height,0,_t,ot,Lt[dt].data);for(let Pt=0;Pt<He.length;Pt++){const qt=He[Pt].image[dt].image;We?Ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Pt+1,0,0,qt.width,qt.height,_t,ot,qt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Pt+1,xe,qt.width,qt.height,0,_t,ot,qt.data)}}else{We?Ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,0,0,_t,ot,Lt[dt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,0,xe,_t,ot,Lt[dt]);for(let Pt=0;Pt<He.length;Pt++){const Tt=He[Pt];We?Ae&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Pt+1,0,0,_t,ot,Tt.image[dt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+dt,Pt+1,xe,_t,ot,Tt.image[dt])}}}T(Y)&&M(n.TEXTURE_CUBE_MAP),Ye.__version=Ge.version,Y.onUpdate&&Y.onUpdate(Y)}j.__version=Y.version}function Se(j,Y,_e,Ie,Ge,Ye){const it=s.convert(_e.format,_e.colorSpace),rt=s.convert(_e.type),yt=D(_e.internalFormat,it,rt,_e.colorSpace),Vt=i.get(Y),ht=i.get(_e);if(ht.__renderTarget=Y,!Vt.__hasExternalTextures){const Lt=Math.max(1,Y.width>>Ye),Et=Math.max(1,Y.height>>Ye);Ge===n.TEXTURE_3D||Ge===n.TEXTURE_2D_ARRAY?t.texImage3D(Ge,Ye,yt,Lt,Et,Y.depth,0,it,rt,null):t.texImage2D(Ge,Ye,yt,Lt,Et,0,it,rt,null)}t.bindFramebuffer(n.FRAMEBUFFER,j),Ke(Y)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ie,Ge,ht.__webglTexture,0,$e(Y)):(Ge===n.TEXTURE_2D||Ge>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ge<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ie,Ge,ht.__webglTexture,Ye),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Re(j,Y,_e){if(n.bindRenderbuffer(n.RENDERBUFFER,j),Y.depthBuffer){const Ie=Y.depthTexture,Ge=Ie&&Ie.isDepthTexture?Ie.type:null,Ye=O(Y.stencilBuffer,Ge),it=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,rt=$e(Y);Ke(Y)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,rt,Ye,Y.width,Y.height):_e?n.renderbufferStorageMultisample(n.RENDERBUFFER,rt,Ye,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,Ye,Y.width,Y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,it,n.RENDERBUFFER,j)}else{const Ie=Y.textures;for(let Ge=0;Ge<Ie.length;Ge++){const Ye=Ie[Ge],it=s.convert(Ye.format,Ye.colorSpace),rt=s.convert(Ye.type),yt=D(Ye.internalFormat,it,rt,Ye.colorSpace),Vt=$e(Y);_e&&Ke(Y)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Vt,yt,Y.width,Y.height):Ke(Y)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Vt,yt,Y.width,Y.height):n.renderbufferStorage(n.RENDERBUFFER,yt,Y.width,Y.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Le(j,Y){if(Y&&Y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,j),!(Y.depthTexture&&Y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Ie=i.get(Y.depthTexture);Ie.__renderTarget=Y,(!Ie.__webglTexture||Y.depthTexture.image.width!==Y.width||Y.depthTexture.image.height!==Y.height)&&(Y.depthTexture.image.width=Y.width,Y.depthTexture.image.height=Y.height,Y.depthTexture.needsUpdate=!0),ye(Y.depthTexture,0);const Ge=Ie.__webglTexture,Ye=$e(Y);if(Y.depthTexture.format===I0)Ke(Y)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ge,0,Ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Ge,0);else if(Y.depthTexture.format===F0)Ke(Y)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ge,0,Ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Ge,0);else throw new Error("Unknown depthTexture format")}function gt(j){const Y=i.get(j),_e=j.isWebGLCubeRenderTarget===!0;if(Y.__boundDepthTexture!==j.depthTexture){const Ie=j.depthTexture;if(Y.__depthDisposeCallback&&Y.__depthDisposeCallback(),Ie){const Ge=()=>{delete Y.__boundDepthTexture,delete Y.__depthDisposeCallback,Ie.removeEventListener("dispose",Ge)};Ie.addEventListener("dispose",Ge),Y.__depthDisposeCallback=Ge}Y.__boundDepthTexture=Ie}if(j.depthTexture&&!Y.__autoAllocateDepthBuffer){if(_e)throw new Error("target.depthTexture not supported in Cube render targets");const Ie=j.texture.mipmaps;Ie&&Ie.length>0?Le(Y.__webglFramebuffer[0],j):Le(Y.__webglFramebuffer,j)}else if(_e){Y.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)if(t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer[Ie]),Y.__webglDepthbuffer[Ie]===void 0)Y.__webglDepthbuffer[Ie]=n.createRenderbuffer(),Re(Y.__webglDepthbuffer[Ie],j,!1);else{const Ge=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ye=Y.__webglDepthbuffer[Ie];n.bindRenderbuffer(n.RENDERBUFFER,Ye),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ge,n.RENDERBUFFER,Ye)}}else{const Ie=j.texture.mipmaps;if(Ie&&Ie.length>0?t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,Y.__webglFramebuffer),Y.__webglDepthbuffer===void 0)Y.__webglDepthbuffer=n.createRenderbuffer(),Re(Y.__webglDepthbuffer,j,!1);else{const Ge=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ye=Y.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Ye),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ge,n.RENDERBUFFER,Ye)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Mt(j,Y,_e){const Ie=i.get(j);Y!==void 0&&Se(Ie.__webglFramebuffer,j,j.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),_e!==void 0&&gt(j)}function At(j){const Y=j.texture,_e=i.get(j),Ie=i.get(Y);j.addEventListener("dispose",V);const Ge=j.textures,Ye=j.isWebGLCubeRenderTarget===!0,it=Ge.length>1;if(it||(Ie.__webglTexture===void 0&&(Ie.__webglTexture=n.createTexture()),Ie.__version=Y.version,a.memory.textures++),Ye){_e.__webglFramebuffer=[];for(let rt=0;rt<6;rt++)if(Y.mipmaps&&Y.mipmaps.length>0){_e.__webglFramebuffer[rt]=[];for(let yt=0;yt<Y.mipmaps.length;yt++)_e.__webglFramebuffer[rt][yt]=n.createFramebuffer()}else _e.__webglFramebuffer[rt]=n.createFramebuffer()}else{if(Y.mipmaps&&Y.mipmaps.length>0){_e.__webglFramebuffer=[];for(let rt=0;rt<Y.mipmaps.length;rt++)_e.__webglFramebuffer[rt]=n.createFramebuffer()}else _e.__webglFramebuffer=n.createFramebuffer();if(it)for(let rt=0,yt=Ge.length;rt<yt;rt++){const Vt=i.get(Ge[rt]);Vt.__webglTexture===void 0&&(Vt.__webglTexture=n.createTexture(),a.memory.textures++)}if(j.samples>0&&Ke(j)===!1){_e.__webglMultisampledFramebuffer=n.createFramebuffer(),_e.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,_e.__webglMultisampledFramebuffer);for(let rt=0;rt<Ge.length;rt++){const yt=Ge[rt];_e.__webglColorRenderbuffer[rt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,_e.__webglColorRenderbuffer[rt]);const Vt=s.convert(yt.format,yt.colorSpace),ht=s.convert(yt.type),Lt=D(yt.internalFormat,Vt,ht,yt.colorSpace,j.isXRRenderTarget===!0),Et=$e(j);n.renderbufferStorageMultisample(n.RENDERBUFFER,Et,Lt,j.width,j.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+rt,n.RENDERBUFFER,_e.__webglColorRenderbuffer[rt])}n.bindRenderbuffer(n.RENDERBUFFER,null),j.depthBuffer&&(_e.__webglDepthRenderbuffer=n.createRenderbuffer(),Re(_e.__webglDepthRenderbuffer,j,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ye){t.bindTexture(n.TEXTURE_CUBE_MAP,Ie.__webglTexture),ce(n.TEXTURE_CUBE_MAP,Y);for(let rt=0;rt<6;rt++)if(Y.mipmaps&&Y.mipmaps.length>0)for(let yt=0;yt<Y.mipmaps.length;yt++)Se(_e.__webglFramebuffer[rt][yt],j,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+rt,yt);else Se(_e.__webglFramebuffer[rt],j,Y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0);T(Y)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(it){for(let rt=0,yt=Ge.length;rt<yt;rt++){const Vt=Ge[rt],ht=i.get(Vt);t.bindTexture(n.TEXTURE_2D,ht.__webglTexture),ce(n.TEXTURE_2D,Vt),Se(_e.__webglFramebuffer,j,Vt,n.COLOR_ATTACHMENT0+rt,n.TEXTURE_2D,0),T(Vt)&&M(n.TEXTURE_2D)}t.unbindTexture()}else{let rt=n.TEXTURE_2D;if((j.isWebGL3DRenderTarget||j.isWebGLArrayRenderTarget)&&(rt=j.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(rt,Ie.__webglTexture),ce(rt,Y),Y.mipmaps&&Y.mipmaps.length>0)for(let yt=0;yt<Y.mipmaps.length;yt++)Se(_e.__webglFramebuffer[yt],j,Y,n.COLOR_ATTACHMENT0,rt,yt);else Se(_e.__webglFramebuffer,j,Y,n.COLOR_ATTACHMENT0,rt,0);T(Y)&&M(rt),t.unbindTexture()}j.depthBuffer&&gt(j)}function at(j){const Y=j.textures;for(let _e=0,Ie=Y.length;_e<Ie;_e++){const Ge=Y[_e];if(T(Ge)){const Ye=B(j),it=i.get(Ge).__webglTexture;t.bindTexture(Ye,it),M(Ye),t.unbindTexture()}}}const Nt=[],ie=[];function ut(j){if(j.samples>0){if(Ke(j)===!1){const Y=j.textures,_e=j.width,Ie=j.height;let Ge=n.COLOR_BUFFER_BIT;const Ye=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,it=i.get(j),rt=Y.length>1;if(rt)for(let Vt=0;Vt<Y.length;Vt++)t.bindFramebuffer(n.FRAMEBUFFER,it.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Vt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,it.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Vt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,it.__webglMultisampledFramebuffer);const yt=j.texture.mipmaps;yt&&yt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,it.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,it.__webglFramebuffer);for(let Vt=0;Vt<Y.length;Vt++){if(j.resolveDepthBuffer&&(j.depthBuffer&&(Ge|=n.DEPTH_BUFFER_BIT),j.stencilBuffer&&j.resolveStencilBuffer&&(Ge|=n.STENCIL_BUFFER_BIT)),rt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,it.__webglColorRenderbuffer[Vt]);const ht=i.get(Y[Vt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ht,0)}n.blitFramebuffer(0,0,_e,Ie,0,0,_e,Ie,Ge,n.NEAREST),u===!0&&(Nt.length=0,ie.length=0,Nt.push(n.COLOR_ATTACHMENT0+Vt),j.depthBuffer&&j.resolveDepthBuffer===!1&&(Nt.push(Ye),ie.push(Ye),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ie)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Nt))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),rt)for(let Vt=0;Vt<Y.length;Vt++){t.bindFramebuffer(n.FRAMEBUFFER,it.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Vt,n.RENDERBUFFER,it.__webglColorRenderbuffer[Vt]);const ht=i.get(Y[Vt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,it.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Vt,n.TEXTURE_2D,ht,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,it.__webglMultisampledFramebuffer)}else if(j.depthBuffer&&j.resolveDepthBuffer===!1&&u){const Y=j.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Y])}}}function $e(j){return Math.min(r.maxSamples,j.samples)}function Ke(j){const Y=i.get(j);return j.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Y.__useRenderToTexture!==!1}function Pe(j){const Y=a.render.frame;d.get(j)!==Y&&(d.set(j,Y),j.update())}function pt(j,Y){const _e=j.colorSpace,Ie=j.format,Ge=j.type;return j.isCompressedTexture===!0||j.isVideoTexture===!0||_e!==gf&&_e!==Sd&&(Ni.getTransfer(_e)===br?(Ie!==Fs||Ge!==dl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",_e)),Y}function Ve(j){return typeof HTMLImageElement<"u"&&j instanceof HTMLImageElement?(f.width=j.naturalWidth||j.width,f.height=j.naturalHeight||j.height):typeof VideoFrame<"u"&&j instanceof VideoFrame?(f.width=j.displayWidth,f.height=j.displayHeight):(f.width=j.width,f.height=j.height),f}this.allocateTextureUnit=te,this.resetTextureUnits=$,this.setTexture2D=ye,this.setTexture2DArray=k,this.setTexture3D=ee,this.setTextureCube=ne,this.rebindTextures=Mt,this.setupRenderTarget=At,this.updateRenderTargetMipmap=at,this.updateMultisampleRenderTarget=ut,this.setupDepthRenderbuffer=gt,this.setupFrameBufferTexture=Se,this.useMultisampledRTT=Ke}function nN(n,e){function t(i,r=Sd){let s;const a=Ni.getTransfer(r);if(i===dl)return n.UNSIGNED_BYTE;if(i===pb)return n.UNSIGNED_SHORT_4_4_4_4;if(i===mb)return n.UNSIGNED_SHORT_5_5_5_1;if(i===i2)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===hb)return n.BYTE;if(i===db)return n.SHORT;if(i===P0)return n.UNSIGNED_SHORT;if(i===x_)return n.INT;if(i===yh)return n.UNSIGNED_INT;if(i===ss)return n.FLOAT;if(i===wa)return n.HALF_FLOAT;if(i===r2)return n.ALPHA;if(i===s2)return n.RGB;if(i===Fs)return n.RGBA;if(i===I0)return n.DEPTH_COMPONENT;if(i===F0)return n.DEPTH_STENCIL;if(i===A_)return n.RED;if(i===S_)return n.RED_INTEGER;if(i===a2)return n.RG;if(i===gb)return n.RG_INTEGER;if(i===vb)return n.RGBA_INTEGER;if(i===p1||i===m1||i===g1||i===v1)if(a===br)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===p1)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===m1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===g1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===v1)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===p1)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===m1)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===g1)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===v1)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===oS||i===lS||i===uS||i===cS)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===oS)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===lS)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===uS)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===cS)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===fS||i===hS||i===dS)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===fS||i===hS)return a===br?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===dS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===pS||i===mS||i===gS||i===vS||i===yS||i===_S||i===xS||i===AS||i===SS||i===bS||i===MS||i===TS||i===ES||i===CS)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===pS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===mS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===gS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===vS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===yS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===_S)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===xS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===AS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===SS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===bS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===MS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===TS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===ES)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===CS)return a===br?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===y1||i===wS||i===RS)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===y1)return a===br?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===wS)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===RS)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===o2||i===DS||i===BS||i===US)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===y1)return s.COMPRESSED_RED_RGTC1_EXT;if(i===DS)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===BS)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===US)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===N0?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const C7=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,w7=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class R7{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new ar,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new pl({vertexShader:C7,fragmentShader:w7,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ur(new xf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class D7 extends _h{constructor(e,t){super();const i=this;let r=null,s=1,a=null,l="local-floor",u=1,f=null,d=null,v=null,y=null,A=null,b=null;const C=new R7,T=t.getContextAttributes();let M=null,B=null;const D=[],O=[],P=new xt;let F=null;const V=new Ss;V.viewport=new Ii;const G=new Ss;G.viewport=new Ii;const I=[V,G],N=new YP;let Q=null,$=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let ve=D[oe];return ve===void 0&&(ve=new NA,D[oe]=ve),ve.getTargetRaySpace()},this.getControllerGrip=function(oe){let ve=D[oe];return ve===void 0&&(ve=new NA,D[oe]=ve),ve.getGripSpace()},this.getHand=function(oe){let ve=D[oe];return ve===void 0&&(ve=new NA,D[oe]=ve),ve.getHandSpace()};function te(oe){const ve=O.indexOf(oe.inputSource);if(ve===-1)return;const Se=D[ve];Se!==void 0&&(Se.update(oe.inputSource,oe.frame,f||a),Se.dispatchEvent({type:oe.type,data:oe.inputSource}))}function se(){r.removeEventListener("select",te),r.removeEventListener("selectstart",te),r.removeEventListener("selectend",te),r.removeEventListener("squeeze",te),r.removeEventListener("squeezestart",te),r.removeEventListener("squeezeend",te),r.removeEventListener("end",se),r.removeEventListener("inputsourceschange",ye);for(let oe=0;oe<D.length;oe++){const ve=O[oe];ve!==null&&(O[oe]=null,D[oe].disconnect(ve))}Q=null,$=null,C.reset(),e.setRenderTarget(M),A=null,y=null,v=null,r=null,B=null,ge.stop(),i.isPresenting=!1,e.setPixelRatio(F),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){s=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){l=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||a},this.setReferenceSpace=function(oe){f=oe},this.getBaseLayer=function(){return y!==null?y:A},this.getBinding=function(){return v},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=async function(oe){if(r=oe,r!==null){if(M=e.getRenderTarget(),r.addEventListener("select",te),r.addEventListener("selectstart",te),r.addEventListener("selectend",te),r.addEventListener("squeeze",te),r.addEventListener("squeezestart",te),r.addEventListener("squeezeend",te),r.addEventListener("end",se),r.addEventListener("inputsourceschange",ye),T.xrCompatible!==!0&&await t.makeXRCompatible(),F=e.getPixelRatio(),e.getSize(P),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Se=null,Re=null,Le=null;T.depth&&(Le=T.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Se=T.stencil?F0:I0,Re=T.stencil?N0:yh);const gt={colorFormat:t.RGBA8,depthFormat:Le,scaleFactor:s};v=new XRWebGLBinding(r,t),y=v.createProjectionLayer(gt),r.updateRenderState({layers:[y]}),e.setPixelRatio(1),e.setSize(y.textureWidth,y.textureHeight,!1),B=new _c(y.textureWidth,y.textureHeight,{format:Fs,type:dl,depthTexture:new Cb(y.textureWidth,y.textureHeight,Re,void 0,void 0,void 0,void 0,void 0,void 0,Se),stencilBuffer:T.stencil,colorSpace:e.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}else{const Se={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:s};A=new XRWebGLLayer(r,t,Se),r.updateRenderState({baseLayer:A}),e.setPixelRatio(1),e.setSize(A.framebufferWidth,A.framebufferHeight,!1),B=new _c(A.framebufferWidth,A.framebufferHeight,{format:Fs,type:dl,colorSpace:e.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:A.ignoreDepthValues===!1,resolveStencilBuffer:A.ignoreDepthValues===!1})}B.isXRRenderTarget=!0,this.setFoveation(u),f=null,a=await r.requestReferenceSpace(l),ge.setContext(r),ge.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return C.getDepthTexture()};function ye(oe){for(let ve=0;ve<oe.removed.length;ve++){const Se=oe.removed[ve],Re=O.indexOf(Se);Re>=0&&(O[Re]=null,D[Re].disconnect(Se))}for(let ve=0;ve<oe.added.length;ve++){const Se=oe.added[ve];let Re=O.indexOf(Se);if(Re===-1){for(let gt=0;gt<D.length;gt++)if(gt>=O.length){O.push(Se),Re=gt;break}else if(O[gt]===null){O[gt]=Se,Re=gt;break}if(Re===-1)break}const Le=D[Re];Le&&Le.connect(Se)}}const k=new he,ee=new he;function ne(oe,ve,Se){k.setFromMatrixPosition(ve.matrixWorld),ee.setFromMatrixPosition(Se.matrixWorld);const Re=k.distanceTo(ee),Le=ve.projectionMatrix.elements,gt=Se.projectionMatrix.elements,Mt=Le[14]/(Le[10]-1),At=Le[14]/(Le[10]+1),at=(Le[9]+1)/Le[5],Nt=(Le[9]-1)/Le[5],ie=(Le[8]-1)/Le[0],ut=(gt[8]+1)/gt[0],$e=Mt*ie,Ke=Mt*ut,Pe=Re/(-ie+ut),pt=Pe*-ie;if(ve.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(pt),oe.translateZ(Pe),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert(),Le[10]===-1)oe.projectionMatrix.copy(ve.projectionMatrix),oe.projectionMatrixInverse.copy(ve.projectionMatrixInverse);else{const Ve=Mt+Pe,j=At+Pe,Y=$e-pt,_e=Ke+(Re-pt),Ie=at*At/j*Ve,Ge=Nt*At/j*Ve;oe.projectionMatrix.makePerspective(Y,_e,Ie,Ge,Ve,j),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}}function de(oe,ve){ve===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(ve.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(r===null)return;let ve=oe.near,Se=oe.far;C.texture!==null&&(C.depthNear>0&&(ve=C.depthNear),C.depthFar>0&&(Se=C.depthFar)),N.near=G.near=V.near=ve,N.far=G.far=V.far=Se,(Q!==N.near||$!==N.far)&&(r.updateRenderState({depthNear:N.near,depthFar:N.far}),Q=N.near,$=N.far),V.layers.mask=oe.layers.mask|2,G.layers.mask=oe.layers.mask|4,N.layers.mask=V.layers.mask|G.layers.mask;const Re=oe.parent,Le=N.cameras;de(N,Re);for(let gt=0;gt<Le.length;gt++)de(Le[gt],Re);Le.length===2?ne(N,V,G):N.projectionMatrix.copy(V.projectionMatrix),X(oe,N,Re)};function X(oe,ve,Se){Se===null?oe.matrix.copy(ve.matrixWorld):(oe.matrix.copy(Se.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(ve.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(ve.projectionMatrix),oe.projectionMatrixInverse.copy(ve.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=z0*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return N},this.getFoveation=function(){if(!(y===null&&A===null))return u},this.setFoveation=function(oe){u=oe,y!==null&&(y.fixedFoveation=oe),A!==null&&A.fixedFoveation!==void 0&&(A.fixedFoveation=oe)},this.hasDepthSensing=function(){return C.texture!==null},this.getDepthSensingMesh=function(){return C.getMesh(N)};let J=null;function ce(oe,ve){if(d=ve.getViewerPose(f||a),b=ve,d!==null){const Se=d.views;A!==null&&(e.setRenderTargetFramebuffer(B,A.framebuffer),e.setRenderTarget(B));let Re=!1;Se.length!==N.cameras.length&&(N.cameras.length=0,Re=!0);for(let Mt=0;Mt<Se.length;Mt++){const At=Se[Mt];let at=null;if(A!==null)at=A.getViewport(At);else{const ie=v.getViewSubImage(y,At);at=ie.viewport,Mt===0&&(e.setRenderTargetTextures(B,ie.colorTexture,ie.depthStencilTexture),e.setRenderTarget(B))}let Nt=I[Mt];Nt===void 0&&(Nt=new Ss,Nt.layers.enable(Mt),Nt.viewport=new Ii,I[Mt]=Nt),Nt.matrix.fromArray(At.transform.matrix),Nt.matrix.decompose(Nt.position,Nt.quaternion,Nt.scale),Nt.projectionMatrix.fromArray(At.projectionMatrix),Nt.projectionMatrixInverse.copy(Nt.projectionMatrix).invert(),Nt.viewport.set(at.x,at.y,at.width,at.height),Mt===0&&(N.matrix.copy(Nt.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale)),Re===!0&&N.cameras.push(Nt)}const Le=r.enabledFeatures;if(Le&&Le.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&v){const Mt=v.getDepthInformation(Se[0]);Mt&&Mt.isValid&&Mt.texture&&C.init(e,Mt,r.renderState)}}for(let Se=0;Se<D.length;Se++){const Re=O[Se],Le=D[Se];Re!==null&&Le!==void 0&&Le.update(Re,ve,f||a)}J&&J(oe,ve),ve.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ve}),b=null}const ge=new ZP;ge.setAnimationLoop(ce),this.setAnimationLoop=function(oe){J=oe},this.dispose=function(){}}}const hg=new Bu,B7=new Tn;function U7(n,e){function t(T,M){T.matrixAutoUpdate===!0&&T.updateMatrix(),M.value.copy(T.matrix)}function i(T,M){M.color.getRGB(T.fogColor.value,sP(n)),M.isFog?(T.fogNear.value=M.near,T.fogFar.value=M.far):M.isFogExp2&&(T.fogDensity.value=M.density)}function r(T,M,B,D,O){M.isMeshBasicMaterial||M.isMeshLambertMaterial?s(T,M):M.isMeshToonMaterial?(s(T,M),v(T,M)):M.isMeshPhongMaterial?(s(T,M),d(T,M)):M.isMeshStandardMaterial?(s(T,M),y(T,M),M.isMeshPhysicalMaterial&&A(T,M,O)):M.isMeshMatcapMaterial?(s(T,M),b(T,M)):M.isMeshDepthMaterial?s(T,M):M.isMeshDistanceMaterial?(s(T,M),C(T,M)):M.isMeshNormalMaterial?s(T,M):M.isLineBasicMaterial?(a(T,M),M.isLineDashedMaterial&&l(T,M)):M.isPointsMaterial?u(T,M,B,D):M.isSpriteMaterial?f(T,M):M.isShadowMaterial?(T.color.value.copy(M.color),T.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function s(T,M){T.opacity.value=M.opacity,M.color&&T.diffuse.value.copy(M.color),M.emissive&&T.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(T.map.value=M.map,t(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.bumpMap&&(T.bumpMap.value=M.bumpMap,t(M.bumpMap,T.bumpMapTransform),T.bumpScale.value=M.bumpScale,M.side===hl&&(T.bumpScale.value*=-1)),M.normalMap&&(T.normalMap.value=M.normalMap,t(M.normalMap,T.normalMapTransform),T.normalScale.value.copy(M.normalScale),M.side===hl&&T.normalScale.value.negate()),M.displacementMap&&(T.displacementMap.value=M.displacementMap,t(M.displacementMap,T.displacementMapTransform),T.displacementScale.value=M.displacementScale,T.displacementBias.value=M.displacementBias),M.emissiveMap&&(T.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,T.emissiveMapTransform)),M.specularMap&&(T.specularMap.value=M.specularMap,t(M.specularMap,T.specularMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest);const B=e.get(M),D=B.envMap,O=B.envMapRotation;D&&(T.envMap.value=D,hg.copy(O),hg.x*=-1,hg.y*=-1,hg.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(hg.y*=-1,hg.z*=-1),T.envMapRotation.value.setFromMatrix4(B7.makeRotationFromEuler(hg)),T.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=M.reflectivity,T.ior.value=M.ior,T.refractionRatio.value=M.refractionRatio),M.lightMap&&(T.lightMap.value=M.lightMap,T.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,T.lightMapTransform)),M.aoMap&&(T.aoMap.value=M.aoMap,T.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,T.aoMapTransform))}function a(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,M.map&&(T.map.value=M.map,t(M.map,T.mapTransform))}function l(T,M){T.dashSize.value=M.dashSize,T.totalSize.value=M.dashSize+M.gapSize,T.scale.value=M.scale}function u(T,M,B,D){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.size.value=M.size*B,T.scale.value=D*.5,M.map&&(T.map.value=M.map,t(M.map,T.uvTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function f(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.rotation.value=M.rotation,M.map&&(T.map.value=M.map,t(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function d(T,M){T.specular.value.copy(M.specular),T.shininess.value=Math.max(M.shininess,1e-4)}function v(T,M){M.gradientMap&&(T.gradientMap.value=M.gradientMap)}function y(T,M){T.metalness.value=M.metalness,M.metalnessMap&&(T.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,T.metalnessMapTransform)),T.roughness.value=M.roughness,M.roughnessMap&&(T.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,T.roughnessMapTransform)),M.envMap&&(T.envMapIntensity.value=M.envMapIntensity)}function A(T,M,B){T.ior.value=M.ior,M.sheen>0&&(T.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),T.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(T.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,T.sheenColorMapTransform)),M.sheenRoughnessMap&&(T.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,T.sheenRoughnessMapTransform))),M.clearcoat>0&&(T.clearcoat.value=M.clearcoat,T.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(T.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,T.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(T.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===hl&&T.clearcoatNormalScale.value.negate())),M.dispersion>0&&(T.dispersion.value=M.dispersion),M.iridescence>0&&(T.iridescence.value=M.iridescence,T.iridescenceIOR.value=M.iridescenceIOR,T.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(T.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,T.iridescenceMapTransform)),M.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),M.transmission>0&&(T.transmission.value=M.transmission,T.transmissionSamplerMap.value=B.texture,T.transmissionSamplerSize.value.set(B.width,B.height),M.transmissionMap&&(T.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,T.transmissionMapTransform)),T.thickness.value=M.thickness,M.thicknessMap&&(T.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=M.attenuationDistance,T.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(T.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(T.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=M.specularIntensity,T.specularColor.value.copy(M.specularColor),M.specularColorMap&&(T.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,T.specularColorMapTransform)),M.specularIntensityMap&&(T.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,T.specularIntensityMapTransform))}function b(T,M){M.matcap&&(T.matcap.value=M.matcap)}function C(T,M){const B=e.get(M).light;T.referencePosition.value.setFromMatrixPosition(B.matrixWorld),T.nearDistance.value=B.shadow.camera.near,T.farDistance.value=B.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function O7(n,e,t,i){let r={},s={},a=[];const l=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function u(B,D){const O=D.program;i.uniformBlockBinding(B,O)}function f(B,D){let O=r[B.id];O===void 0&&(b(B),O=d(B),r[B.id]=O,B.addEventListener("dispose",T));const P=D.program;i.updateUBOMapping(B,P);const F=e.render.frame;s[B.id]!==F&&(y(B),s[B.id]=F)}function d(B){const D=v();B.__bindingPointIndex=D;const O=n.createBuffer(),P=B.__size,F=B.usage;return n.bindBuffer(n.UNIFORM_BUFFER,O),n.bufferData(n.UNIFORM_BUFFER,P,F),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,D,O),O}function v(){for(let B=0;B<l;B++)if(a.indexOf(B)===-1)return a.push(B),B;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function y(B){const D=r[B.id],O=B.uniforms,P=B.__cache;n.bindBuffer(n.UNIFORM_BUFFER,D);for(let F=0,V=O.length;F<V;F++){const G=Array.isArray(O[F])?O[F]:[O[F]];for(let I=0,N=G.length;I<N;I++){const Q=G[I];if(A(Q,F,I,P)===!0){const $=Q.__offset,te=Array.isArray(Q.value)?Q.value:[Q.value];let se=0;for(let ye=0;ye<te.length;ye++){const k=te[ye],ee=C(k);typeof k=="number"||typeof k=="boolean"?(Q.__data[0]=k,n.bufferSubData(n.UNIFORM_BUFFER,$+se,Q.__data)):k.isMatrix3?(Q.__data[0]=k.elements[0],Q.__data[1]=k.elements[1],Q.__data[2]=k.elements[2],Q.__data[3]=0,Q.__data[4]=k.elements[3],Q.__data[5]=k.elements[4],Q.__data[6]=k.elements[5],Q.__data[7]=0,Q.__data[8]=k.elements[6],Q.__data[9]=k.elements[7],Q.__data[10]=k.elements[8],Q.__data[11]=0):(k.toArray(Q.__data,se),se+=ee.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,$,Q.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function A(B,D,O,P){const F=B.value,V=D+"_"+O;if(P[V]===void 0)return typeof F=="number"||typeof F=="boolean"?P[V]=F:P[V]=F.clone(),!0;{const G=P[V];if(typeof F=="number"||typeof F=="boolean"){if(G!==F)return P[V]=F,!0}else if(G.equals(F)===!1)return G.copy(F),!0}return!1}function b(B){const D=B.uniforms;let O=0;const P=16;for(let V=0,G=D.length;V<G;V++){const I=Array.isArray(D[V])?D[V]:[D[V]];for(let N=0,Q=I.length;N<Q;N++){const $=I[N],te=Array.isArray($.value)?$.value:[$.value];for(let se=0,ye=te.length;se<ye;se++){const k=te[se],ee=C(k),ne=O%P,de=ne%ee.boundary,X=ne+de;O+=de,X!==0&&P-X<ee.storage&&(O+=P-X),$.__data=new Float32Array(ee.storage/Float32Array.BYTES_PER_ELEMENT),$.__offset=O,O+=ee.storage}}}const F=O%P;return F>0&&(O+=P-F),B.__size=O,B.__cache={},this}function C(B){const D={boundary:0,storage:0};return typeof B=="number"||typeof B=="boolean"?(D.boundary=4,D.storage=4):B.isVector2?(D.boundary=8,D.storage=8):B.isVector3||B.isColor?(D.boundary=16,D.storage=12):B.isVector4?(D.boundary=16,D.storage=16):B.isMatrix3?(D.boundary=48,D.storage=48):B.isMatrix4?(D.boundary=64,D.storage=64):B.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",B),D}function T(B){const D=B.target;D.removeEventListener("dispose",T);const O=a.indexOf(D.__bindingPointIndex);a.splice(O,1),n.deleteBuffer(r[D.id]),delete r[D.id],delete s[D.id]}function M(){for(const B in r)n.deleteBuffer(r[B]);a=[],r={},s={}}return{bind:u,update:f,dispose:M}}class W2{constructor(e={}){const{canvas:t=nP(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:f=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:v=!1,reverseDepthBuffer:y=!1}=e;this.isWebGLRenderer=!0;let A;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");A=i.getContextAttributes().alpha}else A=a;const b=new Uint32Array(4),C=new Int32Array(4);let T=null,M=null;const B=[],D=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=lh,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const O=this;let P=!1;this._outputColorSpace=$a;let F=0,V=0,G=null,I=-1,N=null;const Q=new Ii,$=new Ii;let te=null;const se=new jt(0);let ye=0,k=t.width,ee=t.height,ne=1,de=null,X=null;const J=new Ii(0,0,k,ee),ce=new Ii(0,0,k,ee);let ge=!1;const oe=new ty;let ve=!1,Se=!1;const Re=new Tn,Le=new Tn,gt=new he,Mt=new Ii,At={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let at=!1;function Nt(){return G===null?ne:1}let ie=i;function ut(q,me){return t.getContext(q,me)}try{const q={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:f,powerPreference:d,failIfMajorPerformanceCaveat:v};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${$0}`),t.addEventListener("webglcontextlost",dt,!1),t.addEventListener("webglcontextrestored",Pt,!1),t.addEventListener("webglcontextcreationerror",Tt,!1),ie===null){const me="webgl2";if(ie=ut(me,q),ie===null)throw ut(me)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(q){throw console.error("THREE.WebGLRenderer: "+q.message),q}let $e,Ke,Pe,pt,Ve,j,Y,_e,Ie,Ge,Ye,it,rt,yt,Vt,ht,Lt,Et,_t,ot,xe,We,Rt,Ae;function De(){$e=new W9(ie),$e.init(),We=new nN(ie,$e),Ke=new F9(ie,$e,e,We),Pe=new T7(ie,$e),Ke.reverseDepthBuffer&&y&&Pe.buffers.depth.setReversed(!0),pt=new q9(ie),Ve=new h7,j=new E7(ie,$e,Pe,Ve,Ke,We,pt),Y=new H9(O),_e=new X9(O),Ie=new e6(ie),Rt=new N9(ie,Ie),Ge=new Y9(ie,Ie,pt,Rt),Ye=new J9(ie,Ge,Ie,pt),_t=new K9(ie,Ke,j),ht=new G9(Ve),it=new f7(O,Y,_e,$e,Ke,Rt,ht),rt=new U7(O,Ve),yt=new p7,Vt=new x7($e),Et=new P9(O,Y,_e,Pe,Ye,A,u),Lt=new b7(O,Ye,Ke),Ae=new O7(ie,pt,Ke,Pe),ot=new I9(ie,$e,pt),xe=new j9(ie,$e,pt),pt.programs=it.programs,O.capabilities=Ke,O.extensions=$e,O.properties=Ve,O.renderLists=yt,O.shadowMap=Lt,O.state=Pe,O.info=pt}De();const He=new D7(O,ie);this.xr=He,this.getContext=function(){return ie},this.getContextAttributes=function(){return ie.getContextAttributes()},this.forceContextLoss=function(){const q=$e.get("WEBGL_lose_context");q&&q.loseContext()},this.forceContextRestore=function(){const q=$e.get("WEBGL_lose_context");q&&q.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(q){q!==void 0&&(ne=q,this.setSize(k,ee,!1))},this.getSize=function(q){return q.set(k,ee)},this.setSize=function(q,me,Me=!0){if(He.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}k=q,ee=me,t.width=Math.floor(q*ne),t.height=Math.floor(me*ne),Me===!0&&(t.style.width=q+"px",t.style.height=me+"px"),this.setViewport(0,0,q,me)},this.getDrawingBufferSize=function(q){return q.set(k*ne,ee*ne).floor()},this.setDrawingBufferSize=function(q,me,Me){k=q,ee=me,ne=Me,t.width=Math.floor(q*Me),t.height=Math.floor(me*Me),this.setViewport(0,0,q,me)},this.getCurrentViewport=function(q){return q.copy(Q)},this.getViewport=function(q){return q.copy(J)},this.setViewport=function(q,me,Me,pe){q.isVector4?J.set(q.x,q.y,q.z,q.w):J.set(q,me,Me,pe),Pe.viewport(Q.copy(J).multiplyScalar(ne).round())},this.getScissor=function(q){return q.copy(ce)},this.setScissor=function(q,me,Me,pe){q.isVector4?ce.set(q.x,q.y,q.z,q.w):ce.set(q,me,Me,pe),Pe.scissor($.copy(ce).multiplyScalar(ne).round())},this.getScissorTest=function(){return ge},this.setScissorTest=function(q){Pe.setScissorTest(ge=q)},this.setOpaqueSort=function(q){de=q},this.setTransparentSort=function(q){X=q},this.getClearColor=function(q){return q.copy(Et.getClearColor())},this.setClearColor=function(){Et.setClearColor(...arguments)},this.getClearAlpha=function(){return Et.getClearAlpha()},this.setClearAlpha=function(){Et.setClearAlpha(...arguments)},this.clear=function(q=!0,me=!0,Me=!0){let pe=0;if(q){let Be=!1;if(G!==null){const qe=G.texture.format;Be=qe===vb||qe===gb||qe===S_}if(Be){const qe=G.texture.type,ct=qe===dl||qe===yh||qe===P0||qe===N0||qe===pb||qe===mb,vt=Et.getClearColor(),wt=Et.getClearAlpha(),Wt=vt.r,kt=vt.g,Yt=vt.b;ct?(b[0]=Wt,b[1]=kt,b[2]=Yt,b[3]=wt,ie.clearBufferuiv(ie.COLOR,0,b)):(C[0]=Wt,C[1]=kt,C[2]=Yt,C[3]=wt,ie.clearBufferiv(ie.COLOR,0,C))}else pe|=ie.COLOR_BUFFER_BIT}me&&(pe|=ie.DEPTH_BUFFER_BIT),Me&&(pe|=ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ie.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",dt,!1),t.removeEventListener("webglcontextrestored",Pt,!1),t.removeEventListener("webglcontextcreationerror",Tt,!1),Et.dispose(),yt.dispose(),Vt.dispose(),Ve.dispose(),Y.dispose(),_e.dispose(),Ye.dispose(),Rt.dispose(),Ae.dispose(),it.dispose(),He.dispose(),He.removeEventListener("sessionstart",Ln),He.removeEventListener("sessionend",Ai),Di.stop()};function dt(q){q.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),P=!0}function Pt(){console.log("THREE.WebGLRenderer: Context Restored."),P=!1;const q=pt.autoReset,me=Lt.enabled,Me=Lt.autoUpdate,pe=Lt.needsUpdate,Be=Lt.type;De(),pt.autoReset=q,Lt.enabled=me,Lt.autoUpdate=Me,Lt.needsUpdate=pe,Lt.type=Be}function Tt(q){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",q.statusMessage)}function qt(q){const me=q.target;me.removeEventListener("dispose",qt),sn(me)}function sn(q){Jt(q),Ve.remove(q)}function Jt(q){const me=Ve.get(q).programs;me!==void 0&&(me.forEach(function(Me){it.releaseProgram(Me)}),q.isShaderMaterial&&it.releaseShaderCache(q))}this.renderBufferDirect=function(q,me,Me,pe,Be,qe){me===null&&(me=At);const ct=Be.isMesh&&Be.matrixWorld.determinant()<0,vt=Ce(q,me,Me,pe,Be);Pe.setMaterial(pe,ct);let wt=Me.index,Wt=1;if(pe.wireframe===!0){if(wt=Ge.getWireframeAttribute(Me),wt===void 0)return;Wt=2}const kt=Me.drawRange,Yt=Me.attributes.position;let fn=kt.start*Wt,an=(kt.start+kt.count)*Wt;qe!==null&&(fn=Math.max(fn,qe.start*Wt),an=Math.min(an,(qe.start+qe.count)*Wt)),wt!==null?(fn=Math.max(fn,0),an=Math.min(an,wt.count)):Yt!=null&&(fn=Math.max(fn,0),an=Math.min(an,Yt.count));const $n=an-fn;if($n<0||$n===1/0)return;Rt.setup(Be,pe,vt,Me,wt);let rn,cn=ot;if(wt!==null&&(rn=Ie.get(wt),cn=xe,cn.setIndex(rn)),Be.isMesh)pe.wireframe===!0?(Pe.setLineWidth(pe.wireframeLinewidth*Nt()),cn.setMode(ie.LINES)):cn.setMode(ie.TRIANGLES);else if(Be.isLine){let $t=pe.linewidth;$t===void 0&&($t=1),Pe.setLineWidth($t*Nt()),Be.isLineSegments?cn.setMode(ie.LINES):Be.isLineLoop?cn.setMode(ie.LINE_LOOP):cn.setMode(ie.LINE_STRIP)}else Be.isPoints?cn.setMode(ie.POINTS):Be.isSprite&&cn.setMode(ie.TRIANGLES);if(Be.isBatchedMesh)if(Be._multiDrawInstances!==null)PA("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),cn.renderMultiDrawInstances(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount,Be._multiDrawInstances);else if($e.get("WEBGL_multi_draw"))cn.renderMultiDraw(Be._multiDrawStarts,Be._multiDrawCounts,Be._multiDrawCount);else{const $t=Be._multiDrawStarts,Si=Be._multiDrawCounts,gn=Be._multiDrawCount,_n=wt?Ie.get(wt).bytesPerElement:1,Bi=Ve.get(pe).currentProgram.getUniforms();for(let dn=0;dn<gn;dn++)Bi.setValue(ie,"_gl_DrawID",dn),cn.render($t[dn]/_n,Si[dn])}else if(Be.isInstancedMesh)cn.renderInstances(fn,$n,Be.count);else if(Me.isInstancedBufferGeometry){const $t=Me._maxInstanceCount!==void 0?Me._maxInstanceCount:1/0,Si=Math.min(Me.instanceCount,$t);cn.renderInstances(fn,$n,Si)}else cn.render(fn,$n)};function nn(q,me,Me){q.transparent===!0&&q.side===Ru&&q.forceSinglePass===!1?(q.side=hl,q.needsUpdate=!0,ni(q,me,Me),q.side=gh,q.needsUpdate=!0,ni(q,me,Me),q.side=Ru):ni(q,me,Me)}this.compile=function(q,me,Me=null){Me===null&&(Me=q),M=Vt.get(Me),M.init(me),D.push(M),Me.traverseVisible(function(Be){Be.isLight&&Be.layers.test(me.layers)&&(M.pushLight(Be),Be.castShadow&&M.pushShadow(Be))}),q!==Me&&q.traverseVisible(function(Be){Be.isLight&&Be.layers.test(me.layers)&&(M.pushLight(Be),Be.castShadow&&M.pushShadow(Be))}),M.setupLights();const pe=new Set;return q.traverse(function(Be){if(!(Be.isMesh||Be.isPoints||Be.isLine||Be.isSprite))return;const qe=Be.material;if(qe)if(Array.isArray(qe))for(let ct=0;ct<qe.length;ct++){const vt=qe[ct];nn(vt,Me,Be),pe.add(vt)}else nn(qe,Me,Be),pe.add(qe)}),M=D.pop(),pe},this.compileAsync=function(q,me,Me=null){const pe=this.compile(q,me,Me);return new Promise(Be=>{function qe(){if(pe.forEach(function(ct){Ve.get(ct).currentProgram.isReady()&&pe.delete(ct)}),pe.size===0){Be(q);return}setTimeout(qe,10)}$e.get("KHR_parallel_shader_compile")!==null?qe():setTimeout(qe,10)})};let ti=null;function Fn(q){ti&&ti(q)}function Ln(){Di.stop()}function Ai(){Di.start()}const Di=new ZP;Di.setAnimationLoop(Fn),typeof self<"u"&&Di.setContext(self),this.setAnimationLoop=function(q){ti=q,He.setAnimationLoop(q),q===null?Di.stop():Di.start()},He.addEventListener("sessionstart",Ln),He.addEventListener("sessionend",Ai),this.render=function(q,me){if(me!==void 0&&me.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(q.matrixWorldAutoUpdate===!0&&q.updateMatrixWorld(),me.parent===null&&me.matrixWorldAutoUpdate===!0&&me.updateMatrixWorld(),He.enabled===!0&&He.isPresenting===!0&&(He.cameraAutoUpdate===!0&&He.updateCamera(me),me=He.getCamera()),q.isScene===!0&&q.onBeforeRender(O,q,me,G),M=Vt.get(q,D.length),M.init(me),D.push(M),Le.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),oe.setFromProjectionMatrix(Le),Se=this.localClippingEnabled,ve=ht.init(this.clippingPlanes,Se),T=yt.get(q,B.length),T.init(),B.push(T),He.enabled===!0&&He.isPresenting===!0){const qe=O.xr.getDepthSensingMesh();qe!==null&&or(qe,me,-1/0,O.sortObjects)}or(q,me,0,O.sortObjects),T.finish(),O.sortObjects===!0&&T.sort(de,X),at=He.enabled===!1||He.isPresenting===!1||He.hasDepthSensing()===!1,at&&Et.addToRenderList(T,q),this.info.render.frame++,ve===!0&&ht.beginShadows();const Me=M.state.shadowsArray;Lt.render(Me,q,me),ve===!0&&ht.endShadows(),this.info.autoReset===!0&&this.info.reset();const pe=T.opaque,Be=T.transmissive;if(M.setupLights(),me.isArrayCamera){const qe=me.cameras;if(Be.length>0)for(let ct=0,vt=qe.length;ct<vt;ct++){const wt=qe[ct];pr(pe,Be,q,wt)}at&&Et.render(q);for(let ct=0,vt=qe.length;ct<vt;ct++){const wt=qe[ct];kr(T,q,wt,wt.viewport)}}else Be.length>0&&pr(pe,Be,q,me),at&&Et.render(q),kr(T,q,me);G!==null&&V===0&&(j.updateMultisampleRenderTarget(G),j.updateRenderTargetMipmap(G)),q.isScene===!0&&q.onAfterRender(O,q,me),Rt.resetDefaultState(),I=-1,N=null,D.pop(),D.length>0?(M=D[D.length-1],ve===!0&&ht.setGlobalState(O.clippingPlanes,M.state.camera)):M=null,B.pop(),B.length>0?T=B[B.length-1]:T=null};function or(q,me,Me,pe){if(q.visible===!1)return;if(q.layers.test(me.layers)){if(q.isGroup)Me=q.renderOrder;else if(q.isLOD)q.autoUpdate===!0&&q.update(me);else if(q.isLight)M.pushLight(q),q.castShadow&&M.pushShadow(q);else if(q.isSprite){if(!q.frustumCulled||oe.intersectsSprite(q)){pe&&Mt.setFromMatrixPosition(q.matrixWorld).applyMatrix4(Le);const ct=Ye.update(q),vt=q.material;vt.visible&&T.push(q,ct,vt,Me,Mt.z,null)}}else if((q.isMesh||q.isLine||q.isPoints)&&(!q.frustumCulled||oe.intersectsObject(q))){const ct=Ye.update(q),vt=q.material;if(pe&&(q.boundingSphere!==void 0?(q.boundingSphere===null&&q.computeBoundingSphere(),Mt.copy(q.boundingSphere.center)):(ct.boundingSphere===null&&ct.computeBoundingSphere(),Mt.copy(ct.boundingSphere.center)),Mt.applyMatrix4(q.matrixWorld).applyMatrix4(Le)),Array.isArray(vt)){const wt=ct.groups;for(let Wt=0,kt=wt.length;Wt<kt;Wt++){const Yt=wt[Wt],fn=vt[Yt.materialIndex];fn&&fn.visible&&T.push(q,ct,fn,Me,Mt.z,Yt)}}else vt.visible&&T.push(q,ct,vt,Me,Mt.z,null)}}const qe=q.children;for(let ct=0,vt=qe.length;ct<vt;ct++)or(qe[ct],me,Me,pe)}function kr(q,me,Me,pe){const Be=q.opaque,qe=q.transmissive,ct=q.transparent;M.setupLightsView(Me),ve===!0&&ht.setGlobalState(O.clippingPlanes,Me),pe&&Pe.viewport(Q.copy(pe)),Be.length>0&&ln(Be,me,Me),qe.length>0&&ln(qe,me,Me),ct.length>0&&ln(ct,me,Me),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function pr(q,me,Me,pe){if((Me.isScene===!0?Me.overrideMaterial:null)!==null)return;M.state.transmissionRenderTarget[pe.id]===void 0&&(M.state.transmissionRenderTarget[pe.id]=new _c(1,1,{generateMipmaps:!0,type:$e.has("EXT_color_buffer_half_float")||$e.has("EXT_color_buffer_float")?wa:dl,minFilter:pc,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ni.workingColorSpace}));const qe=M.state.transmissionRenderTarget[pe.id],ct=pe.viewport||Q;qe.setSize(ct.z*O.transmissionResolutionScale,ct.w*O.transmissionResolutionScale);const vt=O.getRenderTarget();O.setRenderTarget(qe),O.getClearColor(se),ye=O.getClearAlpha(),ye<1&&O.setClearColor(16777215,.5),O.clear(),at&&Et.render(Me);const wt=O.toneMapping;O.toneMapping=lh;const Wt=pe.viewport;if(pe.viewport!==void 0&&(pe.viewport=void 0),M.setupLightsView(pe),ve===!0&&ht.setGlobalState(O.clippingPlanes,pe),ln(q,Me,pe),j.updateMultisampleRenderTarget(qe),j.updateRenderTargetMipmap(qe),$e.has("WEBGL_multisampled_render_to_texture")===!1){let kt=!1;for(let Yt=0,fn=me.length;Yt<fn;Yt++){const an=me[Yt],$n=an.object,rn=an.geometry,cn=an.material,$t=an.group;if(cn.side===Ru&&$n.layers.test(pe.layers)){const Si=cn.side;cn.side=hl,cn.needsUpdate=!0,Gi($n,Me,pe,rn,cn,$t),cn.side=Si,cn.needsUpdate=!0,kt=!0}}kt===!0&&(j.updateMultisampleRenderTarget(qe),j.updateRenderTargetMipmap(qe))}O.setRenderTarget(vt),O.setClearColor(se,ye),Wt!==void 0&&(pe.viewport=Wt),O.toneMapping=wt}function ln(q,me,Me){const pe=me.isScene===!0?me.overrideMaterial:null;for(let Be=0,qe=q.length;Be<qe;Be++){const ct=q[Be],vt=ct.object,wt=ct.geometry,Wt=ct.group;let kt=ct.material;kt.allowOverride===!0&&pe!==null&&(kt=pe),vt.layers.test(Me.layers)&&Gi(vt,me,Me,wt,kt,Wt)}}function Gi(q,me,Me,pe,Be,qe){q.onBeforeRender(O,me,Me,pe,Be,qe),q.modelViewMatrix.multiplyMatrices(Me.matrixWorldInverse,q.matrixWorld),q.normalMatrix.getNormalMatrix(q.modelViewMatrix),Be.onBeforeRender(O,me,Me,pe,q,qe),Be.transparent===!0&&Be.side===Ru&&Be.forceSinglePass===!1?(Be.side=hl,Be.needsUpdate=!0,O.renderBufferDirect(Me,me,pe,Be,q,qe),Be.side=gh,Be.needsUpdate=!0,O.renderBufferDirect(Me,me,pe,Be,q,qe),Be.side=Ru):O.renderBufferDirect(Me,me,pe,Be,q,qe),q.onAfterRender(O,me,Me,pe,Be,qe)}function ni(q,me,Me){me.isScene!==!0&&(me=At);const pe=Ve.get(q),Be=M.state.lights,qe=M.state.shadowsArray,ct=Be.state.version,vt=it.getParameters(q,Be.state,qe,me,Me),wt=it.getProgramCacheKey(vt);let Wt=pe.programs;pe.environment=q.isMeshStandardMaterial?me.environment:null,pe.fog=me.fog,pe.envMap=(q.isMeshStandardMaterial?_e:Y).get(q.envMap||pe.environment),pe.envMapRotation=pe.environment!==null&&q.envMap===null?me.environmentRotation:q.envMapRotation,Wt===void 0&&(q.addEventListener("dispose",qt),Wt=new Map,pe.programs=Wt);let kt=Wt.get(wt);if(kt!==void 0){if(pe.currentProgram===kt&&pe.lightsStateVersion===ct)return le(q,vt),kt}else vt.uniforms=it.getUniforms(q),q.onBeforeCompile(vt,O),kt=it.acquireProgram(vt,wt),Wt.set(wt,kt),pe.uniforms=vt.uniforms;const Yt=pe.uniforms;return(!q.isShaderMaterial&&!q.isRawShaderMaterial||q.clipping===!0)&&(Yt.clippingPlanes=ht.uniform),le(q,vt),pe.needsLights=et(q),pe.lightsStateVersion=ct,pe.needsLights&&(Yt.ambientLightColor.value=Be.state.ambient,Yt.lightProbe.value=Be.state.probe,Yt.directionalLights.value=Be.state.directional,Yt.directionalLightShadows.value=Be.state.directionalShadow,Yt.spotLights.value=Be.state.spot,Yt.spotLightShadows.value=Be.state.spotShadow,Yt.rectAreaLights.value=Be.state.rectArea,Yt.ltc_1.value=Be.state.rectAreaLTC1,Yt.ltc_2.value=Be.state.rectAreaLTC2,Yt.pointLights.value=Be.state.point,Yt.pointLightShadows.value=Be.state.pointShadow,Yt.hemisphereLights.value=Be.state.hemi,Yt.directionalShadowMap.value=Be.state.directionalShadowMap,Yt.directionalShadowMatrix.value=Be.state.directionalShadowMatrix,Yt.spotShadowMap.value=Be.state.spotShadowMap,Yt.spotLightMatrix.value=Be.state.spotLightMatrix,Yt.spotLightMap.value=Be.state.spotLightMap,Yt.pointShadowMap.value=Be.state.pointShadowMap,Yt.pointShadowMatrix.value=Be.state.pointShadowMatrix),pe.currentProgram=kt,pe.uniformsList=null,kt}function K(q){if(q.uniformsList===null){const me=q.currentProgram.getUniforms();q.uniformsList=IA.seqWithValue(me.seq,q.uniforms)}return q.uniformsList}function le(q,me){const Me=Ve.get(q);Me.outputColorSpace=me.outputColorSpace,Me.batching=me.batching,Me.batchingColor=me.batchingColor,Me.instancing=me.instancing,Me.instancingColor=me.instancingColor,Me.instancingMorph=me.instancingMorph,Me.skinning=me.skinning,Me.morphTargets=me.morphTargets,Me.morphNormals=me.morphNormals,Me.morphColors=me.morphColors,Me.morphTargetsCount=me.morphTargetsCount,Me.numClippingPlanes=me.numClippingPlanes,Me.numIntersection=me.numClipIntersection,Me.vertexAlphas=me.vertexAlphas,Me.vertexTangents=me.vertexTangents,Me.toneMapping=me.toneMapping}function Ce(q,me,Me,pe,Be){me.isScene!==!0&&(me=At),j.resetTextureUnits();const qe=me.fog,ct=pe.isMeshStandardMaterial?me.environment:null,vt=G===null?O.outputColorSpace:G.isXRRenderTarget===!0?G.texture.colorSpace:gf,wt=(pe.isMeshStandardMaterial?_e:Y).get(pe.envMap||ct),Wt=pe.vertexColors===!0&&!!Me.attributes.color&&Me.attributes.color.itemSize===4,kt=!!Me.attributes.tangent&&(!!pe.normalMap||pe.anisotropy>0),Yt=!!Me.morphAttributes.position,fn=!!Me.morphAttributes.normal,an=!!Me.morphAttributes.color;let $n=lh;pe.toneMapped&&(G===null||G.isXRRenderTarget===!0)&&($n=O.toneMapping);const rn=Me.morphAttributes.position||Me.morphAttributes.normal||Me.morphAttributes.color,cn=rn!==void 0?rn.length:0,$t=Ve.get(pe),Si=M.state.lights;if(ve===!0&&(Se===!0||q!==N)){const Oi=q===N&&pe.id===I;ht.setState(pe,q,Oi)}let gn=!1;pe.version===$t.__version?($t.needsLights&&$t.lightsStateVersion!==Si.state.version||$t.outputColorSpace!==vt||Be.isBatchedMesh&&$t.batching===!1||!Be.isBatchedMesh&&$t.batching===!0||Be.isBatchedMesh&&$t.batchingColor===!0&&Be.colorTexture===null||Be.isBatchedMesh&&$t.batchingColor===!1&&Be.colorTexture!==null||Be.isInstancedMesh&&$t.instancing===!1||!Be.isInstancedMesh&&$t.instancing===!0||Be.isSkinnedMesh&&$t.skinning===!1||!Be.isSkinnedMesh&&$t.skinning===!0||Be.isInstancedMesh&&$t.instancingColor===!0&&Be.instanceColor===null||Be.isInstancedMesh&&$t.instancingColor===!1&&Be.instanceColor!==null||Be.isInstancedMesh&&$t.instancingMorph===!0&&Be.morphTexture===null||Be.isInstancedMesh&&$t.instancingMorph===!1&&Be.morphTexture!==null||$t.envMap!==wt||pe.fog===!0&&$t.fog!==qe||$t.numClippingPlanes!==void 0&&($t.numClippingPlanes!==ht.numPlanes||$t.numIntersection!==ht.numIntersection)||$t.vertexAlphas!==Wt||$t.vertexTangents!==kt||$t.morphTargets!==Yt||$t.morphNormals!==fn||$t.morphColors!==an||$t.toneMapping!==$n||$t.morphTargetsCount!==cn)&&(gn=!0):(gn=!0,$t.__version=pe.version);let _n=$t.currentProgram;gn===!0&&(_n=ni(pe,me,Be));let Bi=!1,dn=!1,xn=!1;const Pn=_n.getUniforms(),Ui=$t.uniforms;if(Pe.useProgram(_n.program)&&(Bi=!0,dn=!0,xn=!0),pe.id!==I&&(I=pe.id,dn=!0),Bi||N!==q){Pe.buffers.depth.getReversed()?(Re.copy(q.projectionMatrix),Tz(Re),Ez(Re),Pn.setValue(ie,"projectionMatrix",Re)):Pn.setValue(ie,"projectionMatrix",q.projectionMatrix),Pn.setValue(ie,"viewMatrix",q.matrixWorldInverse);const mr=Pn.map.cameraPosition;mr!==void 0&&mr.setValue(ie,gt.setFromMatrixPosition(q.matrixWorld)),Ke.logarithmicDepthBuffer&&Pn.setValue(ie,"logDepthBufFC",2/(Math.log(q.far+1)/Math.LN2)),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&Pn.setValue(ie,"isOrthographic",q.isOrthographicCamera===!0),N!==q&&(N=q,dn=!0,xn=!0)}if(Be.isSkinnedMesh){Pn.setOptional(ie,Be,"bindMatrix"),Pn.setOptional(ie,Be,"bindMatrixInverse");const Oi=Be.skeleton;Oi&&(Oi.boneTexture===null&&Oi.computeBoneTexture(),Pn.setValue(ie,"boneTexture",Oi.boneTexture,j))}Be.isBatchedMesh&&(Pn.setOptional(ie,Be,"batchingTexture"),Pn.setValue(ie,"batchingTexture",Be._matricesTexture,j),Pn.setOptional(ie,Be,"batchingIdTexture"),Pn.setValue(ie,"batchingIdTexture",Be._indirectTexture,j),Pn.setOptional(ie,Be,"batchingColorTexture"),Be._colorsTexture!==null&&Pn.setValue(ie,"batchingColorTexture",Be._colorsTexture,j));const Wn=Me.morphAttributes;if((Wn.position!==void 0||Wn.normal!==void 0||Wn.color!==void 0)&&_t.update(Be,Me,_n),(dn||$t.receiveShadow!==Be.receiveShadow)&&($t.receiveShadow=Be.receiveShadow,Pn.setValue(ie,"receiveShadow",Be.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(Ui.envMap.value=wt,Ui.flipEnvMap.value=wt.isCubeTexture&&wt.isRenderTargetTexture===!1?-1:1),pe.isMeshStandardMaterial&&pe.envMap===null&&me.environment!==null&&(Ui.envMapIntensity.value=me.environmentIntensity),dn&&(Pn.setValue(ie,"toneMappingExposure",O.toneMappingExposure),$t.needsLights&&Qe(Ui,xn),qe&&pe.fog===!0&&rt.refreshFogUniforms(Ui,qe),rt.refreshMaterialUniforms(Ui,pe,ne,ee,M.state.transmissionRenderTarget[q.id]),IA.upload(ie,K($t),Ui,j)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(IA.upload(ie,K($t),Ui,j),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&Pn.setValue(ie,"center",Be.center),Pn.setValue(ie,"modelViewMatrix",Be.modelViewMatrix),Pn.setValue(ie,"normalMatrix",Be.normalMatrix),Pn.setValue(ie,"modelMatrix",Be.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const Oi=pe.uniformsGroups;for(let mr=0,Or=Oi.length;mr<Or;mr++){const Zr=Oi[mr];Ae.update(Zr,_n),Ae.bind(Zr,_n)}}return _n}function Qe(q,me){q.ambientLightColor.needsUpdate=me,q.lightProbe.needsUpdate=me,q.directionalLights.needsUpdate=me,q.directionalLightShadows.needsUpdate=me,q.pointLights.needsUpdate=me,q.pointLightShadows.needsUpdate=me,q.spotLights.needsUpdate=me,q.spotLightShadows.needsUpdate=me,q.rectAreaLights.needsUpdate=me,q.hemisphereLights.needsUpdate=me}function et(q){return q.isMeshLambertMaterial||q.isMeshToonMaterial||q.isMeshPhongMaterial||q.isMeshStandardMaterial||q.isShadowMaterial||q.isShaderMaterial&&q.lights===!0}this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return V},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function(q,me,Me){const pe=Ve.get(q);pe.__autoAllocateDepthBuffer=q.resolveDepthBuffer===!1,pe.__autoAllocateDepthBuffer===!1&&(pe.__useRenderToTexture=!1),Ve.get(q.texture).__webglTexture=me,Ve.get(q.depthTexture).__webglTexture=pe.__autoAllocateDepthBuffer?void 0:Me,pe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(q,me){const Me=Ve.get(q);Me.__webglFramebuffer=me,Me.__useDefaultFramebuffer=me===void 0};const ft=ie.createFramebuffer();this.setRenderTarget=function(q,me=0,Me=0){G=q,F=me,V=Me;let pe=!0,Be=null,qe=!1,ct=!1;if(q){const wt=Ve.get(q);if(wt.__useDefaultFramebuffer!==void 0)Pe.bindFramebuffer(ie.FRAMEBUFFER,null),pe=!1;else if(wt.__webglFramebuffer===void 0)j.setupRenderTarget(q);else if(wt.__hasExternalTextures)j.rebindTextures(q,Ve.get(q.texture).__webglTexture,Ve.get(q.depthTexture).__webglTexture);else if(q.depthBuffer){const Yt=q.depthTexture;if(wt.__boundDepthTexture!==Yt){if(Yt!==null&&Ve.has(Yt)&&(q.width!==Yt.image.width||q.height!==Yt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");j.setupDepthRenderbuffer(q)}}const Wt=q.texture;(Wt.isData3DTexture||Wt.isDataArrayTexture||Wt.isCompressedArrayTexture)&&(ct=!0);const kt=Ve.get(q).__webglFramebuffer;q.isWebGLCubeRenderTarget?(Array.isArray(kt[me])?Be=kt[me][Me]:Be=kt[me],qe=!0):q.samples>0&&j.useMultisampledRTT(q)===!1?Be=Ve.get(q).__webglMultisampledFramebuffer:Array.isArray(kt)?Be=kt[Me]:Be=kt,Q.copy(q.viewport),$.copy(q.scissor),te=q.scissorTest}else Q.copy(J).multiplyScalar(ne).floor(),$.copy(ce).multiplyScalar(ne).floor(),te=ge;if(Me!==0&&(Be=ft),Pe.bindFramebuffer(ie.FRAMEBUFFER,Be)&&pe&&Pe.drawBuffers(q,Be),Pe.viewport(Q),Pe.scissor($),Pe.setScissorTest(te),qe){const wt=Ve.get(q.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_CUBE_MAP_POSITIVE_X+me,wt.__webglTexture,Me)}else if(ct){const wt=Ve.get(q.texture),Wt=me;ie.framebufferTextureLayer(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,wt.__webglTexture,Me,Wt)}else if(q!==null&&Me!==0){const wt=Ve.get(q.texture);ie.framebufferTexture2D(ie.FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,wt.__webglTexture,Me)}I=-1},this.readRenderTargetPixels=function(q,me,Me,pe,Be,qe,ct){if(!(q&&q.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let vt=Ve.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ct!==void 0&&(vt=vt[ct]),vt){Pe.bindFramebuffer(ie.FRAMEBUFFER,vt);try{const wt=q.texture,Wt=wt.format,kt=wt.type;if(!Ke.textureFormatReadable(Wt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ke.textureTypeReadable(kt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}me>=0&&me<=q.width-pe&&Me>=0&&Me<=q.height-Be&&ie.readPixels(me,Me,pe,Be,We.convert(Wt),We.convert(kt),qe)}finally{const wt=G!==null?Ve.get(G).__webglFramebuffer:null;Pe.bindFramebuffer(ie.FRAMEBUFFER,wt)}}},this.readRenderTargetPixelsAsync=async function(q,me,Me,pe,Be,qe,ct){if(!(q&&q.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let vt=Ve.get(q).__webglFramebuffer;if(q.isWebGLCubeRenderTarget&&ct!==void 0&&(vt=vt[ct]),vt)if(me>=0&&me<=q.width-pe&&Me>=0&&Me<=q.height-Be){Pe.bindFramebuffer(ie.FRAMEBUFFER,vt);const wt=q.texture,Wt=wt.format,kt=wt.type;if(!Ke.textureFormatReadable(Wt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ke.textureTypeReadable(kt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Yt=ie.createBuffer();ie.bindBuffer(ie.PIXEL_PACK_BUFFER,Yt),ie.bufferData(ie.PIXEL_PACK_BUFFER,qe.byteLength,ie.STREAM_READ),ie.readPixels(me,Me,pe,Be,We.convert(Wt),We.convert(kt),0);const fn=G!==null?Ve.get(G).__webglFramebuffer:null;Pe.bindFramebuffer(ie.FRAMEBUFFER,fn);const an=ie.fenceSync(ie.SYNC_GPU_COMMANDS_COMPLETE,0);return ie.flush(),await Mz(ie,an,4),ie.bindBuffer(ie.PIXEL_PACK_BUFFER,Yt),ie.getBufferSubData(ie.PIXEL_PACK_BUFFER,0,qe),ie.deleteBuffer(Yt),ie.deleteSync(an),qe}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(q,me=null,Me=0){const pe=Math.pow(2,-Me),Be=Math.floor(q.image.width*pe),qe=Math.floor(q.image.height*pe),ct=me!==null?me.x:0,vt=me!==null?me.y:0;j.setTexture2D(q,0),ie.copyTexSubImage2D(ie.TEXTURE_2D,Me,0,0,ct,vt,Be,qe),Pe.unbindTexture()};const Ft=ie.createFramebuffer(),Bt=ie.createFramebuffer();this.copyTextureToTexture=function(q,me,Me=null,pe=null,Be=0,qe=null){qe===null&&(Be!==0?(PA("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),qe=Be,Be=0):qe=0);let ct,vt,wt,Wt,kt,Yt,fn,an,$n;const rn=q.isCompressedTexture?q.mipmaps[qe]:q.image;if(Me!==null)ct=Me.max.x-Me.min.x,vt=Me.max.y-Me.min.y,wt=Me.isBox3?Me.max.z-Me.min.z:1,Wt=Me.min.x,kt=Me.min.y,Yt=Me.isBox3?Me.min.z:0;else{const Wn=Math.pow(2,-Be);ct=Math.floor(rn.width*Wn),vt=Math.floor(rn.height*Wn),q.isDataArrayTexture?wt=rn.depth:q.isData3DTexture?wt=Math.floor(rn.depth*Wn):wt=1,Wt=0,kt=0,Yt=0}pe!==null?(fn=pe.x,an=pe.y,$n=pe.z):(fn=0,an=0,$n=0);const cn=We.convert(me.format),$t=We.convert(me.type);let Si;me.isData3DTexture?(j.setTexture3D(me,0),Si=ie.TEXTURE_3D):me.isDataArrayTexture||me.isCompressedArrayTexture?(j.setTexture2DArray(me,0),Si=ie.TEXTURE_2D_ARRAY):(j.setTexture2D(me,0),Si=ie.TEXTURE_2D),ie.pixelStorei(ie.UNPACK_FLIP_Y_WEBGL,me.flipY),ie.pixelStorei(ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),ie.pixelStorei(ie.UNPACK_ALIGNMENT,me.unpackAlignment);const gn=ie.getParameter(ie.UNPACK_ROW_LENGTH),_n=ie.getParameter(ie.UNPACK_IMAGE_HEIGHT),Bi=ie.getParameter(ie.UNPACK_SKIP_PIXELS),dn=ie.getParameter(ie.UNPACK_SKIP_ROWS),xn=ie.getParameter(ie.UNPACK_SKIP_IMAGES);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,rn.width),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,rn.height),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,Wt),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,kt),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,Yt);const Pn=q.isDataArrayTexture||q.isData3DTexture,Ui=me.isDataArrayTexture||me.isData3DTexture;if(q.isDepthTexture){const Wn=Ve.get(q),Oi=Ve.get(me),mr=Ve.get(Wn.__renderTarget),Or=Ve.get(Oi.__renderTarget);Pe.bindFramebuffer(ie.READ_FRAMEBUFFER,mr.__webglFramebuffer),Pe.bindFramebuffer(ie.DRAW_FRAMEBUFFER,Or.__webglFramebuffer);for(let Zr=0;Zr<wt;Zr++)Pn&&(ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,Ve.get(q).__webglTexture,Be,Yt+Zr),ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,Ve.get(me).__webglTexture,qe,$n+Zr)),ie.blitFramebuffer(Wt,kt,ct,vt,fn,an,ct,vt,ie.DEPTH_BUFFER_BIT,ie.NEAREST);Pe.bindFramebuffer(ie.READ_FRAMEBUFFER,null),Pe.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else if(Be!==0||q.isRenderTargetTexture||Ve.has(q)){const Wn=Ve.get(q),Oi=Ve.get(me);Pe.bindFramebuffer(ie.READ_FRAMEBUFFER,Ft),Pe.bindFramebuffer(ie.DRAW_FRAMEBUFFER,Bt);for(let mr=0;mr<wt;mr++)Pn?ie.framebufferTextureLayer(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,Wn.__webglTexture,Be,Yt+mr):ie.framebufferTexture2D(ie.READ_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,Wn.__webglTexture,Be),Ui?ie.framebufferTextureLayer(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,Oi.__webglTexture,qe,$n+mr):ie.framebufferTexture2D(ie.DRAW_FRAMEBUFFER,ie.COLOR_ATTACHMENT0,ie.TEXTURE_2D,Oi.__webglTexture,qe),Be!==0?ie.blitFramebuffer(Wt,kt,ct,vt,fn,an,ct,vt,ie.COLOR_BUFFER_BIT,ie.NEAREST):Ui?ie.copyTexSubImage3D(Si,qe,fn,an,$n+mr,Wt,kt,ct,vt):ie.copyTexSubImage2D(Si,qe,fn,an,Wt,kt,ct,vt);Pe.bindFramebuffer(ie.READ_FRAMEBUFFER,null),Pe.bindFramebuffer(ie.DRAW_FRAMEBUFFER,null)}else Ui?q.isDataTexture||q.isData3DTexture?ie.texSubImage3D(Si,qe,fn,an,$n,ct,vt,wt,cn,$t,rn.data):me.isCompressedArrayTexture?ie.compressedTexSubImage3D(Si,qe,fn,an,$n,ct,vt,wt,cn,rn.data):ie.texSubImage3D(Si,qe,fn,an,$n,ct,vt,wt,cn,$t,rn):q.isDataTexture?ie.texSubImage2D(ie.TEXTURE_2D,qe,fn,an,ct,vt,cn,$t,rn.data):q.isCompressedTexture?ie.compressedTexSubImage2D(ie.TEXTURE_2D,qe,fn,an,rn.width,rn.height,cn,rn.data):ie.texSubImage2D(ie.TEXTURE_2D,qe,fn,an,ct,vt,cn,$t,rn);ie.pixelStorei(ie.UNPACK_ROW_LENGTH,gn),ie.pixelStorei(ie.UNPACK_IMAGE_HEIGHT,_n),ie.pixelStorei(ie.UNPACK_SKIP_PIXELS,Bi),ie.pixelStorei(ie.UNPACK_SKIP_ROWS,dn),ie.pixelStorei(ie.UNPACK_SKIP_IMAGES,xn),qe===0&&me.generateMipmaps&&ie.generateMipmap(Si),Pe.unbindTexture()},this.copyTextureToTexture3D=function(q,me,Me=null,pe=null,Be=0){return PA('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(q,me,Me,pe,Be)},this.initRenderTarget=function(q){Ve.get(q).__webglFramebuffer===void 0&&j.setupRenderTarget(q)},this.initTexture=function(q){q.isCubeTexture?j.setTextureCube(q,0):q.isData3DTexture?j.setTexture3D(q,0):q.isDataArrayTexture||q.isCompressedArrayTexture?j.setTexture2DArray(q,0):j.setTexture2D(q,0),Pe.unbindTexture()},this.resetState=function(){F=0,V=0,G=null,Pe.reset(),Rt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return mc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Ni._getDrawingBufferColorSpace(e),t.unpackColorSpace=Ni._getUnpackColorSpace()}}const iN=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:n2,AddEquation:Hp,AddOperation:OL,AdditiveAnimationBlendMode:l2,AdditiveBlending:ZA,AgXToneMapping:FL,AlphaFormat:r2,AlwaysCompare:$L,AlwaysDepth:tS,AlwaysStencilFunc:GE,AmbientLight:HP,AnimationAction:KP,AnimationClip:W0,AnimationLoader:Q5,AnimationMixer:bV,AnimationObjectGroup:AV,AnimationUtils:q5,ArcCurve:dP,ArrayCamera:YP,ArrowHelper:WV,AttachedBindMode:IE,Audio:jP,AudioAnalyser:fV,AudioContext:I2,AudioListener:lV,AudioLoader:sV,AxesHelper:YV,BackSide:hl,BasicDepthPacking:WL,BasicShadowMap:dL,BatchedMesh:cP,Bone:bb,BooleanKeyframeTrack:ev,Box2:BV,Box3:la,Box3Helper:kV,BoxGeometry:$g,BoxHelper:VV,BufferAttribute:Ki,BufferGeometry:Qn,BufferGeometryLoader:XP,ByteType:hb,Cache:Td,Camera:Ab,CameraHelper:zV,CanvasTexture:g5,CapsuleGeometry:wb,CatmullRomCurve3:pP,CineonToneMapping:NL,CircleGeometry:Rb,ClampToEdgeWrapping:Is,Clock:F2,Color:jt,ColorKeyframeTrack:D2,ColorManagement:Ni,CompressedArrayTexture:p5,CompressedCubeTexture:m5,CompressedTexture:Eb,CompressedTextureLoader:$5,ConeGeometry:D_,ConstantAlphaFactor:DL,ConstantColorFactor:wL,Controls:qV,CubeCamera:aP,CubeReflectionMapping:vh,CubeRefractionMapping:qp,CubeTexture:M_,CubeTextureLoader:IP,CubeUVReflectionMapping:ey,CubicBezierCurve:b2,CubicBezierCurve3:mP,CubicInterpolant:OP,CullFaceBack:LE,CullFaceFront:hL,CullFaceFrontBack:wH,CullFaceNone:fL,Curve:_f,CurvePath:vP,CustomBlending:pL,CustomToneMapping:IL,CylinderGeometry:R_,Cylindrical:DV,Data3DTexture:xb,DataArrayTexture:b_,DataTexture:mf,DataTextureLoader:B2,DataUtils:Rg,DecrementStencilOp:FH,DecrementWrapStencilOp:HH,DefaultLoadingManager:NP,DepthArrayTexture:v5,DepthFormat:I0,DepthStencilFormat:F0,DepthTexture:Cb,DetachedBindMode:HL,DirectionalLight:P2,DirectionalLightHelper:HV,DiscreteInterpolant:LP,DodecahedronGeometry:Db,DoubleSide:Ru,DstAlphaFactor:bL,DstColorFactor:TL,DynamicCopyUsage:tz,DynamicDrawUsage:KH,DynamicReadUsage:QH,EdgesGeometry:hP,EllipseCurve:Bb,EqualCompare:KL,EqualDepth:iS,EqualStencilFunc:XH,EquirectangularReflectionMapping:O0,EquirectangularRefractionMapping:G1,Euler:Bu,EventDispatcher:_h,ExtrudeGeometry:Ub,FileLoader:eo,Float16BufferAttribute:jz,Float32BufferAttribute:un,FloatType:ss,Fog:Sb,FogExp2:T_,FramebufferTexture:d5,FrontSide:gh,Frustum:ty,FrustumArray:Mb,GLBufferAttribute:RV,GLSL1:iz,GLSL3:HE,GreaterCompare:JL,GreaterDepth:sS,GreaterEqualCompare:QL,GreaterEqualDepth:rS,GreaterEqualStencilFunc:qH,GreaterStencilFunc:YH,GridHelper:FV,Group:Md,HalfFloatType:wa,HemisphereLight:GP,HemisphereLightHelper:IV,IcosahedronGeometry:B_,ImageBitmapLoader:WP,ImageLoader:q1,ImageUtils:iP,IncrementStencilOp:IH,IncrementWrapStencilOp:GH,InstancedBufferAttribute:Zp,InstancedBufferGeometry:N2,InstancedInterleavedBuffer:wV,InstancedMesh:_2,Int16BufferAttribute:Wz,Int32BufferAttribute:Yz,Int8BufferAttribute:Vz,IntType:x_,InterleavedBuffer:C_,InterleavedBufferAttribute:Jp,Interpolant:ny,InterpolateDiscrete:G0,InterpolateLinear:H0,InterpolateSmooth:LA,InterpolationSamplingMode:az,InterpolationSamplingType:sz,InvertStencilOp:zH,KeepStencilOp:_g,KeyframeTrack:Ac,LOD:uP,LatheGeometry:Ob,Layers:V0,LessCompare:qL,LessDepth:nS,LessEqualCompare:f2,LessEqualDepth:Wg,LessEqualStencilFunc:WH,LessStencilFunc:kH,Light:rm,LightProbe:kP,Line:wd,Line3:UV,LineBasicMaterial:Bo,LineCurve:M2,LineCurve3:gP,LineDashedMaterial:DP,LineLoop:x2,LineSegments:yf,LinearFilter:qi,LinearInterpolant:R2,LinearMipMapLinearFilter:FE,LinearMipMapNearestFilter:BH,LinearMipmapLinearFilter:pc,LinearMipmapNearestFilter:C0,LinearSRGBColorSpace:gf,LinearToneMapping:LL,LinearTransfer:z1,Loader:to,LoaderUtils:Wp,LoadingManager:Vb,LoopOnce:zL,LoopPingPong:kL,LoopRepeat:VL,MOUSE:vg,Material:ca,MaterialLoader:kb,MathUtils:eP,Matrix2:k2,Matrix3:Kn,Matrix4:Tn,MaxEquation:yL,Mesh:Ur,MeshBasicMaterial:ul,MeshDepthMaterial:Hb,MeshDistanceMaterial:zb,MeshLambertMaterial:wP,MeshMatcapMaterial:RP,MeshNormalMaterial:CP,MeshPhongMaterial:TP,MeshPhysicalMaterial:xc,MeshStandardMaterial:L_,MeshToonMaterial:EP,MinEquation:vL,MirroredRepeatWrapping:L0,MixOperation:UL,MultiplyBlending:NE,MultiplyOperation:__,NearestFilter:Ra,NearestMipMapLinearFilter:DH,NearestMipMapNearestFilter:RH,NearestMipmapLinearFilter:Eg,NearestMipmapNearestFilter:fb,NeutralToneMapping:GL,NeverCompare:jL,NeverDepth:eS,NeverStencilFunc:VH,NoBlending:oh,NoColorSpace:Sd,NoToneMapping:lh,NormalAnimationBlendMode:yb,NormalBlending:Ig,NotEqualCompare:ZL,NotEqualDepth:aS,NotEqualStencilFunc:jH,NumberKeyframeTrack:jg,Object3D:Fi,ObjectLoader:iV,ObjectSpaceNormalMap:YL,OctahedronGeometry:U_,OneFactor:xL,OneMinusConstantAlphaFactor:BL,OneMinusConstantColorFactor:RL,OneMinusDstAlphaFactor:ML,OneMinusDstColorFactor:EL,OneMinusSrcAlphaFactor:$A,OneMinusSrcColorFactor:SL,OrthographicCamera:uh,PCFShadowMap:cb,PCFSoftShadowMap:d1,PMREMGenerator:jE,Path:IS,PerspectiveCamera:Ss,Plane:Ad,PlaneGeometry:xf,PlaneHelper:XV,PointLight:L2,PointLightHelper:PV,Points:A2,PointsMaterial:Tb,PolarGridHelper:GV,PolyhedronGeometry:im,PositionalAudio:cV,PropertyBinding:Wi,PropertyMixer:qP,QuadraticBezierCurve:T2,QuadraticBezierCurve3:E2,Quaternion:Da,QuaternionKeyframeTrack:qg,QuaternionLinearInterpolant:PP,RED_GREEN_RGTC2_Format:BS,RED_RGTC1_Format:o2,REVISION:$0,RGBADepthPacking:c2,RGBAFormat:Fs,RGBAIntegerFormat:vb,RGBA_ASTC_10x10_Format:TS,RGBA_ASTC_10x5_Format:SS,RGBA_ASTC_10x6_Format:bS,RGBA_ASTC_10x8_Format:MS,RGBA_ASTC_12x10_Format:ES,RGBA_ASTC_12x12_Format:CS,RGBA_ASTC_4x4_Format:pS,RGBA_ASTC_5x4_Format:mS,RGBA_ASTC_5x5_Format:gS,RGBA_ASTC_6x5_Format:vS,RGBA_ASTC_6x6_Format:yS,RGBA_ASTC_8x5_Format:_S,RGBA_ASTC_8x6_Format:xS,RGBA_ASTC_8x8_Format:AS,RGBA_BPTC_Format:y1,RGBA_ETC2_EAC_Format:dS,RGBA_PVRTC_2BPPV1_Format:cS,RGBA_PVRTC_4BPPV1_Format:uS,RGBA_S3TC_DXT1_Format:m1,RGBA_S3TC_DXT3_Format:g1,RGBA_S3TC_DXT5_Format:v1,RGBDepthPacking:OH,RGBFormat:s2,RGBIntegerFormat:UH,RGB_BPTC_SIGNED_Format:wS,RGB_BPTC_UNSIGNED_Format:RS,RGB_ETC1_Format:fS,RGB_ETC2_Format:hS,RGB_PVRTC_2BPPV1_Format:lS,RGB_PVRTC_4BPPV1_Format:oS,RGB_S3TC_DXT1_Format:p1,RGDepthPacking:LH,RGFormat:a2,RGIntegerFormat:gb,RawShaderMaterial:MP,Ray:Qg,Raycaster:V2,RectAreaLight:zP,RedFormat:A_,RedIntegerFormat:S_,ReinhardToneMapping:PL,RenderTarget:_b,RenderTarget3D:MV,RenderTargetArray:TV,RepeatWrapping:Kp,ReplaceStencilOp:NH,ReverseSubtractEquation:gL,RingGeometry:Lb,SIGNED_RED_GREEN_RGTC2_Format:US,SIGNED_RED_RGTC1_Format:DS,SRGBColorSpace:$a,SRGBTransfer:br,Scene:E_,ShaderChunk:ri,ShaderLib:uf,ShaderMaterial:pl,ShadowMaterial:bP,Shape:Gg,ShapeGeometry:Pb,ShapePath:jV,ShapeUtils:hf,ShortType:db,Skeleton:w_,SkeletonHelper:LV,SkinnedMesh:y2,Source:zp,Sphere:ua,SphereGeometry:O_,Spherical:FS,SphericalHarmonics3:VP,SplineCurve:C2,SpotLight:O2,SpotLightHelper:OV,Sprite:lP,SpriteMaterial:v2,SrcAlphaFactor:QA,SrcAlphaSaturateFactor:CL,SrcColorFactor:AL,StaticCopyUsage:ez,StaticDrawUsage:V1,StaticReadUsage:ZH,StereoCamera:aV,StreamCopyUsage:nz,StreamDrawUsage:JH,StreamReadUsage:$H,StringKeyframeTrack:tv,SubtractEquation:mL,SubtractiveBlending:PE,TOUCH:yg,TangentSpaceNormalMap:nm,TetrahedronGeometry:Nb,Texture:ar,TextureLoader:FP,TextureUtils:$V,TimestampQuery:rz,TorusGeometry:Ib,TorusKnotGeometry:Fb,Triangle:Xl,TriangleFanDrawMode:OS,TriangleStripDrawMode:u2,TrianglesDrawMode:XL,TubeGeometry:Gb,UVMapping:jp,Uint16BufferAttribute:d2,Uint32BufferAttribute:p2,Uint8BufferAttribute:kz,Uint8ClampedBufferAttribute:Xz,Uniform:z2,UniformsGroup:CV,UniformsLib:Qt,UniformsUtils:m2,UnsignedByteType:dl,UnsignedInt248Type:N0,UnsignedInt5999Type:i2,UnsignedIntType:yh,UnsignedShort4444Type:pb,UnsignedShort5551Type:mb,UnsignedShortType:P0,VSMShadowMap:lf,Vector2:xt,Vector3:he,Vector4:Ii,VectorKeyframeTrack:Kg,VideoFrameTexture:h5,VideoTexture:fP,WebGL3DRenderTarget:Bz,WebGLArrayRenderTarget:Dz,WebGLCoordinateSystem:mc,WebGLCubeRenderTarget:g2,WebGLRenderTarget:_c,WebGLRenderer:W2,WebGLUtils:nN,WebGPUCoordinateSystem:k1,WebXRController:NA,WireframeGeometry:SP,WrapAroundEnding:H1,ZeroCurvatureEnding:Cg,ZeroFactor:_L,ZeroSlopeEnding:wg,ZeroStencilOp:PH,createCanvasElement:nP},Symbol.toStringTag,{value:"Module"}));var RT={exports:{}},yd={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SB;function L7(){return SB||(SB=1,yd.ConcurrentRoot=1,yd.ContinuousEventPriority=8,yd.DefaultEventPriority=32,yd.DiscreteEventPriority=2,yd.IdleEventPriority=268435456,yd.LegacyRoot=0,yd.NoEventPriority=0),yd}var bB;function P7(){return bB||(bB=1,RT.exports=L7()),RT.exports}var FA=P7(),DT={exports:{}},BT={},UT={exports:{}},OT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MB;function N7(){if(MB)return OT;MB=1;var n=Q0();function e(v,y){return v===y&&(v!==0||1/v===1/y)||v!==v&&y!==y}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,r=n.useEffect,s=n.useLayoutEffect,a=n.useDebugValue;function l(v,y){var A=y(),b=i({inst:{value:A,getSnapshot:y}}),C=b[0].inst,T=b[1];return s(function(){C.value=A,C.getSnapshot=y,u(C)&&T({inst:C})},[v,A,y]),r(function(){return u(C)&&T({inst:C}),v(function(){u(C)&&T({inst:C})})},[v]),a(A),A}function u(v){var y=v.getSnapshot;v=v.value;try{var A=y();return!t(v,A)}catch{return!0}}function f(v,y){return y()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return OT.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:d,OT}var TB;function I7(){return TB||(TB=1,UT.exports=N7()),UT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EB;function F7(){if(EB)return BT;EB=1;var n=Q0(),e=I7();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var i=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,s=n.useRef,a=n.useEffect,l=n.useMemo,u=n.useDebugValue;return BT.useSyncExternalStoreWithSelector=function(f,d,v,y,A){var b=s(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=l(function(){function M(F){if(!B){if(B=!0,D=F,F=y(F),A!==void 0&&C.hasValue){var V=C.value;if(A(V,F))return O=V}return O=F}if(V=O,i(D,F))return V;var G=y(F);return A!==void 0&&A(V,G)?(D=F,V):(D=F,O=G)}var B=!1,D,O,P=v===void 0?null:v;return[function(){return M(d())},P===null?void 0:function(){return M(P())}]},[d,v,y,A]);var T=r(f,b[0],b[1]);return a(function(){C.hasValue=!0,C.value=T},[T]),u(T),T},BT}var CB;function G7(){return CB||(CB=1,DT.exports=F7()),DT.exports}var H7=G7();const z7=ub(H7),wB=n=>{let e;const t=new Set,i=(f,d)=>{const v=typeof f=="function"?f(e):f;if(!Object.is(v,e)){const y=e;e=d??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(A=>A(e,y))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>u,subscribe:f=>(t.add(f),()=>t.delete(f))},u=e=n(i,r,l);return l},rN=n=>n?wB(n):wB,{useSyncExternalStoreWithSelector:V7}=z7,k7=n=>n;function X7(n,e=k7,t){const i=V7(n.subscribe,n.getState,n.getInitialState,e,t);return Tg.useDebugValue(i),i}const RB=(n,e)=>{const t=rN(n),i=(r,s=e)=>X7(t,r,s);return Object.assign(i,t),i},sN=(n,e)=>n?RB(n,e):RB;var LT={exports:{}},PT={exports:{}},NT={exports:{}},IT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DB;function W7(){return DB||(DB=1,function(n){function e(k,ee){var ne=k.length;k.push(ee);e:for(;0<ne;){var de=ne-1>>>1,X=k[de];if(0<r(X,ee))k[de]=ee,k[ne]=X,ne=de;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var ee=k[0],ne=k.pop();if(ne!==ee){k[0]=ne;e:for(var de=0,X=k.length,J=X>>>1;de<J;){var ce=2*(de+1)-1,ge=k[ce],oe=ce+1,ve=k[oe];if(0>r(ge,ne))oe<X&&0>r(ve,ge)?(k[de]=ve,k[oe]=ne,de=oe):(k[de]=ge,k[ce]=ne,de=ce);else if(oe<X&&0>r(ve,ne))k[de]=ve,k[oe]=ne,de=oe;else break e}}return ee}function r(k,ee){var ne=k.sortIndex-ee.sortIndex;return ne!==0?ne:k.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],f=[],d=1,v=null,y=3,A=!1,b=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(k){for(var ee=t(f);ee!==null;){if(ee.callback===null)i(f);else if(ee.startTime<=k)i(f),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=t(f)}}function O(k){if(C=!1,D(k),!b)if(t(u)!==null)b=!0,se();else{var ee=t(f);ee!==null&&ye(O,ee.startTime-k)}}var P=!1,F=-1,V=5,G=-1;function I(){return!(n.unstable_now()-G<V)}function N(){if(P){var k=n.unstable_now();G=k;var ee=!0;try{e:{b=!1,C&&(C=!1,M(F),F=-1),A=!0;var ne=y;try{t:{for(D(k),v=t(u);v!==null&&!(v.expirationTime>k&&I());){var de=v.callback;if(typeof de=="function"){v.callback=null,y=v.priorityLevel;var X=de(v.expirationTime<=k);if(k=n.unstable_now(),typeof X=="function"){v.callback=X,D(k),ee=!0;break t}v===t(u)&&i(u),D(k)}else i(u);v=t(u)}if(v!==null)ee=!0;else{var J=t(f);J!==null&&ye(O,J.startTime-k),ee=!1}}break e}finally{v=null,y=ne,A=!1}ee=void 0}}finally{ee?Q():P=!1}}}var Q;if(typeof B=="function")Q=function(){B(N)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,te=$.port2;$.port1.onmessage=N,Q=function(){te.postMessage(null)}}else Q=function(){T(N,0)};function se(){P||(P=!0,Q())}function ye(k,ee){F=T(function(){k(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){b||A||(b=!0,se())},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(k){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var ne=y;y=ee;try{return k()}finally{y=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,ee){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ne=y;y=k;try{return ee()}finally{y=ne}},n.unstable_scheduleCallback=function(k,ee,ne){var de=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?de+ne:de):ne=de,k){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ne+X,k={id:d++,callback:ee,priorityLevel:k,startTime:ne,expirationTime:X,sortIndex:-1},ne>de?(k.sortIndex=ne,e(f,k),t(u)===null&&k===t(f)&&(C?(M(F),F=-1):C=!0,ye(O,ne-de))):(k.sortIndex=X,e(u,k),b||A||(b=!0,se())),k},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(k){var ee=y;return function(){var ne=y;y=ee;try{return k.apply(this,arguments)}finally{y=ne}}}}(IT)),IT}var BB;function Y7(){return BB||(BB=1,NT.exports=W7()),NT.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UB;function j7(){return UB||(UB=1,function(n){n.exports=function(e){function t(h,p,S,w){return new _a(h,p,S,w)}function i(){}function r(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(h){return h===null||typeof h!="object"?null:(h=zo&&h[zo]||h["@@iterator"],typeof h=="function"?h:null)}function a(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===Lc?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case Aa:return"Fragment";case uo:return"Portal";case Kd:return"Profiler";case zh:return"StrictMode";case Jd:return"Suspense";case Of:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case Ho:return(h.displayName||"Context")+".Provider";case vm:return(h._context.displayName||"Context")+".Consumer";case Vh:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case kh:return p=h.displayName||null,p!==null?p:a(h.type)||"Memo";case Ia:p=h._payload,h=h._init;try{return a(h(p))}catch{}}return null}function l(h){if(Tl===void 0)try{throw Error()}catch(S){var p=S.stack.trim().match(/\n( *(at )?)/);Tl=p&&p[1]||"",El=-1<S.stack.indexOf(`
    at`)?" (<anonymous>)":-1<S.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tl+h+El}function u(h,p){if(!h||Pc)return"";Pc=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(p){var Zt=function(){throw Error()};if(Object.defineProperty(Zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Zt,[])}catch(Hn){var en=Hn}Reflect.construct(h,[],Zt)}else{try{Zt.call()}catch(Hn){en=Hn}h.call(Zt.prototype)}}else{try{throw Error()}catch(Hn){en=Hn}(Zt=h())&&typeof Zt.catch=="function"&&Zt.catch(function(){})}}catch(Hn){if(Hn&&en&&typeof Hn.stack=="string")return[Hn.stack,en.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=w.DetermineComponentFrameRoot(),ue=z[0],Ee=z[1];if(ue&&Ee){var ke=ue.split(`
`),St=Ee.split(`
`);for(L=w=0;w<ke.length&&!ke[w].includes("DetermineComponentFrameRoot");)w++;for(;L<St.length&&!St[L].includes("DetermineComponentFrameRoot");)L++;if(w===ke.length||L===St.length)for(w=ke.length-1,L=St.length-1;1<=w&&0<=L&&ke[w]!==St[L];)L--;for(;1<=w&&0<=L;w--,L--)if(ke[w]!==St[L]){if(w!==1||L!==1)do if(w--,L--,0>L||ke[w]!==St[L]){var Ht=`
`+ke[w].replace(" at new "," at ");return h.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",h.displayName)),Ht}while(1<=w&&0<=L);break}}}finally{Pc=!1,Error.prepareStackTrace=S}return(S=h?h.displayName||h.name:"")?l(S):""}function f(h){switch(h.tag){case 26:case 27:case 5:return l(h.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return h=u(h.type,!1),h;case 11:return h=u(h.type.render,!1),h;case 1:return h=u(h.type,!0),h;default:return""}}function d(h){try{var p="";do p+=f(h),h=h.return;while(h);return p}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}function v(h){var p=h,S=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(S=p.return),h=p.return;while(h)}return p.tag===3?S:null}function y(h){if(v(h)!==h)throw Error(r(188))}function A(h){var p=h.alternate;if(!p){if(p=v(h),p===null)throw Error(r(188));return p!==h?null:h}for(var S=h,w=p;;){var L=S.return;if(L===null)break;var z=L.alternate;if(z===null){if(w=L.return,w!==null){S=w;continue}break}if(L.child===z.child){for(z=L.child;z;){if(z===S)return y(L),h;if(z===w)return y(L),p;z=z.sibling}throw Error(r(188))}if(S.return!==w.return)S=L,w=z;else{for(var ue=!1,Ee=L.child;Ee;){if(Ee===S){ue=!0,S=L,w=z;break}if(Ee===w){ue=!0,w=L,S=z;break}Ee=Ee.sibling}if(!ue){for(Ee=z.child;Ee;){if(Ee===S){ue=!0,S=z,w=L;break}if(Ee===w){ue=!0,w=z,S=L;break}Ee=Ee.sibling}if(!ue)throw Error(r(189))}}if(S.alternate!==w)throw Error(r(190))}if(S.tag!==3)throw Error(r(188));return S.stateNode.current===S?h:p}function b(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(p=b(h),p!==null)return p;h=h.sibling}return null}function C(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(p=C(h),p!==null))return p;h=h.sibling}return null}function T(h){return{current:h}}function M(h){0>Rl||(h.current=Cr[Rl],Cr[Rl]=null,Rl--)}function B(h,p){Rl++,Cr[Rl]=h.current,h.current=p}function D(h){return h>>>=0,h===0?32:31-(td(h)/Av|0)|0}function O(h){var p=h&42;if(p!==0)return p;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function P(h,p){var S=h.pendingLanes;if(S===0)return 0;var w=0,L=h.suspendedLanes,z=h.pingedLanes,ue=h.warmLanes;h=h.finishedLanes!==0;var Ee=S&134217727;return Ee!==0?(S=Ee&~L,S!==0?w=O(S):(z&=Ee,z!==0?w=O(z):h||(ue=Ee&~ue,ue!==0&&(w=O(ue))))):(Ee=S&~L,Ee!==0?w=O(Ee):z!==0?w=O(z):h||(ue=S&~ue,ue!==0&&(w=O(ue)))),w===0?0:p!==0&&p!==w&&(p&L)===0&&(L=w&-w,ue=p&-p,L>=ue||L===32&&(ue&4194176)!==0)?p:w}function F(h,p){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&p)===0}function V(h,p){switch(h){case 1:case 2:case 4:case 8:return p+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G(){var h=Yo;return Yo<<=1,(Yo&4194176)===0&&(Yo=128),h}function I(){var h=Dl;return Dl<<=1,(Dl&62914560)===0&&(Dl=4194304),h}function N(h){for(var p=[],S=0;31>S;S++)p.push(h);return p}function Q(h,p){h.pendingLanes|=p,p!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function $(h,p,S,w,L,z){var ue=h.pendingLanes;h.pendingLanes=S,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=S,h.entangledLanes&=S,h.errorRecoveryDisabledLanes&=S,h.shellSuspendCounter=0;var Ee=h.entanglements,ke=h.expirationTimes,St=h.hiddenUpdates;for(S=ue&~S;0<S;){var Ht=31-ws(S),Zt=1<<Ht;Ee[Ht]=0,ke[Ht]=-1;var en=St[Ht];if(en!==null)for(St[Ht]=null,Ht=0;Ht<en.length;Ht++){var Hn=en[Ht];Hn!==null&&(Hn.lane&=-536870913)}S&=~Zt}w!==0&&te(h,w,0),z!==0&&L===0&&h.tag!==0&&(h.suspendedLanes|=z&~(ue&~p))}function te(h,p,S){h.pendingLanes|=p,h.suspendedLanes&=~p;var w=31-ws(p);h.entangledLanes|=p,h.entanglements[w]=h.entanglements[w]|1073741824|S&4194218}function se(h,p){var S=h.entangledLanes|=p;for(h=h.entanglements;S;){var w=31-ws(S),L=1<<w;L&p|h[w]&p&&(h[w]|=p),S&=~L}}function ye(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function k(h){if(Ws&&typeof Ws.onCommitFiberRoot=="function")try{Ws.onCommitFiberRoot(Yi,h,void 0,(h.current.flags&128)===128)}catch{}}function ee(h){if(typeof Mv=="function"&&ps(h),Ws&&typeof Ws.setStrictMode=="function")try{Ws.setStrictMode(Yi,h)}catch{}}function ne(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}function de(h,p){if(typeof h=="object"&&h!==null){var S=rd.get(h);return S!==void 0?S:(p={value:h,source:p,stack:d(p)},rd.set(h,p),p)}return{value:h,source:p,stack:d(p)}}function X(h,p){Bl[po++]=pu,Bl[po++]=hn,hn=h,pu=p}function J(h,p,S){sa[$r++]=Fa,sa[$r++]=mo,sa[$r++]=Yu,Yu=h;var w=Fa;h=mo;var L=32-ws(w)-1;w&=~(1<<L),S+=1;var z=32-ws(p)+L;if(30<z){var ue=L-L%5;z=(w&(1<<ue)-1).toString(32),w>>=ue,L-=ue,Fa=1<<32-ws(p)+L|S<<L|w,mo=z+h}else Fa=1<<z|S<<L|w,mo=h}function ce(h){h.return!==null&&(X(h,1),J(h,1,0))}function ge(h){for(;h===hn;)hn=Bl[--po],Bl[po]=null,pu=Bl[--po],Bl[po]=null;for(;h===Yu;)Yu=sa[--$r],sa[$r]=null,mo=sa[--$r],sa[$r]=null,Fa=sa[--$r],sa[$r]=null}function oe(h,p){B(Ul,p),B(kf,h),B(_i,null),h=_m(p),M(_i),B(_i,h)}function ve(){M(_i),M(kf),M(Ul)}function Se(h){h.memoizedState!==null&&B(ju,h);var p=_i.current,S=Nc(p,h.type);p!==S&&(B(kf,h),B(_i,S))}function Re(h){kf.current===h&&(M(_i),M(kf)),ju.current===h&&(M(ju),Er?ko._currentValue=fo:ko._currentValue2=fo)}function Le(h){var p=Error(r(418,""));throw Nt(de(p,h)),Ga}function gt(h,p){if(!Rr)throw Error(r(175));op(h.stateNode,h.type,h.memoizedProps,p,h)||Le(h)}function Mt(h){for(Rs=h.return;Rs;)switch(Rs.tag){case 3:case 27:gs=!0;return;case 5:case 13:gs=!1;return;default:Rs=Rs.return}}function At(h){if(!Rr||h!==Rs)return!1;if(!xi)return Mt(h),xi=!0,!1;var p=!1;if(Qi?h.tag!==3&&h.tag!==27&&(h.tag!==5||lp(h.type)&&!Vn(h.type,h.memoizedProps))&&(p=!0):h.tag!==3&&(h.tag!==5||lp(h.type)&&!Vn(h.type,h.memoizedProps))&&(p=!0),p&&ms&&Le(h),Mt(h),h.tag===13){if(!Rr)throw Error(r(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));ms=gv(h)}else ms=Rs?wl(h.stateNode):null;return!0}function at(){Rr&&(ms=Rs=null,xi=!1)}function Nt(h){go===null?go=[h]:go.push(h)}function ie(){for(var h=mu,p=jo=mu=0;p<h;){var S=cr[p];cr[p++]=null;var w=cr[p];cr[p++]=null;var L=cr[p];cr[p++]=null;var z=cr[p];if(cr[p++]=null,w!==null&&L!==null){var ue=w.pending;ue===null?L.next=L:(L.next=ue.next,ue.next=L),w.pending=L}z!==0&&Pe(S,L,z)}}function ut(h,p,S,w){cr[mu++]=h,cr[mu++]=p,cr[mu++]=S,cr[mu++]=w,jo|=w,h.lanes|=w,h=h.alternate,h!==null&&(h.lanes|=w)}function $e(h,p,S,w){return ut(h,p,S,w),pt(h)}function Ke(h,p){return ut(h,null,null,p),pt(h)}function Pe(h,p,S){h.lanes|=S;var w=h.alternate;w!==null&&(w.lanes|=S);for(var L=!1,z=h.return;z!==null;)z.childLanes|=S,w=z.alternate,w!==null&&(w.childLanes|=S),z.tag===22&&(h=z.stateNode,h===null||h._visibility&1||(L=!0)),h=z,z=z.return;L&&p!==null&&h.tag===3&&(z=h.stateNode,L=31-ws(S),z=z.hiddenUpdates,h=z[L],h===null?z[L]=[p]:h.push(p),p.lane=S|536870912)}function pt(h){if(50<Jf)throw Jf=0,xp=null,Error(r(185));for(var p=h.return;p!==null;)h=p,p=h.return;return h.tag===3?h.stateNode:null}function Ve(h){h!==gu&&h.next===null&&(gu===null?Vc=gu=h:gu=gu.next=h),Vi=!0,kc||(kc=!0,Ye(Y))}function j(h,p){if(!dp&&Vi){dp=!0;do for(var S=!1,w=Vc;w!==null;){if(h!==0){var L=w.pendingLanes;if(L===0)var z=0;else{var ue=w.suspendedLanes,Ee=w.pingedLanes;z=(1<<31-ws(42|h)+1)-1,z&=L&~(ue&~Ee),z=z&201326677?z&201326677|1:z?z|2:0}z!==0&&(S=!0,Ge(w,z))}else z=ci,z=P(w,w===Xi?z:0),(z&3)===0||F(w,z)||(S=!0,Ge(w,z));w=w.next}while(S);dp=!1}}function Y(){Vi=kc=!1;var h=0;Xc!==0&&(cv()&&(h=Xc),Xc=0);for(var p=qr(),S=null,w=Vc;w!==null;){var L=w.next,z=_e(w,p);z===0?(w.next=null,S===null?Vc=L:S.next=L,L===null&&(gu=S)):(S=w,(h!==0||(z&3)!==0)&&(Vi=!0)),w=L}j(h)}function _e(h,p){for(var S=h.suspendedLanes,w=h.pingedLanes,L=h.expirationTimes,z=h.pendingLanes&-62914561;0<z;){var ue=31-ws(z),Ee=1<<ue,ke=L[ue];ke===-1?((Ee&S)===0||(Ee&w)!==0)&&(L[ue]=V(Ee,p)):ke<=p&&(h.expiredLanes|=Ee),z&=~Ee}if(p=Xi,S=ci,S=P(h,h===p?S:0),w=h.callbackNode,S===0||h===p&&er===2||h.cancelPendingCommit!==null)return w!==null&&w!==null&&Vf(w),h.callbackNode=null,h.callbackPriority=0;if((S&3)===0||F(h,S)){if(p=S&-S,p===h.callbackPriority)return p;switch(w!==null&&Vf(w),ye(S)){case 2:case 8:S=Gm;break;case 32:S=hp;break;case 268435456:S=bv;break;default:S=hp}return w=Ie.bind(null,h),S=zf(S,w),h.callbackPriority=p,h.callbackNode=S,p}return w!==null&&w!==null&&Vf(w),h.callbackPriority=2,h.callbackNode=null,2}function Ie(h,p){var S=h.callbackNode;if(Go()&&h.callbackNode!==S)return null;var w=ci;return w=P(h,h===Xi?w:0),w===0?null:(Gu(h,w,p),_e(h,qr()),h.callbackNode!=null&&h.callbackNode===S?Ie.bind(null,h):null)}function Ge(h,p){if(Go())return null;Gu(h,p,!0)}function Ye(h){Yh?Cl(function(){(Ei&6)!==0?zf(id,h):h()}):zf(id,h)}function it(){return Xc===0&&(Xc=G()),Xc}function rt(h,p){if(Xf===null){var S=Xf=[];Wc=0,Ha=it(),Yc={status:"pending",value:void 0,then:function(w){S.push(w)}}}return Wc++,p.then(yt,yt),p}function yt(){if(--Wc===0&&Xf!==null){Yc!==null&&(Yc.status="fulfilled");var h=Xf;Xf=null,Ha=0,Yc=null;for(var p=0;p<h.length;p++)(0,h[p])()}}function Vt(h,p){var S=[],w={status:"pending",value:null,reason:null,then:function(L){S.push(L)}};return h.then(function(){w.status="fulfilled",w.value=p;for(var L=0;L<S.length;L++)(0,S[L])(p)},function(L){for(w.status="rejected",w.reason=L,L=0;L<S.length;L++)(0,S[L])(void 0)}),w}function ht(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lt(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Et(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function _t(h,p,S){var w=h.updateQueue;if(w===null)return null;if(w=w.shared,(Ei&2)!==0){var L=w.pending;return L===null?p.next=p:(p.next=L.next,L.next=p),w.pending=p,p=pt(h),Pe(h,null,S),p}return ut(h,w,p,S),pt(h)}function ot(h,p,S){if(p=p.updateQueue,p!==null&&(p=p.shared,(S&4194176)!==0)){var w=p.lanes;w&=h.pendingLanes,S|=w,p.lanes=S,se(h,S)}}function xe(h,p){var S=h.updateQueue,w=h.alternate;if(w!==null&&(w=w.updateQueue,S===w)){var L=null,z=null;if(S=S.firstBaseUpdate,S!==null){do{var ue={lane:S.lane,tag:S.tag,payload:S.payload,callback:null,next:null};z===null?L=z=ue:z=z.next=ue,S=S.next}while(S!==null);z===null?L=z=p:z=z.next=p}else L=z=p;S={baseState:w.baseState,firstBaseUpdate:L,lastBaseUpdate:z,shared:w.shared,callbacks:w.callbacks},h.updateQueue=S;return}h=S.lastBaseUpdate,h===null?S.firstBaseUpdate=p:h.next=p,S.lastBaseUpdate=p}function We(){if(qu){var h=Yc;if(h!==null)throw h}}function Rt(h,p,S,w){qu=!1;var L=h.updateQueue;Ol=!1;var z=L.firstBaseUpdate,ue=L.lastBaseUpdate,Ee=L.shared.pending;if(Ee!==null){L.shared.pending=null;var ke=Ee,St=ke.next;ke.next=null,ue===null?z=St:ue.next=St,ue=ke;var Ht=h.alternate;Ht!==null&&(Ht=Ht.updateQueue,Ee=Ht.lastBaseUpdate,Ee!==ue&&(Ee===null?Ht.firstBaseUpdate=St:Ee.next=St,Ht.lastBaseUpdate=ke))}if(z!==null){var Zt=L.baseState;ue=0,Ht=St=ke=null,Ee=z;do{var en=Ee.lane&-536870913,Hn=en!==Ee.lane;if(Hn?(ci&en)===en:(w&en)===en){en!==0&&en===Ha&&(qu=!0),Ht!==null&&(Ht=Ht.next={lane:0,tag:Ee.tag,payload:Ee.payload,callback:null,next:null});e:{var qa=h,ec=Ee;en=p;var tc=S;switch(ec.tag){case 1:if(qa=ec.payload,typeof qa=="function"){Zt=qa.call(tc,Zt,en);break e}Zt=qa;break e;case 3:qa.flags=qa.flags&-65537|128;case 0:if(qa=ec.payload,en=typeof qa=="function"?qa.call(tc,Zt,en):qa,en==null)break e;Zt=qd({},Zt,en);break e;case 2:Ol=!0}}en=Ee.callback,en!==null&&(h.flags|=64,Hn&&(h.flags|=8192),Hn=L.callbacks,Hn===null?L.callbacks=[en]:Hn.push(en))}else Hn={lane:en,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},Ht===null?(St=Ht=Hn,ke=Zt):Ht=Ht.next=Hn,ue|=en;if(Ee=Ee.next,Ee===null){if(Ee=L.shared.pending,Ee===null)break;Hn=Ee,Ee=Hn.next,Hn.next=null,L.lastBaseUpdate=Hn,L.shared.pending=null}}while(!0);Ht===null&&(ke=Zt),L.baseState=ke,L.firstBaseUpdate=St,L.lastBaseUpdate=Ht,z===null&&(L.shared.lanes=0),Ya|=ue,h.lanes=ue,h.memoizedState=Zt}}function Ae(h,p){if(typeof h!="function")throw Error(r(191,h));h.call(p)}function De(h,p){var S=h.callbacks;if(S!==null)for(h.callbacks=null,h=0;h<S.length;h++)Ae(S[h],p)}function He(h,p){if(Ys(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var S=Object.keys(h),w=Object.keys(p);if(S.length!==w.length)return!1;for(w=0;w<S.length;w++){var L=S[w];if(!Ll.call(p,L)||!Ys(h[L],p[L]))return!1}return!0}function dt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Pt(){}function Tt(h,p,S){switch(S=h[S],S===void 0?h.push(p):S!==p&&(p.then(Pt,Pt),p=S),p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,h===Ku?Error(r(483)):h;default:if(typeof p.status=="string")p.then(Pt,Pt);else{if(h=Xi,h!==null&&100<h.shellSuspendCounter)throw Error(r(482));h=p,h.status="pending",h.then(function(w){if(p.status==="pending"){var L=p;L.status="fulfilled",L.value=w}},function(w){if(p.status==="pending"){var L=p;L.status="rejected",L.reason=w}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,h===Ku?Error(r(483)):h}throw Pl=p,Ku}}function qt(){if(Pl===null)throw Error(r(459));var h=Pl;return Pl=null,h}function sn(h){var p=_u;return _u+=1,yu===null&&(yu=[]),Tt(yu,h,p)}function Jt(h,p){p=p.props.ref,h.ref=p!==void 0?p:null}function nn(h,p){throw p.$$typeof===py?Error(r(525)):(h=Object.prototype.toString.call(p),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h)))}function ti(h){var p=h._init;return p(h._payload)}function Fn(h){function p(tt,Oe){if(h){var st=tt.deletions;st===null?(tt.deletions=[Oe],tt.flags|=16):st.push(Oe)}}function S(tt,Oe){if(!h)return null;for(;Oe!==null;)p(tt,Oe),Oe=Oe.sibling;return null}function w(tt){for(var Oe=new Map;tt!==null;)tt.key!==null?Oe.set(tt.key,tt):Oe.set(tt.index,tt),tt=tt.sibling;return Oe}function L(tt,Oe){return tt=lo(tt,Oe),tt.index=0,tt.sibling=null,tt}function z(tt,Oe,st){return tt.index=st,h?(st=tt.alternate,st!==null?(st=st.index,st<Oe?(tt.flags|=33554434,Oe):st):(tt.flags|=33554434,Oe)):(tt.flags|=1048576,Oe)}function ue(tt){return h&&tt.alternate===null&&(tt.flags|=33554434),tt}function Ee(tt,Oe,st,zt){return Oe===null||Oe.tag!==6?(Oe=Yd(st,tt.mode,zt),Oe.return=tt,Oe):(Oe=L(Oe,st),Oe.return=tt,Oe)}function ke(tt,Oe,st,zt){var pn=st.type;return pn===Aa?Ht(tt,Oe,st.props.children,zt,st.key):Oe!==null&&(Oe.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===Ia&&ti(pn)===Oe.type)?(Oe=L(Oe,st.props),Jt(Oe,st),Oe.return=tt,Oe):(Oe=Ml(st.type,st.key,st.props,null,tt.mode,zt),Jt(Oe,st),Oe.return=tt,Oe)}function St(tt,Oe,st,zt){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==st.containerInfo||Oe.stateNode.implementation!==st.implementation?(Oe=gm(st,tt.mode,zt),Oe.return=tt,Oe):(Oe=L(Oe,st.children||[]),Oe.return=tt,Oe)}function Ht(tt,Oe,st,zt,pn){return Oe===null||Oe.tag!==7?(Oe=Ji(st,tt.mode,zt,pn),Oe.return=tt,Oe):(Oe=L(Oe,st),Oe.return=tt,Oe)}function Zt(tt,Oe,st){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=Yd(""+Oe,tt.mode,st),Oe.return=tt,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case Hh:return st=Ml(Oe.type,Oe.key,Oe.props,null,tt.mode,st),Jt(st,Oe),st.return=tt,st;case uo:return Oe=gm(Oe,tt.mode,st),Oe.return=tt,Oe;case Ia:var zt=Oe._init;return Oe=zt(Oe._payload),Zt(tt,Oe,st)}if(Sa(Oe)||s(Oe))return Oe=Ji(Oe,tt.mode,st,null),Oe.return=tt,Oe;if(typeof Oe.then=="function")return Zt(tt,sn(Oe),st);if(Oe.$$typeof===Ho)return Zt(tt,Eh(tt,Oe),st);nn(tt,Oe)}return null}function en(tt,Oe,st,zt){var pn=Oe!==null?Oe.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return pn!==null?null:Ee(tt,Oe,""+st,zt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case Hh:return st.key===pn?ke(tt,Oe,st,zt):null;case uo:return st.key===pn?St(tt,Oe,st,zt):null;case Ia:return pn=st._init,st=pn(st._payload),en(tt,Oe,st,zt)}if(Sa(st)||s(st))return pn!==null?null:Ht(tt,Oe,st,zt,null);if(typeof st.then=="function")return en(tt,Oe,sn(st),zt);if(st.$$typeof===Ho)return en(tt,Oe,Eh(tt,st),zt);nn(tt,st)}return null}function Hn(tt,Oe,st,zt,pn){if(typeof zt=="string"&&zt!==""||typeof zt=="number"||typeof zt=="bigint")return tt=tt.get(st)||null,Ee(Oe,tt,""+zt,pn);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case Hh:return tt=tt.get(zt.key===null?st:zt.key)||null,ke(Oe,tt,zt,pn);case uo:return tt=tt.get(zt.key===null?st:zt.key)||null,St(Oe,tt,zt,pn);case Ia:var tr=zt._init;return zt=tr(zt._payload),Hn(tt,Oe,st,zt,pn)}if(Sa(zt)||s(zt))return tt=tt.get(st)||null,Ht(Oe,tt,zt,pn,null);if(typeof zt.then=="function")return Hn(tt,Oe,st,sn(zt),pn);if(zt.$$typeof===Ho)return Hn(tt,Oe,st,Eh(Oe,zt),pn);nn(Oe,zt)}return null}function qa(tt,Oe,st,zt){for(var pn=null,tr=null,Dn=Oe,Ci=Oe=0,Pr=null;Dn!==null&&Ci<st.length;Ci++){Dn.index>Ci?(Pr=Dn,Dn=null):Pr=Dn.sibling;var ei=en(tt,Dn,st[Ci],zt);if(ei===null){Dn===null&&(Dn=Pr);break}h&&Dn&&ei.alternate===null&&p(tt,Dn),Oe=z(ei,Oe,Ci),tr===null?pn=ei:tr.sibling=ei,tr=ei,Dn=Pr}if(Ci===st.length)return S(tt,Dn),xi&&X(tt,Ci),pn;if(Dn===null){for(;Ci<st.length;Ci++)Dn=Zt(tt,st[Ci],zt),Dn!==null&&(Oe=z(Dn,Oe,Ci),tr===null?pn=Dn:tr.sibling=Dn,tr=Dn);return xi&&X(tt,Ci),pn}for(Dn=w(Dn);Ci<st.length;Ci++)Pr=Hn(Dn,tt,Ci,st[Ci],zt),Pr!==null&&(h&&Pr.alternate!==null&&Dn.delete(Pr.key===null?Ci:Pr.key),Oe=z(Pr,Oe,Ci),tr===null?pn=Pr:tr.sibling=Pr,tr=Pr);return h&&Dn.forEach(function(tl){return p(tt,tl)}),xi&&X(tt,Ci),pn}function ec(tt,Oe,st,zt){if(st==null)throw Error(r(151));for(var pn=null,tr=null,Dn=Oe,Ci=Oe=0,Pr=null,ei=st.next();Dn!==null&&!ei.done;Ci++,ei=st.next()){Dn.index>Ci?(Pr=Dn,Dn=null):Pr=Dn.sibling;var tl=en(tt,Dn,ei.value,zt);if(tl===null){Dn===null&&(Dn=Pr);break}h&&Dn&&tl.alternate===null&&p(tt,Dn),Oe=z(tl,Oe,Ci),tr===null?pn=tl:tr.sibling=tl,tr=tl,Dn=Pr}if(ei.done)return S(tt,Dn),xi&&X(tt,Ci),pn;if(Dn===null){for(;!ei.done;Ci++,ei=st.next())ei=Zt(tt,ei.value,zt),ei!==null&&(Oe=z(ei,Oe,Ci),tr===null?pn=ei:tr.sibling=ei,tr=ei);return xi&&X(tt,Ci),pn}for(Dn=w(Dn);!ei.done;Ci++,ei=st.next())ei=Hn(Dn,tt,Ci,ei.value,zt),ei!==null&&(h&&ei.alternate!==null&&Dn.delete(ei.key===null?Ci:ei.key),Oe=z(ei,Oe,Ci),tr===null?pn=ei:tr.sibling=ei,tr=ei);return h&&Dn.forEach(function(ud){return p(tt,ud)}),xi&&X(tt,Ci),pn}function tc(tt,Oe,st,zt){if(typeof st=="object"&&st!==null&&st.type===Aa&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case Hh:e:{for(var pn=st.key;Oe!==null;){if(Oe.key===pn){if(pn=st.type,pn===Aa){if(Oe.tag===7){S(tt,Oe.sibling),zt=L(Oe,st.props.children),zt.return=tt,tt=zt;break e}}else if(Oe.elementType===pn||typeof pn=="object"&&pn!==null&&pn.$$typeof===Ia&&ti(pn)===Oe.type){S(tt,Oe.sibling),zt=L(Oe,st.props),Jt(zt,st),zt.return=tt,tt=zt;break e}S(tt,Oe);break}else p(tt,Oe);Oe=Oe.sibling}st.type===Aa?(zt=Ji(st.props.children,tt.mode,zt,st.key),zt.return=tt,tt=zt):(zt=Ml(st.type,st.key,st.props,null,tt.mode,zt),Jt(zt,st),zt.return=tt,tt=zt)}return ue(tt);case uo:e:{for(pn=st.key;Oe!==null;){if(Oe.key===pn)if(Oe.tag===4&&Oe.stateNode.containerInfo===st.containerInfo&&Oe.stateNode.implementation===st.implementation){S(tt,Oe.sibling),zt=L(Oe,st.children||[]),zt.return=tt,tt=zt;break e}else{S(tt,Oe);break}else p(tt,Oe);Oe=Oe.sibling}zt=gm(st,tt.mode,zt),zt.return=tt,tt=zt}return ue(tt);case Ia:return pn=st._init,st=pn(st._payload),tc(tt,Oe,st,zt)}if(Sa(st))return qa(tt,Oe,st,zt);if(s(st)){if(pn=s(st),typeof pn!="function")throw Error(r(150));return st=pn.call(st),ec(tt,Oe,st,zt)}if(typeof st.then=="function")return tc(tt,Oe,sn(st),zt);if(st.$$typeof===Ho)return tc(tt,Oe,Eh(tt,st),zt);nn(tt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,Oe!==null&&Oe.tag===6?(S(tt,Oe.sibling),zt=L(Oe,st),zt.return=tt,tt=zt):(S(tt,Oe),zt=Yd(st,tt.mode,zt),zt.return=tt,tt=zt),ue(tt)):S(tt,Oe)}return function(tt,Oe,st,zt){try{_u=0;var pn=tc(tt,Oe,st,zt);return yu=null,pn}catch(Dn){if(Dn===Ku)throw Dn;var tr=t(29,Dn,null,tt.mode);return tr.lanes=zt,tr.return=tt,tr}finally{}}}function Ln(h,p){h=js,B(vo,h),B(mi,p),js=h|p.baseLanes}function Ai(){B(vo,js),B(mi,mi.current)}function Di(){js=vo.current,M(mi),M(vo)}function or(h){var p=h.alternate;B(es,es.current&1),B(za,h),$i===null&&(p===null||mi.current!==null||p.memoizedState!==null)&&($i=h)}function kr(h){if(h.tag===22){if(B(es,es.current),B(za,h),$i===null){var p=h.alternate;p!==null&&p.memoizedState!==null&&($i=h)}}else pr()}function pr(){B(es,es.current),B(za,za.current)}function ln(h){M(za),$i===h&&($i=null),M(es)}function Gi(h){for(var p=h;p!==null;){if(p.tag===13){var S=p.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||rp(S)||Fc(S)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function ni(){throw Error(r(321))}function K(h,p){if(p===null)return!1;for(var S=0;S<p.length&&S<h.length;S++)if(!Ys(h[S],p[S]))return!1;return!0}function le(h,p,S,w,L,z){return xu=z,qn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,bn.H=h===null||h.memoizedState===null?Zu:aa,Ju=!1,z=S(w,L),Ju=!1,jc&&(z=Qe(p,S,w,L)),Ce(h),z}function Ce(h){bn.H=Dr;var p=Sn!==null&&Sn.next!==null;if(xu=0,Ti=Sn=qn=null,yo=!1,qc=0,vs=null,p)throw Error(r(300));h===null||ir||(h=h.dependencies,h!==null&&Tc(h)&&(ir=!0))}function Qe(h,p,S,w){qn=h;var L=0;do{if(jc&&(vs=null),qc=0,jc=!1,25<=L)throw Error(r(301));if(L+=1,Ti=Sn=null,h.updateQueue!=null){var z=h.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}bn.H=Va,z=p(S,w)}while(jc);return z}function et(){var h=bn.H,p=h.useState()[0];return p=typeof p.then=="function"?Me(p):p,h=h.useState()[0],(Sn!==null?Sn.memoizedState:null)!==h&&(qn.flags|=1024),p}function ft(){var h=pp!==0;return pp=0,h}function Ft(h,p,S){p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~S}function Bt(h){if(yo){for(h=h.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}yo=!1}xu=0,Ti=Sn=qn=null,jc=!1,qc=pp=0,vs=null}function q(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ti===null?qn.memoizedState=Ti=h:Ti=Ti.next=h,Ti}function me(){if(Sn===null){var h=qn.alternate;h=h!==null?h.memoizedState:null}else h=Sn.next;var p=Ti===null?qn.memoizedState:Ti.next;if(p!==null)Ti=p,Sn=h;else{if(h===null)throw qn.alternate===null?Error(r(467)):Error(r(310));Sn=h,h={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},Ti===null?qn.memoizedState=Ti=h:Ti=Ti.next=h}return Ti}function Me(h){var p=qc;return qc+=1,vs===null&&(vs=[]),h=Tt(vs,h,p),p=qn,(Ti===null?p.memoizedState:Ti.next)===null&&(p=p.alternate,bn.H=p===null||p.memoizedState===null?Zu:aa),h}function pe(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Me(h);if(h.$$typeof===Ho)return us(h)}throw Error(r(438,String(h)))}function Be(h){var p=null,S=qn.updateQueue;if(S!==null&&(p=S.memoCache),p==null){var w=qn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(p={data:w.data.map(function(L){return L.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),S===null&&(S=sd(),qn.updateQueue=S),S.memoCache=p,S=p.data[p.index],S===void 0)for(S=p.data[p.index]=Array(h),w=0;w<h;w++)S[w]=lv;return p.index++,S}function qe(h,p){return typeof p=="function"?p(h):p}function ct(h){var p=me();return vt(p,Sn,h)}function vt(h,p,S){var w=h.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=S;var L=h.baseQueue,z=w.pending;if(z!==null){if(L!==null){var ue=L.next;L.next=z.next,z.next=ue}p.baseQueue=L=z,w.pending=null}if(z=h.baseState,L===null)h.memoizedState=z;else{p=L.next;var Ee=ue=null,ke=null,St=p,Ht=!1;do{var Zt=St.lane&-536870913;if(Zt!==St.lane?(ci&Zt)===Zt:(xu&Zt)===Zt){var en=St.revertLane;if(en===0)ke!==null&&(ke=ke.next={lane:0,revertLane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),Zt===Ha&&(Ht=!0);else if((xu&en)===en){St=St.next,en===Ha&&(Ht=!0);continue}else Zt={lane:0,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},ke===null?(Ee=ke=Zt,ue=z):ke=ke.next=Zt,qn.lanes|=en,Ya|=en;Zt=St.action,Ju&&S(z,Zt),z=St.hasEagerState?St.eagerState:S(z,Zt)}else en={lane:Zt,revertLane:St.revertLane,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},ke===null?(Ee=ke=en,ue=z):ke=ke.next=en,qn.lanes|=Zt,Ya|=Zt;St=St.next}while(St!==null&&St!==p);if(ke===null?ue=z:ke.next=Ee,!Ys(z,h.memoizedState)&&(ir=!0,Ht&&(S=Yc,S!==null)))throw S;h.memoizedState=z,h.baseState=ue,h.baseQueue=ke,w.lastRenderedState=z}return L===null&&(w.lanes=0),[h.memoizedState,w.dispatch]}function wt(h){var p=me(),S=p.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=h;var w=S.dispatch,L=S.pending,z=p.memoizedState;if(L!==null){S.pending=null;var ue=L=L.next;do z=h(z,ue.action),ue=ue.next;while(ue!==L);Ys(z,p.memoizedState)||(ir=!0),p.memoizedState=z,p.baseQueue===null&&(p.baseState=z),S.lastRenderedState=z}return[z,w]}function Wt(h,p,S){var w=qn,L=me(),z=xi;if(z){if(S===void 0)throw Error(r(407));S=S()}else S=p();var ue=!Ys((Sn||L).memoizedState,S);if(ue&&(L.memoizedState=S,ir=!0),L=L.queue,ml(fn.bind(null,w,L,h),[h]),L.getSnapshot!==p||ue||Ti!==null&&Ti.memoizedState.tag&1){if(w.flags|=2048,Or(9,Yt.bind(null,w,L,S,p),{destroy:void 0},null),Xi===null)throw Error(r(349));z||(xu&60)!==0||kt(w,p,S)}return S}function kt(h,p,S){h.flags|=16384,h={getSnapshot:p,value:S},p=qn.updateQueue,p===null?(p=sd(),qn.updateQueue=p,p.stores=[h]):(S=p.stores,S===null?p.stores=[h]:S.push(h))}function Yt(h,p,S,w){p.value=S,p.getSnapshot=w,an(p)&&$n(h)}function fn(h,p,S){return S(function(){an(p)&&$n(h)})}function an(h){var p=h.getSnapshot;h=h.value;try{var S=p();return!Ys(h,S)}catch{return!0}}function $n(h){var p=Ke(h,2);p!==null&&hs(p,h,2)}function rn(h){var p=q();if(typeof h=="function"){var S=h;if(h=S(),Ju){ee(!0);try{S()}finally{ee(!1)}}}return p.memoizedState=p.baseState=h,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:h},p}function cn(h,p,S,w){return h.baseState=S,vt(h,Sn,typeof w=="function"?w:qe)}function $t(h,p,S,w,L){if(Ou(h))throw Error(r(485));if(h=p.action,h!==null){var z={payload:L,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){z.listeners.push(ue)}};bn.T!==null?S(!0):z.isTransition=!1,w(z),S=p.pending,S===null?(z.next=p.pending=z,Si(p,z)):(z.next=S.next,p.pending=S.next=z)}}function Si(h,p){var S=p.action,w=p.payload,L=h.state;if(p.isTransition){var z=bn.T,ue={};bn.T=ue;try{var Ee=S(L,w),ke=bn.S;ke!==null&&ke(ue,Ee),gn(h,p,Ee)}catch(St){Bi(h,p,St)}finally{bn.T=z}}else try{z=S(L,w),gn(h,p,z)}catch(St){Bi(h,p,St)}}function gn(h,p,S){S!==null&&typeof S=="object"&&typeof S.then=="function"?S.then(function(w){_n(h,p,w)},function(w){return Bi(h,p,w)}):_n(h,p,S)}function _n(h,p,S){p.status="fulfilled",p.value=S,dn(p),h.state=S,p=h.pending,p!==null&&(S=p.next,S===p?h.pending=null:(S=S.next,p.next=S,Si(h,S)))}function Bi(h,p,S){var w=h.pending;if(h.pending=null,w!==null){w=w.next;do p.status="rejected",p.reason=S,dn(p),p=p.next;while(p!==w)}h.action=null}function dn(h){h=h.listeners;for(var p=0;p<h.length;p++)(0,h[p])()}function xn(h,p){return p}function Pn(h,p){if(xi){var S=Xi.formState;if(S!==null){e:{var w=qn;if(xi){if(ms){var L=ap(ms,gs);if(L){ms=wl(L),w=Ma(L);break e}}Le(w)}w=!1}w&&(p=S[0])}}S=q(),S.memoizedState=S.baseState=p,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xn,lastRenderedState:p},S.queue=w,S=Sf.bind(null,qn,w),w.dispatch=S,w=rn(!1);var z=vi.bind(null,qn,!1,w.queue);return w=q(),L={state:p,dispatch:null,action:h,pending:null},w.queue=L,S=$t.bind(null,qn,L,z,S),L.dispatch=S,w.memoizedState=h,[p,S,!1]}function Ui(h){var p=me();return Wn(p,Sn,h)}function Wn(h,p,S){p=vt(h,p,xn)[0],h=ct(qe)[0],p=typeof p=="object"&&p!==null&&typeof p.then=="function"?Me(p):p;var w=me(),L=w.queue,z=L.dispatch;return S!==w.memoizedState&&(qn.flags|=2048,Or(9,Oi.bind(null,L,S),{destroy:void 0},null)),[p,z,h]}function Oi(h,p){h.action=p}function mr(h){var p=me(),S=Sn;if(S!==null)return Wn(p,S,h);me(),p=p.memoizedState,S=me();var w=S.queue.dispatch;return S.memoizedState=h,[p,w,!1]}function Or(h,p,S,w){return h={tag:h,create:p,inst:S,deps:w,next:null},p=qn.updateQueue,p===null&&(p=sd(),qn.updateQueue=p),S=p.lastEffect,S===null?p.lastEffect=h.next=h:(w=S.next,S.next=h,h.next=w,p.lastEffect=h),h}function Zr(){return me().memoizedState}function jl(h,p,S,w){var L=q();qn.flags|=h,L.memoizedState=Or(1|p,S,{destroy:void 0},w===void 0?null:w)}function ql(h,p,S,w){var L=me();w=w===void 0?null:w;var z=L.memoizedState.inst;Sn!==null&&w!==null&&K(w,Sn.memoizedState.deps)?L.memoizedState=Or(p,S,z,w):(qn.flags|=h,L.memoizedState=Or(1|p,S,z,w))}function Uu(h,p){jl(8390656,8,h,p)}function ml(h,p){ql(2048,8,h,p)}function Af(h,p){return ql(4,2,h,p)}function Uo(h,p){return ql(4,4,h,p)}function no(h,p){if(typeof p=="function"){h=h();var S=p(h);return function(){typeof S=="function"?S():p(null)}}if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function Oo(h,p,S){S=S!=null?S.concat([h]):null,ql(4,4,no.bind(null,p,h),S)}function da(){}function gl(h,p){var S=me();p=p===void 0?null:p;var w=S.memoizedState;return p!==null&&K(p,w[1])?w[0]:(S.memoizedState=[h,p],h)}function vl(h,p){var S=me();p=p===void 0?null:p;var w=S.memoizedState;if(p!==null&&K(p,w[1]))return w[0];if(w=h(),Ju){ee(!0);try{h()}finally{ee(!1)}}return S.memoizedState=[w,p],w}function Kl(h,p,S){return S===void 0||(xu&1073741824)!==0?h.memoizedState=p:(h.memoizedState=S,h=Rf(),qn.lanes|=h,Ya|=h,S)}function Sc(h,p,S,w){return Ys(S,p)?S:mi.current!==null?(h=Kl(h,S,w),Ys(h,p)||(ir=!0),h):(xu&42)===0?(ir=!0,h.memoizedState=S):(h=Rf(),qn.lanes|=h,Ya|=h,p)}function Jl(h,p,S,w,L){var z=fu();ds(z!==0&&8>z?z:8);var ue=bn.T,Ee={};bn.T=Ee,vi(h,!1,p,S);try{var ke=L(),St=bn.S;if(St!==null&&St(Ee,ke),ke!==null&&typeof ke=="object"&&typeof ke.then=="function"){var Ht=Vt(ke,w);li(h,p,Ht,nr(h))}else li(h,p,w,nr(h))}catch(Zt){li(h,p,{then:function(){},status:"rejected",reason:Zt},nr())}finally{ds(z),bn.T=ue}}function Zs(h){var p=h.memoizedState;if(p!==null)return p;p={memoizedState:fo,baseState:fo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:fo},next:null};var S={};return p.next={memoizedState:S,baseState:S,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qe,lastRenderedState:S},next:null},h.memoizedState=p,h=h.alternate,h!==null&&(h.memoizedState=p),p}function Lo(){return us(ko)}function Zl(){return me().memoizedState}function Ir(){return me().memoizedState}function bc(h){for(var p=h.return;p!==null;){switch(p.tag){case 24:case 3:var S=nr();h=Et(S);var w=_t(p,h,S);w!==null&&(hs(w,p,S),ot(w,p,S)),p={cache:xl()},h.payload=p;return}p=p.return}}function Mc(h,p,S){var w=nr();S={lane:w,revertLane:0,action:S,hasEagerState:!1,eagerState:null,next:null},Ou(h)?Fr(p,S):(S=$e(h,p,S,w),S!==null&&(hs(S,h,w),pa(S,p,w)))}function Sf(h,p,S){var w=nr();li(h,p,S,w)}function li(h,p,S,w){var L={lane:w,revertLane:0,action:S,hasEagerState:!1,eagerState:null,next:null};if(Ou(h))Fr(p,L);else{var z=h.alternate;if(h.lanes===0&&(z===null||z.lanes===0)&&(z=p.lastRenderedReducer,z!==null))try{var ue=p.lastRenderedState,Ee=z(ue,S);if(L.hasEagerState=!0,L.eagerState=Ee,Ys(Ee,ue))return ut(h,p,L,0),Xi===null&&ie(),!1}catch{}finally{}if(S=$e(h,p,L,w),S!==null)return hs(S,h,w),pa(S,p,w),!0}return!1}function vi(h,p,S,w){if(w={lane:2,revertLane:it(),action:w,hasEagerState:!1,eagerState:null,next:null},Ou(h)){if(p)throw Error(r(479))}else p=$e(h,S,w,2),p!==null&&hs(p,h,2)}function Ou(h){var p=h.alternate;return h===qn||p!==null&&p===qn}function Fr(h,p){jc=yo=!0;var S=h.pending;S===null?p.next=p:(p.next=S.next,S.next=p),h.pending=p}function pa(h,p,S){if((S&4194176)!==0){var w=p.lanes;w&=h.pendingLanes,S|=w,p.lanes=S,se(h,S)}}function Qs(h,p,S,w){p=h.memoizedState,S=S(w,p),S=S==null?p:qd({},p,S),h.memoizedState=S,h.lanes===0&&(h.updateQueue.baseState=S)}function Ql(h,p,S,w,L,z,ue){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(w,z,ue):p.prototype&&p.prototype.isPureReactComponent?!He(S,w)||!He(L,z):!0}function bf(h,p,S,w){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(S,w),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(S,w),p.state!==h&&Jo.enqueueReplaceState(p,p.state,null)}function ma(h,p){var S=p;if("ref"in p){S={};for(var w in p)w!=="ref"&&(S[w]=p[w])}if(h=h.defaultProps){S===p&&(S=qd({},S));for(var L in h)S[L]===void 0&&(S[L]=h[L])}return S}function io(h,p){try{var S=h.onUncaughtError;S(p.value,{componentStack:p.stack})}catch(w){setTimeout(function(){throw w})}}function gr(h,p,S){try{var w=h.onCaughtError;w(S.value,{componentStack:S.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function ga(h,p,S){return S=Et(S),S.tag=3,S.payload={element:null},S.callback=function(){io(h,p)},S}function Ba(h){return h=Et(h),h.tag=3,h}function bs(h,p,S,w){var L=S.type.getDerivedStateFromError;if(typeof L=="function"){var z=w.value;h.payload=function(){return L(z)},h.callback=function(){gr(p,S,w)}}var ue=S.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(h.callback=function(){gr(p,S,w),typeof L!="function"&&(Qu===null?Qu=new Set([this]):Qu.add(this));var Ee=w.stack;this.componentDidCatch(w.value,{componentStack:Ee!==null?Ee:""})})}function xh(h,p,S,w,L){if(S.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(p=S.alternate,p!==null&&Tf(p,S,L,!0),S=za.current,S!==null){switch(S.tag){case 13:return $i===null?ou():S.alternate===null&&sr===0&&(sr=3),S.flags&=-257,S.flags|=65536,S.lanes=L,w===vu?S.flags|=16384:(p=S.updateQueue,p===null?S.updateQueue=new Set([w]):p.add(w),bl(h,w,L)),!1;case 22:return S.flags|=65536,w===vu?S.flags|=16384:(p=S.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([w])},S.updateQueue=p):(S=p.retryQueue,S===null?p.retryQueue=new Set([w]):S.add(w)),bl(h,w,L)),!1}throw Error(r(435,S.tag))}return bl(h,w,L),ou(),!1}if(xi)return p=za.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=L,w!==Ga&&(h=Error(r(422),{cause:w}),Nt(de(h,S)))):(w!==Ga&&(p=Error(r(423),{cause:w}),Nt(de(p,S))),h=h.current.alternate,h.flags|=65536,L&=-L,h.lanes|=L,w=de(w,S),L=ga(h.stateNode,w,L),xe(h,L),sr!==4&&(sr=2)),!1;var z=Error(r(520),{cause:w});if(z=de(z,S),Jc===null?Jc=[z]:Jc.push(z),sr!==4&&(sr=2),p===null)return!0;w=de(w,S),S=p;do{switch(S.tag){case 3:return S.flags|=65536,h=L&-L,S.lanes|=h,h=ga(S.stateNode,w,h),xe(S,h),!1;case 1:if(p=S.type,z=S.stateNode,(S.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Qu===null||!Qu.has(z))))return S.flags|=65536,L&=-L,S.lanes|=L,L=Ba(L),bs(L,h,S,w),xe(S,L),!1}S=S.return}while(S!==null);return!1}function bi(h,p,S,w){p.child=h===null?Ko(p,null,S,w):qo(p,h.child,S,w)}function yl(h,p,S,w,L){S=S.render;var z=p.ref;if("ref"in w){var ue={};for(var Ee in w)Ee!=="ref"&&(ue[Ee]=w[Ee])}else ue=w;return _l(p),w=le(h,p,S,ue,z,L),Ee=ft(),h!==null&&!ir?(Ft(h,p,L),$l(h,p,L)):(xi&&Ee&&ce(p),p.flags|=1,bi(h,p,w,L),p.child)}function Mf(h,p,S,w,L){if(h===null){var z=S.type;return typeof z=="function"&&!Yn(z)&&z.defaultProps===void 0&&S.compare===null?(p.tag=15,p.type=z,Ah(h,p,z,w,L)):(h=Ml(S.type,null,w,p,p.mode,L),h.ref=p.ref,h.return=p,p.child=h)}if(z=h.child,!lm(h,L)){var ue=z.memoizedProps;if(S=S.compare,S=S!==null?S:He,S(ue,w)&&h.ref===p.ref)return $l(h,p,L)}return p.flags|=1,h=lo(z,w),h.ref=p.ref,h.return=p,p.child=h}function Ah(h,p,S,w,L){if(h!==null){var z=h.memoizedProps;if(He(z,w)&&h.ref===p.ref)if(ir=!1,p.pendingProps=w=z,lm(h,L))(h.flags&131072)!==0&&(ir=!0);else return p.lanes=h.lanes,$l(h,p,L)}return vr(h,p,S,w,L)}function ls(h,p,S){var w=p.pendingProps,L=w.children,z=(p.stateNode._pendingVisibility&2)!==0,ue=h!==null?h.memoizedState:null;if(Gr(h,p),w.mode==="hidden"||z){if((p.flags&128)!==0){if(w=ue!==null?ue.baseLanes|S:S,h!==null){for(L=p.child=h.child,z=0;L!==null;)z=z|L.lanes|L.childLanes,L=L.sibling;p.childLanes=z&~w}else p.childLanes=0,p.child=null;return $s(h,p,w,S)}if((S&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},h!==null&&Gs(p,ue!==null?ue.cachePool:null),ue!==null?Ln(p,ue):Ai(),kr(p);else return p.lanes=p.childLanes=536870912,$s(h,p,ue!==null?ue.baseLanes|S:S,S)}else ue!==null?(Gs(p,ue.cachePool),Ln(p,ue),pr(),p.memoizedState=null):(h!==null&&Gs(p,null),Ai(),pr());return bi(h,p,L,S),p.child}function $s(h,p,S,w){var L=Fd();return L=L===null?null:{parent:Er?rr._currentValue:rr._currentValue2,pool:L},p.memoizedState={baseLanes:S,cachePool:L},h!==null&&Gs(p,null),Ai(),kr(p),h!==null&&Tf(h,p,w,!0),null}function Gr(h,p){var S=p.ref;if(S===null)h!==null&&h.ref!==null&&(p.flags|=2097664);else{if(typeof S!="function"&&typeof S!="object")throw Error(r(284));(h===null||h.ref!==S)&&(p.flags|=2097664)}}function vr(h,p,S,w,L){return _l(p),S=le(h,p,S,w,void 0,L),w=ft(),h!==null&&!ir?(Ft(h,p,L),$l(h,p,L)):(xi&&w&&ce(p),p.flags|=1,bi(h,p,S,L),p.child)}function Sh(h,p,S,w,L,z){return _l(p),p.updateQueue=null,S=Qe(p,w,S,L),Ce(h),w=ft(),h!==null&&!ir?(Ft(h,p,z),$l(h,p,z)):(xi&&w&&ce(p),p.flags|=1,bi(h,p,S,z),p.child)}function Ua(h,p,S,w,L){if(_l(p),p.stateNode===null){var z=Wo,ue=S.contextType;typeof ue=="object"&&ue!==null&&(z=us(ue)),z=new S(w,z),p.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=Jo,p.stateNode=z,z._reactInternals=p,z=p.stateNode,z.props=w,z.state=p.memoizedState,z.refs={},ht(p),ue=S.contextType,z.context=typeof ue=="object"&&ue!==null?us(ue):Wo,z.state=p.memoizedState,ue=S.getDerivedStateFromProps,typeof ue=="function"&&(Qs(p,S,ue,w),z.state=p.memoizedState),typeof S.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(ue=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),ue!==z.state&&Jo.enqueueReplaceState(z,z.state,null),Rt(p,w,z,L),We(),z.state=p.memoizedState),typeof z.componentDidMount=="function"&&(p.flags|=4194308),w=!0}else if(h===null){z=p.stateNode;var Ee=p.memoizedProps,ke=ma(S,Ee);z.props=ke;var St=z.context,Ht=S.contextType;ue=Wo,typeof Ht=="object"&&Ht!==null&&(ue=us(Ht));var Zt=S.getDerivedStateFromProps;Ht=typeof Zt=="function"||typeof z.getSnapshotBeforeUpdate=="function",Ee=p.pendingProps!==Ee,Ht||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Ee||St!==ue)&&bf(p,z,w,ue),Ol=!1;var en=p.memoizedState;z.state=en,Rt(p,w,z,L),We(),St=p.memoizedState,Ee||en!==St||Ol?(typeof Zt=="function"&&(Qs(p,S,Zt,w),St=p.memoizedState),(ke=Ol||Ql(p,S,ke,w,en,St,ue))?(Ht||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(p.flags|=4194308)):(typeof z.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=w,p.memoizedState=St),z.props=w,z.state=St,z.context=ue,w=ke):(typeof z.componentDidMount=="function"&&(p.flags|=4194308),w=!1)}else{z=p.stateNode,Lt(h,p),ue=p.memoizedProps,Ht=ma(S,ue),z.props=Ht,Zt=p.pendingProps,en=z.context,St=S.contextType,ke=Wo,typeof St=="object"&&St!==null&&(ke=us(St)),Ee=S.getDerivedStateFromProps,(St=typeof Ee=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ue!==Zt||en!==ke)&&bf(p,z,w,ke),Ol=!1,en=p.memoizedState,z.state=en,Rt(p,w,z,L),We();var Hn=p.memoizedState;ue!==Zt||en!==Hn||Ol||h!==null&&h.dependencies!==null&&Tc(h.dependencies)?(typeof Ee=="function"&&(Qs(p,S,Ee,w),Hn=p.memoizedState),(Ht=Ol||Ql(p,S,Ht,w,en,Hn,ke)||h!==null&&h.dependencies!==null&&Tc(h.dependencies))?(St||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(w,Hn,ke),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(w,Hn,ke)),typeof z.componentDidUpdate=="function"&&(p.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof z.componentDidUpdate!="function"||ue===h.memoizedProps&&en===h.memoizedState||(p.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ue===h.memoizedProps&&en===h.memoizedState||(p.flags|=1024),p.memoizedProps=w,p.memoizedState=Hn),z.props=w,z.state=Hn,z.context=ke,w=Ht):(typeof z.componentDidUpdate!="function"||ue===h.memoizedProps&&en===h.memoizedState||(p.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ue===h.memoizedProps&&en===h.memoizedState||(p.flags|=1024),w=!1)}return z=w,Gr(h,p),w=(p.flags&128)!==0,z||w?(z=p.stateNode,S=w&&typeof S.getDerivedStateFromError!="function"?null:z.render(),p.flags|=1,h!==null&&w?(p.child=qo(p,h.child,null,L),p.child=qo(p,null,S,L)):bi(h,p,S,L),p.memoizedState=z.state,h=p.child):h=$l(h,p,L),h}function nv(h,p,S,w){return at(),p.flags|=256,bi(h,p,S,w),p.child}function Pd(h){return{baseLanes:h,cachePool:Rh()}}function ro(h,p,S){return h=h!==null?h.childLanes&~S:0,p&&(h|=ja),h}function bh(h,p,S){var w=p.pendingProps,L=!1,z=(p.flags&128)!==0,ue;if((ue=z)||(ue=h!==null&&h.memoizedState===null?!1:(es.current&2)!==0),ue&&(L=!0,p.flags&=-129),ue=(p.flags&32)!==0,p.flags&=-33,h===null){if(xi){if(L?or(p):pr(),xi){var Ee=ms,ke;(ke=Ee)&&(Ee=Pm(Ee,gs),Ee!==null?(p.memoizedState={dehydrated:Ee,treeContext:Yu!==null?{id:Fa,overflow:mo}:null,retryLane:536870912},ke=t(18,null,null,0),ke.stateNode=Ee,ke.return=p,p.child=ke,Rs=p,ms=null,ke=!0):ke=!1),ke||Le(p)}if(Ee=p.memoizedState,Ee!==null&&(Ee=Ee.dehydrated,Ee!==null))return Fc(Ee)?p.lanes=16:p.lanes=536870912,null;ln(p)}return Ee=w.children,w=w.fallback,L?(pr(),L=p.mode,Ee=lr({mode:"hidden",children:Ee},L),w=Ji(w,L,S,null),Ee.return=p,w.return=p,Ee.sibling=w,p.child=Ee,L=p.child,L.memoizedState=Pd(S),L.childLanes=ro(h,ue,S),p.memoizedState=vp,w):(or(p),Mh(p,Ee))}if(ke=h.memoizedState,ke!==null&&(Ee=ke.dehydrated,Ee!==null)){if(z)p.flags&256?(or(p),p.flags&=-257,p=Po(h,p,S)):p.memoizedState!==null?(pr(),p.child=h.child,p.flags|=128,p=null):(pr(),L=w.fallback,Ee=p.mode,w=lr({mode:"visible",children:w.children},Ee),L=Ji(L,Ee,S,null),L.flags|=2,w.return=p,L.return=p,w.sibling=L,p.child=w,qo(p,h.child,null,S),w=p.child,w.memoizedState=Pd(S),w.childLanes=ro(h,ue,S),p.memoizedState=vp,p=L);else if(or(p),Fc(Ee))ue=sp(Ee).digest,w=Error(r(419)),w.stack="",w.digest=ue,Nt({value:w,source:null,stack:null}),p=Po(h,p,S);else if(ir||Tf(h,p,S,!1),ue=(S&h.childLanes)!==0,ir||ue){if(ue=Xi,ue!==null){if(w=S&-S,(w&42)!==0)w=1;else switch(w){case 2:w=1;break;case 8:w=4;break;case 32:w=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:w=64;break;case 268435456:w=134217728;break;default:w=0}if(w=(w&(ue.suspendedLanes|S))!==0?0:w,w!==0&&w!==ke.retryLane)throw ke.retryLane=w,Ke(h,w),hs(ue,h,w),gp}rp(Ee)||ou(),p=Po(h,p,S)}else rp(Ee)?(p.flags|=128,p.child=h.child,p=re.bind(null,h),Om(Ee,p),p=null):(h=ke.treeContext,Rr&&(ms=Zh(Ee),Rs=p,xi=!0,go=null,gs=!1,h!==null&&(sa[$r++]=Fa,sa[$r++]=mo,sa[$r++]=Yu,Fa=h.id,mo=h.overflow,Yu=p)),p=Mh(p,w.children),p.flags|=4096);return p}return L?(pr(),L=w.fallback,Ee=p.mode,ke=h.child,z=ke.sibling,w=lo(ke,{mode:"hidden",children:w.children}),w.subtreeFlags=ke.subtreeFlags&31457280,z!==null?L=lo(z,L):(L=Ji(L,Ee,S,null),L.flags|=2),L.return=p,w.return=p,w.sibling=L,p.child=w,w=L,L=p.child,Ee=h.child.memoizedState,Ee===null?Ee=Pd(S):(ke=Ee.cachePool,ke!==null?(z=Er?rr._currentValue:rr._currentValue2,ke=ke.parent!==z?{parent:z,pool:z}:ke):ke=Rh(),Ee={baseLanes:Ee.baseLanes|S,cachePool:ke}),L.memoizedState=Ee,L.childLanes=ro(h,ue,S),p.memoizedState=vp,w):(or(p),S=h.child,h=S.sibling,S=lo(S,{mode:"visible",children:w.children}),S.return=p,S.sibling=null,h!==null&&(ue=p.deletions,ue===null?(p.deletions=[h],p.flags|=16):ue.push(h)),p.child=S,p.memoizedState=null,S)}function Mh(h,p){return p=lr({mode:"visible",children:p},h.mode),p.return=h,h.child=p}function lr(h,p){return Fh(h,p,0,null)}function Po(h,p,S){return qo(p,h.child,null,S),h=Mh(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function Nd(h,p,S){h.lanes|=p;var w=h.alternate;w!==null&&(w.lanes|=p),Th(h.return,p,S)}function om(h,p,S,w,L){var z=h.memoizedState;z===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:w,tail:S,tailMode:L}:(z.isBackwards=p,z.rendering=null,z.renderingStartTime=0,z.last=w,z.tail=S,z.tailMode=L)}function Id(h,p,S){var w=p.pendingProps,L=w.revealOrder,z=w.tail;if(bi(h,p,w.children,S),w=es.current,(w&2)!==0)w=w&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&Nd(h,S,p);else if(h.tag===19)Nd(h,S,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}w&=1}switch(B(es,w),L){case"forwards":for(S=p.child,L=null;S!==null;)h=S.alternate,h!==null&&Gi(h)===null&&(L=S),S=S.sibling;S=L,S===null?(L=p.child,p.child=null):(L=S.sibling,S.sibling=null),om(p,!1,L,S,z);break;case"backwards":for(S=null,L=p.child,p.child=null;L!==null;){if(h=L.alternate,h!==null&&Gi(h)===null){p.child=L;break}h=L.sibling,L.sibling=S,S=L,L=h}om(p,!0,S,null,z);break;case"together":om(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function $l(h,p,S){if(h!==null&&(p.dependencies=h.dependencies),Ya|=p.lanes,(S&p.childLanes)===0)if(h!==null){if(Tf(h,p,S,!1),(S&p.childLanes)===0)return null}else return null;if(h!==null&&p.child!==h.child)throw Error(r(153));if(p.child!==null){for(h=p.child,S=lo(h,h.pendingProps),p.child=S,S.return=p;h.sibling!==null;)h=h.sibling,S=S.sibling=lo(h,h.pendingProps),S.return=p;S.sibling=null}return p.child}function lm(h,p){return(h.lanes&p)!==0?!0:(h=h.dependencies,!!(h!==null&&Tc(h)))}function hy(h,p,S){switch(p.tag){case 3:oe(p,p.stateNode.containerInfo),No(p,rr,h.memoizedState.cache),at();break;case 27:case 5:Se(p);break;case 4:oe(p,p.stateNode.containerInfo);break;case 10:No(p,p.type,p.memoizedProps.value);break;case 13:var w=p.memoizedState;if(w!==null)return w.dehydrated!==null?(or(p),p.flags|=128,null):(S&p.child.childLanes)!==0?bh(h,p,S):(or(p),h=$l(h,p,S),h!==null?h.sibling:null);or(p);break;case 19:var L=(h.flags&128)!==0;if(w=(S&p.childLanes)!==0,w||(Tf(h,p,S,!1),w=(S&p.childLanes)!==0),L){if(w)return Id(h,p,S);p.flags|=128}if(L=p.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),B(es,es.current),w)break;return null;case 22:case 23:return p.lanes=0,ls(h,p,S);case 24:No(p,rr,h.memoizedState.cache)}return $l(h,p,S)}function um(h,p,S){if(h!==null)if(h.memoizedProps!==p.pendingProps)ir=!0;else{if(!lm(h,S)&&(p.flags&128)===0)return ir=!1,hy(h,p,S);ir=(h.flags&131072)!==0}else ir=!1,xi&&(p.flags&1048576)!==0&&J(p,pu,p.index);switch(p.lanes=0,p.tag){case 16:e:{h=p.pendingProps;var w=p.elementType,L=w._init;if(w=L(w._payload),p.type=w,typeof w=="function")Yn(w)?(h=ma(w,h),p.tag=1,p=Ua(null,p,w,h,S)):(p.tag=0,p=vr(null,p,w,h,S));else{if(w!=null){if(L=w.$$typeof,L===Vh){p.tag=11,p=yl(null,p,w,h,S);break e}else if(L===kh){p.tag=14,p=Mf(null,p,w,h,S);break e}}throw p=a(w)||w,Error(r(306,p,""))}}return p;case 0:return vr(h,p,p.type,p.pendingProps,S);case 1:return w=p.type,L=ma(w,p.pendingProps),Ua(h,p,w,L,S);case 3:e:{if(oe(p,p.stateNode.containerInfo),h===null)throw Error(r(387));var z=p.pendingProps;L=p.memoizedState,w=L.element,Lt(h,p),Rt(p,z,null,S);var ue=p.memoizedState;if(z=ue.cache,No(p,rr,z),z!==L.cache&&Lu(p,[rr],S,!0),We(),z=ue.element,Rr&&L.isDehydrated)if(L={element:z,isDehydrated:!1,cache:ue.cache},p.updateQueue.baseState=L,p.memoizedState=L,p.flags&256){p=nv(h,p,z,S);break e}else if(z!==w){w=de(Error(r(424)),p),Nt(w),p=nv(h,p,z,S);break e}else for(Rr&&(ms=Lm(p.stateNode.containerInfo),Rs=p,xi=!0,go=null,gs=!0),S=Ko(p,null,z,S),p.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(at(),z===w){p=$l(h,p,S);break e}bi(h,p,z,S)}p=p.child}return p;case 26:if(Ta)return Gr(h,p),h===null?(S=fp(p.type,null,p.pendingProps,null))?p.memoizedState=S:xi||(p.stateNode=Hc(p.type,p.pendingProps,Ul.current,p)):p.memoizedState=fp(p.type,h.memoizedProps,p.pendingProps,h.memoizedState),null;case 27:if(Qi)return Se(p),h===null&&Qi&&xi&&(w=p.stateNode=Xs(p.type,p.pendingProps,Ul.current,_i.current,!1),Rs=p,gs=!0,ms=Ff(w)),w=p.pendingProps.children,h!==null||xi?bi(h,p,w,S):p.child=qo(p,null,w,S),Gr(h,p),p.child;case 5:return h===null&&xi&&(up(p.type,p.pendingProps,_i.current),(L=w=ms)&&(w=mv(w,p.type,p.pendingProps,gs),w!==null?(p.stateNode=w,Rs=p,ms=Ff(w),gs=!1,L=!0):L=!1),L||Le(p)),Se(p),L=p.type,z=p.pendingProps,ue=h!==null?h.memoizedProps:null,w=z.children,Vn(L,z)?w=null:ue!==null&&Vn(L,ue)&&(p.flags|=32),p.memoizedState!==null&&(L=le(h,p,et,null,null,S),Er?ko._currentValue=L:ko._currentValue2=L),Gr(h,p),bi(h,p,w,S),p.child;case 6:return h===null&&xi&&(yv(p.pendingProps,_i.current),(h=S=ms)&&(S=Qh(S,p.pendingProps,gs),S!==null?(p.stateNode=S,Rs=p,ms=null,h=!0):h=!1),h||Le(p)),null;case 13:return bh(h,p,S);case 4:return oe(p,p.stateNode.containerInfo),w=p.pendingProps,h===null?p.child=qo(p,null,w,S):bi(h,p,w,S),p.child;case 11:return yl(h,p,p.type,p.pendingProps,S);case 7:return bi(h,p,p.pendingProps,S),p.child;case 8:return bi(h,p,p.pendingProps.children,S),p.child;case 12:return bi(h,p,p.pendingProps.children,S),p.child;case 10:return w=p.pendingProps,No(p,p.type,w.value),bi(h,p,w.children,S),p.child;case 9:return L=p.type._context,w=p.pendingProps.children,_l(p),L=us(L),w=w(L),p.flags|=1,bi(h,p,w,S),p.child;case 14:return Mf(h,p,p.type,p.pendingProps,S);case 15:return Ah(h,p,p.type,p.pendingProps,S);case 19:return Id(h,p,S);case 22:return ls(h,p,S);case 24:return _l(p),w=us(rr),h===null?(L=Fd(),L===null&&(L=Xi,z=xl(),L.pooledCache=z,z.refCount++,z!==null&&(L.pooledCacheLanes|=S),L=z),p.memoizedState={parent:w,cache:L},ht(p),No(p,rr,L)):((h.lanes&S)!==0&&(Lt(h,p),Rt(p,null,null,S),We()),L=h.memoizedState,z=p.memoizedState,L.parent!==w?(L={parent:w,cache:w},p.memoizedState=L,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=L),No(p,rr,w)):(w=z.cache,No(p,rr,w),w!==L.cache&&Lu(p,[rr],S,!0))),bi(h,p,p.pendingProps.children,S),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function No(h,p,S){Er?(B(Au,p._currentValue),p._currentValue=S):(B(Au,p._currentValue2),p._currentValue2=S)}function va(h){var p=Au.current;Er?h._currentValue=p:h._currentValue2=p,M(Au)}function Th(h,p,S){for(;h!==null;){var w=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,w!==null&&(w.childLanes|=p)):w!==null&&(w.childLanes&p)!==p&&(w.childLanes|=p),h===S)break;h=h.return}}function Lu(h,p,S,w){var L=h.child;for(L!==null&&(L.return=h);L!==null;){var z=L.dependencies;if(z!==null){var ue=L.child;z=z.firstContext;e:for(;z!==null;){var Ee=z;z=L;for(var ke=0;ke<p.length;ke++)if(Ee.context===p[ke]){z.lanes|=S,Ee=z.alternate,Ee!==null&&(Ee.lanes|=S),Th(z.return,S,h),w||(ue=null);break e}z=Ee.next}}else if(L.tag===18){if(ue=L.return,ue===null)throw Error(r(341));ue.lanes|=S,z=ue.alternate,z!==null&&(z.lanes|=S),Th(ue,S,h),ue=null}else ue=L.child;if(ue!==null)ue.return=L;else for(ue=L;ue!==null;){if(ue===h){ue=null;break}if(L=ue.sibling,L!==null){L.return=ue.return,ue=L;break}ue=ue.return}L=ue}}function Tf(h,p,S,w){h=null;for(var L=p,z=!1;L!==null;){if(!z){if((L.flags&524288)!==0)z=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var ue=L.alternate;if(ue===null)throw Error(r(387));if(ue=ue.memoizedProps,ue!==null){var Ee=L.type;Ys(L.pendingProps.value,ue.value)||(h!==null?h.push(Ee):h=[Ee])}}else if(L===ju.current){if(ue=L.alternate,ue===null)throw Error(r(387));ue.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(h!==null?h.push(ko):h=[ko])}L=L.return}h!==null&&Lu(p,h,S,w),p.flags|=262144}function Tc(h){for(h=h.firstContext;h!==null;){var p=h.context;if(!Ys(Er?p._currentValue:p._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function _l(h){Zo=h,wr=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function us(h){return Ch(Zo,h)}function Eh(h,p){return Zo===null&&_l(h),Ch(h,p)}function Ch(h,p){var S=Er?p._currentValue:p._currentValue2;if(p={context:p,memoizedValue:S,next:null},wr===null){if(h===null)throw Error(r(308));wr=p,h.dependencies={lanes:0,firstContext:p},h.flags|=524288}else wr=wr.next=p;return S}function xl(){return{controller:new Yf,data:new Map,refCount:0}}function wh(h){h.refCount--,h.refCount===0&&Tv(Ev,function(){h.controller.abort()})}function Fd(){var h=Nl.current;return h!==null?h:Xi.pooledCache}function Gs(h,p){p===null?B(Nl,Nl.current):B(Nl,p.pool)}function Rh(){var h=Fd();return h===null?null:{parent:Er?rr._currentValue:rr._currentValue2,pool:h}}function cs(h){h.flags|=4}function Ec(h,p){if(h!==null&&h.child===p.child)return!1;if((p.flags&16)!==0)return!0;for(h=p.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function Pu(h,p,S,w){if(Hr)for(S=p.child;S!==null;){if(S.tag===5||S.tag===6)Wh(h,S.stateNode);else if(!(S.tag===4||Qi&&S.tag===27)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===p)break;for(;S.sibling===null;){if(S.return===null||S.return===p)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else if(ia)for(var L=p.child;L!==null;){if(L.tag===5){var z=L.stateNode;S&&w&&(z=Um(z,L.type,L.memoizedProps)),Wh(h,z)}else if(L.tag===6)z=L.stateNode,S&&w&&(z=ba(z,L.memoizedProps)),Wh(h,z);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)z=L.child,z!==null&&(z.return=L),Pu(h,L,!0,!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===p)break;for(;L.sibling===null;){if(L.return===null||L.return===p)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function iv(h,p,S,w){if(ia)for(var L=p.child;L!==null;){if(L.tag===5){var z=L.stateNode;S&&w&&(z=Um(z,L.type,L.memoizedProps)),Ic(h,z)}else if(L.tag===6)z=L.stateNode,S&&w&&(z=ba(z,L.memoizedProps)),Ic(h,z);else if(L.tag!==4){if(L.tag===22&&L.memoizedState!==null)z=L.child,z!==null&&(z.return=L),iv(h,L,!(L.memoizedProps!==null&&L.memoizedProps.mode==="manual"),!0);else if(L.child!==null){L.child.return=L,L=L.child;continue}}if(L===p)break;for(;L.sibling===null;){if(L.return===null||L.return===p)return;L=L.return}L.sibling.return=L.return,L=L.sibling}}function Dh(h,p){if(ia&&Ec(h,p)){h=p.stateNode;var S=h.containerInfo,w=Kh();iv(w,p,!1,!1),h.pendingChildren=w,cs(p),Jh(S,w)}}function Gd(h,p,S,w){if(Hr)h.memoizedProps!==w&&cs(p);else if(ia){var L=h.stateNode,z=h.memoizedProps;if((h=Ec(h,p))||z!==w){var ue=_i.current;z=Nf(L,S,z,w,!h,null),z===L?p.stateNode=L:(co(z,S,w,ue)&&cs(p),p.stateNode=z,h?Pu(z,p,!1,!1):cs(p))}else p.stateNode=L}}function Hd(h,p,S){if(Sm(p,S)){if(h.flags|=16777216,!zu(p,S))if(ur())h.flags|=8192;else throw Pl=vu,Wf}else h.flags&=-16777217}function zd(h,p){if(Fm(p)){if(h.flags|=16777216,!Wu(p))if(ur())h.flags|=8192;else throw Pl=vu,Wf}else h.flags&=-16777217}function Io(h,p){p!==null&&(h.flags|=4),h.flags&16384&&(p=h.tag!==22?I():536870912,h.lanes|=p,$o|=p)}function Ef(h,p){if(!xi)switch(h.tailMode){case"hidden":p=h.tail;for(var S=null;p!==null;)p.alternate!==null&&(S=p),p=p.sibling;S===null?h.tail=null:S.sibling=null;break;case"collapsed":S=h.tail;for(var w=null;S!==null;)S.alternate!==null&&(w=S),S=S.sibling;w===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:w.sibling=null}}function Mr(h){var p=h.alternate!==null&&h.alternate.child===h.child,S=0,w=0;if(p)for(var L=h.child;L!==null;)S|=L.lanes|L.childLanes,w|=L.subtreeFlags&31457280,w|=L.flags&31457280,L.return=h,L=L.sibling;else for(L=h.child;L!==null;)S|=L.lanes|L.childLanes,w|=L.subtreeFlags,w|=L.flags,L.return=h,L=L.sibling;return h.subtreeFlags|=w,h.childLanes=S,p}function Vd(h,p,S){var w=p.pendingProps;switch(ge(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(p),null;case 1:return Mr(p),null;case 3:return S=p.stateNode,w=null,h!==null&&(w=h.memoizedState.cache),p.memoizedState.cache!==w&&(p.flags|=2048),va(rr),ve(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(h===null||h.child===null)&&(At(p)?cs(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,go!==null&&(Oh(go),go=null))),Dh(h,p),Mr(p),null;case 26:if(Ta){S=p.type;var L=p.memoizedState;return h===null?(cs(p),L!==null?(Mr(p),zd(p,L)):(Mr(p),Hd(p,S,w))):L?L!==h.memoizedState?(cs(p),Mr(p),zd(p,L)):(Mr(p),p.flags&=-16777217):(Hr?h.memoizedProps!==w&&cs(p):Gd(h,p,S,w),Mr(p),Hd(p,S,w)),null}case 27:if(Qi){if(Re(p),S=Ul.current,L=p.type,h!==null&&p.stateNode!=null)Hr?h.memoizedProps!==w&&cs(p):Gd(h,p,L,w);else{if(!w){if(p.stateNode===null)throw Error(r(166));return Mr(p),null}h=_i.current,At(p)?gt(p,h):(h=Xs(L,w,S,h,!0),p.stateNode=h,cs(p))}return Mr(p),null}case 5:if(Re(p),S=p.type,h!==null&&p.stateNode!=null)Gd(h,p,S,w);else{if(!w){if(p.stateNode===null)throw Error(r(166));return Mr(p),null}h=_i.current,At(p)?gt(p,h):(L=Zd(S,w,Ul.current,h,p),Pu(L,p,!1,!1),p.stateNode=L,co(L,S,w,h)&&cs(p))}return Mr(p),Hd(p,p.type,p.pendingProps),null;case 6:if(h&&p.stateNode!=null)S=h.memoizedProps,Hr?S!==w&&cs(p):ia&&(S!==w?(p.stateNode=zi(w,Ul.current,_i.current,p),cs(p)):p.stateNode=h.stateNode);else{if(typeof w!="string"&&p.stateNode===null)throw Error(r(166));if(h=Ul.current,S=_i.current,At(p)){if(!Rr)throw Error(r(176));if(h=p.stateNode,S=p.memoizedProps,w=null,L=Rs,L!==null)switch(L.tag){case 27:case 5:w=L.memoizedProps}$h(h,S,p,w)||Le(p)}else p.stateNode=zi(w,h,S,p)}return Mr(p),null;case 13:if(w=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(L=At(p),w!==null&&w.dehydrated!==null){if(h===null){if(!L)throw Error(r(318));if(!Rr)throw Error(r(344));if(L=p.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(r(317));hu(L,p)}else at(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;Mr(p),L=!1}else go!==null&&(Oh(go),go=null),L=!0;if(!L)return p.flags&256?(ln(p),p):(ln(p),null)}if(ln(p),(p.flags&128)!==0)return p.lanes=S,p;if(S=w!==null,h=h!==null&&h.memoizedState!==null,S){w=p.child,L=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(L=w.alternate.memoizedState.cachePool.pool);var z=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(z=w.memoizedState.cachePool.pool),z!==L&&(w.flags|=2048)}return S!==h&&S&&(p.child.flags|=8192),Io(p,p.updateQueue),Mr(p),null;case 4:return ve(),Dh(h,p),h===null&&pi(p.stateNode.containerInfo),Mr(p),null;case 10:return va(p.type),Mr(p),null;case 19:if(M(es),L=p.memoizedState,L===null)return Mr(p),null;if(w=(p.flags&128)!==0,z=L.rendering,z===null)if(w)Ef(L,!1);else{if(sr!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(z=Gi(h),z!==null){for(p.flags|=128,Ef(L,!1),h=z.updateQueue,p.updateQueue=h,Io(p,h),p.subtreeFlags=0,h=S,S=p.child;S!==null;)Ih(S,h),S=S.sibling;return B(es,es.current&1|2),p.child}h=h.sibling}L.tail!==null&&qr()>Kf&&(p.flags|=128,w=!0,Ef(L,!1),p.lanes=4194304)}else{if(!w)if(h=Gi(z),h!==null){if(p.flags|=128,w=!0,h=h.updateQueue,p.updateQueue=h,Io(p,h),Ef(L,!0),L.tail===null&&L.tailMode==="hidden"&&!z.alternate&&!xi)return Mr(p),null}else 2*qr()-L.renderingStartTime>Kf&&S!==536870912&&(p.flags|=128,w=!0,Ef(L,!1),p.lanes=4194304);L.isBackwards?(z.sibling=p.child,p.child=z):(h=L.last,h!==null?h.sibling=z:p.child=z,L.last=z)}return L.tail!==null?(p=L.tail,L.rendering=p,L.tail=p.sibling,L.renderingStartTime=qr(),p.sibling=null,h=es.current,B(es,w?h&1|2:h&1),p):(Mr(p),null);case 22:case 23:return ln(p),Di(),w=p.memoizedState!==null,h!==null?h.memoizedState!==null!==w&&(p.flags|=8192):w&&(p.flags|=8192),w?(S&536870912)!==0&&(p.flags&128)===0&&(Mr(p),p.subtreeFlags&6&&(p.flags|=8192)):Mr(p),S=p.updateQueue,S!==null&&Io(p,S.retryQueue),S=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),w=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(w=p.memoizedState.cachePool.pool),w!==S&&(p.flags|=2048),h!==null&&M(Nl),null;case 24:return S=null,h!==null&&(S=h.memoizedState.cache),p.memoizedState.cache!==S&&(p.flags|=2048),va(rr),Mr(p),null;case 25:return null}throw Error(r(156,p.tag))}function rv(h,p){switch(ge(p),p.tag){case 1:return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return va(rr),ve(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 26:case 27:case 5:return Re(p),null;case 13:if(ln(p),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(r(340));at()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return M(es),null;case 4:return ve(),null;case 10:return va(p.type),null;case 22:case 23:return ln(p),Di(),h!==null&&M(Nl),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 24:return va(rr),null;case 25:return null;default:return null}}function eu(h,p){switch(ge(p),p.tag){case 3:va(rr),ve();break;case 26:case 27:case 5:Re(p);break;case 4:ve();break;case 13:ln(p);break;case 19:M(es);break;case 10:va(p.type);break;case 22:case 23:ln(p),Di(),h!==null&&M(Nl);break;case 24:va(rr)}}function Nu(h,p){try{var S=p.updateQueue,w=S!==null?S.lastEffect:null;if(w!==null){var L=w.next;S=L;do{if((S.tag&h)===h){w=void 0;var z=S.create,ue=S.inst;w=z(),ue.destroy=w}S=S.next}while(S!==L)}}catch(Ee){Hi(p,p.return,Ee)}}function Iu(h,p,S){try{var w=p.updateQueue,L=w!==null?w.lastEffect:null;if(L!==null){var z=L.next;w=z;do{if((w.tag&h)===h){var ue=w.inst,Ee=ue.destroy;if(Ee!==void 0){ue.destroy=void 0,L=p;var ke=S;try{Ee()}catch(St){Hi(L,ke,St)}}}w=w.next}while(w!==z)}}catch(St){Hi(p,p.return,St)}}function sv(h){var p=h.updateQueue;if(p!==null){var S=h.stateNode;try{De(p,S)}catch(w){Hi(h,h.return,w)}}}function ya(h,p,S){S.props=ma(h.type,h.memoizedProps),S.state=h.memoizedState;try{S.componentWillUnmount()}catch(w){Hi(h,p,w)}}function Hs(h,p){try{var S=h.ref;if(S!==null){var w=h.stateNode;switch(h.tag){case 26:case 27:case 5:var L=Lf(w);break;default:L=w}typeof S=="function"?h.refCleanup=S(L):S.current=L}}catch(z){Hi(h,p,z)}}function Tr(h,p){var S=h.ref,w=h.refCleanup;if(S!==null)if(typeof w=="function")try{w()}catch(L){Hi(h,p,L)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof S=="function")try{S(null)}catch(L){Hi(h,p,L)}else S.current=null}function kd(h){var p=h.type,S=h.memoizedProps,w=h.stateNode;try{my(w,p,S,h)}catch(L){Hi(h,h.return,L)}}function cm(h,p,S){try{wm(h.stateNode,h.type,S,p,h)}catch(w){Hi(h,h.return,w)}}function fm(h){return h.tag===5||h.tag===3||(Ta?h.tag===26:!1)||(Qi?h.tag===27:!1)||h.tag===4}function Bh(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||fm(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!Qi||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function hm(h,p,S){var w=h.tag;if(w===5||w===6)h=h.stateNode,p?hv(S,h,p):tp(S,h);else if(!(w===4||Qi&&w===27)&&(h=h.child,h!==null))for(hm(h,p,S),h=h.sibling;h!==null;)hm(h,p,S),h=h.sibling}function tu(h,p,S){var w=h.tag;if(w===5||w===6)h=h.stateNode,p?Rm(S,h,p):Cm(S,h);else if(!(w===4||Qi&&w===27)&&(h=h.child,h!==null))for(tu(h,p,S),h=h.sibling;h!==null;)tu(h,p,S),h=h.sibling}function nu(h,p,S){h=h.containerInfo;try{If(h,S)}catch(w){Hi(p,p.return,w)}}function Fe(h,p){for(Hu(h.containerInfo),Gn=p;Gn!==null;)if(h=Gn,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,Gn=p;else for(;Gn!==null;){h=Gn;var S=h.alternate;switch(p=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&S!==null){p=void 0;var w=h,L=S.memoizedProps;S=S.memoizedState;var z=w.stateNode;try{var ue=ma(w.type,L,w.elementType===w.type);p=z.getSnapshotBeforeUpdate(ue,S),z.__reactInternalSnapshotBeforeUpdate=p}catch(Ee){Hi(w,w.return,Ee)}}break;case 3:(p&1024)!==0&&Hr&&jn(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=h.sibling,p!==null){p.return=h.return,Gn=p;break}Gn=h.return}return ue=ii,ii=!1,ue}function mt(h,p,S){var w=S.flags;switch(S.tag){case 0:case 11:case 15:iu(h,S),w&4&&Nu(5,S);break;case 1:if(iu(h,S),w&4)if(h=S.stateNode,p===null)try{h.componentDidMount()}catch(Ee){Hi(S,S.return,Ee)}else{var L=ma(S.type,p.memoizedProps);p=p.memoizedState;try{h.componentDidUpdate(L,p,h.__reactInternalSnapshotBeforeUpdate)}catch(Ee){Hi(S,S.return,Ee)}}w&64&&sv(S),w&512&&Hs(S,S.return);break;case 3:if(iu(h,S),w&64&&(w=S.updateQueue,w!==null)){if(h=null,S.child!==null)switch(S.child.tag){case 27:case 5:h=Lf(S.child.stateNode);break;case 1:h=S.child.stateNode}try{De(w,h)}catch(Ee){Hi(S,S.return,Ee)}}break;case 26:if(Ta){iu(h,S),w&512&&Hs(S,S.return);break}case 27:case 5:iu(h,S),p===null&&w&4&&kd(S),w&512&&Hs(S,S.return);break;case 12:iu(h,S);break;case 13:iu(h,S),w&4&&yi(h,S);break;case 22:if(L=S.memoizedState!==null||Il,!L){p=p!==null&&p.memoizedState!==null||Lr;var z=Il,ue=Lr;Il=L,(Lr=p)&&!ue?so(h,S,(S.subtreeFlags&8772)!==0):iu(h,S),Il=z,Lr=ue}w&512&&(S.memoizedProps.mode==="manual"?Hs(S,S.return):Tr(S,S.return));break;default:iu(h,S)}}function lt(h){var p=h.alternate;p!==null&&(h.alternate=null,lt(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&Am(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Xt(h,p,S){for(S=S.child;S!==null;)An(h,p,S),S=S.sibling}function An(h,p,S){if(Ws&&typeof Ws.onCommitFiberUnmount=="function")try{Ws.onCommitFiberUnmount(Yi,S)}catch{}switch(S.tag){case 26:if(Ta){Lr||Tr(S,p),Xt(h,p,S),S.memoizedState?jr(S.memoizedState):S.stateNode&&Hf(S.stateNode);break}case 27:if(Qi){Lr||Tr(S,p);var w=yn,L=Xn;yn=S.stateNode,Xt(h,p,S),du(S.stateNode),yn=w,Xn=L;break}case 5:Lr||Tr(S,p);case 6:if(Hr){if(w=yn,L=Xn,yn=null,Xt(h,p,S),yn=w,Xn=L,yn!==null)if(Xn)try{dv(yn,S.stateNode)}catch(z){Hi(S,p,z)}else try{np(yn,S.stateNode)}catch(z){Hi(S,p,z)}}else Xt(h,p,S);break;case 18:Hr&&yn!==null&&(Xn?Gc(yn,S.stateNode):Nm(yn,S.stateNode));break;case 4:Hr?(w=yn,L=Xn,yn=S.stateNode.containerInfo,Xn=!0,Xt(h,p,S),yn=w,Xn=L):(ia&&nu(S.stateNode,S,Kh()),Xt(h,p,S));break;case 0:case 11:case 14:case 15:Lr||Iu(2,S,p),Lr||Iu(4,S,p),Xt(h,p,S);break;case 1:Lr||(Tr(S,p),w=S.stateNode,typeof w.componentWillUnmount=="function"&&ya(S,p,w)),Xt(h,p,S);break;case 21:Xt(h,p,S);break;case 22:Lr||Tr(S,p),Lr=(w=Lr)||S.memoizedState!==null,Xt(h,p,S),Lr=w;break;default:Xt(h,p,S)}}function yi(h,p){if(Rr&&p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{vv(h)}catch(S){Hi(p,p.return,S)}}function Xr(h){switch(h.tag){case 13:case 19:var p=h.stateNode;return p===null&&(p=h.stateNode=new ki),p;case 22:return h=h.stateNode,p=h._retryCache,p===null&&(p=h._retryCache=new ki),p;default:throw Error(r(435,h.tag))}}function di(h,p){var S=Xr(h);p.forEach(function(w){var L=Pa.bind(null,h,w);S.has(w)||(S.add(w),w.then(L,L))})}function Ms(h,p){var S=p.deletions;if(S!==null)for(var w=0;w<S.length;w++){var L=S[w],z=h,ue=p;if(Hr){var Ee=ue;e:for(;Ee!==null;){switch(Ee.tag){case 27:case 5:yn=Ee.stateNode,Xn=!1;break e;case 3:yn=Ee.stateNode.containerInfo,Xn=!0;break e;case 4:yn=Ee.stateNode.containerInfo,Xn=!0;break e}Ee=Ee.return}if(yn===null)throw Error(r(160));An(z,ue,L),yn=null,Xn=!1}else An(z,ue,L);z=L.alternate,z!==null&&(z.return=null),L.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)dm(p,h),p=p.sibling}function dm(h,p){var S=h.alternate,w=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Ms(p,h),yr(h),w&4&&(Iu(3,h,h.return),Nu(3,h),Iu(5,h,h.return));break;case 1:Ms(p,h),yr(h),w&512&&(Lr||S===null||Tr(S,S.return)),w&64&&Il&&(h=h.updateQueue,h!==null&&(w=h.callbacks,w!==null&&(S=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=S===null?w:S.concat(w))));break;case 26:if(Ta){var L=Br;Ms(p,h),yr(h),w&512&&(Lr||S===null||Tr(S,S.return)),w&4&&(w=S!==null?S.memoizedState:null,p=h.memoizedState,S===null?p===null?h.stateNode===null?h.stateNode=Ea(L,h.type,h.memoizedProps,h):ed(L,h.type,h.stateNode):h.stateNode=Im(L,p,h.memoizedProps):w!==p?(w===null?S.stateNode!==null&&Hf(S.stateNode):jr(w),p===null?ed(L,h.type,h.stateNode):Im(L,p,h.memoizedProps)):p===null&&h.stateNode!==null&&cm(h,h.memoizedProps,S.memoizedProps));break}case 27:if(Qi&&w&4&&h.alternate===null){L=h.stateNode;var z=h.memoizedProps;try{ho(L),xv(h.type,z,L,h)}catch(Ht){Hi(h,h.return,Ht)}}case 5:if(Ms(p,h),yr(h),w&512&&(Lr||S===null||Tr(S,S.return)),Hr){if(h.flags&32){p=h.stateNode;try{qh(p)}catch(Ht){Hi(h,h.return,Ht)}}w&4&&h.stateNode!=null&&(p=h.memoizedProps,cm(h,p,S!==null?S.memoizedProps:p)),w&1024&&(ad=!0)}break;case 6:if(Ms(p,h),yr(h),w&4&&Hr){if(h.stateNode===null)throw Error(r(162));w=h.memoizedProps,S=S!==null?S.memoizedProps:w,p=h.stateNode;try{jh(p,S,w)}catch(Ht){Hi(h,h.return,Ht)}}break;case 3:if(Ta?(zc(),L=Br,Br=cp(p.containerInfo),Ms(p,h),Br=L):Ms(p,h),yr(h),w&4){if(Hr&&Rr&&S!==null&&S.memoizedState.isDehydrated)try{Xu(p.containerInfo)}catch(Ht){Hi(h,h.return,Ht)}if(ia){w=p.containerInfo,S=p.pendingChildren;try{If(w,S)}catch(Ht){Hi(h,h.return,Ht)}}}ad&&(ad=!1,Uh(h));break;case 4:Ta?(S=Br,Br=cp(h.stateNode.containerInfo),Ms(p,h),yr(h),Br=S):(Ms(p,h),yr(h)),w&4&&ia&&nu(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:Ms(p,h),yr(h);break;case 13:Ms(p,h),yr(h),h.child.flags&8192&&h.memoizedState!==null!=(S!==null&&S.memoizedState!==null)&&(oa=qr()),w&4&&(w=h.updateQueue,w!==null&&(h.updateQueue=null,di(h,w)));break;case 22:w&512&&(Lr||S===null||Tr(S,S.return)),L=h.memoizedState!==null;var ue=S!==null&&S.memoizedState!==null,Ee=Il,ke=Lr;if(Il=Ee||L,Lr=ke||ue,Ms(p,h),Lr=ke,Il=Ee,yr(h),p=h.stateNode,p._current=h,p._visibility&=-3,p._visibility|=p._pendingVisibility&2,w&8192&&(p._visibility=L?p._visibility&-2:p._visibility|1,L&&(p=Il||Lr,S===null||ue||p||Fo(h)),Hr&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){e:if(S=null,Hr)for(p=h;;){if(p.tag===5||Ta&&p.tag===26||Qi&&p.tag===27){if(S===null){ue=S=p;try{z=ue.stateNode,L?Dm(z):pv(ue.stateNode,ue.memoizedProps)}catch(Ht){Hi(ue,ue.return,Ht)}}}else if(p.tag===6){if(S===null){ue=p;try{var St=ue.stateNode;L?ip(St):Bm(St,ue.memoizedProps)}catch(Ht){Hi(ue,ue.return,Ht)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break e;for(;p.sibling===null;){if(p.return===null||p.return===h)break e;S===p&&(S=null),p=p.return}S===p&&(S=null),p.sibling.return=p.return,p=p.sibling}}w&4&&(w=h.updateQueue,w!==null&&(S=w.retryQueue,S!==null&&(w.retryQueue=null,di(h,S))));break;case 19:Ms(p,h),yr(h),w&4&&(w=h.updateQueue,w!==null&&(h.updateQueue=null,di(h,w)));break;case 21:break;default:Ms(p,h),yr(h)}}function yr(h){var p=h.flags;if(p&2){try{if(Hr&&(!Qi||h.tag!==27)){e:{for(var S=h.return;S!==null;){if(fm(S)){var w=S;break e}S=S.return}throw Error(r(160))}switch(w.tag){case 27:if(Qi){var L=w.stateNode,z=Bh(h);tu(h,z,L);break}case 5:var ue=w.stateNode;w.flags&32&&(qh(ue),w.flags&=-33);var Ee=Bh(h);tu(h,Ee,ue);break;case 3:case 4:var ke=w.stateNode.containerInfo,St=Bh(h);hm(h,St,ke);break;default:throw Error(r(161))}}}catch(Ht){Hi(h,h.return,Ht)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function Uh(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var p=h;Uh(p),p.tag===5&&p.flags&1024&&$d(p.stateNode),h=h.sibling}}function iu(h,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)mt(h,p.alternate,p),p=p.sibling}function Fo(h){for(h=h.child;h!==null;){var p=h;switch(p.tag){case 0:case 11:case 14:case 15:Iu(4,p,p.return),Fo(p);break;case 1:Tr(p,p.return);var S=p.stateNode;typeof S.componentWillUnmount=="function"&&ya(p,p.return,S),Fo(p);break;case 26:case 27:case 5:Tr(p,p.return),Fo(p);break;case 22:Tr(p,p.return),p.memoizedState===null&&Fo(p);break;default:Fo(p)}h=h.sibling}}function so(h,p,S){for(S=S&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var w=p.alternate,L=h,z=p,ue=z.flags;switch(z.tag){case 0:case 11:case 15:so(L,z,S),Nu(4,z);break;case 1:if(so(L,z,S),w=z,L=w.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(St){Hi(w,w.return,St)}if(w=z,L=w.updateQueue,L!==null){var Ee=w.stateNode;try{var ke=L.shared.hiddenCallbacks;if(ke!==null)for(L.shared.hiddenCallbacks=null,L=0;L<ke.length;L++)Ae(ke[L],Ee)}catch(St){Hi(w,w.return,St)}}S&&ue&64&&sv(z),Hs(z,z.return);break;case 26:case 27:case 5:so(L,z,S),S&&w===null&&ue&4&&kd(z),Hs(z,z.return);break;case 12:so(L,z,S);break;case 13:so(L,z,S),S&&ue&4&&yi(L,z);break;case 22:z.memoizedState===null&&so(L,z,S),Hs(z,z.return);break;default:so(L,z,S)}p=p.sibling}}function Cc(h,p){var S=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),h=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(h=p.memoizedState.cachePool.pool),h!==S&&(h!=null&&h.refCount++,S!=null&&wh(S))}function Mi(h,p){h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&wh(h))}function fs(h,p,S,w){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)Xd(h,p,S,w),p=p.sibling}function Xd(h,p,S,w){var L=p.flags;switch(p.tag){case 0:case 11:case 15:fs(h,p,S,w),L&2048&&Nu(9,p);break;case 3:fs(h,p,S,w),L&2048&&(h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&wh(h)));break;case 12:if(L&2048){fs(h,p,S,w),h=p.stateNode;try{var z=p.memoizedProps,ue=z.id,Ee=z.onPostCommit;typeof Ee=="function"&&Ee(ue,p.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(ke){Hi(p,p.return,ke)}}else fs(h,p,S,w);break;case 23:break;case 22:z=p.stateNode,p.memoizedState!==null?z._visibility&4?fs(h,p,S,w):zs(h,p):z._visibility&4?fs(h,p,S,w):(z._visibility|=4,Wr(h,p,S,w,(p.subtreeFlags&10256)!==0)),L&2048&&Cc(p.alternate,p);break;case 24:fs(h,p,S,w),L&2048&&Mi(p.alternate,p);break;default:fs(h,p,S,w)}}function Wr(h,p,S,w,L){for(L=L&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var z=h,ue=p,Ee=S,ke=w,St=ue.flags;switch(ue.tag){case 0:case 11:case 15:Wr(z,ue,Ee,ke,L),Nu(8,ue);break;case 23:break;case 22:var Ht=ue.stateNode;ue.memoizedState!==null?Ht._visibility&4?Wr(z,ue,Ee,ke,L):zs(z,ue):(Ht._visibility|=4,Wr(z,ue,Ee,ke,L)),L&&St&2048&&Cc(ue.alternate,ue);break;case 24:Wr(z,ue,Ee,ke,L),L&&St&2048&&Mi(ue.alternate,ue);break;default:Wr(z,ue,Ee,ke,L)}p=p.sibling}}function zs(h,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var S=h,w=p,L=w.flags;switch(w.tag){case 22:zs(S,w),L&2048&&Cc(w.alternate,w);break;case 24:zs(S,w),L&2048&&Mi(w.alternate,w);break;default:zs(S,w)}p=p.sibling}}function ao(h){if(h.subtreeFlags&ka)for(h=h.child;h!==null;)Wd(h),h=h.sibling}function Wd(h){switch(h.tag){case 26:ao(h),h.flags&ka&&(h.memoizedState!==null?_v(Br,h.memoizedState,h.memoizedProps):ra(h.type,h.memoizedProps));break;case 5:ao(h),h.flags&ka&&ra(h.type,h.memoizedProps);break;case 3:case 4:if(Ta){var p=Br;Br=cp(h.stateNode.containerInfo),ao(h),Br=p}else ao(h);break;case 22:h.memoizedState===null&&(p=h.alternate,p!==null&&p.memoizedState!==null?(p=ka,ka=16777216,ao(h),ka=p):ao(h));break;default:ao(h)}}function Fu(h){var p=h.alternate;if(p!==null&&(h=p.child,h!==null)){p.child=null;do p=h.sibling,h.sibling=null,h=p;while(h!==null)}}function ea(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var S=0;S<p.length;S++){var w=p[S];Gn=w,Cf(w,h)}Fu(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)wc(h),h=h.sibling}function wc(h){switch(h.tag){case 0:case 11:case 15:ea(h),h.flags&2048&&Iu(9,h,h.return);break;case 3:ea(h);break;case 12:ea(h);break;case 22:var p=h.stateNode;h.memoizedState!==null&&p._visibility&4&&(h.return===null||h.return.tag!==13)?(p._visibility&=-5,Al(h)):ea(h);break;default:ea(h)}}function Al(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var S=0;S<p.length;S++){var w=p[S];Gn=w,Cf(w,h)}Fu(h)}for(h=h.child;h!==null;){switch(p=h,p.tag){case 0:case 11:case 15:Iu(8,p,p.return),Al(p);break;case 22:S=p.stateNode,S._visibility&4&&(S._visibility&=-5,Al(p));break;default:Al(p)}h=h.sibling}}function Cf(h,p){for(;Gn!==null;){var S=Gn;switch(S.tag){case 0:case 11:case 15:Iu(8,S,p);break;case 23:case 22:if(S.memoizedState!==null&&S.memoizedState.cachePool!==null){var w=S.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:wh(S.memoizedState.cache)}if(w=S.child,w!==null)w.return=S,Gn=w;else e:for(S=h;Gn!==null;){w=Gn;var L=w.sibling,z=w.return;if(lt(w),w===S){Gn=null;break e}if(L!==null){L.return=z,Gn=L;break e}Gn=z}}}function Rc(h){var p=xm(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(r(364));return p}if(h=bm(h),h===null)throw Error(r(362));return h.stateNode.current}function ru(h,p){var S=h.tag;switch(p.$$typeof){case qf:if(h.type===p.value)return!0;break;case xo:e:{for(p=p.value,h=[h,0],S=0;S<h.length;){var w=h[S++],L=w.tag,z=h[S++],ue=p[z];if(L!==5&&L!==26&&L!==27||!ku(w)){for(;ue!=null&&ru(w,ue);)z++,ue=p[z];if(z===p.length){p=!0;break e}else for(w=w.child;w!==null;)h.push(w,z),w=w.sibling}}p=!1}return p;case Ar:if((S===5||S===26||S===27)&&fv(h.stateNode,p.value))return!0;break;case Fl:if((S===5||S===6||S===26||S===27)&&(h=Tm(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case Qo:if((S===5||S===26||S===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function wf(h){switch(h.$$typeof){case qf:return"<"+(a(h.value)||"Unknown")+">";case xo:return":has("+(wf(h)||"")+")";case Ar:return'[role="'+h.value+'"]';case Fl:return'"'+h.value+'"';case Qo:return'[data-testname="'+h.value+'"]';default:throw Error(r(365))}}function ta(h,p){var S=[];h=[h,0];for(var w=0;w<h.length;){var L=h[w++],z=L.tag,ue=h[w++],Ee=p[ue];if(z!==5&&z!==26&&z!==27||!ku(L)){for(;Ee!=null&&ru(L,Ee);)ue++,Ee=p[ue];if(ue===p.length)S.push(L);else for(L=L.child;L!==null;)h.push(L,ue),L=L.sibling}}return S}function su(h,p){if(!Vu)throw Error(r(363));h=Rc(h),h=ta(h,p),p=[],h=Array.from(h);for(var S=0;S<h.length;){var w=h[S++],L=w.tag;if(L===5||L===26||L===27)ku(w)||p.push(w.stateNode);else for(w=w.child;w!==null;)h.push(w),w=w.sibling}return p}function nr(){if((Ei&2)!==0&&ci!==0)return ci&-ci;if(bn.T!==null){var h=Ha;return h!==0?h:it()}return uv()}function Rf(){ja===0&&(ja=(ci&536870912)===0||xi?G():536870912);var h=za.current;return h!==null&&(h.flags|=32),ja}function hs(h,p,S){(h===Xi&&er===2||h.cancelPendingCommit!==null)&&(Ts(h,0),Vs(h,ci,ja,!1)),Q(h,S),((Ei&2)===0||h!==Xi)&&(h===Xi&&((Ei&2)===0&&(Su|=S),sr===4&&Vs(h,ci,ja,!1)),Ve(h))}function Gu(h,p,S){if((Ei&6)!==0)throw Error(r(327));var w=!S&&(p&60)===0&&(p&h.expiredLanes)===0||F(h,p),L=w?Nh(h,p):Ph(h,p,!0),z=w;do{if(L===0){Wa&&!w&&Vs(h,p,0,!1);break}else if(L===6)Vs(h,p,0,!Xa);else{if(S=h.current.alternate,z&&!au(S)){L=Ph(h,p,!1),z=!1;continue}if(L===2){if(z=p,h.errorRecoveryDisabledLanes&z)var ue=0;else ue=h.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){p=ue;e:{var Ee=h;L=Jc;var ke=Rr&&Ee.current.memoizedState.isDehydrated;if(ke&&(Ts(Ee,ue).flags|=256),ue=Ph(Ee,ue,!1),ue!==2){if(ts&&!ke){Ee.errorRecoveryDisabledLanes|=z,Su|=z,L=4;break e}z=Sr,Sr=L,z!==null&&Oh(z)}L=ue}if(z=!1,L!==2)continue}}if(L===1){Ts(h,0),Vs(h,p,0,!0);break}e:{switch(w=h,L){case 0:case 1:throw Error(r(345));case 4:if((p&4194176)===p){Vs(w,p,ja,!Xa);break e}break;case 2:Sr=null;break;case 3:case 5:break;default:throw Error(r(329))}if(w.finishedWork=S,w.finishedLanes=p,(p&62914560)===p&&(z=oa+300-qr(),10<z)){if(Vs(w,p,ja,!Xa),P(w,0)!==0)break e;w.timeoutHandle=ui(Dc.bind(null,w,S,Sr,ld,yp,p,ja,Su,$o,Xa,2,-0,0),z);break e}Dc(w,S,Sr,ld,yp,p,ja,Su,$o,Xa,0,-0,0)}}break}while(!0);Ve(h)}function Oh(h){Sr===null?Sr=h:Sr.push.apply(Sr,h)}function Dc(h,p,S,w,L,z,ue,Ee,ke,St,Ht,Zt,en){var Hn=p.subtreeFlags;if((Hn&8192||(Hn&16785408)===16785408)&&(Qd(),Wd(p),p=Yr(),p!==null)){h.cancelPendingCommit=p(La.bind(null,h,S,w,L,ue,Ee,ke,1,Zt,en)),Vs(h,z,ue,!St);return}La(h,S,w,L,ue,Ee,ke,Ht,Zt,en)}function au(h){for(var p=h;;){var S=p.tag;if((S===0||S===11||S===15)&&p.flags&16384&&(S=p.updateQueue,S!==null&&(S=S.stores,S!==null)))for(var w=0;w<S.length;w++){var L=S[w],z=L.getSnapshot;L=L.value;try{if(!Ys(z(),L))return!1}catch{return!1}}if(S=p.child,p.subtreeFlags&16384&&S!==null)S.return=p,p=S;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Vs(h,p,S,w){p&=~od,p&=~Su,h.suspendedLanes|=p,h.pingedLanes&=~p,w&&(h.warmLanes|=p),w=h.expirationTimes;for(var L=p;0<L;){var z=31-ws(L),ue=1<<z;w[z]=-1,L&=~ue}S!==0&&te(h,S,p)}function Lh(){return(Ei&6)===0?(j(0),!1):!0}function Bc(){if(Mn!==null){if(er===0)var h=Mn.return;else h=Mn,wr=Zo=null,Bt(h),yu=null,_u=0,h=Mn;for(;h!==null;)eu(h.alternate,h),h=h.return;Mn=null}}function Ts(h,p){h.finishedWork=null,h.finishedLanes=0;var S=h.timeoutHandle;S!==cu&&(h.timeoutHandle=cu,Pf(S)),S=h.cancelPendingCommit,S!==null&&(h.cancelPendingCommit=null,S()),Bc(),Xi=h,Mn=S=lo(h.current,null),ci=p,er=0,ys=null,Xa=!1,Wa=F(h,p),ts=!1,$o=ja=od=Su=Ya=sr=0,Sr=Jc=null,yp=!1,(p&8)!==0&&(p|=p&32);var w=h.entangledLanes;if(w!==0)for(h=h.entanglements,w&=p;0<w;){var L=31-ws(w),z=1<<L;p|=h[L],w&=~z}return js=p,ie(),S}function Oa(h,p){qn=null,bn.H=Dr,p===Ku?(p=qt(),er=3):p===Wf?(p=qt(),er=4):er=p===gp?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,ys=p,Mn===null&&(sr=1,io(h,de(p,h.current)))}function ur(){var h=za.current;return h===null?!0:(ci&4194176)===ci?$i===null:(ci&62914560)===ci||(ci&536870912)!==0?h===$i:!1}function _r(){var h=bn.H;return bn.H=Dr,h===null?Dr:h}function Sl(){var h=bn.A;return bn.A=jf,h}function ou(){sr=4,Xa||(ci&4194176)!==ci&&za.current!==null||(Wa=!0),(Ya&134217727)===0&&(Su&134217727)===0||Xi===null||Vs(Xi,ci,ja,!1)}function Ph(h,p,S){var w=Ei;Ei|=2;var L=_r(),z=Sl();(Xi!==h||ci!==p)&&(ld=null,Ts(h,p)),p=!1;var ue=sr;e:do try{if(er!==0&&Mn!==null){var Ee=Mn,ke=ys;switch(er){case 8:Bc(),ue=6;break e;case 3:case 2:case 6:za.current===null&&(p=!0);var St=er;if(er=0,ys=null,ks(h,Ee,ke,St),S&&Wa){ue=0;break e}break;default:St=er,er=0,ys=null,ks(h,Ee,ke,St)}}pm(),ue=sr;break}catch(Ht){Oa(h,Ht)}while(!0);return p&&h.shellSuspendCounter++,wr=Zo=null,Ei=w,bn.H=L,bn.A=z,Mn===null&&(Xi=null,ci=0,ie()),ue}function pm(){for(;Mn!==null;)xr(Mn)}function Nh(h,p){var S=Ei;Ei|=2;var w=_r(),L=Sl();Xi!==h||ci!==p?(ld=null,Kf=qr()+500,Ts(h,p)):Wa=F(h,p);e:do try{if(er!==0&&Mn!==null){p=Mn;var z=ys;t:switch(er){case 1:er=0,ys=null,ks(h,p,z,1);break;case 2:if(dt(z)){er=0,ys=null,ai(p);break}p=function(){er===2&&Xi===h&&(er=7),Ve(h)},z.then(p,p);break e;case 3:er=7;break e;case 4:er=5;break e;case 7:dt(z)?(er=0,ys=null,ai(p)):(er=0,ys=null,ks(h,p,z,7));break;case 5:var ue=null;switch(Mn.tag){case 26:ue=Mn.memoizedState;case 5:case 27:var Ee=Mn,ke=Ee.type,St=Ee.pendingProps;if(ue?Wu(ue):zu(ke,St)){er=0,ys=null;var Ht=Ee.sibling;if(Ht!==null)Mn=Ht;else{var Zt=Ee.return;Zt!==null?(Mn=Zt,Es(Zt)):Mn=null}break t}}er=0,ys=null,ks(h,p,z,5);break;case 6:er=0,ys=null,ks(h,p,z,6);break;case 8:Bc(),sr=6;break e;default:throw Error(r(462))}}Qr();break}catch(en){Oa(h,en)}while(!0);return wr=Zo=null,bn.H=w,bn.A=L,Ei=S,Mn!==null?0:(Xi=null,ci=0,ie(),sr)}function Qr(){for(;Mn!==null&&!Sv();)xr(Mn)}function xr(h){var p=um(h.alternate,h,js);h.memoizedProps=h.pendingProps,p===null?Es(h):Mn=p}function ai(h){var p=h,S=p.alternate;switch(p.tag){case 15:case 0:p=Sh(S,p,p.pendingProps,p.type,void 0,ci);break;case 11:p=Sh(S,p,p.pendingProps,p.type.render,p.ref,ci);break;case 5:Bt(p);default:eu(S,p),p=Mn=Ih(p,js),p=um(S,p,js)}h.memoizedProps=h.pendingProps,p===null?Es(h):Mn=p}function ks(h,p,S,w){wr=Zo=null,Bt(p),yu=null,_u=0;var L=p.return;try{if(xh(h,L,p,S,ci)){sr=1,io(h,de(S,h.current)),Mn=null;return}}catch(z){if(L!==null)throw Mn=L,z;sr=1,io(h,de(S,h.current)),Mn=null;return}p.flags&32768?(xi||w===1?h=!0:Wa||(ci&536870912)!==0?h=!1:(Xa=h=!0,(w===2||w===3||w===6)&&(w=za.current,w!==null&&w.tag===13&&(w.flags|=16384))),Uc(p,h)):Es(p)}function Es(h){var p=h;do{if((p.flags&32768)!==0){Uc(p,Xa);return}h=p.return;var S=Vd(p.alternate,p,js);if(S!==null){Mn=S;return}if(p=p.sibling,p!==null){Mn=p;return}Mn=p=h}while(p!==null);sr===0&&(sr=5)}function Uc(h,p){do{var S=rv(h.alternate,h);if(S!==null){S.flags&=32767,Mn=S;return}if(S=h.return,S!==null&&(S.flags|=32768,S.subtreeFlags=0,S.deletions=null),!p&&(h=h.sibling,h!==null)){Mn=h;return}Mn=h=S}while(h!==null);sr=6,Mn=null}function La(h,p,S,w,L,z,ue,Ee,ke,St){var Ht=bn.T,Zt=fu();try{ds(2),bn.T=null,av(h,p,S,w,Zt,L,z,ue,Ee,ke,St)}finally{bn.T=Ht,ds(Zt)}}function av(h,p,S,w,L,z,ue,Ee){do Go();while(Gl!==null);if((Ei&6)!==0)throw Error(r(327));var ke=h.finishedWork;if(w=h.finishedLanes,ke===null)return null;if(h.finishedWork=null,h.finishedLanes=0,ke===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var St=ke.lanes|ke.childLanes;if(St|=jo,$(h,w,St,z,ue,Ee),h===Xi&&(Mn=Xi=null,ci=0),(ke.subtreeFlags&10256)===0&&(ke.flags&10256)===0||el||(el=!0,$u=St,_p=S,oo(hp,function(){return Go(),null})),S=(ke.flags&15990)!==0,(ke.subtreeFlags&15990)!==0||S?(S=bn.T,bn.T=null,z=fu(),ds(2),ue=Ei,Ei|=4,Fe(h,ke),dm(ke,h),uu(h.containerInfo),h.current=ke,mt(h,ke.alternate,ke),nd(),Ei=ue,ds(z),bn.T=S):h.current=ke,el?(el=!1,Gl=h,Zc=w):mm(h,St),St=h.pendingLanes,St===0&&(Qu=null),k(ke.stateNode),Ve(h),p!==null)for(L=h.onRecoverableError,ke=0;ke<p.length;ke++)St=p[ke],L(St.value,{componentStack:St.stack});return(Zc&3)!==0&&Go(),St=h.pendingLanes,(w&4194218)!==0&&(St&42)!==0?h===xp?Jf++:(Jf=0,xp=h):Jf=0,j(0),null}function mm(h,p){(h.pooledCacheLanes&=p)===0&&(p=h.pooledCache,p!=null&&(h.pooledCache=null,wh(p)))}function Go(){if(Gl!==null){var h=Gl,p=$u;$u=0;var S=ye(Zc),w=32>S?32:S;S=bn.T;var L=fu();try{if(ds(w),bn.T=null,Gl===null)var z=!1;else{w=_p,_p=null;var ue=Gl,Ee=Zc;if(Gl=null,Zc=0,(Ei&6)!==0)throw Error(r(331));var ke=Ei;if(Ei|=4,wc(ue.current),Xd(ue,ue.current,Ee,w),Ei=ke,j(0,!1),Ws&&typeof Ws.onPostCommitFiberRoot=="function")try{Ws.onPostCommitFiberRoot(Yi,ue)}catch{}z=!0}return z}finally{ds(L),bn.T=S,mm(h,p)}}return!1}function Df(h,p,S){p=de(S,p),p=ga(h.stateNode,p,2),h=_t(h,p,2),h!==null&&(Q(h,2),Ve(h))}function Hi(h,p,S){if(h.tag===3)Df(h,h,S);else for(;p!==null;){if(p.tag===3){Df(p,h,S);break}else if(p.tag===1){var w=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Qu===null||!Qu.has(w))){h=de(S,h),S=Ba(2),w=_t(p,S,2),w!==null&&(bs(S,w,p,h),Q(w,2),Ve(w));break}}p=p.return}}function bl(h,p,S){var w=h.pingCache;if(w===null){w=h.pingCache=new Ao;var L=new Set;w.set(p,L)}else L=w.get(p),L===void 0&&(L=new Set,w.set(p,L));L.has(S)||(ts=!0,L.add(S),h=Oc.bind(null,h,p,S),p.then(h,h))}function Oc(h,p,S){var w=h.pingCache;w!==null&&w.delete(p),h.pingedLanes|=h.suspendedLanes&S,h.warmLanes&=~S,Xi===h&&(ci&S)===S&&(sr===4||sr===3&&(ci&62914560)===ci&&300>qr()-oa?(Ei&2)===0&&Ts(h,0):od|=S,$o===ci&&($o=0)),Ve(h)}function lu(h,p){p===0&&(p=I()),h=Ke(h,p),h!==null&&(Q(h,p),Ve(h))}function re(h){var p=h.memoizedState,S=0;p!==null&&(S=p.retryLane),lu(h,S)}function Pa(h,p){var S=0;switch(h.tag){case 13:var w=h.stateNode,L=h.memoizedState;L!==null&&(S=L.retryLane);break;case 19:w=h.stateNode;break;case 22:w=h.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(p),lu(h,S)}function oo(h,p){return zf(h,p)}function _a(h,p,S,w){this.tag=h,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yn(h){return h=h.prototype,!(!h||!h.isReactComponent)}function lo(h,p){var S=h.alternate;return S===null?(S=t(h.tag,p,h.key,h.mode),S.elementType=h.elementType,S.type=h.type,S.stateNode=h.stateNode,S.alternate=h,h.alternate=S):(S.pendingProps=p,S.type=h.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=h.flags&31457280,S.childLanes=h.childLanes,S.lanes=h.lanes,S.child=h.child,S.memoizedProps=h.memoizedProps,S.memoizedState=h.memoizedState,S.updateQueue=h.updateQueue,p=h.dependencies,S.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},S.sibling=h.sibling,S.index=h.index,S.ref=h.ref,S.refCleanup=h.refCleanup,S}function Ih(h,p){h.flags&=31457282;var S=h.alternate;return S===null?(h.childLanes=0,h.lanes=p,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=S.childLanes,h.lanes=S.lanes,h.child=S.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=S.memoizedProps,h.memoizedState=S.memoizedState,h.updateQueue=S.updateQueue,h.type=S.type,p=S.dependencies,h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),h}function Ml(h,p,S,w,L,z){var ue=0;if(w=h,typeof h=="function")Yn(h)&&(ue=1);else if(typeof h=="string")ue=Ta&&Qi?Gf(h,S,_i.current)?26:Xo(h)?27:5:Ta?Gf(h,S,_i.current)?26:5:Qi&&Xo(h)?27:5;else e:switch(h){case Aa:return Ji(S.children,L,z,p);case zh:ue=8,L|=24;break;case Kd:return h=t(12,S,p,L|2),h.elementType=Kd,h.lanes=z,h;case Jd:return h=t(13,S,p,L),h.elementType=Jd,h.lanes=z,h;case Of:return h=t(19,S,p,L),h.elementType=Of,h.lanes=z,h;case ym:return Fh(S,L,z,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case na:case Ho:ue=10;break e;case vm:ue=9;break e;case Vh:ue=11;break e;case kh:ue=14;break e;case Ia:ue=16,w=null;break e}ue=29,S=Error(r(130,h===null?"null":typeof h,"")),w=null}return p=t(ue,S,p,L),p.elementType=h,p.type=w,p.lanes=z,p}function Ji(h,p,S,w){return h=t(7,h,w,p),h.lanes=S,h}function Fh(h,p,S,w){h=t(22,h,w,p),h.elementType=ym,h.lanes=S;var L={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var z=L._current;if(z===null)throw Error(r(456));if((L._pendingVisibility&2)===0){var ue=Ke(z,2);ue!==null&&(L._pendingVisibility|=2,hs(ue,z,2))}},attach:function(){var z=L._current;if(z===null)throw Error(r(456));if((L._pendingVisibility&2)!==0){var ue=Ke(z,2);ue!==null&&(L._pendingVisibility&=-3,hs(ue,z,2))}}};return h.stateNode=L,h}function Yd(h,p,S){return h=t(6,h,null,p),h.lanes=S,h}function gm(h,p,S){return p=t(4,h.children!==null?h.children:[],h.key,p),p.lanes=S,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function dy(h,p,S,w,L,z,ue,Ee){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=cu,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=N(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N(0),this.hiddenUpdates=N(null),this.identifierPrefix=w,this.onUncaughtError=L,this.onCaughtError=z,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function ov(h,p,S,w,L,z,ue,Ee,ke,St,Ht,Zt){return h=new dy(h,p,S,ue,Ee,ke,St,Zt),p=1,z===!0&&(p|=24),z=t(3,null,null,p),h.current=z,z.stateNode=h,p=xl(),p.refCount++,h.pooledCache=p,p.refCount++,z.memoizedState={element:w,isDehydrated:S,cache:p},ht(z),h}function Zi(h){return h?(h=Wo,h):Wo}function jd(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=A(p),h=h!==null?b(h):null,h===null?null:Lf(h.stateNode)}function Bf(h,p,S,w,L,z){L=Zi(L),w.context===null?w.context=L:w.pendingContext=L,w=Et(p),w.payload={element:S},z=z===void 0?null:z,z!==null&&(w.callback=z),S=_t(h,w,p),S!==null&&(hs(S,h,p),ot(S,h,p))}function Uf(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var S=h.retryLane;h.retryLane=S!==0&&S<p?S:p}}function Gh(h,p){Uf(h,p),(h=h.alternate)&&Uf(h,p)}var zn={},xa=Q0(),Na=Y7(),qd=Object.assign,py=Symbol.for("react.element"),Hh=Symbol.for("react.transitional.element"),uo=Symbol.for("react.portal"),Aa=Symbol.for("react.fragment"),zh=Symbol.for("react.strict_mode"),Kd=Symbol.for("react.profiler"),na=Symbol.for("react.provider"),vm=Symbol.for("react.consumer"),Ho=Symbol.for("react.context"),Vh=Symbol.for("react.forward_ref"),Jd=Symbol.for("react.suspense"),Of=Symbol.for("react.suspense_list"),kh=Symbol.for("react.memo"),Ia=Symbol.for("react.lazy"),ym=Symbol.for("react.offscreen"),lv=Symbol.for("react.memo_cache_sentinel"),zo=Symbol.iterator,Lc=Symbol.for("react.client.reference"),bn=xa.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tl,El,Pc=!1,Sa=Array.isArray,Xh=e.rendererVersion,Vo=e.rendererPackageName,Cs=e.extraDevToolsConfig,Lf=e.getPublicInstance,_m=e.getRootHostContext,Nc=e.getChildHostContext,Hu=e.prepareForCommit,uu=e.resetAfterCommit,Zd=e.createInstance,Wh=e.appendInitialChild,co=e.finalizeInitialChildren,Vn=e.shouldSetTextContent,zi=e.createTextInstance,ui=e.scheduleTimeout,Pf=e.cancelTimeout,cu=e.noTimeout,Er=e.isPrimaryRenderer;e.warnsIfNotActing;var Hr=e.supportsMutation,ia=e.supportsPersistence,Rr=e.supportsHydration,xm=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var pi=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var ds=e.setCurrentUpdatePriority,fu=e.getCurrentUpdatePriority,uv=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var cv=e.shouldAttemptEagerTransition,Am=e.detachDeletedInstance;e.requestPostPaintCallback;var Sm=e.maySuspendCommit,zu=e.preloadInstance,Qd=e.startSuspendingCommit,ra=e.suspendInstance,Yr=e.waitForCommitToBeReady,fo=e.NotPendingTransition,ko=e.HostTransitionContext,$d=e.resetFormInstance;e.bindToConsole;var Yh=e.supportsMicrotasks,Cl=e.scheduleMicrotask,Vu=e.supportsTestSelectors,bm=e.findFiberRoot,Mm=e.getBoundingRect,Tm=e.getTextContent,ku=e.isHiddenSubtree,fv=e.matchAccessibilityRole,ep=e.setFocusIfFocusable,Em=e.setupIntersectionObserver,Cm=e.appendChild,tp=e.appendChildToContainer,jh=e.commitTextUpdate,my=e.commitMount,wm=e.commitUpdate,Rm=e.insertBefore,hv=e.insertInContainerBefore,np=e.removeChild,dv=e.removeChildFromContainer,qh=e.resetTextContent,Dm=e.hideInstance,ip=e.hideTextInstance,pv=e.unhideInstance,Bm=e.unhideTextInstance,jn=e.clearContainer,Nf=e.cloneInstance,Kh=e.createContainerChildSet,Ic=e.appendChildToContainerChildSet,Jh=e.finalizeContainerChildren,If=e.replaceContainerChildren,Um=e.cloneHiddenInstance,ba=e.cloneHiddenTextInstance,rp=e.isSuspenseInstancePending,Fc=e.isSuspenseInstanceFallback,sp=e.getSuspenseInstanceFallbackErrorDetails,Om=e.registerSuspenseInstanceRetry,ap=e.canHydrateFormStateMarker,Ma=e.isFormStateMarkerMatching,wl=e.getNextHydratableSibling,Ff=e.getFirstHydratableChild,Lm=e.getFirstHydratableChildWithinContainer,Zh=e.getFirstHydratableChildWithinSuspenseInstance,mv=e.canHydrateInstance,Qh=e.canHydrateTextInstance,Pm=e.canHydrateSuspenseInstance,op=e.hydrateInstance,$h=e.hydrateTextInstance,hu=e.hydrateSuspenseInstance,gv=e.getNextHydratableInstanceAfterSuspenseInstance,Xu=e.commitHydratedContainer,vv=e.commitHydratedSuspenseInstance,Nm=e.clearSuspenseBoundary,Gc=e.clearSuspenseBoundaryFromContainer,lp=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var up=e.validateHydratableInstance,yv=e.validateHydratableTextInstance,Ta=e.supportsResources,Gf=e.isHostHoistableType,cp=e.getHoistableRoot,fp=e.getResource,Im=e.acquireResource,jr=e.releaseResource,Ea=e.hydrateHoistable,ed=e.mountHoistable,Hf=e.unmountHoistable,Hc=e.createHoistableInstance,zc=e.prepareToCommitHoistables,Fm=e.mayResourceSuspendCommit,Wu=e.preloadResource,_v=e.suspendResource,Qi=e.supportsSingletons,Xs=e.resolveSingletonInstance,ho=e.clearSingleton,xv=e.acquireSingletonInstance,du=e.releaseSingletonInstance,Xo=e.isHostSingletonType,Cr=[],Rl=-1,Wo={},ws=Math.clz32?Math.clz32:D,td=Math.log,Av=Math.LN2,Yo=128,Dl=4194304,zf=Na.unstable_scheduleCallback,Vf=Na.unstable_cancelCallback,Sv=Na.unstable_shouldYield,nd=Na.unstable_requestPaint,qr=Na.unstable_now,id=Na.unstable_ImmediatePriority,Gm=Na.unstable_UserBlockingPriority,hp=Na.unstable_NormalPriority,bv=Na.unstable_IdlePriority,Mv=Na.log,ps=Na.unstable_setDisableYieldValue,Yi=null,Ws=null,Ys=typeof Object.is=="function"?Object.is:ne,rd=new WeakMap,Bl=[],po=0,hn=null,pu=0,sa=[],$r=0,Yu=null,Fa=1,mo="",_i=T(null),kf=T(null),Ul=T(null),ju=T(null),Rs=null,ms=null,xi=!1,go=null,gs=!1,Ga=Error(r(519)),cr=[],mu=0,jo=0,Vc=null,gu=null,kc=!1,Vi=!1,dp=!1,Xc=0,Xf=null,Wc=0,Ha=0,Yc=null,Ol=!1,qu=!1,Ll=Object.prototype.hasOwnProperty,Ku=Error(r(460)),Wf=Error(r(474)),vu={then:function(){}},Pl=null,yu=null,_u=0,qo=Fn(!0),Ko=Fn(!1),mi=T(null),vo=T(0),za=T(null),$i=null,es=T(0),xu=0,qn=null,Sn=null,Ti=null,yo=!1,jc=!1,Ju=!1,pp=0,qc=0,vs=null,_o=0,sd=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Dr={readContext:us,use:pe,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useLayoutEffect:ni,useInsertionEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useSyncExternalStore:ni,useId:ni};Dr.useCacheRefresh=ni,Dr.useMemoCache=ni,Dr.useHostTransitionStatus=ni,Dr.useFormState=ni,Dr.useActionState=ni,Dr.useOptimistic=ni;var Zu={readContext:us,use:pe,useCallback:function(h,p){return q().memoizedState=[h,p===void 0?null:p],h},useContext:us,useEffect:Uu,useImperativeHandle:function(h,p,S){S=S!=null?S.concat([h]):null,jl(4194308,4,no.bind(null,p,h),S)},useLayoutEffect:function(h,p){return jl(4194308,4,h,p)},useInsertionEffect:function(h,p){jl(4,2,h,p)},useMemo:function(h,p){var S=q();p=p===void 0?null:p;var w=h();if(Ju){ee(!0);try{h()}finally{ee(!1)}}return S.memoizedState=[w,p],w},useReducer:function(h,p,S){var w=q();if(S!==void 0){var L=S(p);if(Ju){ee(!0);try{S(p)}finally{ee(!1)}}}else L=p;return w.memoizedState=w.baseState=L,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:L},w.queue=h,h=h.dispatch=Mc.bind(null,qn,h),[w.memoizedState,h]},useRef:function(h){var p=q();return h={current:h},p.memoizedState=h},useState:function(h){h=rn(h);var p=h.queue,S=Sf.bind(null,qn,p);return p.dispatch=S,[h.memoizedState,S]},useDebugValue:da,useDeferredValue:function(h,p){var S=q();return Kl(S,h,p)},useTransition:function(){var h=rn(!1);return h=Jl.bind(null,qn,h.queue,!0,!1),q().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,p,S){var w=qn,L=q();if(xi){if(S===void 0)throw Error(r(407));S=S()}else{if(S=p(),Xi===null)throw Error(r(349));(ci&60)!==0||kt(w,p,S)}L.memoizedState=S;var z={value:S,getSnapshot:p};return L.queue=z,Uu(fn.bind(null,w,z,h),[h]),w.flags|=2048,Or(9,Yt.bind(null,w,z,S,p),{destroy:void 0},null),S},useId:function(){var h=q(),p=Xi.identifierPrefix;if(xi){var S=mo,w=Fa;S=(w&~(1<<32-ws(w)-1)).toString(32)+S,p=":"+p+"R"+S,S=pp++,0<S&&(p+="H"+S.toString(32)),p+=":"}else S=_o++,p=":"+p+"r"+S.toString(32)+":";return h.memoizedState=p},useCacheRefresh:function(){return q().memoizedState=bc.bind(null,qn)}};Zu.useMemoCache=Be,Zu.useHostTransitionStatus=Lo,Zu.useFormState=Pn,Zu.useActionState=Pn,Zu.useOptimistic=function(h){var p=q();p.memoizedState=p.baseState=h;var S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=S,p=vi.bind(null,qn,!0,S),S.dispatch=p,[h,p]};var aa={readContext:us,use:pe,useCallback:gl,useContext:us,useEffect:ml,useImperativeHandle:Oo,useInsertionEffect:Af,useLayoutEffect:Uo,useMemo:vl,useReducer:ct,useRef:Zr,useState:function(){return ct(qe)},useDebugValue:da,useDeferredValue:function(h,p){var S=me();return Sc(S,Sn.memoizedState,h,p)},useTransition:function(){var h=ct(qe)[0],p=me().memoizedState;return[typeof h=="boolean"?h:Me(h),p]},useSyncExternalStore:Wt,useId:Zl};aa.useCacheRefresh=Ir,aa.useMemoCache=Be,aa.useHostTransitionStatus=Lo,aa.useFormState=Ui,aa.useActionState=Ui,aa.useOptimistic=function(h,p){var S=me();return cn(S,Sn,h,p)};var Va={readContext:us,use:pe,useCallback:gl,useContext:us,useEffect:ml,useImperativeHandle:Oo,useInsertionEffect:Af,useLayoutEffect:Uo,useMemo:vl,useReducer:wt,useRef:Zr,useState:function(){return wt(qe)},useDebugValue:da,useDeferredValue:function(h,p){var S=me();return Sn===null?Kl(S,h,p):Sc(S,Sn.memoizedState,h,p)},useTransition:function(){var h=wt(qe)[0],p=me().memoizedState;return[typeof h=="boolean"?h:Me(h),p]},useSyncExternalStore:Wt,useId:Zl};Va.useCacheRefresh=Ir,Va.useMemoCache=Be,Va.useHostTransitionStatus=Lo,Va.useFormState=mr,Va.useActionState=mr,Va.useOptimistic=function(h,p){var S=me();return Sn!==null?cn(S,Sn,h,p):(S.baseState=h,[h,S.queue.dispatch])};var Jo={isMounted:function(h){return(h=h._reactInternals)?v(h)===h:!1},enqueueSetState:function(h,p,S){h=h._reactInternals;var w=nr(),L=Et(w);L.payload=p,S!=null&&(L.callback=S),p=_t(h,L,w),p!==null&&(hs(p,h,w),ot(p,h,w))},enqueueReplaceState:function(h,p,S){h=h._reactInternals;var w=nr(),L=Et(w);L.tag=1,L.payload=p,S!=null&&(L.callback=S),p=_t(h,L,w),p!==null&&(hs(p,h,w),ot(p,h,w))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var S=nr(),w=Et(S);w.tag=2,p!=null&&(w.callback=p),p=_t(h,w,S),p!==null&&(hs(p,h,S),ot(p,h,S))}},mp=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},gp=Error(r(461)),ir=!1,vp={dehydrated:null,treeContext:null,retryLane:0},Au=T(null),Zo=null,wr=null,Yf=typeof AbortController<"u"?AbortController:function(){var h=[],p=this.signal={aborted:!1,addEventListener:function(S,w){h.push(w)}};this.abort=function(){p.aborted=!0,h.forEach(function(S){return S()})}},Tv=Na.unstable_scheduleCallback,Ev=Na.unstable_NormalPriority,rr={$$typeof:Ho,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Hm=bn.S;bn.S=function(h,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&rt(h,p),Hm!==null&&Hm(h,p)};var Nl=T(null),Il=!1,Lr=!1,ad=!1,ki=typeof WeakSet=="function"?WeakSet:Set,Gn=null,ii=!1,yn=null,Xn=!1,Br=null,ka=8192,jf={getCacheForType:function(h){var p=us(rr),S=p.data.get(h);return S===void 0&&(S=h(),p.data.set(h,S)),S}},qf=0,xo=1,Ar=2,Qo=3,Fl=4;if(typeof Symbol=="function"&&Symbol.for){var Kc=Symbol.for;qf=Kc("selector.component"),xo=Kc("selector.has_pseudo_class"),Ar=Kc("selector.role"),Qo=Kc("selector.test_id"),Fl=Kc("selector.text")}var Ao=typeof WeakMap=="function"?WeakMap:Map,Ei=0,Xi=null,Mn=null,ci=0,er=0,ys=null,Xa=!1,Wa=!1,ts=!1,js=0,sr=0,Ya=0,Su=0,od=0,ja=0,$o=0,Jc=null,Sr=null,yp=!1,oa=0,Kf=1/0,ld=null,Qu=null,el=!1,Gl=null,Zc=0,$u=0,_p=null,Jf=0,xp=null;return zn.attemptContinuousHydration=function(h){if(h.tag===13){var p=Ke(h,67108864);p!==null&&hs(p,h,67108864),Gh(h,67108864)}},zn.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=nr(),S=Ke(h,p);S!==null&&hs(S,h,p),Gh(h,p)}},zn.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var p=O(h.pendingLanes);if(p!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;p;){var S=1<<31-ws(p);h.entanglements[1]|=S,p&=~S}Ve(h),(Ei&6)===0&&(Kf=qr()+500,j(0))}}break;case 13:p=Ke(h,2),p!==null&&hs(p,h,2),Lh(),Gh(h,2)}},zn.batchedUpdates=function(h,p){return h(p)},zn.createComponentSelector=function(h){return{$$typeof:qf,value:h}},zn.createContainer=function(h,p,S,w,L,z,ue,Ee,ke,St){return ov(h,p,!1,null,S,w,z,ue,Ee,ke,St,null)},zn.createHasPseudoClassSelector=function(h){return{$$typeof:xo,value:h}},zn.createHydrationContainer=function(h,p,S,w,L,z,ue,Ee,ke,St,Ht,Zt,en){return h=ov(S,w,!0,h,L,z,Ee,ke,St,Ht,Zt,en),h.context=Zi(null),S=h.current,w=nr(),L=Et(w),L.callback=p??null,_t(S,L,w),h.current.lanes=w,Q(h,w),Ve(h),h},zn.createPortal=function(h,p,S){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uo,key:w==null?null:""+w,children:h,containerInfo:p,implementation:S}},zn.createRoleSelector=function(h){return{$$typeof:Ar,value:h}},zn.createTestNameSelector=function(h){return{$$typeof:Qo,value:h}},zn.createTextSelector=function(h){return{$$typeof:Fl,value:h}},zn.defaultOnCaughtError=function(h){console.error(h)},zn.defaultOnRecoverableError=function(h){mp(h)},zn.defaultOnUncaughtError=function(h){mp(h)},zn.deferredUpdates=function(h){var p=bn.T,S=fu();try{return ds(32),bn.T=null,h()}finally{ds(S),bn.T=p}},zn.discreteUpdates=function(h,p,S,w,L){var z=bn.T,ue=fu();try{return ds(2),bn.T=null,h(p,S,w,L)}finally{ds(ue),bn.T=z,Ei===0&&(Kf=qr()+500)}},zn.findAllNodes=su,zn.findBoundingRects=function(h,p){if(!Vu)throw Error(r(363));p=su(h,p),h=[];for(var S=0;S<p.length;S++)h.push(Mm(p[S]));for(p=h.length-1;0<p;p--){S=h[p];for(var w=S.x,L=w+S.width,z=S.y,ue=z+S.height,Ee=p-1;0<=Ee;Ee--)if(p!==Ee){var ke=h[Ee],St=ke.x,Ht=St+ke.width,Zt=ke.y,en=Zt+ke.height;if(w>=St&&z>=Zt&&L<=Ht&&ue<=en){h.splice(p,1);break}else if(w!==St||S.width!==ke.width||en<z||Zt>ue){if(!(z!==Zt||S.height!==ke.height||Ht<w||St>L)){St>w&&(ke.width+=St-w,ke.x=w),Ht<L&&(ke.width=L-St),h.splice(p,1);break}}else{Zt>z&&(ke.height+=Zt-z,ke.y=z),en<ue&&(ke.height=ue-Zt),h.splice(p,1);break}}}return h},zn.findHostInstance=jd,zn.findHostInstanceWithNoPortals=function(h){return h=A(h),h=h!==null?C(h):null,h===null?null:Lf(h.stateNode)},zn.findHostInstanceWithWarning=function(h){return jd(h)},zn.flushPassiveEffects=Go,zn.flushSyncFromReconciler=function(h){var p=Ei;Ei|=1;var S=bn.T,w=fu();try{if(ds(2),bn.T=null,h)return h()}finally{ds(w),bn.T=S,Ei=p,(Ei&6)===0&&j(0)}},zn.flushSyncWork=Lh,zn.focusWithin=function(h,p){if(!Vu)throw Error(r(363));for(h=Rc(h),p=ta(h,p),p=Array.from(p),h=0;h<p.length;){var S=p[h++],w=S.tag;if(!ku(S)){if((w===5||w===26||w===27)&&ep(S.stateNode))return!0;for(S=S.child;S!==null;)p.push(S),S=S.sibling}}return!1},zn.getFindAllNodesFailureDescription=function(h,p){if(!Vu)throw Error(r(363));var S=0,w=[];h=[Rc(h),0];for(var L=0;L<h.length;){var z=h[L++],ue=z.tag,Ee=h[L++],ke=p[Ee];if((ue!==5&&ue!==26&&ue!==27||!ku(z))&&(ru(z,ke)&&(w.push(wf(ke)),Ee++,Ee>S&&(S=Ee)),Ee<p.length))for(z=z.child;z!==null;)h.push(z,Ee),z=z.sibling}if(S<p.length){for(h=[];S<p.length;S++)h.push(wf(p[S]));return`findAllNodes was able to match part of the selector:
  `+(w.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},zn.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Lf(h.child.stateNode);default:return h.child.stateNode}},zn.injectIntoDevTools=function(){var h={bundleType:0,version:Xh,rendererPackageName:Vo,currentDispatcherRef:bn,findFiberByHostInstance:xm,reconcilerVersion:"19.0.0"};if(Cs!==null&&(h.rendererConfig=Cs),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{Yi=p.inject(h),Ws=p}catch{}h=!!p.checkDCE}}return h},zn.isAlreadyRendering=function(){return!1},zn.observeVisibleRects=function(h,p,S,w){if(!Vu)throw Error(r(363));h=su(h,p);var L=Em(h,S,w).disconnect;return{disconnect:function(){L()}}},zn.shouldError=function(){return null},zn.shouldSuspend=function(){return!1},zn.startHostTransition=function(h,p,S,w){if(h.tag!==5)throw Error(r(476));var L=Zs(h).queue;Jl(h,L,p,fo,S===null?i:function(){var z=Zs(h).next.queue;return li(h,z,{},nr()),S(w)})},zn.updateContainer=function(h,p,S,w){var L=p.current,z=nr();return Bf(L,z,h,p,S,w),z},zn.updateContainerSync=function(h,p,S,w){return p.tag===0&&Go(),Bf(p.current,2,h,p,S,w),2},zn},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(PT)),PT.exports}var OB;function q7(){return OB||(OB=1,LT.exports=j7()),LT.exports}var K7=q7();const J7=ub(K7);var FT={exports:{}},GT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LB;function Z7(){return LB||(LB=1,function(n){function e(k,ee){var ne=k.length;k.push(ee);e:for(;0<ne;){var de=ne-1>>>1,X=k[de];if(0<r(X,ee))k[de]=ee,k[ne]=X,ne=de;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var ee=k[0],ne=k.pop();if(ne!==ee){k[0]=ne;e:for(var de=0,X=k.length,J=X>>>1;de<J;){var ce=2*(de+1)-1,ge=k[ce],oe=ce+1,ve=k[oe];if(0>r(ge,ne))oe<X&&0>r(ve,ge)?(k[de]=ve,k[oe]=ne,de=oe):(k[de]=ge,k[ce]=ne,de=ce);else if(oe<X&&0>r(ve,ne))k[de]=ve,k[oe]=ne,de=oe;else break e}}return ee}function r(k,ee){var ne=k.sortIndex-ee.sortIndex;return ne!==0?ne:k.id-ee.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var u=[],f=[],d=1,v=null,y=3,A=!1,b=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(k){for(var ee=t(f);ee!==null;){if(ee.callback===null)i(f);else if(ee.startTime<=k)i(f),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=t(f)}}function O(k){if(C=!1,D(k),!b)if(t(u)!==null)b=!0,se();else{var ee=t(f);ee!==null&&ye(O,ee.startTime-k)}}var P=!1,F=-1,V=5,G=-1;function I(){return!(n.unstable_now()-G<V)}function N(){if(P){var k=n.unstable_now();G=k;var ee=!0;try{e:{b=!1,C&&(C=!1,M(F),F=-1),A=!0;var ne=y;try{t:{for(D(k),v=t(u);v!==null&&!(v.expirationTime>k&&I());){var de=v.callback;if(typeof de=="function"){v.callback=null,y=v.priorityLevel;var X=de(v.expirationTime<=k);if(k=n.unstable_now(),typeof X=="function"){v.callback=X,D(k),ee=!0;break t}v===t(u)&&i(u),D(k)}else i(u);v=t(u)}if(v!==null)ee=!0;else{var J=t(f);J!==null&&ye(O,J.startTime-k),ee=!1}}break e}finally{v=null,y=ne,A=!1}ee=void 0}}finally{ee?Q():P=!1}}}var Q;if(typeof B=="function")Q=function(){B(N)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,te=$.port2;$.port1.onmessage=N,Q=function(){te.postMessage(null)}}else Q=function(){T(N,0)};function se(){P||(P=!0,Q())}function ye(k,ee){F=T(function(){k(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){b||A||(b=!0,se())},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_getFirstCallbackNode=function(){return t(u)},n.unstable_next=function(k){switch(y){case 1:case 2:case 3:var ee=3;break;default:ee=y}var ne=y;y=ee;try{return k()}finally{y=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,ee){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ne=y;y=k;try{return ee()}finally{y=ne}},n.unstable_scheduleCallback=function(k,ee,ne){var de=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?de+ne:de):ne=de,k){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ne+X,k={id:d++,callback:ee,priorityLevel:k,startTime:ne,expirationTime:X,sortIndex:-1},ne>de?(k.sortIndex=ne,e(f,k),t(u)===null&&k===t(f)&&(C?(M(F),F=-1):C=!0,ye(O,ne-de))):(k.sortIndex=X,e(u,k),b||A||(b=!0,se())),k},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(k){var ee=y;return function(){var ne=y;y=ee;try{return k.apply(this,arguments)}finally{y=ne}}}}(GT)),GT}var PB;function Q7(){return PB||(PB=1,FT.exports=Z7()),FT.exports}var NB=Q7();const $7=n=>typeof n=="object"&&typeof n.then=="function",Bg=[];function aN(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function oN(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Bg)if(aN(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=Bg.indexOf(r);s!==-1&&Bg.splice(s,1)},promise:($7(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(Bg.push(r),!t)throw r.promise}const lN=(n,e,t)=>oN(n,e,!1,t),eX=(n,e,t)=>void oN(n,e,!0,t),tX=n=>{if(n===void 0||n.length===0)Bg.splice(0,Bg.length);else{const e=Bg.find(t=>aN(n,t.keys,t.equal));e&&e.remove()}};function Y2(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=Y2(i,e,t);if(r)return r;i=e?null:i.sibling}}function uN(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const j2=uN(we.createContext(null));class cN extends we.Component{render(){return we.createElement(j2.Provider,{value:this._reactInternals},this.props.children)}}function fN(){const n=we.useContext(j2);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=we.useId();return we.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=Y2(t,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const nX=Symbol.for("react.context"),iX=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===nX;function rX(){const n=fN(),[e]=we.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;iX(i)&&i!==j2&&!e.has(i)&&e.set(i,we.use(uN(i))),t=t.return}return e}function sX(){const n=rX();return we.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>we.createElement(e,null,we.createElement(t.Provider,{...i,value:n.get(t)})),e=>we.createElement(cN,{...e})),[n])}function hN(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const dN=n=>n&&n.isOrthographicCamera,aX=n=>n&&n.hasOwnProperty("current"),oX=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),P_=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?we.useLayoutEffect:we.useEffect;function q2(n){const e=we.useRef(n);return P_(()=>void(e.current=n),[n]),e}function lX(){const n=fN(),e=sX();return we.useMemo(()=>({children:t})=>{const r=!!Y2(n,!0,s=>s.type===we.StrictMode)?we.StrictMode:we.Fragment;return Gt.jsx(r,{children:Gt.jsx(e,{children:t})})},[n,e])}function uX({set:n}){return P_(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const cX=(n=>(n=class extends we.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function pN(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function c0(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const Jr={obj:n=>n===Object(n)&&!Jr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Jr.str(n)||Jr.num(n)||Jr.boo(n))return n===e;const s=Jr.obj(n);if(s&&i==="reference")return n===e;const a=Jr.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!Jr.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(Jr.und(l)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function fX(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function hX(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];(t==null?void 0:t.type)!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const mN=["children","key","ref"];function dX(n){const e={};for(const t in n)mN.includes(t)||(e[t]=n[t]);return e}function GS(n,e,t,i){const r=n;let s=r==null?void 0:r.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:dX(i),object:r,eventCount:0,handlers:{},isHidden:!1},r&&(r.__r3f=s)),s}function K1(n,e){let t=n[e];if(!e.includes("-"))return{root:n,key:e,target:t};t=n;for(const r of e.split("-")){var i;e=r,n=t,t=(i=t)==null?void 0:i[e]}return{root:n,key:e,target:t}}const IB=/-\d+$/;function HS(n,e){if(Jr.str(e.props.attach)){if(IB.test(e.props.attach)){const r=e.props.attach.replace(IB,""),{root:s,key:a}=K1(n.object,r);Array.isArray(s[a])||(s[a]=[])}const{root:t,key:i}=K1(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else Jr.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function zS(n,e){if(Jr.str(e.props.attach)){const{root:t,key:i}=K1(n.object,e.props.attach),r=e.previousAttach;r===void 0?delete t[i]:t[i]=r}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const KE=[...mN,"args","dispose","attach","object","onUpdate","dispose"],FB=new Map;function pX(n){let e=FB.get(n.constructor);try{e||(e=new n.constructor,FB.set(n.constructor,e))}catch{}return e}function mX(n,e){const t={};for(const i in e)if(!KE.includes(i)&&!Jr.equ(e[i],n.props[i])){t[i]=e[i];for(const r in e)r.startsWith(`${i}-`)&&(t[r]=e[r])}for(const i in n.props){if(KE.includes(i)||e.hasOwnProperty(i))continue;const{root:r,key:s}=K1(n.object,i);if(r.constructor&&r.constructor.length===0){const a=pX(r);Jr.und(a)||(t[s]=a[s])}else t[s]=0}return t}const gX=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],vX=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ff(n,e){var t;const i=n.__r3f,r=i&&hN(i).getState(),s=i==null?void 0:i.eventCount;for(const l in e){let u=e[l];if(KE.includes(l))continue;if(i&&vX.test(l)){typeof u=="function"?i.handlers[l]=u:delete i.handlers[l],i.eventCount=Object.keys(i.handlers).length;continue}if(u===void 0)continue;let{root:f,key:d,target:v}=K1(n,l);if(v instanceof V0&&u instanceof V0)v.mask=u.mask;else if(v instanceof jt&&oX(u))v.set(u);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof v.copy=="function"&&u!=null&&u.constructor&&v.constructor===u.constructor)v.copy(u);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&Array.isArray(u))typeof v.fromArray=="function"?v.fromArray(u):v.set(...u);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof u=="number")typeof v.setScalar=="function"?v.setScalar(u):v.set(u);else{var a;f[d]=u,r&&!r.linear&&gX.includes(d)&&(a=f[d])!=null&&a.isTexture&&f[d].format===Fs&&f[d].type===dl&&(f[d].colorSpace=$a)}}if(i!=null&&i.parent&&r!=null&&r.internal&&(t=i.object)!=null&&t.isObject3D&&s!==i.eventCount){const l=i.object,u=r.internal.interaction.indexOf(l);u>-1&&r.internal.interaction.splice(u,1),i.eventCount&&l.raycast!==null&&r.internal.interaction.push(l)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&ry(i),n}function ry(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function gN(n,e){n.manual||(dN(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const al=n=>n==null?void 0:n.isObject3D;function vA(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function vN(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function yX(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{vN(t.capturedMap,e,i,r)})}function _X(n){function e(u){const{internal:f}=n.getState(),d=u.offsetX-f.initialClick[0],v=u.offsetY-f.initialClick[1];return Math.round(Math.sqrt(d*d+v*v))}function t(u){return u.filter(f=>["Move","Over","Enter","Out","Leave"].some(d=>{var v;return(v=f.__r3f)==null?void 0:v.handlers["onPointer"+d]}))}function i(u,f){const d=n.getState(),v=new Set,y=[],A=f?f(d.internal.interaction):d.internal.interaction;for(let M=0;M<A.length;M++){const B=c0(A[M]);B&&(B.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(u,d);function b(M){const B=c0(M);if(!B||!B.events.enabled||B.raycaster.camera===null)return[];if(B.raycaster.camera===void 0){var D;B.events.compute==null||B.events.compute(u,B,(D=B.previousRoot)==null?void 0:D.getState()),B.raycaster.camera===void 0&&(B.raycaster.camera=null)}return B.raycaster.camera?B.raycaster.intersectObject(M,!0):[]}let C=A.flatMap(b).sort((M,B)=>{const D=c0(M.object),O=c0(B.object);return!D||!O?M.distance-B.distance:O.events.priority-D.events.priority||M.distance-B.distance}).filter(M=>{const B=vA(M);return v.has(B)?!1:(v.add(B),!0)});d.events.filter&&(C=d.events.filter(C,d));for(const M of C){let B=M.object;for(;B;){var T;(T=B.__r3f)!=null&&T.eventCount&&y.push({...M,eventObject:B}),B=B.parent}}if("pointerId"in u&&d.internal.capturedMap.has(u.pointerId))for(let M of d.internal.capturedMap.get(u.pointerId).values())v.has(vA(M.intersection))||y.push(M.intersection);return y}function r(u,f,d,v){if(u.length){const y={stopped:!1};for(const A of u){let b=c0(A.object);if(b||A.object.traverseAncestors(C=>{const T=c0(C);if(T)return b=T,!1}),b){const{raycaster:C,pointer:T,camera:M,internal:B}=b,D=new he(T.x,T.y,0).unproject(M),O=I=>{var N,Q;return(N=(Q=B.capturedMap.get(I))==null?void 0:Q.has(A.eventObject))!=null?N:!1},P=I=>{const N={intersection:A,target:f.target};B.capturedMap.has(I)?B.capturedMap.get(I).set(A.eventObject,N):B.capturedMap.set(I,new Map([[A.eventObject,N]])),f.target.setPointerCapture(I)},F=I=>{const N=B.capturedMap.get(I);N&&vN(B.capturedMap,A.eventObject,N,I)};let V={};for(let I in f){let N=f[I];typeof N!="function"&&(V[I]=N)}let G={...A,...V,pointer:T,intersections:u,stopped:y.stopped,delta:d,unprojectedPoint:D,ray:C.ray,camera:M,stopPropagation(){const I="pointerId"in f&&B.capturedMap.get(f.pointerId);if((!I||I.has(A.eventObject))&&(G.stopped=y.stopped=!0,B.hovered.size&&Array.from(B.hovered.values()).find(N=>N.eventObject===A.eventObject))){const N=u.slice(0,u.indexOf(A));s([...N,A])}},target:{hasPointerCapture:O,setPointerCapture:P,releasePointerCapture:F},currentTarget:{hasPointerCapture:O,setPointerCapture:P,releasePointerCapture:F},nativeEvent:f};if(v(G),y.stopped===!0)break}}}return u}function s(u){const{internal:f}=n.getState();for(const d of f.hovered.values())if(!u.length||!u.find(v=>v.object===d.object&&v.index===d.index&&v.instanceId===d.instanceId)){const y=d.eventObject.__r3f;if(f.hovered.delete(vA(d)),y!=null&&y.eventCount){const A=y.handlers,b={...d,intersections:u};A.onPointerOut==null||A.onPointerOut(b),A.onPointerLeave==null||A.onPointerLeave(b)}}}function a(u,f){for(let d=0;d<f.length;d++){const v=f[d].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(u)}}function l(u){switch(u){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:d}=n.getState();"pointerId"in f&&d.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(f.pointerId)&&(d.capturedMap.delete(f.pointerId),s([]))})}}return function(d){const{onPointerMissed:v,internal:y}=n.getState();y.lastEvent.current=d;const A=u==="onPointerMove",b=u==="onClick"||u==="onContextMenu"||u==="onDoubleClick",T=i(d,A?t:void 0),M=b?e(d):0;u==="onPointerDown"&&(y.initialClick=[d.offsetX,d.offsetY],y.initialHits=T.map(D=>D.eventObject)),b&&!T.length&&M<=2&&(a(d,y.interaction),v&&v(d)),A&&s(T);function B(D){const O=D.eventObject,P=O.__r3f;if(!(P!=null&&P.eventCount))return;const F=P.handlers;if(A){if(F.onPointerOver||F.onPointerEnter||F.onPointerOut||F.onPointerLeave){const V=vA(D),G=y.hovered.get(V);G?G.stopped&&D.stopPropagation():(y.hovered.set(V,D),F.onPointerOver==null||F.onPointerOver(D),F.onPointerEnter==null||F.onPointerEnter(D))}F.onPointerMove==null||F.onPointerMove(D)}else{const V=F[u];V?(!b||y.initialHits.includes(O))&&(a(d,y.interaction.filter(G=>!y.initialHits.includes(G))),V(D)):b&&y.initialHits.includes(O)&&a(d,y.interaction.filter(G=>!y.initialHits.includes(G)))}}r(T,d,M,B)}}return{handlePointer:l}}const GB=n=>!!(n!=null&&n.render),K2=we.createContext(null),xX=(n,e)=>{const t=sN((l,u)=>{const f=new he,d=new he,v=new he;function y(M=u().camera,B=d,D=u().size){const{width:O,height:P,top:F,left:V}=D,G=O/P;B.isVector3?v.copy(B):v.set(...B);const I=M.getWorldPosition(f).distanceTo(v);if(dN(M))return{width:O/M.zoom,height:P/M.zoom,top:F,left:V,factor:1,distance:I,aspect:G};{const N=M.fov*Math.PI/180,Q=2*Math.tan(N/2)*I,$=Q*(O/P);return{width:$,height:Q,top:F,left:V,factor:O/$,distance:I,aspect:G}}}let A;const b=M=>l(B=>({performance:{...B.performance,current:M}})),C=new xt;return{set:l,get:u,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>n(u(),M),advance:(M,B)=>e(M,B,u()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new F2,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=u();A&&clearTimeout(A),M.performance.current!==M.performance.min&&b(M.performance.min),A=setTimeout(()=>b(u().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:y},setEvents:M=>l(B=>({...B,events:{...B.events,...M}})),setSize:(M,B,D=0,O=0)=>{const P=u().camera,F={width:M,height:B,top:D,left:O};l(V=>({size:F,viewport:{...V.viewport,...y(P,d,F)}}))},setDpr:M=>l(B=>{const D=pN(M);return{viewport:{...B.viewport,dpr:D,initialDpr:B.viewport.initialDpr||D}}}),setFrameloop:(M="always")=>{const B=u().clock;B.stop(),B.elapsedTime=0,M!=="never"&&(B.start(),B.elapsedTime=0),l(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:we.createRef(),active:!1,frames:0,priority:0,subscribe:(M,B,D)=>{const O=u().internal;return O.priority=O.priority+(B>0?1:0),O.subscribers.push({ref:M,priority:B,store:D}),O.subscribers=O.subscribers.sort((P,F)=>P.priority-F.priority),()=>{const P=u().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(B>0?1:0),P.subscribers=P.subscribers.filter(F=>F.ref!==M))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:l,size:u,viewport:f,gl:d,set:v}=t.getState();if(u.width!==r.width||u.height!==r.height||f.dpr!==s){r=u,s=f.dpr,gN(l,u),f.dpr>0&&d.setPixelRatio(f.dpr);const y=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(u.width,u.height,y)}l!==a&&(a=l,v(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};function J2(){const n=we.useContext(K2);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function ol(n=t=>t,e){return J2()(n,e)}function N_(n,e=0){const t=J2(),i=t.getState().internal.subscribe,r=q2(n);return P_(()=>i(r,e,t),[e,i,t]),null}const HB=new WeakMap,AX=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function yN(n,e){return function(t,...i){let r;return AX(t)?(r=HB.get(t),r||(r=new t,HB.set(t,r))):r=t,n&&n(r),Promise.all(i.map(s=>new Promise((a,l)=>r.load(s,u=>{al(u==null?void 0:u.scene)&&Object.assign(u,fX(u.scene)),a(u)},e,u=>l(new Error(`Could not load ${s}: ${u==null?void 0:u.message}`))))))}}function Rd(n,e,t,i){const r=Array.isArray(e)?e:[e],s=lN(yN(t,i),[n,...r],{equal:Jr.equ});return Array.isArray(e)?s:s[0]}Rd.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return eX(yN(t),[n,...i])};Rd.clear=function(n,e){const t=Array.isArray(e)?e:[e];return tX([n,...t])};function SX(n){const e=J7(n);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:we.version}),e}const _N=0,Y0={},bX=/^three(?=[A-Z])/,Wb=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let MX=0;const TX=n=>typeof n=="function";function xN(n){if(TX(n)){const e=`${MX++}`;return Y0[e]=n,e}else Object.assign(Y0,n)}function AN(n,e){const t=Wb(n),i=Y0[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function EX(n,e,t){var i;return n=Wb(n)in Y0?n:n.replace(bX,""),AN(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,GS(e.object,t,n,e)}function CX(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?zS(n.parent,n):al(n.object)&&(n.object.visible=!1),n.isHidden=!0,ry(n)}}function SN(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?HS(n.parent,n):al(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,ry(n)}}function Z2(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var r,s;const a=Y0[Wb(e.type)];e.object=(r=e.props.object)!=null?r:new a(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(ff(e.object,e.props),e.props.attach)HS(n,e);else if(al(e.object)&&al(n.object)){const a=n.object.children.indexOf(t==null?void 0:t.object);if(t&&a!==-1){const l=n.object.children.indexOf(e.object);if(l!==-1){n.object.children.splice(l,1);const u=l<a?a-1:a;n.object.children.splice(u,0,e.object)}else e.object.parent=n.object,n.object.children.splice(a,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const a of e.children)Z2(e,a);ry(e)}}function HT(n,e){e&&(e.parent=n,n.children.push(e),Z2(n,e))}function zB(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),Z2(n,e,t)}function bN(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():NB.unstable_scheduleCallback(NB.unstable_IdlePriority,e)}}function JE(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?zS(n,e):al(e.object)&&al(n.object)&&(n.object.remove(e.object),yX(hN(e),e.object));const r=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const a=e.children[s];JE(e,a,r)}e.children.length=0,delete e.object.__r3f,r&&e.type!=="primitive"&&e.object.type!=="Scene"&&bN(e.object),t===void 0&&ry(e)}function wX(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const GA=[];function RX(){for(const[t]of GA){const i=t.parent;if(i){t.props.attach?zS(i,t):al(t.object)&&al(i.object)&&i.object.remove(t.object);for(const r of t.children)r.props.attach?zS(t,r):al(r.object)&&al(t.object)&&t.object.remove(r.object)}t.isHidden&&SN(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&bN(t.object)}for(const[t,i,r]of GA){t.props=i;const s=t.parent;if(s){var n,e;const a=Y0[Wb(t.type)];t.object=(n=t.props.object)!=null?n:new a(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,wX(r,t.object),ff(t.object,t.props),t.props.attach?HS(s,t):al(t.object)&&al(s.object)&&s.object.add(t.object);for(const l of t.children)l.props.attach?HS(t,l):al(l.object)&&al(t.object)&&t.object.add(l.object);ry(t)}}GA.length=0}const zT=()=>{},VB={};let yA=_N;const DX=0,BX=4,VS=SX({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:EX,removeChild:JE,appendChild:HT,appendInitialChild:HT,insertBefore:zB,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||HT(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||JE(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||zB(i,e,t)},getRootHostContext:()=>VB,getChildHostContext:()=>VB,commitUpdate(n,e,t,i,r){var s,a,l;AN(e,i);let u=!1;if((n.type==="primitive"&&t.object!==i.object||((s=i.args)==null?void 0:s.length)!==((a=t.args)==null?void 0:a.length)||(l=i.args)!=null&&l.some((d,v)=>{var y;return d!==((y=t.args)==null?void 0:y[v])}))&&(u=!0),u)GA.push([n,{...i},r]);else{const d=mX(n,i);Object.keys(d).length&&(Object.assign(n.props,d),ff(n.object,d))}(r.sibling===null||(r.flags&BX)===DX)&&RX()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>GS(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:CX,unhideInstance:SN,createTextInstance:zT,hideTextInstance:zT,unhideTextInstance:zT,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:we.createContext(null),setCurrentUpdatePriority(n){yA=n},getCurrentUpdatePriority(){return yA},resolveUpdatePriority(){var n;if(yA!==_N)return yA;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return FA.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return FA.ContinuousEventPriority;default:return FA.DefaultEventPriority}},resetFormInstance(){}}),Jg=new Map,f0={objects:"shallow",strict:!1};function UX(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function OX(n){const e=Jg.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||xX($E,XB),a=t||VS.createContainer(s,FA.ConcurrentRoot,null,!1,null,"",r,r,r,null);e||Jg.set(n,{fiber:a,store:s});let l,u,f=!1,d=null;return{async configure(v={}){let y;d=new Promise(J=>y=J);let{gl:A,size:b,scene:C,events:T,onCreated:M,shadows:B=!1,linear:D=!1,flat:O=!1,legacy:P=!1,orthographic:F=!1,frameloop:V="always",dpr:G=[1,2],performance:I,raycaster:N,camera:Q,onPointerMissed:$}=v,te=s.getState(),se=te.gl;if(!te.gl){const J={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},ce=typeof A=="function"?await A(J):A;GB(ce)?se=ce:se=new W2({...J,...A}),te.set({gl:se})}let ye=te.raycaster;ye||te.set({raycaster:ye=new V2});const{params:k,...ee}=N||{};if(Jr.equ(ee,ye,f0)||ff(ye,{...ee}),Jr.equ(k,ye.params,f0)||ff(ye,{params:{...ye.params,...k}}),!te.camera||te.camera===u&&!Jr.equ(u,Q,f0)){u=Q;const J=Q==null?void 0:Q.isCamera,ce=J?Q:F?new uh(0,0,0,0,.1,1e3):new Ss(75,0,.1,1e3);J||(ce.position.z=5,Q&&(ff(ce,Q),ce.manual||("aspect"in Q||"left"in Q||"right"in Q||"bottom"in Q||"top"in Q)&&(ce.manual=!0,ce.updateProjectionMatrix())),!te.camera&&!(Q!=null&&Q.rotation)&&ce.lookAt(0,0,0)),te.set({camera:ce}),ye.camera=ce}if(!te.scene){let J;C!=null&&C.isScene?(J=C,GS(J,s,"",{})):(J=new E_,GS(J,s,"",{}),C&&ff(J,C)),te.set({scene:J})}T&&!te.events.handlers&&te.set({events:T(s)});const ne=UX(n,b);if(Jr.equ(ne,te.size,f0)||te.setSize(ne.width,ne.height,ne.top,ne.left),G&&te.viewport.dpr!==pN(G)&&te.setDpr(G),te.frameloop!==V&&te.setFrameloop(V),te.onPointerMissed||te.set({onPointerMissed:$}),I&&!Jr.equ(I,te.performance,f0)&&te.set(J=>({performance:{...J.performance,...I}})),!te.xr){var de;const J=(oe,ve)=>{const Se=s.getState();Se.frameloop!=="never"&&XB(oe,!0,Se,ve)},ce=()=>{const oe=s.getState();oe.gl.xr.enabled=oe.gl.xr.isPresenting,oe.gl.xr.setAnimationLoop(oe.gl.xr.isPresenting?J:null),oe.gl.xr.isPresenting||$E(oe)},ge={connect(){const oe=s.getState().gl;oe.xr.addEventListener("sessionstart",ce),oe.xr.addEventListener("sessionend",ce)},disconnect(){const oe=s.getState().gl;oe.xr.removeEventListener("sessionstart",ce),oe.xr.removeEventListener("sessionend",ce)}};typeof((de=se.xr)==null?void 0:de.addEventListener)=="function"&&ge.connect(),te.set({xr:ge})}if(se.shadowMap){const J=se.shadowMap.enabled,ce=se.shadowMap.type;if(se.shadowMap.enabled=!!B,Jr.boo(B))se.shadowMap.type=d1;else if(Jr.str(B)){var X;const ge={basic:dL,percentage:cb,soft:d1,variance:lf};se.shadowMap.type=(X=ge[B])!=null?X:d1}else Jr.obj(B)&&Object.assign(se.shadowMap,B);(J!==se.shadowMap.enabled||ce!==se.shadowMap.type)&&(se.shadowMap.needsUpdate=!0)}return Ni.enabled=!P,f||(se.outputColorSpace=D?gf:$a,se.toneMapping=O?lh:n2),te.legacy!==P&&te.set(()=>({legacy:P})),te.linear!==D&&te.set(()=>({linear:D})),te.flat!==O&&te.set(()=>({flat:O})),A&&!Jr.fun(A)&&!GB(A)&&!Jr.equ(A,se,f0)&&ff(se,A),l=M,f=!0,y(),this},render(v){return!f&&!d&&this.configure(),d.then(()=>{VS.updateContainer(Gt.jsx(LX,{store:s,children:v,onCreated:l,rootElement:n}),a,null,()=>{})}),s},unmount(){MN(n)}}}function LX({store:n,children:e,onCreated:t,rootElement:i}){return P_(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),Gt.jsx(K2.Provider,{value:n,children:e})}function MN(n,e){const t=Jg.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),VS.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,l,u;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(u=r.gl)!=null&&u.xr&&r.xr.disconnect(),hX(r.scene),Jg.delete(n)}catch{}},500)})}}function PX(n,e,t){return Gt.jsx(NX,{children:n,container:e,state:t})}function NX({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,a=J2(),[l]=we.useState(()=>new V2),[u]=we.useState(()=>new xt),f=q2((v,y)=>{let A;if(y.camera&&r){const b=y.camera;A=v.viewport.getCurrentViewport(b,new he,r),b!==v.camera&&gN(b,r)}return{...v,...y,scene:t,raycaster:l,pointer:u,mouse:u,previousRoot:a,events:{...v.events,...y.events,...i},size:{...v.size,...r},viewport:{...v.viewport,...A},setEvents:b=>y.set(C=>({...C,events:{...C.events,...b}}))}}),d=we.useMemo(()=>{const v=sN((A,b)=>({...s,set:A,get:b})),y=A=>v.setState(b=>f.current(A,b));return y(a.getState()),a.subscribe(y),v},[a,t]);return Gt.jsx(Gt.Fragment,{children:VS.createPortal(Gt.jsx(K2.Provider,{value:d,children:e}),d,null)})}function IX(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}const TN=new Set,FX=new Set,GX=new Set,HX=n=>IX(n,TN);function VT(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function S1(n,e){switch(n){case"before":return VT(TN,e);case"after":return VT(FX,e);case"tail":return VT(GX,e)}}let kT,XT;function ZE(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),kT=e.internal.subscribers;for(let r=0;r<kT.length;r++)XT=kT[r],XT.ref.current(XT.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let kS=!1,QE=!1,WT,kB,h0;function EN(n){kB=requestAnimationFrame(EN),kS=!0,WT=0,S1("before",n),QE=!0;for(const t of Jg.values()){var e;h0=t.store.getState(),h0.internal.active&&(h0.frameloop==="always"||h0.internal.frames>0)&&!((e=h0.gl.xr)!=null&&e.isPresenting)&&(WT+=ZE(n,h0))}if(QE=!1,S1("after",n),WT===0)return S1("tail",n),kS=!1,cancelAnimationFrame(kB)}function $E(n,e=1){var t;if(!n)return Jg.forEach(i=>$E(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):QE?n.internal.frames=2:n.internal.frames=1,kS||(kS=!0,requestAnimationFrame(EN)))}function XB(n,e=!0,t,i){if(e&&S1("before",n),t)ZE(n,t,i);else for(const r of Jg.values())ZE(n,r.store.getState());e&&S1("after",n)}const YT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function zX(n){const{handlePointer:e}=_X(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(YT).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{const{set:i,events:r}=n.getState();if(r.disconnect==null||r.disconnect(),i(s=>({events:{...s.events,connected:t}})),r.handlers)for(const s in r.handlers){const a=r.handlers[s],[l,u]=YT[s];t.addEventListener(l,a,{passive:u})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const r in i.handlers){const s=i.handlers[r],[a]=YT[r];i.connected.removeEventListener(a,s)}t(r=>({events:{...r.events,connected:void 0}}))}}}}function WB(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function VX({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=we.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=we.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),u=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,d=we.useRef(!1);we.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[v,y,A]=we.useMemo(()=>{const M=()=>{if(!l.current.element)return;const{left:B,top:D,width:O,height:P,bottom:F,right:V,x:G,y:I}=l.current.element.getBoundingClientRect(),N={left:B,top:D,width:O,height:P,bottom:F,right:V,x:G,y:I};l.current.element instanceof HTMLElement&&i&&(N.height=l.current.element.offsetHeight,N.width=l.current.element.offsetWidth),Object.freeze(N),d.current&&!YX(l.current.lastBounds,N)&&a(l.current.lastBounds=N)};return[M,f?WB(M,f):M,u?WB(M,u):M]},[a,i,u,f]);function b(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",A,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function C(){l.current.element&&(l.current.resizeObserver=new r(A),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(M=>M.addEventListener("scroll",A,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{A()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const T=M=>{!M||M===l.current.element||(b(),l.current.element=M,l.current.scrollContainers=CN(M),C())};return XX(A,!!e),kX(y),we.useEffect(()=>{b(),C()},[e,A,y]),we.useEffect(()=>b,[]),[T,s,v]}function kX(n){we.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function XX(n,e){we.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function CN(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...CN(n.parentElement)]}const WX=["x","y","top","bottom","left","right","width","height"],YX=(n,e)=>WX.every(t=>n[t]===e[t]);function jX({ref:n,children:e,fallback:t,resize:i,style:r,gl:s,events:a=zX,eventSource:l,eventPrefix:u,shadows:f,linear:d,flat:v,legacy:y,orthographic:A,frameloop:b,dpr:C,performance:T,raycaster:M,camera:B,scene:D,onPointerMissed:O,onCreated:P,...F}){we.useMemo(()=>xN(iN),[]);const V=lX(),[G,I]=VX({scroll:!0,debounce:{scroll:50,resize:0},...i}),N=we.useRef(null),Q=we.useRef(null);we.useImperativeHandle(n,()=>N.current);const $=q2(O),[te,se]=we.useState(!1),[ye,k]=we.useState(!1);if(te)throw te;if(ye)throw ye;const ee=we.useRef(null);P_(()=>{const de=N.current;if(I.width>0&&I.height>0&&de){ee.current||(ee.current=OX(de));async function X(){await ee.current.configure({gl:s,scene:D,events:a,shadows:f,linear:d,flat:v,legacy:y,orthographic:A,frameloop:b,dpr:C,performance:T,raycaster:M,camera:B,size:I,onPointerMissed:(...J)=>$.current==null?void 0:$.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(l?aX(l)?l.current:l:Q.current),u&&J.setEvents({compute:(ce,ge)=>{const oe=ce[u+"X"],ve=ce[u+"Y"];ge.pointer.set(oe/ge.size.width*2-1,-(ve/ge.size.height)*2+1),ge.raycaster.setFromCamera(ge.pointer,ge.camera)}}),P==null||P(J)}}),ee.current.render(Gt.jsx(V,{children:Gt.jsx(cX,{set:k,children:Gt.jsx(we.Suspense,{fallback:Gt.jsx(uX,{set:se}),children:e??null})})}))}X()}}),we.useEffect(()=>{const de=N.current;if(de)return()=>MN(de)},[]);const ne=l?"none":"auto";return Gt.jsx("div",{ref:Q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ne,...r},...F,children:Gt.jsx("div",{ref:G,style:{width:"100%",height:"100%"},children:Gt.jsx("canvas",{ref:N,style:{display:"block"},children:t})})})}function qX(n){return Gt.jsx(cN,{children:Gt.jsx(jX,{...n})})}const KX="modulepreload",JX=function(n){return"/my-portfolio/"+n},YB={},ZX=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){let a=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=a(t.map(f=>{if(f=JX(f),f in YB)return;YB[f]=!0;const d=f.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${v}`))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":KX,d||(y.as="script"),y.crossOrigin="",y.href=f,u&&y.setAttribute("nonce",u),document.head.appendChild(y),d)return new Promise((A,b)=>{y.addEventListener("load",A),y.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${f}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function J1(){return J1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},J1.apply(null,arguments)}const QX=n=>n;function $X(n,e=QX){const t=Tg.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return Tg.useDebugValue(t),t}const jB=n=>{const e=rN(n),t=i=>$X(e,i);return Object.assign(t,e),t},eW=n=>n?jB(n):jB,Q2=parseInt($0.replace(/\D+/g,""));function qB(n,e){if(e===XL)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===OS||e===u2){let t=n.getIndex();if(t===null){const a=[],l=n.getAttribute("position");if(l!==void 0){for(let u=0;u<l.count;u++)a.push(u);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===OS)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}var hc=Uint8Array,Vp=Uint16Array,eC=Uint32Array,wN=new hc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),RN=new hc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tW=new hc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DN=function(n,e){for(var t=new Vp(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new eC(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},BN=DN(wN,2),UN=BN[0],nW=BN[1];UN[28]=258,nW[258]=28;var iW=DN(RN,0),rW=iW[0],tC=new Vp(32768);for(var Vr=0;Vr<32768;++Vr){var Pp=(Vr&43690)>>>1|(Vr&21845)<<1;Pp=(Pp&52428)>>>2|(Pp&13107)<<2,Pp=(Pp&61680)>>>4|(Pp&3855)<<4,tC[Vr]=((Pp&65280)>>>8|(Pp&255)<<8)>>>1}var b1=function(n,e,t){for(var i=n.length,r=0,s=new Vp(e);r<i;++r)++s[n[r]-1];var a=new Vp(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var l;if(t){l=new Vp(1<<e);var u=15-e;for(r=0;r<i;++r)if(n[r])for(var f=r<<4|n[r],d=e-n[r],v=a[n[r]-1]++<<d,y=v|(1<<d)-1;v<=y;++v)l[tC[v]>>>u]=f}else for(l=new Vp(i),r=0;r<i;++r)n[r]&&(l[r]=tC[a[n[r]-1]++]>>>15-n[r]);return l},I_=new hc(288);for(var Vr=0;Vr<144;++Vr)I_[Vr]=8;for(var Vr=144;Vr<256;++Vr)I_[Vr]=9;for(var Vr=256;Vr<280;++Vr)I_[Vr]=7;for(var Vr=280;Vr<288;++Vr)I_[Vr]=8;var ON=new hc(32);for(var Vr=0;Vr<32;++Vr)ON[Vr]=5;var sW=b1(I_,9,1),aW=b1(ON,5,1),jT=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},sf=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},qT=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},oW=function(n){return(n/8|0)+(n&7&&1)},lW=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Vp?Vp:n instanceof eC?eC:hc)(t-e);return i.set(n.subarray(e,t)),i},uW=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new hc(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new hc(i*3));var a=function(Se){var Re=e.length;if(Se>Re){var Le=new hc(Math.max(Re*2,Se));Le.set(e),e=Le}},l=t.f||0,u=t.p||0,f=t.b||0,d=t.l,v=t.d,y=t.m,A=t.n,b=i*8;do{if(!d){t.f=l=sf(n,u,1);var C=sf(n,u+1,3);if(u+=3,C)if(C==1)d=sW,v=aW,y=9,A=5;else if(C==2){var D=sf(n,u,31)+257,O=sf(n,u+10,15)+4,P=D+sf(n,u+5,31)+1;u+=14;for(var F=new hc(P),V=new hc(19),G=0;G<O;++G)V[tW[G]]=sf(n,u+G*3,7);u+=O*3;for(var I=jT(V),N=(1<<I)-1,Q=b1(V,I,1),G=0;G<P;){var $=Q[sf(n,u,N)];u+=$&15;var T=$>>>4;if(T<16)F[G++]=T;else{var te=0,se=0;for(T==16?(se=3+sf(n,u,3),u+=2,te=F[G-1]):T==17?(se=3+sf(n,u,7),u+=3):T==18&&(se=11+sf(n,u,127),u+=7);se--;)F[G++]=te}}var ye=F.subarray(0,D),k=F.subarray(D);y=jT(ye),A=jT(k),d=b1(ye,y,1),v=b1(k,A,1)}else throw"invalid block type";else{var T=oW(u)+4,M=n[T-4]|n[T-3]<<8,B=T+M;if(B>i){if(s)throw"unexpected EOF";break}r&&a(f+M),e.set(n.subarray(T,B),f),t.b=f+=M,t.p=u=B*8;continue}if(u>b){if(s)throw"unexpected EOF";break}}r&&a(f+131072);for(var ee=(1<<y)-1,ne=(1<<A)-1,de=u;;de=u){var te=d[qT(n,u)&ee],X=te>>>4;if(u+=te&15,u>b){if(s)throw"unexpected EOF";break}if(!te)throw"invalid length/literal";if(X<256)e[f++]=X;else if(X==256){de=u,d=null;break}else{var J=X-254;if(X>264){var G=X-257,ce=wN[G];J=sf(n,u,(1<<ce)-1)+UN[G],u+=ce}var ge=v[qT(n,u)&ne],oe=ge>>>4;if(!ge)throw"invalid distance";u+=ge&15;var k=rW[oe];if(oe>3){var ce=RN[oe];k+=qT(n,u)&(1<<ce)-1,u+=ce}if(u>b){if(s)throw"unexpected EOF";break}r&&a(f+131072);for(var ve=f+J;f<ve;f+=4)e[f]=e[f-k],e[f+1]=e[f+1-k],e[f+2]=e[f+2-k],e[f+3]=e[f+3-k];f=ve}}t.l=d,t.p=de,t.b=f,d&&(l=1,t.m=y,t.d=v,t.n=A)}while(!l);return f==e.length?e:lW(e,0,f)},cW=new hc(0),fW=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function _A(n,e){return uW((fW(n),n.subarray(2,-4)),e)}var hW=typeof TextDecoder<"u"&&new TextDecoder,dW=0;try{hW.decode(cW,{stream:!0}),dW=1}catch{}const pW=n=>n&&n.isCubeTexture;class mW extends Ur{constructor(e,t){var i,r;const s=pW(e),l=((r=s?(i=e.image[0])==null?void 0:i.width:e.image.width)!=null?r:1024)/4,u=Math.floor(Math.log2(l)),f=Math.pow(2,u),d=3*Math.max(f,16*7),v=4*f,y=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/v}`,`#define CUBEUV_MAX_MIP ${u}.0`],A=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,b=y.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Q2>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,C={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},T=new B_(1,16),M=new pl({uniforms:C,fragmentShader:b,vertexShader:A,side:Ru});super(T,M)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var gW=Object.defineProperty,vW=(n,e,t)=>e in n?gW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,yW=(n,e,t)=>(vW(n,e+"",t),t);class _W{constructor(){yW(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}var xW=Object.defineProperty,AW=(n,e,t)=>e in n?xW(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Rn=(n,e,t)=>(AW(n,typeof e!="symbol"?e+"":e,t),t);const xA=new Qg,KB=new Ad,SW=Math.cos(70*(Math.PI/180)),JB=(n,e)=>(n%e+e)%e;let bW=class extends _W{constructor(e,t){super(),Rn(this,"object"),Rn(this,"domElement"),Rn(this,"enabled",!0),Rn(this,"target",new he),Rn(this,"minDistance",0),Rn(this,"maxDistance",1/0),Rn(this,"minZoom",0),Rn(this,"maxZoom",1/0),Rn(this,"minPolarAngle",0),Rn(this,"maxPolarAngle",Math.PI),Rn(this,"minAzimuthAngle",-1/0),Rn(this,"maxAzimuthAngle",1/0),Rn(this,"enableDamping",!1),Rn(this,"dampingFactor",.05),Rn(this,"enableZoom",!0),Rn(this,"zoomSpeed",1),Rn(this,"enableRotate",!0),Rn(this,"rotateSpeed",1),Rn(this,"enablePan",!0),Rn(this,"panSpeed",1),Rn(this,"screenSpacePanning",!0),Rn(this,"keyPanSpeed",7),Rn(this,"zoomToCursor",!1),Rn(this,"autoRotate",!1),Rn(this,"autoRotateSpeed",2),Rn(this,"reverseOrbit",!1),Rn(this,"reverseHorizontalOrbit",!1),Rn(this,"reverseVerticalOrbit",!1),Rn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Rn(this,"mouseButtons",{LEFT:vg.ROTATE,MIDDLE:vg.DOLLY,RIGHT:vg.PAN}),Rn(this,"touches",{ONE:yg.ROTATE,TWO:yg.DOLLY_PAN}),Rn(this,"target0"),Rn(this,"position0"),Rn(this,"zoom0"),Rn(this,"_domElementKeyEvents",null),Rn(this,"getPolarAngle"),Rn(this,"getAzimuthalAngle"),Rn(this,"setPolarAngle"),Rn(this,"setAzimuthalAngle"),Rn(this,"getDistance"),Rn(this,"getZoomScale"),Rn(this,"listenToKeyEvents"),Rn(this,"stopListenToKeyEvents"),Rn(this,"saveState"),Rn(this,"reset"),Rn(this,"update"),Rn(this,"connect"),Rn(this,"dispose"),Rn(this,"dollyIn"),Rn(this,"dollyOut"),Rn(this,"getScale"),Rn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=xe=>{let We=JB(xe,2*Math.PI),Rt=d.phi;Rt<0&&(Rt+=2*Math.PI),We<0&&(We+=2*Math.PI);let Ae=Math.abs(We-Rt);2*Math.PI-Ae<Ae&&(We<Rt?We+=2*Math.PI:Rt+=2*Math.PI),v.phi=We-Rt,i.update()},this.setAzimuthalAngle=xe=>{let We=JB(xe,2*Math.PI),Rt=d.theta;Rt<0&&(Rt+=2*Math.PI),We<0&&(We+=2*Math.PI);let Ae=Math.abs(We-Rt);2*Math.PI-Ae<Ae&&(We<Rt?We+=2*Math.PI:Rt+=2*Math.PI),v.theta=We-Rt,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=xe=>{xe.addEventListener("keydown",rt),this._domElementKeyEvents=xe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",rt),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),u=l.NONE},this.update=(()=>{const xe=new he,We=new he(0,1,0),Rt=new Da().setFromUnitVectors(e.up,We),Ae=Rt.clone().invert(),De=new he,He=new Da,dt=2*Math.PI;return function(){const Tt=i.object.position;Rt.setFromUnitVectors(e.up,We),Ae.copy(Rt).invert(),xe.copy(Tt).sub(i.target),xe.applyQuaternion(Rt),d.setFromVector3(xe),i.autoRotate&&u===l.NONE&&se($()),i.enableDamping?(d.theta+=v.theta*i.dampingFactor,d.phi+=v.phi*i.dampingFactor):(d.theta+=v.theta,d.phi+=v.phi);let qt=i.minAzimuthAngle,sn=i.maxAzimuthAngle;isFinite(qt)&&isFinite(sn)&&(qt<-Math.PI?qt+=dt:qt>Math.PI&&(qt-=dt),sn<-Math.PI?sn+=dt:sn>Math.PI&&(sn-=dt),qt<=sn?d.theta=Math.max(qt,Math.min(sn,d.theta)):d.theta=d.theta>(qt+sn)/2?Math.max(qt,d.theta):Math.min(sn,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(A,i.dampingFactor):i.target.add(A),i.zoomToCursor&&I||i.object.isOrthographicCamera?d.radius=ge(d.radius):d.radius=ge(d.radius*y),xe.setFromSpherical(d),xe.applyQuaternion(Ae),Tt.copy(i.target).add(xe),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(v.theta*=1-i.dampingFactor,v.phi*=1-i.dampingFactor,A.multiplyScalar(1-i.dampingFactor)):(v.set(0,0,0),A.set(0,0,0));let Jt=!1;if(i.zoomToCursor&&I){let nn=null;if(i.object instanceof Ss&&i.object.isPerspectiveCamera){const ti=xe.length();nn=ge(ti*y);const Fn=ti-nn;i.object.position.addScaledVector(V,Fn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const ti=new he(G.x,G.y,0);ti.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix(),Jt=!0;const Fn=new he(G.x,G.y,0);Fn.unproject(i.object),i.object.position.sub(Fn).add(ti),i.object.updateMatrixWorld(),nn=xe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;nn!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(nn).add(i.object.position):(xA.origin.copy(i.object.position),xA.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(xA.direction))<SW?e.lookAt(i.target):(KB.setFromNormalAndCoplanarPoint(i.object.up,i.target),xA.intersectPlane(KB,i.target))))}else i.object instanceof uh&&i.object.isOrthographicCamera&&(Jt=y!==1,Jt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/y)),i.object.updateProjectionMatrix()));return y=1,I=!1,Jt||De.distanceToSquared(i.object.position)>f||8*(1-He.dot(i.object.quaternion))>f?(i.dispatchEvent(r),De.copy(i.object.position),He.copy(i.object.quaternion),Jt=!1,!0):!1}})(),this.connect=xe=>{i.domElement=xe,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",ht),i.domElement.addEventListener("pointerdown",Y),i.domElement.addEventListener("pointercancel",Ie),i.domElement.addEventListener("wheel",it)},this.dispose=()=>{var xe,We,Rt,Ae,De,He;i.domElement&&(i.domElement.style.touchAction="auto"),(xe=i.domElement)==null||xe.removeEventListener("contextmenu",ht),(We=i.domElement)==null||We.removeEventListener("pointerdown",Y),(Rt=i.domElement)==null||Rt.removeEventListener("pointercancel",Ie),(Ae=i.domElement)==null||Ae.removeEventListener("wheel",it),(De=i.domElement)==null||De.ownerDocument.removeEventListener("pointermove",_e),(He=i.domElement)==null||He.ownerDocument.removeEventListener("pointerup",Ie),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",rt)};const i=this,r={type:"change"},s={type:"start"},a={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let u=l.NONE;const f=1e-6,d=new FS,v=new FS;let y=1;const A=new he,b=new xt,C=new xt,T=new xt,M=new xt,B=new xt,D=new xt,O=new xt,P=new xt,F=new xt,V=new he,G=new xt;let I=!1;const N=[],Q={};function $(){return 2*Math.PI/60/60*i.autoRotateSpeed}function te(){return Math.pow(.95,i.zoomSpeed)}function se(xe){i.reverseOrbit||i.reverseHorizontalOrbit?v.theta+=xe:v.theta-=xe}function ye(xe){i.reverseOrbit||i.reverseVerticalOrbit?v.phi+=xe:v.phi-=xe}const k=(()=>{const xe=new he;return function(Rt,Ae){xe.setFromMatrixColumn(Ae,0),xe.multiplyScalar(-Rt),A.add(xe)}})(),ee=(()=>{const xe=new he;return function(Rt,Ae){i.screenSpacePanning===!0?xe.setFromMatrixColumn(Ae,1):(xe.setFromMatrixColumn(Ae,0),xe.crossVectors(i.object.up,xe)),xe.multiplyScalar(Rt),A.add(xe)}})(),ne=(()=>{const xe=new he;return function(Rt,Ae){const De=i.domElement;if(De&&i.object instanceof Ss&&i.object.isPerspectiveCamera){const He=i.object.position;xe.copy(He).sub(i.target);let dt=xe.length();dt*=Math.tan(i.object.fov/2*Math.PI/180),k(2*Rt*dt/De.clientHeight,i.object.matrix),ee(2*Ae*dt/De.clientHeight,i.object.matrix)}else De&&i.object instanceof uh&&i.object.isOrthographicCamera?(k(Rt*(i.object.right-i.object.left)/i.object.zoom/De.clientWidth,i.object.matrix),ee(Ae*(i.object.top-i.object.bottom)/i.object.zoom/De.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function de(xe){i.object instanceof Ss&&i.object.isPerspectiveCamera||i.object instanceof uh&&i.object.isOrthographicCamera?y=xe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(xe){de(y/xe)}function J(xe){de(y*xe)}function ce(xe){if(!i.zoomToCursor||!i.domElement)return;I=!0;const We=i.domElement.getBoundingClientRect(),Rt=xe.clientX-We.left,Ae=xe.clientY-We.top,De=We.width,He=We.height;G.x=Rt/De*2-1,G.y=-(Ae/He)*2+1,V.set(G.x,G.y,1).unproject(i.object).sub(i.object.position).normalize()}function ge(xe){return Math.max(i.minDistance,Math.min(i.maxDistance,xe))}function oe(xe){b.set(xe.clientX,xe.clientY)}function ve(xe){ce(xe),O.set(xe.clientX,xe.clientY)}function Se(xe){M.set(xe.clientX,xe.clientY)}function Re(xe){C.set(xe.clientX,xe.clientY),T.subVectors(C,b).multiplyScalar(i.rotateSpeed);const We=i.domElement;We&&(se(2*Math.PI*T.x/We.clientHeight),ye(2*Math.PI*T.y/We.clientHeight)),b.copy(C),i.update()}function Le(xe){P.set(xe.clientX,xe.clientY),F.subVectors(P,O),F.y>0?X(te()):F.y<0&&J(te()),O.copy(P),i.update()}function gt(xe){B.set(xe.clientX,xe.clientY),D.subVectors(B,M).multiplyScalar(i.panSpeed),ne(D.x,D.y),M.copy(B),i.update()}function Mt(xe){ce(xe),xe.deltaY<0?J(te()):xe.deltaY>0&&X(te()),i.update()}function At(xe){let We=!1;switch(xe.code){case i.keys.UP:ne(0,i.keyPanSpeed),We=!0;break;case i.keys.BOTTOM:ne(0,-i.keyPanSpeed),We=!0;break;case i.keys.LEFT:ne(i.keyPanSpeed,0),We=!0;break;case i.keys.RIGHT:ne(-i.keyPanSpeed,0),We=!0;break}We&&(xe.preventDefault(),i.update())}function at(){if(N.length==1)b.set(N[0].pageX,N[0].pageY);else{const xe=.5*(N[0].pageX+N[1].pageX),We=.5*(N[0].pageY+N[1].pageY);b.set(xe,We)}}function Nt(){if(N.length==1)M.set(N[0].pageX,N[0].pageY);else{const xe=.5*(N[0].pageX+N[1].pageX),We=.5*(N[0].pageY+N[1].pageY);M.set(xe,We)}}function ie(){const xe=N[0].pageX-N[1].pageX,We=N[0].pageY-N[1].pageY,Rt=Math.sqrt(xe*xe+We*We);O.set(0,Rt)}function ut(){i.enableZoom&&ie(),i.enablePan&&Nt()}function $e(){i.enableZoom&&ie(),i.enableRotate&&at()}function Ke(xe){if(N.length==1)C.set(xe.pageX,xe.pageY);else{const Rt=ot(xe),Ae=.5*(xe.pageX+Rt.x),De=.5*(xe.pageY+Rt.y);C.set(Ae,De)}T.subVectors(C,b).multiplyScalar(i.rotateSpeed);const We=i.domElement;We&&(se(2*Math.PI*T.x/We.clientHeight),ye(2*Math.PI*T.y/We.clientHeight)),b.copy(C)}function Pe(xe){if(N.length==1)B.set(xe.pageX,xe.pageY);else{const We=ot(xe),Rt=.5*(xe.pageX+We.x),Ae=.5*(xe.pageY+We.y);B.set(Rt,Ae)}D.subVectors(B,M).multiplyScalar(i.panSpeed),ne(D.x,D.y),M.copy(B)}function pt(xe){const We=ot(xe),Rt=xe.pageX-We.x,Ae=xe.pageY-We.y,De=Math.sqrt(Rt*Rt+Ae*Ae);P.set(0,De),F.set(0,Math.pow(P.y/O.y,i.zoomSpeed)),X(F.y),O.copy(P)}function Ve(xe){i.enableZoom&&pt(xe),i.enablePan&&Pe(xe)}function j(xe){i.enableZoom&&pt(xe),i.enableRotate&&Ke(xe)}function Y(xe){var We,Rt;i.enabled!==!1&&(N.length===0&&((We=i.domElement)==null||We.ownerDocument.addEventListener("pointermove",_e),(Rt=i.domElement)==null||Rt.ownerDocument.addEventListener("pointerup",Ie)),Lt(xe),xe.pointerType==="touch"?yt(xe):Ge(xe))}function _e(xe){i.enabled!==!1&&(xe.pointerType==="touch"?Vt(xe):Ye(xe))}function Ie(xe){var We,Rt,Ae;Et(xe),N.length===0&&((We=i.domElement)==null||We.releasePointerCapture(xe.pointerId),(Rt=i.domElement)==null||Rt.ownerDocument.removeEventListener("pointermove",_e),(Ae=i.domElement)==null||Ae.ownerDocument.removeEventListener("pointerup",Ie)),i.dispatchEvent(a),u=l.NONE}function Ge(xe){let We;switch(xe.button){case 0:We=i.mouseButtons.LEFT;break;case 1:We=i.mouseButtons.MIDDLE;break;case 2:We=i.mouseButtons.RIGHT;break;default:We=-1}switch(We){case vg.DOLLY:if(i.enableZoom===!1)return;ve(xe),u=l.DOLLY;break;case vg.ROTATE:if(xe.ctrlKey||xe.metaKey||xe.shiftKey){if(i.enablePan===!1)return;Se(xe),u=l.PAN}else{if(i.enableRotate===!1)return;oe(xe),u=l.ROTATE}break;case vg.PAN:if(xe.ctrlKey||xe.metaKey||xe.shiftKey){if(i.enableRotate===!1)return;oe(xe),u=l.ROTATE}else{if(i.enablePan===!1)return;Se(xe),u=l.PAN}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(s)}function Ye(xe){if(i.enabled!==!1)switch(u){case l.ROTATE:if(i.enableRotate===!1)return;Re(xe);break;case l.DOLLY:if(i.enableZoom===!1)return;Le(xe);break;case l.PAN:if(i.enablePan===!1)return;gt(xe);break}}function it(xe){i.enabled===!1||i.enableZoom===!1||u!==l.NONE&&u!==l.ROTATE||(xe.preventDefault(),i.dispatchEvent(s),Mt(xe),i.dispatchEvent(a))}function rt(xe){i.enabled===!1||i.enablePan===!1||At(xe)}function yt(xe){switch(_t(xe),N.length){case 1:switch(i.touches.ONE){case yg.ROTATE:if(i.enableRotate===!1)return;at(),u=l.TOUCH_ROTATE;break;case yg.PAN:if(i.enablePan===!1)return;Nt(),u=l.TOUCH_PAN;break;default:u=l.NONE}break;case 2:switch(i.touches.TWO){case yg.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ut(),u=l.TOUCH_DOLLY_PAN;break;case yg.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;$e(),u=l.TOUCH_DOLLY_ROTATE;break;default:u=l.NONE}break;default:u=l.NONE}u!==l.NONE&&i.dispatchEvent(s)}function Vt(xe){switch(_t(xe),u){case l.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ke(xe),i.update();break;case l.TOUCH_PAN:if(i.enablePan===!1)return;Pe(xe),i.update();break;case l.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ve(xe),i.update();break;case l.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;j(xe),i.update();break;default:u=l.NONE}}function ht(xe){i.enabled!==!1&&xe.preventDefault()}function Lt(xe){N.push(xe)}function Et(xe){delete Q[xe.pointerId];for(let We=0;We<N.length;We++)if(N[We].pointerId==xe.pointerId){N.splice(We,1);return}}function _t(xe){let We=Q[xe.pointerId];We===void 0&&(We=new xt,Q[xe.pointerId]=We),We.set(xe.pageX,xe.pageY)}function ot(xe){const We=xe.pointerId===N[0].pointerId?N[1]:N[0];return Q[We.pointerId]}this.dollyIn=(xe=te())=>{J(xe),i.update()},this.dollyOut=(xe=te())=>{X(xe),i.update()},this.getScale=()=>y,this.setScale=xe=>{de(xe),i.update()},this.getZoomScale=()=>te(),t!==void 0&&this.connect(t),this.update()}};function XS(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Ug="srgb",Cd="srgb-linear",ZB=3001,MW=3e3;class $2 extends to{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new RW(t)}),this.register(function(t){return new DW(t)}),this.register(function(t){return new GW(t)}),this.register(function(t){return new HW(t)}),this.register(function(t){return new zW(t)}),this.register(function(t){return new UW(t)}),this.register(function(t){return new OW(t)}),this.register(function(t){return new LW(t)}),this.register(function(t){return new PW(t)}),this.register(function(t){return new wW(t)}),this.register(function(t){return new NW(t)}),this.register(function(t){return new BW(t)}),this.register(function(t){return new FW(t)}),this.register(function(t){return new IW(t)}),this.register(function(t){return new EW(t)}),this.register(function(t){return new VW(t)}),this.register(function(t){return new kW(t)})}load(e,t,i,r){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const f=Wp.extractUrlBase(e);a=Wp.resolveURL(f,this.path)}else a=Wp.extractUrlBase(e);this.manager.itemStart(e);const l=function(f){r?r(f):console.error(f),s.manager.itemError(e),s.manager.itemEnd(e)},u=new eo(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(f){try{s.parse(f,a,function(d){t(d),s.manager.itemEnd(e)},l)}catch(d){l(d)}},i,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},l={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(XS(new Uint8Array(e.slice(0,4)))===LN){try{a[Ri.KHR_BINARY_GLTF]=new XW(e)}catch(d){r&&r(d);return}s=JSON.parse(a[Ri.KHR_BINARY_GLTF].content)}else s=JSON.parse(XS(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new iY(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const d=this.pluginCallbacks[f](u);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[d.name]=d,a[d.name]=!0}if(s.extensionsUsed)for(let f=0;f<s.extensionsUsed.length;++f){const d=s.extensionsUsed[f],v=s.extensionsRequired||[];switch(d){case Ri.KHR_MATERIALS_UNLIT:a[d]=new CW;break;case Ri.KHR_DRACO_MESH_COMPRESSION:a[d]=new WW(s,this.dracoLoader);break;case Ri.KHR_TEXTURE_TRANSFORM:a[d]=new YW;break;case Ri.KHR_MESH_QUANTIZATION:a[d]=new jW;break;default:v.indexOf(d)>=0&&l[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}u.setExtensions(a),u.setPlugins(l),u.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function TW(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Ri={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class EW{constructor(e){this.parser=e,this.name=Ri.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let f;const d=new jt(16777215);u.color!==void 0&&d.setRGB(u.color[0],u.color[1],u.color[2],Cd);const v=u.range!==void 0?u.range:0;switch(u.type){case"directional":f=new P2(d),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new L2(d),f.distance=v;break;case"spot":f=new O2(d),f.distance=v,u.spot=u.spot||{},u.spot.innerConeAngle=u.spot.innerConeAngle!==void 0?u.spot.innerConeAngle:0,u.spot.outerConeAngle=u.spot.outerConeAngle!==void 0?u.spot.outerConeAngle:Math.PI/4,f.angle=u.spot.outerConeAngle,f.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return f.position.set(0,0,0),f.decay=2,_d(f,u),u.intensity!==void 0&&(f.intensity=u.intensity),f.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(f),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(u){return i._getNodeRef(t.cache,l,u)})}}class CW{constructor(){this.name=Ri.KHR_MATERIALS_UNLIT}getMaterialType(){return ul}extendParams(e,t,i){const r=[];e.color=new jt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],Cd),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Ug))}return Promise.all(r)}}class wW{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class RW{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const l=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new xt(l,l)}return Promise.all(s)}}class DW{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xc}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class BW{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class UW{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new jt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];if(a.sheenColorFactor!==void 0){const l=a.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],Cd)}return a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Ug)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class OW{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class LW{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return t.attenuationColor=new jt().setRGB(l[0],l[1],l[2],Cd),Promise.all(s)}}class PW{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xc}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class NW{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return t.specularColor=new jt().setRGB(l[0],l[1],l[2],Cd),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,Ug)),Promise.all(s)}}class IW{constructor(e){this.parser=e,this.name=Ri.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return t.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",a.bumpTexture)),Promise.all(s)}}class FW{constructor(e){this.parser=e,this.name=Ri.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class GW{constructor(e){this.parser=e,this.name=Ri.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class HW{constructor(e){this.parser=e,this.name=Ri.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],l=r.images[a.source];let u=i.textureLoader;if(l.uri){const f=i.options.manager.getHandler(l.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return i.loadTextureImage(e,a.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class zW{constructor(e){this.parser=e,this.name=Ri.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],l=r.images[a.source];let u=i.textureLoader;if(l.uri){const f=i.options.manager.getHandler(l.uri);f!==null&&(u=f)}return this.detectSupport().then(function(f){if(f)return i.loadTextureImage(e,a.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class VW{constructor(e){this.name=Ri.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const u=r.byteOffset||0,f=r.byteLength||0,d=r.count,v=r.byteStride,y=new Uint8Array(l,u,f);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,v,y,r.mode,r.filter).then(function(A){return A.buffer}):a.ready.then(function(){const A=new ArrayBuffer(d*v);return a.decodeGltfBuffer(new Uint8Array(A),d,v,y,r.mode,r.filter),A})})}else return null}}class kW{constructor(e){this.name=Ri.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const f of r.primitives)if(f.mode!==cc.TRIANGLES&&f.mode!==cc.TRIANGLE_STRIP&&f.mode!==cc.TRIANGLE_FAN&&f.mode!==void 0)return null;const a=i.extensions[this.name].attributes,l=[],u={};for(const f in a)l.push(this.parser.getDependency("accessor",a[f]).then(d=>(u[f]=d,u[f])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(f=>{const d=f.pop(),v=d.isGroup?d.children:[d],y=f[0].count,A=[];for(const b of v){const C=new Tn,T=new he,M=new Da,B=new he(1,1,1),D=new _2(b.geometry,b.material,y);for(let O=0;O<y;O++)u.TRANSLATION&&T.fromBufferAttribute(u.TRANSLATION,O),u.ROTATION&&M.fromBufferAttribute(u.ROTATION,O),u.SCALE&&B.fromBufferAttribute(u.SCALE,O),D.setMatrixAt(O,C.compose(T,M,B));for(const O in u)if(O==="_COLOR_0"){const P=u[O];D.instanceColor=new Zp(P.array,P.itemSize,P.normalized)}else O!=="TRANSLATION"&&O!=="ROTATION"&&O!=="SCALE"&&b.geometry.setAttribute(O,u[O]);Fi.prototype.copy.call(D,b),this.parser.assignFinalMaterial(D),A.push(D)}return d.isGroup?(d.clear(),d.add(...A),d):A[0]}))}}const LN="glTF",qy=12,QB={JSON:1313821514,BIN:5130562};class XW{constructor(e){this.name=Ri.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,qy);if(this.header={magic:XS(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==LN)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-qy,r=new DataView(e,qy);let s=0;for(;s<i;){const a=r.getUint32(s,!0);s+=4;const l=r.getUint32(s,!0);if(s+=4,l===QB.JSON){const u=new Uint8Array(e,qy+s,a);this.content=XS(u)}else if(l===QB.BIN){const u=qy+s;this.body=e.slice(u,u+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class WW{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ri.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,l={},u={},f={};for(const d in a){const v=nC[d]||d.toLowerCase();l[v]=a[d]}for(const d in e.attributes){const v=nC[d]||d.toLowerCase();if(a[d]!==void 0){const y=i.accessors[e.attributes[d]],A=R0[y.componentType];f[v]=A.name,u[v]=y.normalized===!0}}return t.getDependency("bufferView",s).then(function(d){return new Promise(function(v,y){r.decodeDracoFile(d,function(A){for(const b in A.attributes){const C=A.attributes[b],T=u[b];T!==void 0&&(C.normalized=T)}v(A)},l,f,Cd,y)})})}}class YW{constructor(){this.name=Ri.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class jW{constructor(){this.name=Ri.KHR_MESH_QUANTIZATION}}class PN extends ny{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=l*2,f=l*3,d=r-t,v=(i-t)/d,y=v*v,A=y*v,b=e*f,C=b-f,T=-2*A+3*y,M=A-y,B=1-T,D=M-y+v;for(let O=0;O!==l;O++){const P=a[C+O+l],F=a[C+O+u]*d,V=a[b+O+l],G=a[b+O]*d;s[O]=B*P+D*F+T*V+M*G}return s}}const qW=new Da;class KW extends PN{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return qW.fromArray(s).normalize().toArray(s),s}}const cc={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},R0={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},$B={9728:Ra,9729:qi,9984:fb,9985:C0,9986:Eg,9987:pc},e3={33071:Is,33648:L0,10497:Kp},KT={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},nC={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Q2>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Np={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},JW={CUBICSPLINE:void 0,LINEAR:H0,STEP:G0},JT={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function ZW(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new L_({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:gh})),n.DefaultMaterial}function dg(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function _d(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function QW(n,e,t){let i=!1,r=!1,s=!1;for(let f=0,d=e.length;f<d;f++){const v=e[f];if(v.POSITION!==void 0&&(i=!0),v.NORMAL!==void 0&&(r=!0),v.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const a=[],l=[],u=[];for(let f=0,d=e.length;f<d;f++){const v=e[f];if(i){const y=v.POSITION!==void 0?t.getDependency("accessor",v.POSITION):n.attributes.position;a.push(y)}if(r){const y=v.NORMAL!==void 0?t.getDependency("accessor",v.NORMAL):n.attributes.normal;l.push(y)}if(s){const y=v.COLOR_0!==void 0?t.getDependency("accessor",v.COLOR_0):n.attributes.color;u.push(y)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(f){const d=f[0],v=f[1],y=f[2];return i&&(n.morphAttributes.position=d),r&&(n.morphAttributes.normal=v),s&&(n.morphAttributes.color=y),n.morphTargetsRelative=!0,n})}function $W(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function eY(n){let e;const t=n.extensions&&n.extensions[Ri.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+ZT(t.attributes):e=n.indices+":"+ZT(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+ZT(n.targets[i]);return e}function ZT(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function iC(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function tY(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const nY=new Tn;class iY{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new TW,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new FP(this.options.manager):this.textureLoader=new WP(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new eo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const l={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};return dg(s,l,r),_d(l,r),Promise.all(i._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){for(const u of l.scenes)u.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let l=0,u=a.length;l<u;l++)e[a[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,l)=>{const u=this.associations.get(a);u!=null&&this.associations.set(l,u);for(const[f,d]of a.children.entries())s(d,l.children[f])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Ri.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(Wp.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=KT[r.type],l=R0[r.componentType],u=r.normalized===!0,f=new l(r.count*a);return Promise.resolve(new Ki(f,a,u))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const l=a[0],u=KT[r.type],f=R0[r.componentType],d=f.BYTES_PER_ELEMENT,v=d*u,y=r.byteOffset||0,A=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,b=r.normalized===!0;let C,T;if(A&&A!==v){const M=Math.floor(y/A),B="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+M+":"+r.count;let D=t.cache.get(B);D||(C=new f(l,M*A,r.count*A/d),D=new C_(C,A/d),t.cache.add(B,D)),T=new Jp(D,u,y%A/d,b)}else l===null?C=new f(r.count*u):C=new f(l,y,r.count*u),T=new Ki(C,u,b);if(r.sparse!==void 0){const M=KT.SCALAR,B=R0[r.sparse.indices.componentType],D=r.sparse.indices.byteOffset||0,O=r.sparse.values.byteOffset||0,P=new B(a[1],D,r.sparse.count*M),F=new f(a[2],O,r.sparse.count*u);l!==null&&(T=new Ki(T.array.slice(),T.itemSize,T.normalized));for(let V=0,G=P.length;V<G;V++){const I=P[V];if(T.setX(I,F[V*u]),u>=2&&T.setY(I,F[V*u+1]),u>=3&&T.setZ(I,F[V*u+2]),u>=4&&T.setW(I,F[V*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return T})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,a=t.images[s];let l=this.textureLoader;if(a.uri){const u=i.manager.getHandler(a.uri);u!==null&&(l=u)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],l=s.images[t],u=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const f=this.loadImageSource(t,i).then(function(d){d.flipY=!1,d.name=a.name||l.name||"",d.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(d.name=l.uri);const y=(s.samplers||{})[a.sampler]||{};return d.magFilter=$B[y.magFilter]||qi,d.minFilter=$B[y.minFilter]||pc,d.wrapS=e3[y.wrapS]||Kp,d.wrapT=e3[y.wrapT]||Kp,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[u]=f,f}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(v=>v.clone());const a=r.images[e],l=self.URL||self.webkitURL;let u=a.uri||"",f=!1;if(a.bufferView!==void 0)u=i.getDependency("bufferView",a.bufferView).then(function(v){f=!0;const y=new Blob([v],{type:a.mimeType});return u=l.createObjectURL(y),u});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(u).then(function(v){return new Promise(function(y,A){let b=y;t.isImageBitmapLoader===!0&&(b=function(C){const T=new ar(C);T.needsUpdate=!0,y(T)}),t.load(Wp.resolveURL(v,s.path),b,void 0,A)})}).then(function(v){return f===!0&&l.revokeObjectURL(u),_d(v,a),v.userData.mimeType=a.mimeType||tY(a.uri),v}).catch(function(v){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),v});return this.sourceCache[e]=d,d}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(a=a.clone(),a.channel=i.texCoord),s.extensions[Ri.KHR_TEXTURE_TRANSFORM]){const l=i.extensions!==void 0?i.extensions[Ri.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=s.associations.get(a);a=s.extensions[Ri.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),s.associations.set(a,u)}}return r!==void 0&&(typeof r=="number"&&(r=r===ZB?Ug:Cd),"colorSpace"in a?a.colorSpace=r:a.encoding=r===Ug?ZB:MW),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+i.uuid;let u=this.cache.get(l);u||(u=new Tb,ca.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,u.sizeAttenuation=!1,this.cache.add(l,u)),i=u}else if(e.isLine){const l="LineBasicMaterial:"+i.uuid;let u=this.cache.get(l);u||(u=new Bo,ca.prototype.copy.call(u,i),u.color.copy(i.color),u.map=i.map,this.cache.add(l,u)),i=u}if(r||s||a){let l="ClonedMaterial:"+i.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=i.clone(),s&&(u.vertexColors=!0),a&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(i))),i=u}e.material=i}getMaterialType(){return L_}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const l={},u=s.extensions||{},f=[];if(u[Ri.KHR_MATERIALS_UNLIT]){const v=r[Ri.KHR_MATERIALS_UNLIT];a=v.getMaterialType(),f.push(v.extendParams(l,s,t))}else{const v=s.pbrMetallicRoughness||{};if(l.color=new jt(1,1,1),l.opacity=1,Array.isArray(v.baseColorFactor)){const y=v.baseColorFactor;l.color.setRGB(y[0],y[1],y[2],Cd),l.opacity=y[3]}v.baseColorTexture!==void 0&&f.push(t.assignTexture(l,"map",v.baseColorTexture,Ug)),l.metalness=v.metallicFactor!==void 0?v.metallicFactor:1,l.roughness=v.roughnessFactor!==void 0?v.roughnessFactor:1,v.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(l,"metalnessMap",v.metallicRoughnessTexture)),f.push(t.assignTexture(l,"roughnessMap",v.metallicRoughnessTexture))),a=this._invokeOne(function(y){return y.getMaterialType&&y.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(y){return y.extendMaterialParams&&y.extendMaterialParams(e,l)})))}s.doubleSided===!0&&(l.side=Ru);const d=s.alphaMode||JT.OPAQUE;if(d===JT.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,d===JT.MASK&&(l.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==ul&&(f.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new xt(1,1),s.normalTexture.scale!==void 0)){const v=s.normalTexture.scale;l.normalScale.set(v,v)}if(s.occlusionTexture!==void 0&&a!==ul&&(f.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==ul){const v=s.emissiveFactor;l.emissive=new jt().setRGB(v[0],v[1],v[2],Cd)}return s.emissiveTexture!==void 0&&a!==ul&&f.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,Ug)),Promise.all(f).then(function(){const v=new a(l);return s.name&&(v.name=s.name),_d(v,s),t.associations.set(v,{materials:e}),s.extensions&&dg(r,v,s),v})}createUniqueName(e){const t=Wi.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(l){return i[Ri.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return t3(u,l,t)})}const a=[];for(let l=0,u=e.length;l<u;l++){const f=e[l],d=eY(f),v=r[d];if(v)a.push(v.promise);else{let y;f.extensions&&f.extensions[Ri.KHR_DRACO_MESH_COMPRESSION]?y=s(f):y=t3(new Qn,f,t),r[d]={primitive:f,promise:y},a.push(y)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,l=[];for(let u=0,f=a.length;u<f;u++){const d=a[u].material===void 0?ZW(this.cache):this.getDependency("material",a[u].material);l.push(d)}return l.push(t.loadGeometries(a)),Promise.all(l).then(function(u){const f=u.slice(0,u.length-1),d=u[u.length-1],v=[];for(let A=0,b=d.length;A<b;A++){const C=d[A],T=a[A];let M;const B=f[A];if(T.mode===cc.TRIANGLES||T.mode===cc.TRIANGLE_STRIP||T.mode===cc.TRIANGLE_FAN||T.mode===void 0)M=s.isSkinnedMesh===!0?new y2(C,B):new Ur(C,B),M.isSkinnedMesh===!0&&M.normalizeSkinWeights(),T.mode===cc.TRIANGLE_STRIP?M.geometry=qB(M.geometry,u2):T.mode===cc.TRIANGLE_FAN&&(M.geometry=qB(M.geometry,OS));else if(T.mode===cc.LINES)M=new yf(C,B);else if(T.mode===cc.LINE_STRIP)M=new wd(C,B);else if(T.mode===cc.LINE_LOOP)M=new x2(C,B);else if(T.mode===cc.POINTS)M=new A2(C,B);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+T.mode);Object.keys(M.geometry.morphAttributes).length>0&&$W(M,s),M.name=t.createUniqueName(s.name||"mesh_"+e),_d(M,s),T.extensions&&dg(r,M,T),t.assignFinalMaterial(M),v.push(M)}for(let A=0,b=v.length;A<b;A++)t.associations.set(v[A],{meshes:e,primitives:A});if(v.length===1)return s.extensions&&dg(r,v[0],s),v[0];const y=new Md;s.extensions&&dg(r,y,s),t.associations.set(y,{meshes:e});for(let A=0,b=v.length;A<b;A++)y.add(v[A]);return y})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Ss(eP.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new uh(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),_d(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),a=r,l=[],u=[];for(let f=0,d=a.length;f<d;f++){const v=a[f];if(v){l.push(v);const y=new Tn;s!==null&&y.fromArray(s.array,f*16),u.push(y)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new w_(l,u)})}loadAnimation(e){const t=this.json,i=this,r=t.animations[e],s=r.name?r.name:"animation_"+e,a=[],l=[],u=[],f=[],d=[];for(let v=0,y=r.channels.length;v<y;v++){const A=r.channels[v],b=r.samplers[A.sampler],C=A.target,T=C.node,M=r.parameters!==void 0?r.parameters[b.input]:b.input,B=r.parameters!==void 0?r.parameters[b.output]:b.output;C.node!==void 0&&(a.push(this.getDependency("node",T)),l.push(this.getDependency("accessor",M)),u.push(this.getDependency("accessor",B)),f.push(b),d.push(C))}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(f),Promise.all(d)]).then(function(v){const y=v[0],A=v[1],b=v[2],C=v[3],T=v[4],M=[];for(let B=0,D=y.length;B<D;B++){const O=y[B],P=A[B],F=b[B],V=C[B],G=T[B];if(O===void 0)continue;O.updateMatrix&&O.updateMatrix();const I=i._createAnimationTracks(O,P,F,V,G);if(I)for(let N=0;N<I.length;N++)M.push(I[N])}return new W0(s,void 0,M)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(l){if(l.isMesh)for(let u=0,f=r.weights.length;u<f;u++)l.morphTargetInfluences[u]=r.weights[u]}),a})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),a=[],l=r.children||[];for(let f=0,d=l.length;f<d;f++)a.push(i.getDependency("node",l[f]));const u=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),u]).then(function(f){const d=f[0],v=f[1],y=f[2];y!==null&&d.traverse(function(A){A.isSkinnedMesh&&A.bind(y,nY)});for(let A=0,b=v.length;A<b;A++)d.add(v[A]);return d})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"",l=[],u=r._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return u&&l.push(u),s.camera!==void 0&&l.push(r.getDependency("camera",s.camera).then(function(f){return r._getNodeRef(r.cameraCache,s.camera,f)})),r._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){l.push(f)}),this.nodeCache[e]=Promise.all(l).then(function(f){let d;if(s.isBone===!0?d=new bb:f.length>1?d=new Md:f.length===1?d=f[0]:d=new Fi,d!==f[0])for(let v=0,y=f.length;v<y;v++)d.add(f[v]);if(s.name&&(d.userData.name=s.name,d.name=a),_d(d,s),s.extensions&&dg(i,d,s),s.matrix!==void 0){const v=new Tn;v.fromArray(s.matrix),d.applyMatrix4(v)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new Md;i.name&&(s.name=r.createUniqueName(i.name)),_d(s,i),i.extensions&&dg(t,s,i);const a=i.nodes||[],l=[];for(let u=0,f=a.length;u<f;u++)l.push(r.getDependency("node",a[u]));return Promise.all(l).then(function(u){for(let d=0,v=u.length;d<v;d++)s.add(u[d]);const f=d=>{const v=new Map;for(const[y,A]of r.associations)(y instanceof ca||y instanceof ar)&&v.set(y,A);return d.traverse(y=>{const A=r.associations.get(y);A!=null&&v.set(y,A)}),v};return r.associations=f(s),s})}_createAnimationTracks(e,t,i,r,s){const a=[],l=e.name?e.name:e.uuid,u=[];Np[s.path]===Np.weights?e.traverse(function(y){y.morphTargetInfluences&&u.push(y.name?y.name:y.uuid)}):u.push(l);let f;switch(Np[s.path]){case Np.weights:f=jg;break;case Np.rotation:f=qg;break;case Np.position:case Np.scale:f=Kg;break;default:switch(i.itemSize){case 1:f=jg;break;case 2:case 3:default:f=Kg;break}break}const d=r.interpolation!==void 0?JW[r.interpolation]:H0,v=this._getArrayFromAccessor(i);for(let y=0,A=u.length;y<A;y++){const b=new f(u[y]+"."+Np[s.path],t.array,v,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(b),a.push(b)}return a}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=iC(t.constructor),r=new Float32Array(t.length);for(let s=0,a=t.length;s<a;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const r=this instanceof qg?KW:PN;return new r(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function rY(n,e,t){const i=e.attributes,r=new la;if(i.POSITION!==void 0){const l=t.json.accessors[i.POSITION],u=l.min,f=l.max;if(u!==void 0&&f!==void 0){if(r.set(new he(u[0],u[1],u[2]),new he(f[0],f[1],f[2])),l.normalized){const d=iC(R0[l.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const l=new he,u=new he;for(let f=0,d=s.length;f<d;f++){const v=s[f];if(v.POSITION!==void 0){const y=t.json.accessors[v.POSITION],A=y.min,b=y.max;if(A!==void 0&&b!==void 0){if(u.setX(Math.max(Math.abs(A[0]),Math.abs(b[0]))),u.setY(Math.max(Math.abs(A[1]),Math.abs(b[1]))),u.setZ(Math.max(Math.abs(A[2]),Math.abs(b[2]))),y.normalized){const C=iC(R0[y.componentType]);u.multiplyScalar(C)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}n.boundingBox=r;const a=new ua;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function t3(n,e,t){const i=e.attributes,r=[];function s(a,l){return t.getDependency("accessor",a).then(function(u){n.setAttribute(l,u)})}for(const a in i){const l=nC[a]||a.toLowerCase();l in n.attributes||r.push(s(i[a],l))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(l){n.setIndex(l)});r.push(a)}return _d(n,e),rY(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?QW(n,e.targets,t):n})}class sY extends B2{constructor(e){super(e),this.type=wa}parse(e){const a=function(G,I){switch(G){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(I||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(I||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(I||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(I||""))}},d=`
`,v=function(G,I,N){I=I||1024;let $=G.pos,te=-1,se=0,ye="",k=String.fromCharCode.apply(null,new Uint16Array(G.subarray($,$+128)));for(;0>(te=k.indexOf(d))&&se<I&&$<G.byteLength;)ye+=k,se+=k.length,$+=128,k+=String.fromCharCode.apply(null,new Uint16Array(G.subarray($,$+128)));return-1<te?(G.pos+=se+te+1,ye+k.slice(0,te)):!1},y=function(G){const I=/^#\?(\S+)/,N=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Q=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,$=/^\s*FORMAT=(\S+)\s*$/,te=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,se={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ye,k;for((G.pos>=G.byteLength||!(ye=v(G)))&&a(1,"no header found"),(k=ye.match(I))||a(3,"bad initial token"),se.valid|=1,se.programtype=k[1],se.string+=ye+`
`;ye=v(G),ye!==!1;){if(se.string+=ye+`
`,ye.charAt(0)==="#"){se.comments+=ye+`
`;continue}if((k=ye.match(N))&&(se.gamma=parseFloat(k[1])),(k=ye.match(Q))&&(se.exposure=parseFloat(k[1])),(k=ye.match($))&&(se.valid|=2,se.format=k[1]),(k=ye.match(te))&&(se.valid|=4,se.height=parseInt(k[1],10),se.width=parseInt(k[2],10)),se.valid&2&&se.valid&4)break}return se.valid&2||a(3,"missing format specifier"),se.valid&4||a(3,"missing image size specifier"),se},A=function(G,I,N){const Q=I;if(Q<8||Q>32767||G[0]!==2||G[1]!==2||G[2]&128)return new Uint8Array(G);Q!==(G[2]<<8|G[3])&&a(3,"wrong scanline width");const $=new Uint8Array(4*I*N);$.length||a(4,"unable to allocate buffer space");let te=0,se=0;const ye=4*Q,k=new Uint8Array(4),ee=new Uint8Array(ye);let ne=N;for(;ne>0&&se<G.byteLength;){se+4>G.byteLength&&a(1),k[0]=G[se++],k[1]=G[se++],k[2]=G[se++],k[3]=G[se++],(k[0]!=2||k[1]!=2||(k[2]<<8|k[3])!=Q)&&a(3,"bad rgbe scanline format");let de=0,X;for(;de<ye&&se<G.byteLength;){X=G[se++];const ce=X>128;if(ce&&(X-=128),(X===0||de+X>ye)&&a(3,"bad scanline data"),ce){const ge=G[se++];for(let oe=0;oe<X;oe++)ee[de++]=ge}else ee.set(G.subarray(se,se+X),de),de+=X,se+=X}const J=Q;for(let ce=0;ce<J;ce++){let ge=0;$[te]=ee[ce+ge],ge+=Q,$[te+1]=ee[ce+ge],ge+=Q,$[te+2]=ee[ce+ge],ge+=Q,$[te+3]=ee[ce+ge],te+=4}ne--}return $},b=function(G,I,N,Q){const $=G[I+3],te=Math.pow(2,$-128)/255;N[Q+0]=G[I+0]*te,N[Q+1]=G[I+1]*te,N[Q+2]=G[I+2]*te,N[Q+3]=1},C=function(G,I,N,Q){const $=G[I+3],te=Math.pow(2,$-128)/255;N[Q+0]=Rg.toHalfFloat(Math.min(G[I+0]*te,65504)),N[Q+1]=Rg.toHalfFloat(Math.min(G[I+1]*te,65504)),N[Q+2]=Rg.toHalfFloat(Math.min(G[I+2]*te,65504)),N[Q+3]=Rg.toHalfFloat(1)},T=new Uint8Array(e);T.pos=0;const M=y(T),B=M.width,D=M.height,O=A(T.subarray(T.pos),B,D);let P,F,V;switch(this.type){case ss:V=O.length/4;const G=new Float32Array(V*4);for(let N=0;N<V;N++)b(O,N*4,G,N*4);P=G,F=ss;break;case wa:V=O.length/4;const I=new Uint16Array(V*4);for(let N=0;N<V;N++)C(O,N*4,I,N*4);P=I,F=wa;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:B,height:D,data:P,header:M.string,gamma:M.gamma,exposure:M.exposure,type:F}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(a,l){switch(a.type){case ss:case wa:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=qi,a.magFilter=qi,a.generateMipmaps=!1,a.flipY=!0;break}t&&t(a,l)}return super.load(e,s,i,r)}}const Ky=Q2>=152;class aY extends B2{constructor(e){super(e),this.type=wa}parse(e){const I=Math.pow(2.7182818,2.2);function N(K,le){for(var Ce=0,Qe=0;Qe<65536;++Qe)(Qe==0||K[Qe>>3]&1<<(Qe&7))&&(le[Ce++]=Qe);for(var et=Ce-1;Ce<65536;)le[Ce++]=0;return et}function Q(K){for(var le=0;le<16384;le++)K[le]={},K[le].len=0,K[le].lit=0,K[le].p=null}const $={l:0,c:0,lc:0};function te(K,le,Ce,Qe,et){for(;Ce<K;)le=le<<8|ot(Qe,et),Ce+=8;Ce-=K,$.l=le>>Ce&(1<<K)-1,$.c=le,$.lc=Ce}const se=new Array(59);function ye(K){for(var le=0;le<=58;++le)se[le]=0;for(var le=0;le<65537;++le)se[K[le]]+=1;for(var Ce=0,le=58;le>0;--le){var Qe=Ce+se[le]>>1;se[le]=Ce,Ce=Qe}for(var le=0;le<65537;++le){var et=K[le];et>0&&(K[le]=et|se[et]++<<6)}}function k(K,le,Ce,Qe,et,ft,Ft){for(var Bt=Ce,q=0,me=0;et<=ft;et++){if(Bt.value-Ce.value>Qe)return!1;te(6,q,me,K,Bt);var Me=$.l;if(q=$.c,me=$.lc,Ft[et]=Me,Me==63){if(Bt.value-Ce.value>Qe)throw"Something wrong with hufUnpackEncTable";te(8,q,me,K,Bt);var pe=$.l+6;if(q=$.c,me=$.lc,et+pe>ft+1)throw"Something wrong with hufUnpackEncTable";for(;pe--;)Ft[et++]=0;et--}else if(Me>=59){var pe=Me-59+2;if(et+pe>ft+1)throw"Something wrong with hufUnpackEncTable";for(;pe--;)Ft[et++]=0;et--}}ye(Ft)}function ee(K){return K&63}function ne(K){return K>>6}function de(K,le,Ce,Qe){for(;le<=Ce;le++){var et=ne(K[le]),ft=ee(K[le]);if(et>>ft)throw"Invalid table entry";if(ft>14){var Ft=Qe[et>>ft-14];if(Ft.len)throw"Invalid table entry";if(Ft.lit++,Ft.p){var Bt=Ft.p;Ft.p=new Array(Ft.lit);for(var q=0;q<Ft.lit-1;++q)Ft.p[q]=Bt[q]}else Ft.p=new Array(1);Ft.p[Ft.lit-1]=le}else if(ft)for(var me=0,q=1<<14-ft;q>0;q--){var Ft=Qe[(et<<14-ft)+me];if(Ft.len||Ft.p)throw"Invalid table entry";Ft.len=ft,Ft.lit=le,me++}}return!0}const X={c:0,lc:0};function J(K,le,Ce,Qe){K=K<<8|ot(Ce,Qe),le+=8,X.c=K,X.lc=le}const ce={c:0,lc:0};function ge(K,le,Ce,Qe,et,ft,Ft,Bt,q,me){if(K==le){Qe<8&&(J(Ce,Qe,et,Ft),Ce=X.c,Qe=X.lc),Qe-=8;var Me=Ce>>Qe,Me=new Uint8Array([Me])[0];if(q.value+Me>me)return!1;for(var pe=Bt[q.value-1];Me-- >0;)Bt[q.value++]=pe}else if(q.value<me)Bt[q.value++]=K;else return!1;ce.c=Ce,ce.lc=Qe}function oe(K){return K&65535}function ve(K){var le=oe(K);return le>32767?le-65536:le}const Se={a:0,b:0};function Re(K,le){var Ce=ve(K),Qe=ve(le),et=Qe,ft=Ce+(et&1)+(et>>1),Ft=ft,Bt=ft-et;Se.a=Ft,Se.b=Bt}function Le(K,le){var Ce=oe(K),Qe=oe(le),et=Ce-(Qe>>1)&65535,ft=Qe+et-32768&65535;Se.a=ft,Se.b=et}function gt(K,le,Ce,Qe,et,ft,Ft){for(var Bt=Ft<16384,q=Ce>et?et:Ce,me=1,Me;me<=q;)me<<=1;for(me>>=1,Me=me,me>>=1;me>=1;){for(var pe=0,Be=pe+ft*(et-Me),qe=ft*me,ct=ft*Me,vt=Qe*me,wt=Qe*Me,Wt,kt,Yt,fn;pe<=Be;pe+=ct){for(var an=pe,$n=pe+Qe*(Ce-Me);an<=$n;an+=wt){var rn=an+vt,cn=an+qe,$t=cn+vt;Bt?(Re(K[an+le],K[cn+le]),Wt=Se.a,Yt=Se.b,Re(K[rn+le],K[$t+le]),kt=Se.a,fn=Se.b,Re(Wt,kt),K[an+le]=Se.a,K[rn+le]=Se.b,Re(Yt,fn),K[cn+le]=Se.a,K[$t+le]=Se.b):(Le(K[an+le],K[cn+le]),Wt=Se.a,Yt=Se.b,Le(K[rn+le],K[$t+le]),kt=Se.a,fn=Se.b,Le(Wt,kt),K[an+le]=Se.a,K[rn+le]=Se.b,Le(Yt,fn),K[cn+le]=Se.a,K[$t+le]=Se.b)}if(Ce&me){var cn=an+qe;Bt?Re(K[an+le],K[cn+le]):Le(K[an+le],K[cn+le]),Wt=Se.a,K[cn+le]=Se.b,K[an+le]=Wt}}if(et&me)for(var an=pe,$n=pe+Qe*(Ce-Me);an<=$n;an+=wt){var rn=an+vt;Bt?Re(K[an+le],K[rn+le]):Le(K[an+le],K[rn+le]),Wt=Se.a,K[rn+le]=Se.b,K[an+le]=Wt}Me=me,me>>=1}return pe}function Mt(K,le,Ce,Qe,et,ft,Ft,Bt,q,me){for(var Me=0,pe=0,Be=Bt,qe=Math.trunc(et.value+(ft+7)/8);et.value<qe;)for(J(Me,pe,Ce,et),Me=X.c,pe=X.lc;pe>=14;){var ct=Me>>pe-14&16383,vt=le[ct];if(vt.len)pe-=vt.len,ge(vt.lit,Ft,Me,pe,Ce,Qe,et,q,me,Be),Me=ce.c,pe=ce.lc;else{if(!vt.p)throw"hufDecode issues";var wt;for(wt=0;wt<vt.lit;wt++){for(var Wt=ee(K[vt.p[wt]]);pe<Wt&&et.value<qe;)J(Me,pe,Ce,et),Me=X.c,pe=X.lc;if(pe>=Wt&&ne(K[vt.p[wt]])==(Me>>pe-Wt&(1<<Wt)-1)){pe-=Wt,ge(vt.p[wt],Ft,Me,pe,Ce,Qe,et,q,me,Be),Me=ce.c,pe=ce.lc;break}}if(wt==vt.lit)throw"hufDecode issues"}}var kt=8-ft&7;for(Me>>=kt,pe-=kt;pe>0;){var vt=le[Me<<14-pe&16383];if(vt.len)pe-=vt.len,ge(vt.lit,Ft,Me,pe,Ce,Qe,et,q,me,Be),Me=ce.c,pe=ce.lc;else throw"hufDecode issues"}return!0}function At(K,le,Ce,Qe,et,ft){var Ft={value:0},Bt=Ce.value,q=_t(le,Ce),me=_t(le,Ce);Ce.value+=4;var Me=_t(le,Ce);if(Ce.value+=4,q<0||q>=65537||me<0||me>=65537)throw"Something wrong with HUF_ENCSIZE";var pe=new Array(65537),Be=new Array(16384);Q(Be);var qe=Qe-(Ce.value-Bt);if(k(K,le,Ce,qe,q,me,pe),Me>8*(Qe-(Ce.value-Bt)))throw"Something wrong with hufUncompress";de(pe,q,me,Be),Mt(pe,Be,K,le,Ce,Me,me,ft,et,Ft)}function at(K,le,Ce){for(var Qe=0;Qe<Ce;++Qe)le[Qe]=K[le[Qe]]}function Nt(K){for(var le=1;le<K.length;le++){var Ce=K[le-1]+K[le]-128;K[le]=Ce}}function ie(K,le){for(var Ce=0,Qe=Math.floor((K.length+1)/2),et=0,ft=K.length-1;!(et>ft||(le[et++]=K[Ce++],et>ft));)le[et++]=K[Qe++]}function ut(K){for(var le=K.byteLength,Ce=new Array,Qe=0,et=new DataView(K);le>0;){var ft=et.getInt8(Qe++);if(ft<0){var Ft=-ft;le-=Ft+1;for(var Bt=0;Bt<Ft;Bt++)Ce.push(et.getUint8(Qe++))}else{var Ft=ft;le-=2;for(var q=et.getUint8(Qe++),Bt=0;Bt<Ft+1;Bt++)Ce.push(q)}}return Ce}function $e(K,le,Ce,Qe,et,ft){var rn=new DataView(ft.buffer),Ft=Ce[K.idx[0]].width,Bt=Ce[K.idx[0]].height,q=3,me=Math.floor(Ft/8),Me=Math.ceil(Ft/8),pe=Math.ceil(Bt/8),Be=Ft-(Me-1)*8,qe=Bt-(pe-1)*8,ct={value:0},vt=new Array(q),wt=new Array(q),Wt=new Array(q),kt=new Array(q),Yt=new Array(q);for(let _n=0;_n<q;++_n)Yt[_n]=le[K.idx[_n]],vt[_n]=_n<1?0:vt[_n-1]+Me*pe,wt[_n]=new Float32Array(64),Wt[_n]=new Uint16Array(64),kt[_n]=new Uint16Array(Me*64);for(let _n=0;_n<pe;++_n){var fn=8;_n==pe-1&&(fn=qe);var an=8;for(let dn=0;dn<Me;++dn){dn==Me-1&&(an=Be);for(let xn=0;xn<q;++xn)Wt[xn].fill(0),Wt[xn][0]=et[vt[xn]++],Ke(ct,Qe,Wt[xn]),Pe(Wt[xn],wt[xn]),pt(wt[xn]);Ve(wt);for(let xn=0;xn<q;++xn)j(wt[xn],kt[xn],dn*64)}let Bi=0;for(let dn=0;dn<q;++dn){const xn=Ce[K.idx[dn]].type;for(let Pn=8*_n;Pn<8*_n+fn;++Pn){Bi=Yt[dn][Pn];for(let Ui=0;Ui<me;++Ui){const Wn=Ui*64+(Pn&7)*8;rn.setUint16(Bi+0*2*xn,kt[dn][Wn+0],!0),rn.setUint16(Bi+1*2*xn,kt[dn][Wn+1],!0),rn.setUint16(Bi+2*2*xn,kt[dn][Wn+2],!0),rn.setUint16(Bi+3*2*xn,kt[dn][Wn+3],!0),rn.setUint16(Bi+4*2*xn,kt[dn][Wn+4],!0),rn.setUint16(Bi+5*2*xn,kt[dn][Wn+5],!0),rn.setUint16(Bi+6*2*xn,kt[dn][Wn+6],!0),rn.setUint16(Bi+7*2*xn,kt[dn][Wn+7],!0),Bi+=8*2*xn}}if(me!=Me)for(let Pn=8*_n;Pn<8*_n+fn;++Pn){const Ui=Yt[dn][Pn]+8*me*2*xn,Wn=me*64+(Pn&7)*8;for(let Oi=0;Oi<an;++Oi)rn.setUint16(Ui+Oi*2*xn,kt[dn][Wn+Oi],!0)}}}for(var $n=new Uint16Array(Ft),rn=new DataView(ft.buffer),cn=0;cn<q;++cn){Ce[K.idx[cn]].decoded=!0;var $t=Ce[K.idx[cn]].type;if(Ce[cn].type==2)for(var Si=0;Si<Bt;++Si){const _n=Yt[cn][Si];for(var gn=0;gn<Ft;++gn)$n[gn]=rn.getUint16(_n+gn*2*$t,!0);for(var gn=0;gn<Ft;++gn)rn.setFloat32(_n+gn*2*$t,De($n[gn]),!0)}}}function Ke(K,le,Ce){for(var Qe,et=1;et<64;)Qe=le[K.value],Qe==65280?et=64:Qe>>8==255?et+=Qe&255:(Ce[et]=Qe,et++),K.value++}function Pe(K,le){le[0]=De(K[0]),le[1]=De(K[1]),le[2]=De(K[5]),le[3]=De(K[6]),le[4]=De(K[14]),le[5]=De(K[15]),le[6]=De(K[27]),le[7]=De(K[28]),le[8]=De(K[2]),le[9]=De(K[4]),le[10]=De(K[7]),le[11]=De(K[13]),le[12]=De(K[16]),le[13]=De(K[26]),le[14]=De(K[29]),le[15]=De(K[42]),le[16]=De(K[3]),le[17]=De(K[8]),le[18]=De(K[12]),le[19]=De(K[17]),le[20]=De(K[25]),le[21]=De(K[30]),le[22]=De(K[41]),le[23]=De(K[43]),le[24]=De(K[9]),le[25]=De(K[11]),le[26]=De(K[18]),le[27]=De(K[24]),le[28]=De(K[31]),le[29]=De(K[40]),le[30]=De(K[44]),le[31]=De(K[53]),le[32]=De(K[10]),le[33]=De(K[19]),le[34]=De(K[23]),le[35]=De(K[32]),le[36]=De(K[39]),le[37]=De(K[45]),le[38]=De(K[52]),le[39]=De(K[54]),le[40]=De(K[20]),le[41]=De(K[22]),le[42]=De(K[33]),le[43]=De(K[38]),le[44]=De(K[46]),le[45]=De(K[51]),le[46]=De(K[55]),le[47]=De(K[60]),le[48]=De(K[21]),le[49]=De(K[34]),le[50]=De(K[37]),le[51]=De(K[47]),le[52]=De(K[50]),le[53]=De(K[56]),le[54]=De(K[59]),le[55]=De(K[61]),le[56]=De(K[35]),le[57]=De(K[36]),le[58]=De(K[48]),le[59]=De(K[49]),le[60]=De(K[57]),le[61]=De(K[58]),le[62]=De(K[62]),le[63]=De(K[63])}function pt(K){const le=.5*Math.cos(.7853975),Ce=.5*Math.cos(3.14159/16),Qe=.5*Math.cos(3.14159/8),et=.5*Math.cos(3*3.14159/16),ft=.5*Math.cos(5*3.14159/16),Ft=.5*Math.cos(3*3.14159/8),Bt=.5*Math.cos(7*3.14159/16);for(var q=new Array(4),me=new Array(4),Me=new Array(4),pe=new Array(4),Be=0;Be<8;++Be){var qe=Be*8;q[0]=Qe*K[qe+2],q[1]=Ft*K[qe+2],q[2]=Qe*K[qe+6],q[3]=Ft*K[qe+6],me[0]=Ce*K[qe+1]+et*K[qe+3]+ft*K[qe+5]+Bt*K[qe+7],me[1]=et*K[qe+1]-Bt*K[qe+3]-Ce*K[qe+5]-ft*K[qe+7],me[2]=ft*K[qe+1]-Ce*K[qe+3]+Bt*K[qe+5]+et*K[qe+7],me[3]=Bt*K[qe+1]-ft*K[qe+3]+et*K[qe+5]-Ce*K[qe+7],Me[0]=le*(K[qe+0]+K[qe+4]),Me[3]=le*(K[qe+0]-K[qe+4]),Me[1]=q[0]+q[3],Me[2]=q[1]-q[2],pe[0]=Me[0]+Me[1],pe[1]=Me[3]+Me[2],pe[2]=Me[3]-Me[2],pe[3]=Me[0]-Me[1],K[qe+0]=pe[0]+me[0],K[qe+1]=pe[1]+me[1],K[qe+2]=pe[2]+me[2],K[qe+3]=pe[3]+me[3],K[qe+4]=pe[3]-me[3],K[qe+5]=pe[2]-me[2],K[qe+6]=pe[1]-me[1],K[qe+7]=pe[0]-me[0]}for(var ct=0;ct<8;++ct)q[0]=Qe*K[16+ct],q[1]=Ft*K[16+ct],q[2]=Qe*K[48+ct],q[3]=Ft*K[48+ct],me[0]=Ce*K[8+ct]+et*K[24+ct]+ft*K[40+ct]+Bt*K[56+ct],me[1]=et*K[8+ct]-Bt*K[24+ct]-Ce*K[40+ct]-ft*K[56+ct],me[2]=ft*K[8+ct]-Ce*K[24+ct]+Bt*K[40+ct]+et*K[56+ct],me[3]=Bt*K[8+ct]-ft*K[24+ct]+et*K[40+ct]-Ce*K[56+ct],Me[0]=le*(K[ct]+K[32+ct]),Me[3]=le*(K[ct]-K[32+ct]),Me[1]=q[0]+q[3],Me[2]=q[1]-q[2],pe[0]=Me[0]+Me[1],pe[1]=Me[3]+Me[2],pe[2]=Me[3]-Me[2],pe[3]=Me[0]-Me[1],K[0+ct]=pe[0]+me[0],K[8+ct]=pe[1]+me[1],K[16+ct]=pe[2]+me[2],K[24+ct]=pe[3]+me[3],K[32+ct]=pe[3]-me[3],K[40+ct]=pe[2]-me[2],K[48+ct]=pe[1]-me[1],K[56+ct]=pe[0]-me[0]}function Ve(K){for(var le=0;le<64;++le){var Ce=K[0][le],Qe=K[1][le],et=K[2][le];K[0][le]=Ce+1.5747*et,K[1][le]=Ce-.1873*Qe-.4682*et,K[2][le]=Ce+1.8556*Qe}}function j(K,le,Ce){for(var Qe=0;Qe<64;++Qe)le[Ce+Qe]=Rg.toHalfFloat(Y(K[Qe]))}function Y(K){return K<=1?Math.sign(K)*Math.pow(Math.abs(K),2.2):Math.sign(K)*Math.pow(I,Math.abs(K)-1)}function _e(K){return new DataView(K.array.buffer,K.offset.value,K.size)}function Ie(K){var le=K.viewer.buffer.slice(K.offset.value,K.offset.value+K.size),Ce=new Uint8Array(ut(le)),Qe=new Uint8Array(Ce.length);return Nt(Ce),ie(Ce,Qe),new DataView(Qe.buffer)}function Ge(K){var le=K.array.slice(K.offset.value,K.offset.value+K.size),Ce=_A(le),Qe=new Uint8Array(Ce.length);return Nt(Ce),ie(Ce,Qe),new DataView(Qe.buffer)}function Ye(K){for(var le=K.viewer,Ce={value:K.offset.value},Qe=new Uint16Array(K.width*K.scanlineBlockSize*(K.channels*K.type)),et=new Uint8Array(8192),ft=0,Ft=new Array(K.channels),Bt=0;Bt<K.channels;Bt++)Ft[Bt]={},Ft[Bt].start=ft,Ft[Bt].end=Ft[Bt].start,Ft[Bt].nx=K.width,Ft[Bt].ny=K.lines,Ft[Bt].size=K.type,ft+=Ft[Bt].nx*Ft[Bt].ny*Ft[Bt].size;var q=He(le,Ce),me=He(le,Ce);if(me>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(q<=me)for(var Bt=0;Bt<me-q+1;Bt++)et[Bt+q]=xe(le,Ce);var Me=new Uint16Array(65536),pe=N(et,Me),Be=_t(le,Ce);At(K.array,le,Ce,Be,Qe,ft);for(var Bt=0;Bt<K.channels;++Bt)for(var qe=Ft[Bt],ct=0;ct<Ft[Bt].size;++ct)gt(Qe,qe.start+ct,qe.nx,qe.size,qe.ny,qe.nx*qe.size,pe);at(Me,Qe,ft);for(var vt=0,wt=new Uint8Array(Qe.buffer.byteLength),Wt=0;Wt<K.lines;Wt++)for(var kt=0;kt<K.channels;kt++){var qe=Ft[kt],Yt=qe.nx*qe.size,fn=new Uint8Array(Qe.buffer,qe.end*2,Yt*2);wt.set(fn,vt),vt+=Yt*2,qe.end+=Yt}return new DataView(wt.buffer)}function it(K){var le=K.array.slice(K.offset.value,K.offset.value+K.size),Ce=_A(le);const Qe=K.lines*K.channels*K.width,et=K.type==1?new Uint16Array(Qe):new Uint32Array(Qe);let ft=0,Ft=0;const Bt=new Array(4);for(let q=0;q<K.lines;q++)for(let me=0;me<K.channels;me++){let Me=0;switch(K.type){case 1:Bt[0]=ft,Bt[1]=Bt[0]+K.width,ft=Bt[1]+K.width;for(let pe=0;pe<K.width;++pe){const Be=Ce[Bt[0]++]<<8|Ce[Bt[1]++];Me+=Be,et[Ft]=Me,Ft++}break;case 2:Bt[0]=ft,Bt[1]=Bt[0]+K.width,Bt[2]=Bt[1]+K.width,ft=Bt[2]+K.width;for(let pe=0;pe<K.width;++pe){const Be=Ce[Bt[0]++]<<24|Ce[Bt[1]++]<<16|Ce[Bt[2]++]<<8;Me+=Be,et[Ft]=Me,Ft++}break}}return new DataView(et.buffer)}function rt(K){var le=K.viewer,Ce={value:K.offset.value},Qe=new Uint8Array(K.width*K.lines*(K.channels*K.type*2)),et={version:We(le,Ce),unknownUncompressedSize:We(le,Ce),unknownCompressedSize:We(le,Ce),acCompressedSize:We(le,Ce),dcCompressedSize:We(le,Ce),rleCompressedSize:We(le,Ce),rleUncompressedSize:We(le,Ce),rleRawSize:We(le,Ce),totalAcUncompressedCount:We(le,Ce),totalDcUncompressedCount:We(le,Ce),acCompression:We(le,Ce)};if(et.version<2)throw"EXRLoader.parse: "+pr.compression+" version "+et.version+" is unsupported";for(var ft=new Array,Ft=He(le,Ce)-2;Ft>0;){var Bt=yt(le.buffer,Ce),q=xe(le,Ce),me=q>>2&3,Me=(q>>4)-1,pe=new Int8Array([Me])[0],Be=xe(le,Ce);ft.push({name:Bt,index:pe,type:Be,compression:me}),Ft-=Bt.length+3}for(var qe=pr.channels,ct=new Array(K.channels),vt=0;vt<K.channels;++vt){var wt=ct[vt]={},Wt=qe[vt];wt.name=Wt.name,wt.compression=0,wt.decoded=!1,wt.type=Wt.pixelType,wt.pLinear=Wt.pLinear,wt.width=K.width,wt.height=K.lines}for(var kt={idx:new Array(3)},Yt=0;Yt<K.channels;++Yt)for(var wt=ct[Yt],vt=0;vt<ft.length;++vt){var fn=ft[vt];wt.name==fn.name&&(wt.compression=fn.compression,fn.index>=0&&(kt.idx[fn.index]=Yt),wt.offset=Yt)}if(et.acCompressedSize>0)switch(et.acCompression){case 0:var rn=new Uint16Array(et.totalAcUncompressedCount);At(K.array,le,Ce,et.acCompressedSize,rn,et.totalAcUncompressedCount);break;case 1:var an=K.array.slice(Ce.value,Ce.value+et.totalAcUncompressedCount),$n=_A(an),rn=new Uint16Array($n.buffer);Ce.value+=et.totalAcUncompressedCount;break}if(et.dcCompressedSize>0){var cn={array:K.array,offset:Ce,size:et.dcCompressedSize},$t=new Uint16Array(Ge(cn).buffer);Ce.value+=et.dcCompressedSize}if(et.rleRawSize>0){var an=K.array.slice(Ce.value,Ce.value+et.rleCompressedSize),$n=_A(an),Si=ut($n.buffer);Ce.value+=et.rleCompressedSize}for(var gn=0,_n=new Array(ct.length),vt=0;vt<_n.length;++vt)_n[vt]=new Array;for(var Bi=0;Bi<K.lines;++Bi)for(var dn=0;dn<ct.length;++dn)_n[dn].push(gn),gn+=ct[dn].width*K.type*2;$e(kt,_n,ct,rn,$t,Qe);for(var vt=0;vt<ct.length;++vt){var wt=ct[vt];if(!wt.decoded)switch(wt.compression){case 2:for(var xn=0,Pn=0,Bi=0;Bi<K.lines;++Bi){for(var Ui=_n[vt][xn],Wn=0;Wn<wt.width;++Wn){for(var Oi=0;Oi<2*wt.type;++Oi)Qe[Ui++]=Si[Pn+Oi*wt.width*wt.height];Pn++}xn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Qe.buffer)}function yt(K,le){for(var Ce=new Uint8Array(K),Qe=0;Ce[le.value+Qe]!=0;)Qe+=1;var et=new TextDecoder().decode(Ce.slice(le.value,le.value+Qe));return le.value=le.value+Qe+1,et}function Vt(K,le,Ce){var Qe=new TextDecoder().decode(new Uint8Array(K).slice(le.value,le.value+Ce));return le.value=le.value+Ce,Qe}function ht(K,le){var Ce=Et(K,le),Qe=_t(K,le);return[Ce,Qe]}function Lt(K,le){var Ce=_t(K,le),Qe=_t(K,le);return[Ce,Qe]}function Et(K,le){var Ce=K.getInt32(le.value,!0);return le.value=le.value+4,Ce}function _t(K,le){var Ce=K.getUint32(le.value,!0);return le.value=le.value+4,Ce}function ot(K,le){var Ce=K[le.value];return le.value=le.value+1,Ce}function xe(K,le){var Ce=K.getUint8(le.value);return le.value=le.value+1,Ce}const We=function(K,le){let Ce;return"getBigInt64"in DataView.prototype?Ce=Number(K.getBigInt64(le.value,!0)):Ce=K.getUint32(le.value+4,!0)+Number(K.getUint32(le.value,!0)<<32),le.value+=8,Ce};function Rt(K,le){var Ce=K.getFloat32(le.value,!0);return le.value+=4,Ce}function Ae(K,le){return Rg.toHalfFloat(Rt(K,le))}function De(K){var le=(K&31744)>>10,Ce=K&1023;return(K>>15?-1:1)*(le?le===31?Ce?NaN:1/0:Math.pow(2,le-15)*(1+Ce/1024):6103515625e-14*(Ce/1024))}function He(K,le){var Ce=K.getUint16(le.value,!0);return le.value+=2,Ce}function dt(K,le){return De(He(K,le))}function Pt(K,le,Ce,Qe){for(var et=Ce.value,ft=[];Ce.value<et+Qe-1;){var Ft=yt(le,Ce),Bt=Et(K,Ce),q=xe(K,Ce);Ce.value+=3;var me=Et(K,Ce),Me=Et(K,Ce);ft.push({name:Ft,pixelType:Bt,pLinear:q,xSampling:me,ySampling:Me})}return Ce.value+=1,ft}function Tt(K,le){var Ce=Rt(K,le),Qe=Rt(K,le),et=Rt(K,le),ft=Rt(K,le),Ft=Rt(K,le),Bt=Rt(K,le),q=Rt(K,le),me=Rt(K,le);return{redX:Ce,redY:Qe,greenX:et,greenY:ft,blueX:Ft,blueY:Bt,whiteX:q,whiteY:me}}function qt(K,le){var Ce=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Qe=xe(K,le);return Ce[Qe]}function sn(K,le){var Ce=_t(K,le),Qe=_t(K,le),et=_t(K,le),ft=_t(K,le);return{xMin:Ce,yMin:Qe,xMax:et,yMax:ft}}function Jt(K,le){var Ce=["INCREASING_Y"],Qe=xe(K,le);return Ce[Qe]}function nn(K,le){var Ce=Rt(K,le),Qe=Rt(K,le);return[Ce,Qe]}function ti(K,le){var Ce=Rt(K,le),Qe=Rt(K,le),et=Rt(K,le);return[Ce,Qe,et]}function Fn(K,le,Ce,Qe,et){if(Qe==="string"||Qe==="stringvector"||Qe==="iccProfile")return Vt(le,Ce,et);if(Qe==="chlist")return Pt(K,le,Ce,et);if(Qe==="chromaticities")return Tt(K,Ce);if(Qe==="compression")return qt(K,Ce);if(Qe==="box2i")return sn(K,Ce);if(Qe==="lineOrder")return Jt(K,Ce);if(Qe==="float")return Rt(K,Ce);if(Qe==="v2f")return nn(K,Ce);if(Qe==="v3f")return ti(K,Ce);if(Qe==="int")return Et(K,Ce);if(Qe==="rational")return ht(K,Ce);if(Qe==="timecode")return Lt(K,Ce);if(Qe==="preview")return Ce.value+=et,"skipped";Ce.value+=et}function Ln(K,le,Ce){const Qe={};if(K.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Qe.version=K.getUint8(4);const et=K.getUint8(5);Qe.spec={singleTile:!!(et&2),longName:!!(et&4),deepFormat:!!(et&8),multiPart:!!(et&16)},Ce.value=8;for(var ft=!0;ft;){var Ft=yt(le,Ce);if(Ft==0)ft=!1;else{var Bt=yt(le,Ce),q=_t(K,Ce),me=Fn(K,le,Ce,Bt,q);me===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Bt}'.`):Qe[Ft]=me}}if((et&-5)!=0)throw console.error("EXRHeader:",Qe),"THREE.EXRLoader: provided file is currently unsupported.";return Qe}function Ai(K,le,Ce,Qe,et){const ft={size:0,viewer:le,array:Ce,offset:Qe,width:K.dataWindow.xMax-K.dataWindow.xMin+1,height:K.dataWindow.yMax-K.dataWindow.yMin+1,channels:K.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:K.channels[0].pixelType,uncompress:null,getter:null,format:null,[Ky?"colorSpace":"encoding"]:null};switch(K.compression){case"NO_COMPRESSION":ft.lines=1,ft.uncompress=_e;break;case"RLE_COMPRESSION":ft.lines=1,ft.uncompress=Ie;break;case"ZIPS_COMPRESSION":ft.lines=1,ft.uncompress=Ge;break;case"ZIP_COMPRESSION":ft.lines=16,ft.uncompress=Ge;break;case"PIZ_COMPRESSION":ft.lines=32,ft.uncompress=Ye;break;case"PXR24_COMPRESSION":ft.lines=16,ft.uncompress=it;break;case"DWAA_COMPRESSION":ft.lines=32,ft.uncompress=rt;break;case"DWAB_COMPRESSION":ft.lines=256,ft.uncompress=rt;break;default:throw"EXRLoader.parse: "+K.compression+" is unsupported"}if(ft.scanlineBlockSize=ft.lines,ft.type==1)switch(et){case ss:ft.getter=dt,ft.inputSize=2;break;case wa:ft.getter=He,ft.inputSize=2;break}else if(ft.type==2)switch(et){case ss:ft.getter=Rt,ft.inputSize=4;break;case wa:ft.getter=Ae,ft.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+ft.type+" for "+K.compression+".";ft.blockCount=(K.dataWindow.yMax+1)/ft.scanlineBlockSize;for(var Ft=0;Ft<ft.blockCount;Ft++)We(le,Qe);ft.outputChannels=ft.channels==3?4:ft.channels;const Bt=ft.width*ft.height*ft.outputChannels;switch(et){case ss:ft.byteArray=new Float32Array(Bt),ft.channels<ft.outputChannels&&ft.byteArray.fill(1,0,Bt);break;case wa:ft.byteArray=new Uint16Array(Bt),ft.channels<ft.outputChannels&&ft.byteArray.fill(15360,0,Bt);break;default:console.error("THREE.EXRLoader: unsupported type: ",et);break}return ft.bytesPerLine=ft.width*ft.inputSize*ft.channels,ft.outputChannels==4?ft.format=Fs:ft.format=A_,Ky?ft.colorSpace="srgb-linear":ft.encoding=3e3,ft}const Di=new DataView(e),or=new Uint8Array(e),kr={value:0},pr=Ln(Di,e,kr),ln=Ai(pr,Di,or,kr,this.type),Gi={value:0},ni={R:0,G:1,B:2,A:3,Y:0};for(let K=0;K<ln.height/ln.scanlineBlockSize;K++){const le=_t(Di,kr);ln.size=_t(Di,kr),ln.lines=le+ln.scanlineBlockSize>ln.height?ln.height-le:ln.scanlineBlockSize;const Qe=ln.size<ln.lines*ln.bytesPerLine?ln.uncompress(ln):_e(ln);kr.value+=ln.size;for(let et=0;et<ln.scanlineBlockSize;et++){const ft=et+K*ln.scanlineBlockSize;if(ft>=ln.height)break;for(let Ft=0;Ft<ln.channels;Ft++){const Bt=ni[pr.channels[Ft].name];for(let q=0;q<ln.width;q++){Gi.value=(et*(ln.channels*ln.width)+Ft*ln.width+q)*ln.inputSize;const me=(ln.height-1-ft)*(ln.width*ln.outputChannels)+q*ln.outputChannels+Bt;ln.byteArray[me]=ln.getter(Qe,Gi)}}}}return{header:pr,width:ln.width,height:ln.height,data:ln.byteArray,format:ln.format,[Ky?"colorSpace":"encoding"]:ln[Ky?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,i,r){function s(a,l){Ky?a.colorSpace=l.colorSpace:a.encoding=l.encoding,a.minFilter=qi,a.magFilter=qi,a.generateMipmaps=!1,a.flipY=!1,t&&t(a,l)}return super.load(e,s,i,r)}}const QT=new WeakMap;class oY extends to{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new eo(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,l).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const u in t.attributeTypes){const f=t.attributeTypes[u];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[u]=f.name)}const i=JSON.stringify(t);if(QT.has(e)){const u=QT.get(e);if(u.key===i)return u.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,l=this._getWorker(s,a).then(u=>(r=u,new Promise((f,d)=>{r._callbacks[s]={resolve:f,reject:d},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),QT.set(e,{key:i,promise:l}),l}_createGeometry(e){const t=new Qn;e.index&&t.setIndex(new Ki(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,l=r.itemSize;t.setAttribute(s,new Ki(a,l))}return t}_loadLibrary(e,t){const i=new eo(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=lY.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function lY(){let n,e;onmessage=function(a){const l=a.data;switch(l.type){case"init":n=l.decoderConfig,e=new Promise(function(d){n.onModuleLoaded=function(v){d({draco:v})},DracoDecoderModule(n)});break;case"decode":const u=l.buffer,f=l.taskConfig;e.then(d=>{const v=d.draco,y=new v.Decoder,A=new v.DecoderBuffer;A.Init(new Int8Array(u),u.byteLength);try{const b=t(v,y,A,f),C=b.attributes.map(T=>T.array.buffer);b.index&&C.push(b.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:b},C)}catch(b){console.error(b),self.postMessage({type:"error",id:l.id,error:b.message})}finally{v.destroy(A),v.destroy(y)}});break}};function t(a,l,u,f){const d=f.attributeIDs,v=f.attributeTypes;let y,A;const b=l.GetEncodedGeometryType(u);if(b===a.TRIANGULAR_MESH)y=new a.Mesh,A=l.DecodeBufferToMesh(u,y);else if(b===a.POINT_CLOUD)y=new a.PointCloud,A=l.DecodeBufferToPointCloud(u,y);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!A.ok()||y.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+A.error_msg());const C={index:null,attributes:[]};for(const T in d){const M=self[v[T]];let B,D;if(f.useUniqueIDs)D=d[T],B=l.GetAttributeByUniqueId(y,D);else{if(D=l.GetAttributeId(y,a[d[T]]),D===-1)continue;B=l.GetAttribute(y,D)}C.attributes.push(r(a,l,y,T,M,B))}return b===a.TRIANGULAR_MESH&&(C.index=i(a,l,y)),a.destroy(y),C}function i(a,l,u){const d=u.num_faces()*3,v=d*4,y=a._malloc(v);l.GetTrianglesUInt32Array(u,v,y);const A=new Uint32Array(a.HEAPF32.buffer,y,d).slice();return a._free(y),{array:A,itemSize:1}}function r(a,l,u,f,d,v){const y=v.num_components(),b=u.num_points()*y,C=b*d.BYTES_PER_ELEMENT,T=s(a,d),M=a._malloc(C);l.GetAttributeDataArrayForAllPoints(u,v,T,C,M);const B=new d(a.HEAPF32.buffer,M,b).slice();return a._free(M),{name:f,array:B,itemSize:y}}function s(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let AA;const $T=()=>{if(AA)return AA;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const a=WebAssembly.instantiate(l(r),{}).then(v=>{s=v.instance,s.exports.__wasm_call_ctors()});function l(v){const y=new Uint8Array(v.length);for(let b=0;b<v.length;++b){const C=v.charCodeAt(b);y[b]=C>96?C-71:C>64?C-65:C>47?C+4:C>46?63:62}let A=0;for(let b=0;b<v.length;++b)y[A++]=y[b]<60?i[y[b]]:(y[b]-60)*64+y[++b];return y.buffer.slice(0,A)}function u(v,y,A,b,C,T){const M=s.exports.sbrk,B=A+3&-4,D=M(B*b),O=M(C.length),P=new Uint8Array(s.exports.memory.buffer);P.set(C,O);const F=v(D,A,b,O,C.length);if(F===0&&T&&T(D,B,b),y.set(P.subarray(D,D+A*b)),M(D-M(0)),F!==0)throw new Error(`Malformed buffer data: ${F}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return AA={ready:a,supported:!0,decodeVertexBuffer(v,y,A,b,C){u(s.exports.meshopt_decodeVertexBuffer,v,y,A,b,s.exports[f[C]])},decodeIndexBuffer(v,y,A,b){u(s.exports.meshopt_decodeIndexBuffer,v,y,A,b)},decodeIndexSequence(v,y,A,b){u(s.exports.meshopt_decodeIndexSequence,v,y,A,b)},decodeGltfBuffer(v,y,A,b,C,T){u(s.exports[d[C]],v,y,A,b,s.exports[f[T]])}},AA};function uY(){var n=Object.create(null);function e(r,s){var a=r.id,l=r.name,u=r.dependencies;u===void 0&&(u=[]);var f=r.init;f===void 0&&(f=function(){});var d=r.getTransferables;if(d===void 0&&(d=null),!n[a])try{u=u.map(function(y){return y&&y.isWorkerModule&&(e(y,function(A){if(A instanceof Error)throw A}),y=n[y.id].value),y}),f=i("<"+l+">.init",f),d&&(d=i("<"+l+">.getTransferables",d));var v=null;typeof f=="function"?v=f.apply(void 0,u):console.error("worker module init function failed to rehydrate"),n[a]={id:a,value:v,getTransferables:d},s(v)}catch(y){y&&y.noLog||console.error(y),s(y)}}function t(r,s){var a,l=r.id,u=r.args;(!n[l]||typeof n[l].value!="function")&&s(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var f=(a=n[l]).value.apply(a,u);f&&typeof f.then=="function"?f.then(d,function(v){return s(v instanceof Error?v:new Error(""+v))}):d(f)}catch(v){s(v)}function d(v){try{var y=n[l].getTransferables&&n[l].getTransferables(v);(!y||!Array.isArray(y)||!y.length)&&(y=void 0),s(v,y)}catch(A){console.error(A),s(A)}}}function i(r,s){var a=void 0;self.troikaDefine=function(u){return a=u};var l=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(u){console.error(u)}return URL.revokeObjectURL(l),delete self.troikaDefine,a}self.addEventListener("message",function(r){var s=r.data,a=s.messageId,l=s.action,u=s.data;try{l==="registerModule"&&e(u,function(f){f instanceof Error?postMessage({messageId:a,success:!1,error:f.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof f=="function"}})}),l==="callModule"&&t(u,function(f,d){f instanceof Error?postMessage({messageId:a,success:!1,error:f.message}):postMessage({messageId:a,success:!0,result:f},d||void 0)})}catch(f){postMessage({messageId:a,success:!1,error:f.stack})}})}function cY(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var NN=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return NN=function(){return n},n},fY=0,hY=0,eE=!1,M1=Object.create(null),T1=Object.create(null),rC=Object.create(null);function sy(n){if((!n||typeof n.init!="function")&&!eE)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId,s=cY(n);r==null&&(r="#default");var a="workerModule"+ ++fY,l=n.name||a,u=null;e=e&&e.map(function(d){return typeof d=="function"&&!d.workerModuleData&&(eE=!0,d=sy({workerId:r,name:"<"+l+"> function dependency: "+d.name,init:`function(){return (
`+HA(d)+`
)}`}),eE=!1),d&&d.workerModuleData&&(d=d.workerModuleData),d});function f(){for(var d=[],v=arguments.length;v--;)d[v]=arguments[v];if(!NN())return s.apply(void 0,d);if(!u){u=n3(r,"registerModule",f.workerModuleData);var y=function(){u=null,T1[r].delete(y)};(T1[r]||(T1[r]=new Set)).add(y)}return u.then(function(A){var b=A.isCallable;if(b)return n3(r,"callModule",{id:a,args:d});throw new Error("Worker module function was called but `init` did not return a callable function")})}return f.workerModuleData={isWorkerModule:!0,id:a,name:l,dependencies:e,init:HA(t),getTransferables:i&&HA(i)},f.onMainThread=s,f}function dY(n){T1[n]&&T1[n].forEach(function(e){e()}),M1[n]&&(M1[n].terminate(),delete M1[n])}function HA(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function pY(n){var e=M1[n];if(!e){var t=HA(uY);e=M1[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,a=rC[s];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete rC[s],a(r)}}return e}function n3(n,e,t){return new Promise(function(i,r){var s=++hY;rC[s]=function(a){a.success?i(a.result):r(new Error("Error in worker "+e+" call: "+a.error))},pY(n).postMessage({messageId:s,action:e,data:t})})}function IN(){var n=function(e){function t(de,X,J,ce,ge,oe,ve,Se){var Re=1-ve;Se.x=Re*Re*de+2*Re*ve*J+ve*ve*ge,Se.y=Re*Re*X+2*Re*ve*ce+ve*ve*oe}function i(de,X,J,ce,ge,oe,ve,Se,Re,Le){var gt=1-Re;Le.x=gt*gt*gt*de+3*gt*gt*Re*J+3*gt*Re*Re*ge+Re*Re*Re*ve,Le.y=gt*gt*gt*X+3*gt*gt*Re*ce+3*gt*Re*Re*oe+Re*Re*Re*Se}function r(de,X){for(var J=/([MLQCZ])([^MLQCZ]*)/g,ce,ge,oe,ve,Se;ce=J.exec(de);){var Re=ce[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(Le){return parseFloat(Le)});switch(ce[1]){case"M":ve=ge=Re[0],Se=oe=Re[1];break;case"L":(Re[0]!==ve||Re[1]!==Se)&&X("L",ve,Se,ve=Re[0],Se=Re[1]);break;case"Q":{X("Q",ve,Se,ve=Re[2],Se=Re[3],Re[0],Re[1]);break}case"C":{X("C",ve,Se,ve=Re[4],Se=Re[5],Re[0],Re[1],Re[2],Re[3]);break}case"Z":(ve!==ge||Se!==oe)&&X("L",ve,Se,ge,oe);break}}}function s(de,X,J){J===void 0&&(J=16);var ce={x:0,y:0};r(de,function(ge,oe,ve,Se,Re,Le,gt,Mt,At){switch(ge){case"L":X(oe,ve,Se,Re);break;case"Q":{for(var at=oe,Nt=ve,ie=1;ie<J;ie++)t(oe,ve,Le,gt,Se,Re,ie/(J-1),ce),X(at,Nt,ce.x,ce.y),at=ce.x,Nt=ce.y;break}case"C":{for(var ut=oe,$e=ve,Ke=1;Ke<J;Ke++)i(oe,ve,Le,gt,Mt,At,Se,Re,Ke/(J-1),ce),X(ut,$e,ce.x,ce.y),ut=ce.x,$e=ce.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",u=new WeakMap,f={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function d(de,X){var J=de.getContext?de.getContext("webgl",f):de,ce=u.get(J);if(!ce){let ut=function(j){var Y=oe[j];if(!Y&&(Y=oe[j]=J.getExtension(j),!Y))throw new Error(j+" not supported");return Y},$e=function(j,Y){var _e=J.createShader(Y);return J.shaderSource(_e,j),J.compileShader(_e),_e},Ke=function(j,Y,_e,Ie){if(!ve[j]){var Ge={},Ye={},it=J.createProgram();J.attachShader(it,$e(Y,J.VERTEX_SHADER)),J.attachShader(it,$e(_e,J.FRAGMENT_SHADER)),J.linkProgram(it),ve[j]={program:it,transaction:function(yt){J.useProgram(it),yt({setUniform:function(ht,Lt){for(var Et=[],_t=arguments.length-2;_t-- >0;)Et[_t]=arguments[_t+2];var ot=Ye[Lt]||(Ye[Lt]=J.getUniformLocation(it,Lt));J["uniform"+ht].apply(J,[ot].concat(Et))},setAttribute:function(ht,Lt,Et,_t,ot){var xe=Ge[ht];xe||(xe=Ge[ht]={buf:J.createBuffer(),loc:J.getAttribLocation(it,ht),data:null}),J.bindBuffer(J.ARRAY_BUFFER,xe.buf),J.vertexAttribPointer(xe.loc,Lt,J.FLOAT,!1,0,0),J.enableVertexAttribArray(xe.loc),ge?J.vertexAttribDivisor(xe.loc,_t):ut("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(xe.loc,_t),ot!==xe.data&&(J.bufferData(J.ARRAY_BUFFER,ot,Et),xe.data=ot)}})}}}ve[j].transaction(Ie)},Pe=function(j,Y){Re++;try{J.activeTexture(J.TEXTURE0+Re);var _e=Se[j];_e||(_e=Se[j]=J.createTexture(),J.bindTexture(J.TEXTURE_2D,_e),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.NEAREST),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.NEAREST)),J.bindTexture(J.TEXTURE_2D,_e),Y(_e,Re)}finally{Re--}},pt=function(j,Y,_e){var Ie=J.createFramebuffer();Le.push(Ie),J.bindFramebuffer(J.FRAMEBUFFER,Ie),J.activeTexture(J.TEXTURE0+Y),J.bindTexture(J.TEXTURE_2D,j),J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,j,0);try{_e(Ie)}finally{J.deleteFramebuffer(Ie),J.bindFramebuffer(J.FRAMEBUFFER,Le[--Le.length-1]||null)}},Ve=function(){oe={},ve={},Se={},Re=-1,Le.length=0};var gt=ut,Mt=$e,At=Ke,at=Pe,Nt=pt,ie=Ve,ge=typeof WebGL2RenderingContext<"u"&&J instanceof WebGL2RenderingContext,oe={},ve={},Se={},Re=-1,Le=[];J.canvas.addEventListener("webglcontextlost",function(j){Ve(),j.preventDefault()},!1),u.set(J,ce={gl:J,isWebGL2:ge,getExtension:ut,withProgram:Ke,withTexture:Pe,withTextureFramebuffer:pt,handleContextLoss:Ve})}X(ce)}function v(de,X,J,ce,ge,oe,ve,Se){ve===void 0&&(ve=15),Se===void 0&&(Se=null),d(de,function(Re){var Le=Re.gl,gt=Re.withProgram,Mt=Re.withTexture;Mt("copy",function(At,at){Le.texImage2D(Le.TEXTURE_2D,0,Le.RGBA,ge,oe,0,Le.RGBA,Le.UNSIGNED_BYTE,X),gt("copy",a,l,function(Nt){var ie=Nt.setUniform,ut=Nt.setAttribute;ut("aUV",2,Le.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ie("1i","image",at),Le.bindFramebuffer(Le.FRAMEBUFFER,Se||null),Le.disable(Le.BLEND),Le.colorMask(ve&8,ve&4,ve&2,ve&1),Le.viewport(J,ce,ge,oe),Le.scissor(J,ce,ge,oe),Le.drawArrays(Le.TRIANGLES,0,3)})})})}function y(de,X,J){var ce=de.width,ge=de.height;d(de,function(oe){var ve=oe.gl,Se=new Uint8Array(ce*ge*4);ve.readPixels(0,0,ce,ge,ve.RGBA,ve.UNSIGNED_BYTE,Se),de.width=X,de.height=J,v(ve,Se,0,0,ce,ge)})}var A=Object.freeze({__proto__:null,withWebGLContext:d,renderImageData:v,resizeWebGLCanvasWithoutClearing:y});function b(de,X,J,ce,ge,oe){oe===void 0&&(oe=1);var ve=new Uint8Array(de*X),Se=ce[2]-ce[0],Re=ce[3]-ce[1],Le=[];s(J,function(ut,$e,Ke,Pe){Le.push({x1:ut,y1:$e,x2:Ke,y2:Pe,minX:Math.min(ut,Ke),minY:Math.min($e,Pe),maxX:Math.max(ut,Ke),maxY:Math.max($e,Pe)})}),Le.sort(function(ut,$e){return ut.maxX-$e.maxX});for(var gt=0;gt<de;gt++)for(var Mt=0;Mt<X;Mt++){var At=Nt(ce[0]+Se*(gt+.5)/de,ce[1]+Re*(Mt+.5)/X),at=Math.pow(1-Math.abs(At)/ge,oe)/2;At<0&&(at=1-at),at=Math.max(0,Math.min(255,Math.round(at*255))),ve[Mt*de+gt]=at}return ve;function Nt(ut,$e){for(var Ke=1/0,Pe=1/0,pt=Le.length;pt--;){var Ve=Le[pt];if(Ve.maxX+Pe<=ut)break;if(ut+Pe>Ve.minX&&$e-Pe<Ve.maxY&&$e+Pe>Ve.minY){var j=M(ut,$e,Ve.x1,Ve.y1,Ve.x2,Ve.y2);j<Ke&&(Ke=j,Pe=Math.sqrt(Ke))}}return ie(ut,$e)&&(Pe=-Pe),Pe}function ie(ut,$e){for(var Ke=0,Pe=Le.length;Pe--;){var pt=Le[Pe];if(pt.maxX<=ut)break;var Ve=pt.y1>$e!=pt.y2>$e&&ut<(pt.x2-pt.x1)*($e-pt.y1)/(pt.y2-pt.y1)+pt.x1;Ve&&(Ke+=pt.y1<pt.y2?1:-1)}return Ke!==0}}function C(de,X,J,ce,ge,oe,ve,Se,Re,Le){oe===void 0&&(oe=1),Se===void 0&&(Se=0),Re===void 0&&(Re=0),Le===void 0&&(Le=0),T(de,X,J,ce,ge,oe,ve,null,Se,Re,Le)}function T(de,X,J,ce,ge,oe,ve,Se,Re,Le,gt){oe===void 0&&(oe=1),Re===void 0&&(Re=0),Le===void 0&&(Le=0),gt===void 0&&(gt=0);for(var Mt=b(de,X,J,ce,ge,oe),At=new Uint8Array(Mt.length*4),at=0;at<Mt.length;at++)At[at*4+gt]=Mt[at];v(ve,At,Re,Le,de,X,1<<3-gt,Se)}function M(de,X,J,ce,ge,oe){var ve=ge-J,Se=oe-ce,Re=ve*ve+Se*Se,Le=Re?Math.max(0,Math.min(1,((de-J)*ve+(X-ce)*Se)/Re)):0,gt=de-(J+Le*ve),Mt=X-(ce+Le*Se);return gt*gt+Mt*Mt}var B=Object.freeze({__proto__:null,generate:b,generateIntoCanvas:C,generateIntoFramebuffer:T}),D="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",O="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",P="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",F=new Float32Array([0,0,2,0,0,2]),V=null,G=!1,I={},N=new WeakMap;function Q(de){if(!G&&!ye(de))throw new Error("WebGL generation not supported")}function $(de,X,J,ce,ge,oe,ve){if(oe===void 0&&(oe=1),ve===void 0&&(ve=null),!ve&&(ve=V,!ve)){var Se=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!Se)throw new Error("OffscreenCanvas or DOM canvas not supported");ve=V=Se.getContext("webgl",{depth:!1})}Q(ve);var Re=new Uint8Array(de*X*4);d(ve,function(At){var at=At.gl,Nt=At.withTexture,ie=At.withTextureFramebuffer;Nt("readable",function(ut,$e){at.texImage2D(at.TEXTURE_2D,0,at.RGBA,de,X,0,at.RGBA,at.UNSIGNED_BYTE,null),ie(ut,$e,function(Ke){se(de,X,J,ce,ge,oe,at,Ke,0,0,0),at.readPixels(0,0,de,X,at.RGBA,at.UNSIGNED_BYTE,Re)})})});for(var Le=new Uint8Array(de*X),gt=0,Mt=0;gt<Re.length;gt+=4)Le[Mt++]=Re[gt];return Le}function te(de,X,J,ce,ge,oe,ve,Se,Re,Le){oe===void 0&&(oe=1),Se===void 0&&(Se=0),Re===void 0&&(Re=0),Le===void 0&&(Le=0),se(de,X,J,ce,ge,oe,ve,null,Se,Re,Le)}function se(de,X,J,ce,ge,oe,ve,Se,Re,Le,gt){oe===void 0&&(oe=1),Re===void 0&&(Re=0),Le===void 0&&(Le=0),gt===void 0&&(gt=0),Q(ve);var Mt=[];s(J,function(At,at,Nt,ie){Mt.push(At,at,Nt,ie)}),Mt=new Float32Array(Mt),d(ve,function(At){var at=At.gl,Nt=At.isWebGL2,ie=At.getExtension,ut=At.withProgram,$e=At.withTexture,Ke=At.withTextureFramebuffer,Pe=At.handleContextLoss;if($e("rawDistances",function(pt,Ve){(de!==pt._lastWidth||X!==pt._lastHeight)&&at.texImage2D(at.TEXTURE_2D,0,at.RGBA,pt._lastWidth=de,pt._lastHeight=X,0,at.RGBA,at.UNSIGNED_BYTE,null),ut("main",D,O,function(j){var Y=j.setAttribute,_e=j.setUniform,Ie=!Nt&&ie("ANGLE_instanced_arrays"),Ge=!Nt&&ie("EXT_blend_minmax");Y("aUV",2,at.STATIC_DRAW,0,F),Y("aLineSegment",4,at.DYNAMIC_DRAW,1,Mt),_e.apply(void 0,["4f","uGlyphBounds"].concat(ce)),_e("1f","uMaxDistance",ge),_e("1f","uExponent",oe),Ke(pt,Ve,function(Ye){at.enable(at.BLEND),at.colorMask(!0,!0,!0,!0),at.viewport(0,0,de,X),at.scissor(0,0,de,X),at.blendFunc(at.ONE,at.ONE),at.blendEquationSeparate(at.FUNC_ADD,Nt?at.MAX:Ge.MAX_EXT),at.clear(at.COLOR_BUFFER_BIT),Nt?at.drawArraysInstanced(at.TRIANGLES,0,3,Mt.length/4):Ie.drawArraysInstancedANGLE(at.TRIANGLES,0,3,Mt.length/4)})}),ut("post",a,P,function(j){j.setAttribute("aUV",2,at.STATIC_DRAW,0,F),j.setUniform("1i","tex",Ve),at.bindFramebuffer(at.FRAMEBUFFER,Se),at.disable(at.BLEND),at.colorMask(gt===0,gt===1,gt===2,gt===3),at.viewport(Re,Le,de,X),at.scissor(Re,Le,de,X),at.drawArrays(at.TRIANGLES,0,3)})}),at.isContextLost())throw Pe(),new Error("webgl context lost")})}function ye(de){var X=!de||de===V?I:de.canvas||de,J=N.get(X);if(J===void 0){G=!0;var ce=null;try{var ge=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],oe=$(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,de);J=oe&&ge.length===oe.length&&oe.every(function(ve,Se){return ve===ge[Se]}),J||(ce="bad trial run results",console.info(ge,oe))}catch(ve){J=!1,ce=ve.message}ce&&console.warn("WebGL SDF generation not supported:",ce),G=!1,N.set(X,J)}return J}var k=Object.freeze({__proto__:null,generate:$,generateIntoCanvas:te,generateIntoFramebuffer:se,isSupported:ye});function ee(de,X,J,ce,ge,oe){ge===void 0&&(ge=Math.max(ce[2]-ce[0],ce[3]-ce[1])/2),oe===void 0&&(oe=1);try{return $.apply(k,arguments)}catch(ve){return console.info("WebGL SDF generation failed, falling back to JS",ve),b.apply(B,arguments)}}function ne(de,X,J,ce,ge,oe,ve,Se,Re,Le){ge===void 0&&(ge=Math.max(ce[2]-ce[0],ce[3]-ce[1])/2),oe===void 0&&(oe=1),Se===void 0&&(Se=0),Re===void 0&&(Re=0),Le===void 0&&(Le=0);try{return te.apply(k,arguments)}catch(gt){return console.info("WebGL SDF generation failed, falling back to JS",gt),C.apply(B,arguments)}}return e.forEachPathCommand=r,e.generate=ee,e.generateIntoCanvas=ne,e.javascript=B,e.pathToLineSegments=s,e.webgl=k,e.webglUtils=A,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function mY(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(Pe,pt){i[Pe]=1<<pt+1,r[i[Pe]]=Pe}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,a=i.L|i.R|i.AL,l=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,u=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,f=i.S|i.WS|i.B|s|i.PDI|u,d=null;function v(){if(!d){d=new Map;var Pe=function(Ve){if(t.hasOwnProperty(Ve)){var j=0;t[Ve].split(",").forEach(function(Y){var _e=Y.split("+"),Ie=_e[0],Ge=_e[1];Ie=parseInt(Ie,36),Ge=Ge?parseInt(Ge,36):0,d.set(j+=Ie,i[Ve]);for(var Ye=0;Ye<Ge;Ye++)d.set(++j,i[Ve])})}};for(var pt in t)Pe(pt)}}function y(Pe){return v(),d.get(Pe.codePointAt(0))||i.L}function A(Pe){return r[y(Pe)]}var b={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function C(Pe,pt){var Ve=36,j=0,Y=new Map,_e=pt&&new Map,Ie;return Pe.split(",").forEach(function Ge(Ye){if(Ye.indexOf("+")!==-1)for(var it=+Ye;it--;)Ge(Ie);else{Ie=Ye;var rt=Ye.split(">"),yt=rt[0],Vt=rt[1];yt=String.fromCodePoint(j+=parseInt(yt,Ve)),Vt=String.fromCodePoint(j+=parseInt(Vt,Ve)),Y.set(yt,Vt),pt&&_e.set(Vt,yt)}}),{map:Y,reverseMap:_e}}var T,M,B;function D(){if(!T){var Pe=C(b.pairs,!0),pt=Pe.map,Ve=Pe.reverseMap;T=pt,M=Ve,B=C(b.canonical,!1).map}}function O(Pe){return D(),T.get(Pe)||null}function P(Pe){return D(),M.get(Pe)||null}function F(Pe){return D(),B.get(Pe)||null}var V=i.L,G=i.R,I=i.EN,N=i.ES,Q=i.ET,$=i.AN,te=i.CS,se=i.B,ye=i.S,k=i.ON,ee=i.BN,ne=i.NSM,de=i.AL,X=i.LRO,J=i.RLO,ce=i.LRE,ge=i.RLE,oe=i.PDF,ve=i.LRI,Se=i.RLI,Re=i.FSI,Le=i.PDI;function gt(Pe,pt){for(var Ve=125,j=new Uint32Array(Pe.length),Y=0;Y<Pe.length;Y++)j[Y]=y(Pe[Y]);var _e=new Map;function Ie(ls,$s){var Gr=j[ls];j[ls]=$s,_e.set(Gr,_e.get(Gr)-1),Gr&l&&_e.set(l,_e.get(l)-1),_e.set($s,(_e.get($s)||0)+1),$s&l&&_e.set(l,(_e.get(l)||0)+1)}for(var Ge=new Uint8Array(Pe.length),Ye=new Map,it=[],rt=null,yt=0;yt<Pe.length;yt++)rt||it.push(rt={start:yt,end:Pe.length-1,level:pt==="rtl"?1:pt==="ltr"?0:Mf(yt,!1)}),j[yt]&se&&(rt.end=yt,rt=null);for(var Vt=ge|ce|J|X|s|Le|oe|se,ht=function(ls){return ls+(ls&1?1:2)},Lt=function(ls){return ls+(ls&1?2:1)},Et=0;Et<it.length;Et++){rt=it[Et];var _t=[{_level:rt.level,_override:0,_isolate:0}],ot=void 0,xe=0,We=0,Rt=0;_e.clear();for(var Ae=rt.start;Ae<=rt.end;Ae++){var De=j[Ae];if(ot=_t[_t.length-1],_e.set(De,(_e.get(De)||0)+1),De&l&&_e.set(l,(_e.get(l)||0)+1),De&Vt)if(De&(ge|ce)){Ge[Ae]=ot._level;var He=(De===ge?Lt:ht)(ot._level);He<=Ve&&!xe&&!We?_t.push({_level:He,_override:0,_isolate:0}):xe||We++}else if(De&(J|X)){Ge[Ae]=ot._level;var dt=(De===J?Lt:ht)(ot._level);dt<=Ve&&!xe&&!We?_t.push({_level:dt,_override:De&J?G:V,_isolate:0}):xe||We++}else if(De&s){De&Re&&(De=Mf(Ae+1,!0)===1?Se:ve),Ge[Ae]=ot._level,ot._override&&Ie(Ae,ot._override);var Pt=(De===Se?Lt:ht)(ot._level);Pt<=Ve&&xe===0&&We===0?(Rt++,_t.push({_level:Pt,_override:0,_isolate:1,_isolInitIndex:Ae})):xe++}else if(De&Le){if(xe>0)xe--;else if(Rt>0){for(We=0;!_t[_t.length-1]._isolate;)_t.pop();var Tt=_t[_t.length-1]._isolInitIndex;Tt!=null&&(Ye.set(Tt,Ae),Ye.set(Ae,Tt)),_t.pop(),Rt--}ot=_t[_t.length-1],Ge[Ae]=ot._level,ot._override&&Ie(Ae,ot._override)}else De&oe?(xe===0&&(We>0?We--:!ot._isolate&&_t.length>1&&(_t.pop(),ot=_t[_t.length-1])),Ge[Ae]=ot._level):De&se&&(Ge[Ae]=rt.level);else Ge[Ae]=ot._level,ot._override&&De!==ee&&Ie(Ae,ot._override)}for(var qt=[],sn=null,Jt=rt.start;Jt<=rt.end;Jt++){var nn=j[Jt];if(!(nn&u)){var ti=Ge[Jt],Fn=nn&s,Ln=nn===Le;sn&&ti===sn._level?(sn._end=Jt,sn._endsWithIsolInit=Fn):qt.push(sn={_start:Jt,_end:Jt,_level:ti,_startsWithPDI:Ln,_endsWithIsolInit:Fn})}}for(var Ai=[],Di=0;Di<qt.length;Di++){var or=qt[Di];if(!or._startsWithPDI||or._startsWithPDI&&!Ye.has(or._start)){for(var kr=[sn=or],pr=void 0;sn&&sn._endsWithIsolInit&&(pr=Ye.get(sn._end))!=null;)for(var ln=Di+1;ln<qt.length;ln++)if(qt[ln]._start===pr){kr.push(sn=qt[ln]);break}for(var Gi=[],ni=0;ni<kr.length;ni++)for(var K=kr[ni],le=K._start;le<=K._end;le++)Gi.push(le);for(var Ce=Ge[Gi[0]],Qe=rt.level,et=Gi[0]-1;et>=0;et--)if(!(j[et]&u)){Qe=Ge[et];break}var ft=Gi[Gi.length-1],Ft=Ge[ft],Bt=rt.level;if(!(j[ft]&s)){for(var q=ft+1;q<=rt.end;q++)if(!(j[q]&u)){Bt=Ge[q];break}}Ai.push({_seqIndices:Gi,_sosType:Math.max(Qe,Ce)%2?G:V,_eosType:Math.max(Bt,Ft)%2?G:V})}}for(var me=0;me<Ai.length;me++){var Me=Ai[me],pe=Me._seqIndices,Be=Me._sosType,qe=Me._eosType,ct=Ge[pe[0]]&1?G:V;if(_e.get(ne))for(var vt=0;vt<pe.length;vt++){var wt=pe[vt];if(j[wt]&ne){for(var Wt=Be,kt=vt-1;kt>=0;kt--)if(!(j[pe[kt]]&u)){Wt=j[pe[kt]];break}Ie(wt,Wt&(s|Le)?k:Wt)}}if(_e.get(I))for(var Yt=0;Yt<pe.length;Yt++){var fn=pe[Yt];if(j[fn]&I)for(var an=Yt-1;an>=-1;an--){var $n=an===-1?Be:j[pe[an]];if($n&a){$n===de&&Ie(fn,$);break}}}if(_e.get(de))for(var rn=0;rn<pe.length;rn++){var cn=pe[rn];j[cn]&de&&Ie(cn,G)}if(_e.get(N)||_e.get(te))for(var $t=1;$t<pe.length-1;$t++){var Si=pe[$t];if(j[Si]&(N|te)){for(var gn=0,_n=0,Bi=$t-1;Bi>=0&&(gn=j[pe[Bi]],!!(gn&u));Bi--);for(var dn=$t+1;dn<pe.length&&(_n=j[pe[dn]],!!(_n&u));dn++);gn===_n&&(j[Si]===N?gn===I:gn&(I|$))&&Ie(Si,gn)}}if(_e.get(I))for(var xn=0;xn<pe.length;xn++){var Pn=pe[xn];if(j[Pn]&I){for(var Ui=xn-1;Ui>=0&&j[pe[Ui]]&(Q|u);Ui--)Ie(pe[Ui],I);for(xn++;xn<pe.length&&j[pe[xn]]&(Q|u|I);xn++)j[pe[xn]]!==I&&Ie(pe[xn],I)}}if(_e.get(Q)||_e.get(N)||_e.get(te))for(var Wn=0;Wn<pe.length;Wn++){var Oi=pe[Wn];if(j[Oi]&(Q|N|te)){Ie(Oi,k);for(var mr=Wn-1;mr>=0&&j[pe[mr]]&u;mr--)Ie(pe[mr],k);for(var Or=Wn+1;Or<pe.length&&j[pe[Or]]&u;Or++)Ie(pe[Or],k)}}if(_e.get(I))for(var Zr=0,jl=Be;Zr<pe.length;Zr++){var ql=pe[Zr],Uu=j[ql];Uu&I?jl===V&&Ie(ql,V):Uu&a&&(jl=Uu)}if(_e.get(l)){var ml=G|I|$,Af=ml|V,Uo=[];{for(var no=[],Oo=0;Oo<pe.length;Oo++)if(j[pe[Oo]]&l){var da=Pe[pe[Oo]],gl=void 0;if(O(da)!==null)if(no.length<63)no.push({char:da,seqIndex:Oo});else break;else if((gl=P(da))!==null)for(var vl=no.length-1;vl>=0;vl--){var Kl=no[vl].char;if(Kl===gl||Kl===P(F(da))||O(F(Kl))===da){Uo.push([no[vl].seqIndex,Oo]),no.length=vl;break}}}Uo.sort(function(ls,$s){return ls[0]-$s[0]})}for(var Sc=0;Sc<Uo.length;Sc++){for(var Jl=Uo[Sc],Zs=Jl[0],Lo=Jl[1],Zl=!1,Ir=0,bc=Zs+1;bc<Lo;bc++){var Mc=pe[bc];if(j[Mc]&Af){Zl=!0;var Sf=j[Mc]&ml?G:V;if(Sf===ct){Ir=Sf;break}}}if(Zl&&!Ir){Ir=Be;for(var li=Zs-1;li>=0;li--){var vi=pe[li];if(j[vi]&Af){var Ou=j[vi]&ml?G:V;Ou!==ct?Ir=Ou:Ir=ct;break}}}if(Ir){if(j[pe[Zs]]=j[pe[Lo]]=Ir,Ir!==ct){for(var Fr=Zs+1;Fr<pe.length;Fr++)if(!(j[pe[Fr]]&u)){y(Pe[pe[Fr]])&ne&&(j[pe[Fr]]=Ir);break}}if(Ir!==ct){for(var pa=Lo+1;pa<pe.length;pa++)if(!(j[pe[pa]]&u)){y(Pe[pe[pa]])&ne&&(j[pe[pa]]=Ir);break}}}}for(var Qs=0;Qs<pe.length;Qs++)if(j[pe[Qs]]&l){for(var Ql=Qs,bf=Qs,ma=Be,io=Qs-1;io>=0;io--)if(j[pe[io]]&u)Ql=io;else{ma=j[pe[io]]&ml?G:V;break}for(var gr=qe,ga=Qs+1;ga<pe.length;ga++)if(j[pe[ga]]&(l|u))bf=ga;else{gr=j[pe[ga]]&ml?G:V;break}for(var Ba=Ql;Ba<=bf;Ba++)j[pe[Ba]]=ma===gr?ma:ct;Qs=bf}}}for(var bs=rt.start;bs<=rt.end;bs++){var xh=Ge[bs],bi=j[bs];if(xh&1?bi&(V|I|$)&&Ge[bs]++:bi&G?Ge[bs]++:bi&($|I)&&(Ge[bs]+=2),bi&u&&(Ge[bs]=bs===0?rt.level:Ge[bs-1]),bs===rt.end||y(Pe[bs])&(ye|se))for(var yl=bs;yl>=0&&y(Pe[yl])&f;yl--)Ge[yl]=rt.level}}return{levels:Ge,paragraphs:it};function Mf(ls,$s){for(var Gr=ls;Gr<Pe.length;Gr++){var vr=j[Gr];if(vr&(G|de))return 1;if(vr&(se|V)||$s&&vr===Le)return 0;if(vr&s){var Sh=Ah(Gr);Gr=Sh===-1?Pe.length:Sh}}return 0}function Ah(ls){for(var $s=1,Gr=ls+1;Gr<Pe.length;Gr++){var vr=j[Gr];if(vr&se)break;if(vr&Le){if(--$s===0)return Gr}else vr&s&&$s++}return-1}}var Mt="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",At;function at(){if(!At){var Pe=C(Mt,!0),pt=Pe.map,Ve=Pe.reverseMap;Ve.forEach(function(j,Y){pt.set(Y,j)}),At=pt}}function Nt(Pe){return at(),At.get(Pe)||null}function ie(Pe,pt,Ve,j){var Y=Pe.length;Ve=Math.max(0,Ve==null?0:+Ve),j=Math.min(Y-1,j==null?Y-1:+j);for(var _e=new Map,Ie=Ve;Ie<=j;Ie++)if(pt[Ie]&1){var Ge=Nt(Pe[Ie]);Ge!==null&&_e.set(Ie,Ge)}return _e}function ut(Pe,pt,Ve,j){var Y=Pe.length;Ve=Math.max(0,Ve==null?0:+Ve),j=Math.min(Y-1,j==null?Y-1:+j);var _e=[];return pt.paragraphs.forEach(function(Ie){var Ge=Math.max(Ve,Ie.start),Ye=Math.min(j,Ie.end);if(Ge<Ye){for(var it=pt.levels.slice(Ge,Ye+1),rt=Ye;rt>=Ge&&y(Pe[rt])&f;rt--)it[rt]=Ie.level;for(var yt=Ie.level,Vt=1/0,ht=0;ht<it.length;ht++){var Lt=it[ht];Lt>yt&&(yt=Lt),Lt<Vt&&(Vt=Lt|1)}for(var Et=yt;Et>=Vt;Et--)for(var _t=0;_t<it.length;_t++)if(it[_t]>=Et){for(var ot=_t;_t+1<it.length&&it[_t+1]>=Et;)_t++;_t>ot&&_e.push([ot+Ge,_t+Ge])}}}),_e}function $e(Pe,pt,Ve,j){var Y=Ke(Pe,pt,Ve,j),_e=[].concat(Pe);return Y.forEach(function(Ie,Ge){_e[Ge]=(pt.levels[Ie]&1?Nt(Pe[Ie]):null)||Pe[Ie]}),_e.join("")}function Ke(Pe,pt,Ve,j){for(var Y=ut(Pe,pt,Ve,j),_e=[],Ie=0;Ie<Pe.length;Ie++)_e[Ie]=Ie;return Y.forEach(function(Ge){for(var Ye=Ge[0],it=Ge[1],rt=_e.slice(Ye,it+1),yt=rt.length;yt--;)_e[it-yt]=rt[yt]}),_e}return e.closingToOpeningBracket=P,e.getBidiCharType=y,e.getBidiCharTypeName=A,e.getCanonicalBracket=F,e.getEmbeddingLevels=gt,e.getMirroredCharacter=Nt,e.getMirroredCharactersMap=ie,e.getReorderSegments=ut,e.getReorderedIndices=Ke,e.getReorderedString=$e,e.openingToClosingBracket=O,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const FN=/\bvoid\s+main\s*\(\s*\)\s*{/g;function sC(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=ri[r];return s?sC(s):i}return n.replace(e,t)}const Ja=[];for(let n=0;n<256;n++)Ja[n]=(n<16?"0":"")+n.toString(16);function gY(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ja[n&255]+Ja[n>>8&255]+Ja[n>>16&255]+Ja[n>>24&255]+"-"+Ja[e&255]+Ja[e>>8&255]+"-"+Ja[e>>16&15|64]+Ja[e>>24&255]+"-"+Ja[t&63|128]+Ja[t>>8&255]+"-"+Ja[t>>16&255]+Ja[t>>24&255]+Ja[i&255]+Ja[i>>8&255]+Ja[i>>16&255]+Ja[i>>24&255]).toUpperCase()}const pg=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},vY=Date.now(),i3=new WeakMap,r3=new Map;let yY=1e10;function aC(n,e){const t=SY(e);let i=i3.get(n);if(i||i3.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(f,d){n.onBeforeCompile.call(this,f,d);const v=this.customProgramCacheKey()+"|"+f.vertexShader+"|"+f.fragmentShader;let y=r3[v];if(!y){const A=_Y(this,f,e,t);y=r3[v]=A}f.vertexShader=y.vertexShader,f.fragmentShader=y.fragmentShader,pg(f.uniforms,this.uniforms),e.timeUniform&&(f.uniforms[e.timeUniform]={get value(){return Date.now()-vY}}),this[r]&&this[r](f)},a=function(){return l(e.chained?n:n.clone())},l=function(f){const d=Object.create(f,u);return Object.defineProperty(d,"baseMaterial",{value:n}),Object.defineProperty(d,"id",{value:yY++}),d.uuid=gY(),d.uniforms=pg({},f.uniforms,e.uniforms),d.defines=pg({},f.defines,e.defines),d.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",d.extensions=pg({},f.extensions,e.extensions),d._listeners=void 0,d},u={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>n.type,set:f=>{n.type=f}},isDerivedFrom:{writable:!0,configurable:!0,value:function(f){const d=this.baseMaterial;return f===d||d.isDerivedMaterial&&d.isDerivedFrom(f)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(f){this[r]=f}},copy:{writable:!0,configurable:!0,value:function(f){return n.copy.call(this,f),!n.isShaderMaterial&&!n.isDerivedMaterial&&(pg(this.extensions,f.extensions),pg(this.defines,f.defines),pg(this.uniforms,m2.clone(f.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const f=new n.constructor;return l(f).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let f=this._depthMaterial;return f||(f=this._depthMaterial=aC(n.isDerivedMaterial?n.getDepthMaterial():new Hb({depthPacking:c2}),e),f.defines.IS_DEPTH_MATERIAL="",f.uniforms=this.uniforms),f}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let f=this._distanceMaterial;return f||(f=this._distanceMaterial=aC(n.isDerivedMaterial?n.getDistanceMaterial():new zb,e),f.defines.IS_DISTANCE_MATERIAL="",f.uniforms=this.uniforms),f}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:f,_distanceMaterial:d}=this;f&&f.dispose(),d&&d.dispose(),n.dispose.call(this)}}};return i[t]=a,new a}function _Y(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:a,vertexMainOutro:l,vertexTransform:u,fragmentDefs:f,fragmentMainIntro:d,fragmentMainOutro:v,fragmentColorTransform:y,customRewriter:A,timeUniform:b}=i;if(s=s||"",a=a||"",l=l||"",f=f||"",d=d||"",v=v||"",(u||A)&&(e=sC(e)),(y||A)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=sC(t)),A){let C=A({vertexShader:e,fragmentShader:t});e=C.vertexShader,t=C.fragmentShader}if(y){let C=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,T=>(C.push(T),"")),v=`${y}
${C.join(`
`)}
${v}`}if(b){const C=`
uniform float ${b};
`;s=C+s,f=C+f}return u&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${u}
}
`,a=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(C,T,M,B)=>/\battribute\s+vec[23]\s+$/.test(B.substr(0,M))?T:`troika_${T}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=s3(e,r,s,a,l),t=s3(t,r,f,d,v),{vertexShader:e,fragmentShader:t}}function s3(n,e,t,i,r){return(i||r||t)&&(n=n.replace(FN,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function xY(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let AY=0;const a3=new Map;function SY(n){const e=JSON.stringify(n,xY);let t=a3.get(e);return t==null&&a3.set(e,t=++AY),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function bY(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(r){var s=e._bin,a=new Uint8Array(r);if(s.readASCII(a,0,4)=="ttcf"){var l=4;s.readUshort(a,l),l+=2,s.readUshort(a,l),l+=2;var u=s.readUint(a,l);l+=4;for(var f=[],d=0;d<u;d++){var v=s.readUint(a,l);l+=4,f.push(e._readFont(a,v))}return f}return[e._readFont(a,0)]},_readFont:function(r,s){var a=e._bin,l=s;a.readFixed(r,s),s+=4;var u=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var f=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],d={_data:r,_offset:l},v={},y=0;y<u;y++){var A=a.readASCII(r,s,4);s+=4,a.readUint(r,s),s+=4;var b=a.readUint(r,s);s+=4;var C=a.readUint(r,s);s+=4,v[A]={offset:b,length:C}}for(y=0;y<f.length;y++){var T=f[y];v[T]&&(d[T.trim()]=e[T.trim()].parse(r,v[T].offset,v[T].length,d))}return d},_tabOffset:function(r,s,a){for(var l=e._bin,u=l.readUshort(r,a+4),f=a+12,d=0;d<u;d++){var v=l.readASCII(r,f,4);f+=4,l.readUint(r,f),f+=4;var y=l.readUint(r,f);if(f+=4,l.readUint(r,f),f+=4,v==s)return y}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,a){for(var l=[],u=0;u<a;u++)l.push(e._bin.readUshort(r,s+2*u));return l},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,a){for(var l="",u=0;u<a;u++)l+=String.fromCharCode(r[s+u]);return l},readUnicode:function(r,s,a){for(var l="",u=0;u<a;u++){var f=r[s++]<<8|r[s++];l+=String.fromCharCode(f)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,a){var l=e._bin._tdec;return l&&s==0&&a==r.length?l.decode(r):e._bin.readASCII(r,s,a)},readBytes:function(r,s,a){for(var l=[],u=0;u<a;u++)l.push(r[s+u]);return l},readASCIIArray:function(r,s,a){for(var l=[],u=0;u<a;u++)l.push(String.fromCharCode(r[s+u]));return l},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,a,l,u){var f=e._bin,d={},v=s;f.readFixed(r,s),s+=4;var y=f.readUshort(r,s);s+=2;var A=f.readUshort(r,s);s+=2;var b=f.readUshort(r,s);return s+=2,d.scriptList=e._lctf.readScriptList(r,v+y),d.featureList=e._lctf.readFeatureList(r,v+A),d.lookupList=e._lctf.readLookupList(r,v+b,u),d},e._lctf.readLookupList=function(r,s,a){var l=e._bin,u=s,f=[],d=l.readUshort(r,s);s+=2;for(var v=0;v<d;v++){var y=l.readUshort(r,s);s+=2;var A=e._lctf.readLookupTable(r,u+y,a);f.push(A)}return f},e._lctf.readLookupTable=function(r,s,a){var l=e._bin,u=s,f={tabs:[]};f.ltype=l.readUshort(r,s),s+=2,f.flag=l.readUshort(r,s),s+=2;var d=l.readUshort(r,s);s+=2;for(var v=f.ltype,y=0;y<d;y++){var A=l.readUshort(r,s);s+=2;var b=a(r,v,u+A,f);f.tabs.push(b)}return f},e._lctf.numOfOnes=function(r){for(var s=0,a=0;a<32;a++)(r>>>a&1)!=0&&s++;return s},e._lctf.readClassDef=function(r,s){var a=e._bin,l=[],u=a.readUshort(r,s);if(s+=2,u==1){var f=a.readUshort(r,s);s+=2;var d=a.readUshort(r,s);s+=2;for(var v=0;v<d;v++)l.push(f+v),l.push(f+v),l.push(a.readUshort(r,s)),s+=2}if(u==2){var y=a.readUshort(r,s);for(s+=2,v=0;v<y;v++)l.push(a.readUshort(r,s)),s+=2,l.push(a.readUshort(r,s)),s+=2,l.push(a.readUshort(r,s)),s+=2}return l},e._lctf.getInterval=function(r,s){for(var a=0;a<r.length;a+=3){var l=r[a],u=r[a+1];if(r[a+2],l<=s&&s<=u)return a}return-1},e._lctf.readCoverage=function(r,s){var a=e._bin,l={};l.fmt=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);return s+=2,l.fmt==1&&(l.tab=a.readUshorts(r,s,u)),l.fmt==2&&(l.tab=a.readUshorts(r,s,3*u)),l},e._lctf.coverageIndex=function(r,s){var a=r.tab;if(r.fmt==1)return a.indexOf(s);if(r.fmt==2){var l=e._lctf.getInterval(a,s);if(l!=-1)return a[l+2]+(s-a[l])}return-1},e._lctf.readFeatureList=function(r,s){var a=e._bin,l=s,u=[],f=a.readUshort(r,s);s+=2;for(var d=0;d<f;d++){var v=a.readASCII(r,s,4);s+=4;var y=a.readUshort(r,s);s+=2;var A=e._lctf.readFeatureTable(r,l+y);A.tag=v.trim(),u.push(A)}return u},e._lctf.readFeatureTable=function(r,s){var a=e._bin,l=s,u={},f=a.readUshort(r,s);s+=2,f>0&&(u.featureParams=l+f);var d=a.readUshort(r,s);s+=2,u.tab=[];for(var v=0;v<d;v++)u.tab.push(a.readUshort(r,s+2*v));return u},e._lctf.readScriptList=function(r,s){var a=e._bin,l=s,u={},f=a.readUshort(r,s);s+=2;for(var d=0;d<f;d++){var v=a.readASCII(r,s,4);s+=4;var y=a.readUshort(r,s);s+=2,u[v.trim()]=e._lctf.readScriptTable(r,l+y)}return u},e._lctf.readScriptTable=function(r,s){var a=e._bin,l=s,u={},f=a.readUshort(r,s);s+=2,f>0&&(u.default=e._lctf.readLangSysTable(r,l+f));var d=a.readUshort(r,s);s+=2;for(var v=0;v<d;v++){var y=a.readASCII(r,s,4);s+=4;var A=a.readUshort(r,s);s+=2,u[y.trim()]=e._lctf.readLangSysTable(r,l+A)}return u},e._lctf.readLangSysTable=function(r,s){var a=e._bin,l={};a.readUshort(r,s),s+=2,l.reqFeature=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);return s+=2,l.features=a.readUshorts(r,s,u),l},e.CFF={},e.CFF.parse=function(r,s,a){var l=e._bin;(r=new Uint8Array(r.buffer,s,a))[s=0],r[++s],r[++s],r[++s],s++;var u=[];s=e.CFF.readIndex(r,s,u);for(var f=[],d=0;d<u.length-1;d++)f.push(l.readASCII(r,s+u[d],u[d+1]-u[d]));s+=u[u.length-1];var v=[];s=e.CFF.readIndex(r,s,v);var y=[];for(d=0;d<v.length-1;d++)y.push(e.CFF.readDict(r,s+v[d],s+v[d+1]));s+=v[v.length-1];var A=y[0],b=[];s=e.CFF.readIndex(r,s,b);var C=[];for(d=0;d<b.length-1;d++)C.push(l.readASCII(r,s+b[d],b[d+1]-b[d]));if(s+=b[b.length-1],e.CFF.readSubrs(r,s,A),A.CharStrings){s=A.CharStrings,b=[],s=e.CFF.readIndex(r,s,b);var T=[];for(d=0;d<b.length-1;d++)T.push(l.readBytes(r,s+b[d],b[d+1]-b[d]));A.CharStrings=T}if(A.ROS){s=A.FDArray;var M=[];for(s=e.CFF.readIndex(r,s,M),A.FDArray=[],d=0;d<M.length-1;d++){var B=e.CFF.readDict(r,s+M[d],s+M[d+1]);e.CFF._readFDict(r,B,C),A.FDArray.push(B)}s+=M[M.length-1],s=A.FDSelect,A.FDSelect=[];var D=r[s];if(s++,D!=3)throw D;var O=l.readUshort(r,s);for(s+=2,d=0;d<O+1;d++)A.FDSelect.push(l.readUshort(r,s),r[s+2]),s+=3}return A.Encoding&&(A.Encoding=e.CFF.readEncoding(r,A.Encoding,A.CharStrings.length)),A.charset&&(A.charset=e.CFF.readCharset(r,A.charset,A.CharStrings.length)),e.CFF._readFDict(r,A,C),A},e.CFF._readFDict=function(r,s,a){var l;for(var u in s.Private&&(l=s.Private[1],s.Private=e.CFF.readDict(r,l,l+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,l+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(u)!=-1&&(s[u]=a[s[u]-426+35])},e.CFF.readSubrs=function(r,s,a){var l=e._bin,u=[];s=e.CFF.readIndex(r,s,u);var f,d=u.length;f=d<1240?107:d<33900?1131:32768,a.Bias=f,a.Subrs=[];for(var v=0;v<u.length-1;v++)a.Subrs.push(l.readBytes(r,s+u[v],u[v+1]-u[v]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var a=0;a<r.charset.length;a++)if(r.charset[a]==s)return a;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,a){e._bin;var l=[".notdef"],u=r[s];if(s++,u!=0)throw"error: unknown encoding format: "+u;var f=r[s];s++;for(var d=0;d<f;d++)l.push(r[s+d]);return l},e.CFF.readCharset=function(r,s,a){var l=e._bin,u=[".notdef"],f=r[s];if(s++,f==0)for(var d=0;d<a;d++){var v=l.readUshort(r,s);s+=2,u.push(v)}else{if(f!=1&&f!=2)throw"error: format: "+f;for(;u.length<a;){v=l.readUshort(r,s),s+=2;var y=0;for(f==1?(y=r[s],s++):(y=l.readUshort(r,s),s+=2),d=0;d<=y;d++)u.push(v),v++}}return u},e.CFF.readIndex=function(r,s,a){var l=e._bin,u=l.readUshort(r,s)+1,f=r[s+=2];if(s++,f==1)for(var d=0;d<u;d++)a.push(r[s+d]);else if(f==2)for(d=0;d<u;d++)a.push(l.readUshort(r,s+2*d));else if(f==3)for(d=0;d<u;d++)a.push(16777215&l.readUint(r,s+3*d-1));else if(u!=1)throw"unsupported offset size: "+f+", count: "+u;return(s+=u*f)-1},e.CFF.getCharString=function(r,s,a){var l=e._bin,u=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var d=1,v=null,y=null;u<=20&&(v=u,d=1),u==12&&(v=100*u+f,d=2),21<=u&&u<=27&&(v=u,d=1),u==28&&(y=l.readShort(r,s+1),d=3),29<=u&&u<=31&&(v=u,d=1),32<=u&&u<=246&&(y=u-139,d=1),247<=u&&u<=250&&(y=256*(u-247)+f+108,d=2),251<=u&&u<=254&&(y=256*-(u-251)-f-108,d=2),u==255&&(y=l.readInt(r,s+1)/65535,d=5),a.val=y??"o"+v,a.size=d},e.CFF.readCharString=function(r,s,a){for(var l=s+a,u=e._bin,f=[];s<l;){var d=r[s],v=r[s+1];r[s+2],r[s+3],r[s+4];var y=1,A=null,b=null;d<=20&&(A=d,y=1),d==12&&(A=100*d+v,y=2),d!=19&&d!=20||(A=d,y=2),21<=d&&d<=27&&(A=d,y=1),d==28&&(b=u.readShort(r,s+1),y=3),29<=d&&d<=31&&(A=d,y=1),32<=d&&d<=246&&(b=d-139,y=1),247<=d&&d<=250&&(b=256*(d-247)+v+108,y=2),251<=d&&d<=254&&(b=256*-(d-251)-v-108,y=2),d==255&&(b=u.readInt(r,s+1)/65535,y=5),f.push(b??"o"+A),s+=y}return f},e.CFF.readDict=function(r,s,a){for(var l=e._bin,u={},f=[];s<a;){var d=r[s],v=r[s+1];r[s+2],r[s+3],r[s+4];var y=1,A=null,b=null;if(d==28&&(b=l.readShort(r,s+1),y=3),d==29&&(b=l.readInt(r,s+1),y=5),32<=d&&d<=246&&(b=d-139,y=1),247<=d&&d<=250&&(b=256*(d-247)+v+108,y=2),251<=d&&d<=254&&(b=256*-(d-251)-v-108,y=2),d==255)throw b=l.readInt(r,s+1)/65535,y=5,"unknown number";if(d==30){var C=[];for(y=1;;){var T=r[s+y];y++;var M=T>>4,B=15&T;if(M!=15&&C.push(M),B!=15&&C.push(B),B==15)break}for(var D="",O=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],P=0;P<C.length;P++)D+=O[C[P]];b=parseFloat(D)}d<=21&&(A=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][d],y=1,d==12&&(A=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][v],y=2)),A!=null?(u[A]=f.length==1?f[0]:f,f=[]):f.push(b),s+=y}return u},e.cmap={},e.cmap.parse=function(r,s,a){r=new Uint8Array(r.buffer,s,a),s=0;var l=e._bin,u={};l.readUshort(r,s),s+=2;var f=l.readUshort(r,s);s+=2;var d=[];u.tables=[];for(var v=0;v<f;v++){var y=l.readUshort(r,s);s+=2;var A=l.readUshort(r,s);s+=2;var b=l.readUint(r,s);s+=4;var C="p"+y+"e"+A,T=d.indexOf(b);if(T==-1){var M;T=u.tables.length,d.push(b);var B=l.readUshort(r,b);B==0?M=e.cmap.parse0(r,b):B==4?M=e.cmap.parse4(r,b):B==6?M=e.cmap.parse6(r,b):B==12?M=e.cmap.parse12(r,b):console.debug("unknown format: "+B,y,A,b),u.tables.push(M)}if(u[C]!=null)throw"multiple tables for one platform+encoding";u[C]=T}return u},e.cmap.parse0=function(r,s){var a=e._bin,l={};l.format=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,l.map=[];for(var f=0;f<u-6;f++)l.map.push(r[s+f]);return l},e.cmap.parse4=function(r,s){var a=e._bin,l=s,u={};u.format=a.readUshort(r,s),s+=2;var f=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2;var d=a.readUshort(r,s);s+=2;var v=d/2;u.searchRange=a.readUshort(r,s),s+=2,u.entrySelector=a.readUshort(r,s),s+=2,u.rangeShift=a.readUshort(r,s),s+=2,u.endCount=a.readUshorts(r,s,v),s+=2*v,s+=2,u.startCount=a.readUshorts(r,s,v),s+=2*v,u.idDelta=[];for(var y=0;y<v;y++)u.idDelta.push(a.readShort(r,s)),s+=2;for(u.idRangeOffset=a.readUshorts(r,s,v),s+=2*v,u.glyphIdArray=[];s<l+f;)u.glyphIdArray.push(a.readUshort(r,s)),s+=2;return u},e.cmap.parse6=function(r,s){var a=e._bin,l={};l.format=a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,l.firstCode=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2,l.glyphIdArray=[];for(var f=0;f<u;f++)l.glyphIdArray.push(a.readUshort(r,s)),s+=2;return l},e.cmap.parse12=function(r,s){var a=e._bin,l={};l.format=a.readUshort(r,s),s+=2,s+=2,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4;var u=a.readUint(r,s);s+=4,l.groups=[];for(var f=0;f<u;f++){var d=s+12*f,v=a.readUint(r,d+0),y=a.readUint(r,d+4),A=a.readUint(r,d+8);l.groups.push([v,y,A])}return l},e.glyf={},e.glyf.parse=function(r,s,a,l){for(var u=[],f=0;f<l.maxp.numGlyphs;f++)u.push(null);return u},e.glyf._parseGlyf=function(r,s){var a=e._bin,l=r._data,u=e._tabOffset(l,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var f={};if(f.noc=a.readShort(l,u),u+=2,f.xMin=a.readShort(l,u),u+=2,f.yMin=a.readShort(l,u),u+=2,f.xMax=a.readShort(l,u),u+=2,f.yMax=a.readShort(l,u),u+=2,f.xMin>=f.xMax||f.yMin>=f.yMax)return null;if(f.noc>0){f.endPts=[];for(var d=0;d<f.noc;d++)f.endPts.push(a.readUshort(l,u)),u+=2;var v=a.readUshort(l,u);if(u+=2,l.length-u<v)return null;f.instructions=a.readBytes(l,u,v),u+=v;var y=f.endPts[f.noc-1]+1;for(f.flags=[],d=0;d<y;d++){var A=l[u];if(u++,f.flags.push(A),(8&A)!=0){var b=l[u];u++;for(var C=0;C<b;C++)f.flags.push(A),d++}}for(f.xs=[],d=0;d<y;d++){var T=(2&f.flags[d])!=0,M=(16&f.flags[d])!=0;T?(f.xs.push(M?l[u]:-l[u]),u++):M?f.xs.push(0):(f.xs.push(a.readShort(l,u)),u+=2)}for(f.ys=[],d=0;d<y;d++)T=(4&f.flags[d])!=0,M=(32&f.flags[d])!=0,T?(f.ys.push(M?l[u]:-l[u]),u++):M?f.ys.push(0):(f.ys.push(a.readShort(l,u)),u+=2);var B=0,D=0;for(d=0;d<y;d++)B+=f.xs[d],D+=f.ys[d],f.xs[d]=B,f.ys[d]=D}else{var O;f.parts=[];do{O=a.readUshort(l,u),u+=2;var P={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(f.parts.push(P),P.glyphIndex=a.readUshort(l,u),u+=2,1&O){var F=a.readShort(l,u);u+=2;var V=a.readShort(l,u);u+=2}else F=a.readInt8(l,u),u++,V=a.readInt8(l,u),u++;2&O?(P.m.tx=F,P.m.ty=V):(P.p1=F,P.p2=V),8&O?(P.m.a=P.m.d=a.readF2dot14(l,u),u+=2):64&O?(P.m.a=a.readF2dot14(l,u),u+=2,P.m.d=a.readF2dot14(l,u),u+=2):128&O&&(P.m.a=a.readF2dot14(l,u),u+=2,P.m.b=a.readF2dot14(l,u),u+=2,P.m.c=a.readF2dot14(l,u),u+=2,P.m.d=a.readF2dot14(l,u),u+=2)}while(32&O);if(256&O){var G=a.readUshort(l,u);for(u+=2,f.instr=[],d=0;d<G;d++)f.instr.push(l[u]),u++}}return f},e.GDEF={},e.GDEF.parse=function(r,s,a,l){var u=s;s+=4;var f=e._bin.readUshort(r,s);return{glyphClassDef:f===0?null:e._lctf.readClassDef(r,u+f)}},e.GPOS={},e.GPOS.parse=function(r,s,a,l){return e._lctf.parse(r,s,a,l,e.GPOS.subt)},e.GPOS.subt=function(r,s,a,l){var u=e._bin,f=a,d={};if(d.fmt=u.readUshort(r,a),a+=2,s==1||s==2||s==3||s==7||s==8&&d.fmt<=2){var v=u.readUshort(r,a);a+=2,d.coverage=e._lctf.readCoverage(r,v+f)}if(s==1&&d.fmt==1){var y=u.readUshort(r,a);a+=2,y!=0&&(d.pos=e.GPOS.readValueRecord(r,a,y))}else if(s==2&&d.fmt>=1&&d.fmt<=2){y=u.readUshort(r,a),a+=2;var A=u.readUshort(r,a);a+=2;var b=e._lctf.numOfOnes(y),C=e._lctf.numOfOnes(A);if(d.fmt==1){d.pairsets=[];var T=u.readUshort(r,a);a+=2;for(var M=0;M<T;M++){var B=f+u.readUshort(r,a);a+=2;var D=u.readUshort(r,B);B+=2;for(var O=[],P=0;P<D;P++){var F=u.readUshort(r,B);B+=2,y!=0&&($=e.GPOS.readValueRecord(r,B,y),B+=2*b),A!=0&&(te=e.GPOS.readValueRecord(r,B,A),B+=2*C),O.push({gid2:F,val1:$,val2:te})}d.pairsets.push(O)}}if(d.fmt==2){var V=u.readUshort(r,a);a+=2;var G=u.readUshort(r,a);a+=2;var I=u.readUshort(r,a);a+=2;var N=u.readUshort(r,a);for(a+=2,d.classDef1=e._lctf.readClassDef(r,f+V),d.classDef2=e._lctf.readClassDef(r,f+G),d.matrix=[],M=0;M<I;M++){var Q=[];for(P=0;P<N;P++){var $=null,te=null;y!=0&&($=e.GPOS.readValueRecord(r,a,y),a+=2*b),A!=0&&(te=e.GPOS.readValueRecord(r,a,A),a+=2*C),Q.push({val1:$,val2:te})}d.matrix.push(Q)}}}else if(s==4&&d.fmt==1)d.markCoverage=e._lctf.readCoverage(r,u.readUshort(r,a)+f),d.baseCoverage=e._lctf.readCoverage(r,u.readUshort(r,a+2)+f),d.markClassCount=u.readUshort(r,a+4),d.markArray=e.GPOS.readMarkArray(r,u.readUshort(r,a+6)+f),d.baseArray=e.GPOS.readBaseArray(r,u.readUshort(r,a+8)+f,d.markClassCount);else if(s==6&&d.fmt==1)d.mark1Coverage=e._lctf.readCoverage(r,u.readUshort(r,a)+f),d.mark2Coverage=e._lctf.readCoverage(r,u.readUshort(r,a+2)+f),d.markClassCount=u.readUshort(r,a+4),d.mark1Array=e.GPOS.readMarkArray(r,u.readUshort(r,a+6)+f),d.mark2Array=e.GPOS.readBaseArray(r,u.readUshort(r,a+8)+f,d.markClassCount);else{if(s==9&&d.fmt==1){var se=u.readUshort(r,a);a+=2;var ye=u.readUint(r,a);if(a+=4,l.ltype==9)l.ltype=se;else if(l.ltype!=se)throw"invalid extension substitution";return e.GPOS.subt(r,l.ltype,f+ye)}console.debug("unsupported GPOS table LookupType",s,"format",d.fmt)}return d},e.GPOS.readValueRecord=function(r,s,a){var l=e._bin,u=[];return u.push(1&a?l.readShort(r,s):0),s+=1&a?2:0,u.push(2&a?l.readShort(r,s):0),s+=2&a?2:0,u.push(4&a?l.readShort(r,s):0),s+=4&a?2:0,u.push(8&a?l.readShort(r,s):0),s+=8&a?2:0,u},e.GPOS.readBaseArray=function(r,s,a){var l=e._bin,u=[],f=s,d=l.readUshort(r,s);s+=2;for(var v=0;v<d;v++){for(var y=[],A=0;A<a;A++)y.push(e.GPOS.readAnchorRecord(r,f+l.readUshort(r,s))),s+=2;u.push(y)}return u},e.GPOS.readMarkArray=function(r,s){var a=e._bin,l=[],u=s,f=a.readUshort(r,s);s+=2;for(var d=0;d<f;d++){var v=e.GPOS.readAnchorRecord(r,a.readUshort(r,s+2)+u);v.markClass=a.readUshort(r,s),l.push(v),s+=4}return l},e.GPOS.readAnchorRecord=function(r,s){var a=e._bin,l={};return l.fmt=a.readUshort(r,s),l.x=a.readShort(r,s+2),l.y=a.readShort(r,s+4),l},e.GSUB={},e.GSUB.parse=function(r,s,a,l){return e._lctf.parse(r,s,a,l,e.GSUB.subt)},e.GSUB.subt=function(r,s,a,l){var u=e._bin,f=a,d={};if(d.fmt=u.readUshort(r,a),a+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&d.fmt<=2||s==6&&d.fmt<=2){var v=u.readUshort(r,a);a+=2,d.coverage=e._lctf.readCoverage(r,f+v)}if(s==1&&d.fmt>=1&&d.fmt<=2){if(d.fmt==1)d.delta=u.readShort(r,a),a+=2;else if(d.fmt==2){var y=u.readUshort(r,a);a+=2,d.newg=u.readUshorts(r,a,y),a+=2*d.newg.length}}else if(s==2&&d.fmt==1){y=u.readUshort(r,a),a+=2,d.seqs=[];for(var A=0;A<y;A++){var b=u.readUshort(r,a)+f;a+=2;var C=u.readUshort(r,b);d.seqs.push(u.readUshorts(r,b+2,C))}}else if(s==4)for(d.vals=[],y=u.readUshort(r,a),a+=2,A=0;A<y;A++){var T=u.readUshort(r,a);a+=2,d.vals.push(e.GSUB.readLigatureSet(r,f+T))}else if(s==5&&d.fmt==2){if(d.fmt==2){var M=u.readUshort(r,a);a+=2,d.cDef=e._lctf.readClassDef(r,f+M),d.scset=[];var B=u.readUshort(r,a);for(a+=2,A=0;A<B;A++){var D=u.readUshort(r,a);a+=2,d.scset.push(D==0?null:e.GSUB.readSubClassSet(r,f+D))}}}else if(s==6&&d.fmt==3){if(d.fmt==3){for(A=0;A<3;A++){y=u.readUshort(r,a),a+=2;for(var O=[],P=0;P<y;P++)O.push(e._lctf.readCoverage(r,f+u.readUshort(r,a+2*P)));a+=2*y,A==0&&(d.backCvg=O),A==1&&(d.inptCvg=O),A==2&&(d.ahedCvg=O)}y=u.readUshort(r,a),a+=2,d.lookupRec=e.GSUB.readSubstLookupRecords(r,a,y)}}else{if(s==7&&d.fmt==1){var F=u.readUshort(r,a);a+=2;var V=u.readUint(r,a);if(a+=4,l.ltype==9)l.ltype=F;else if(l.ltype!=F)throw"invalid extension substitution";return e.GSUB.subt(r,l.ltype,f+V)}console.debug("unsupported GSUB table LookupType",s,"format",d.fmt)}return d},e.GSUB.readSubClassSet=function(r,s){var a=e._bin.readUshort,l=s,u=[],f=a(r,s);s+=2;for(var d=0;d<f;d++){var v=a(r,s);s+=2,u.push(e.GSUB.readSubClassRule(r,l+v))}return u},e.GSUB.readSubClassRule=function(r,s){var a=e._bin.readUshort,l={},u=a(r,s),f=a(r,s+=2);s+=2,l.input=[];for(var d=0;d<u-1;d++)l.input.push(a(r,s)),s+=2;return l.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,f),l},e.GSUB.readSubstLookupRecords=function(r,s,a){for(var l=e._bin.readUshort,u=[],f=0;f<a;f++)u.push(l(r,s),l(r,s+2)),s+=4;return u},e.GSUB.readChainSubClassSet=function(r,s){var a=e._bin,l=s,u=[],f=a.readUshort(r,s);s+=2;for(var d=0;d<f;d++){var v=a.readUshort(r,s);s+=2,u.push(e.GSUB.readChainSubClassRule(r,l+v))}return u},e.GSUB.readChainSubClassRule=function(r,s){for(var a=e._bin,l={},u=["backtrack","input","lookahead"],f=0;f<u.length;f++){var d=a.readUshort(r,s);s+=2,f==1&&d--,l[u[f]]=a.readUshorts(r,s,d),s+=2*l[u[f]].length}return d=a.readUshort(r,s),s+=2,l.subst=a.readUshorts(r,s,2*d),s+=2*l.subst.length,l},e.GSUB.readLigatureSet=function(r,s){var a=e._bin,l=s,u=[],f=a.readUshort(r,s);s+=2;for(var d=0;d<f;d++){var v=a.readUshort(r,s);s+=2,u.push(e.GSUB.readLigature(r,l+v))}return u},e.GSUB.readLigature=function(r,s){var a=e._bin,l={chain:[]};l.nglyph=a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;for(var f=0;f<u-1;f++)l.chain.push(a.readUshort(r,s)),s+=2;return l},e.head={},e.head.parse=function(r,s,a){var l=e._bin,u={};return l.readFixed(r,s),s+=4,u.fontRevision=l.readFixed(r,s),s+=4,l.readUint(r,s),s+=4,l.readUint(r,s),s+=4,u.flags=l.readUshort(r,s),s+=2,u.unitsPerEm=l.readUshort(r,s),s+=2,u.created=l.readUint64(r,s),s+=8,u.modified=l.readUint64(r,s),s+=8,u.xMin=l.readShort(r,s),s+=2,u.yMin=l.readShort(r,s),s+=2,u.xMax=l.readShort(r,s),s+=2,u.yMax=l.readShort(r,s),s+=2,u.macStyle=l.readUshort(r,s),s+=2,u.lowestRecPPEM=l.readUshort(r,s),s+=2,u.fontDirectionHint=l.readShort(r,s),s+=2,u.indexToLocFormat=l.readShort(r,s),s+=2,u.glyphDataFormat=l.readShort(r,s),s+=2,u},e.hhea={},e.hhea.parse=function(r,s,a){var l=e._bin,u={};return l.readFixed(r,s),s+=4,u.ascender=l.readShort(r,s),s+=2,u.descender=l.readShort(r,s),s+=2,u.lineGap=l.readShort(r,s),s+=2,u.advanceWidthMax=l.readUshort(r,s),s+=2,u.minLeftSideBearing=l.readShort(r,s),s+=2,u.minRightSideBearing=l.readShort(r,s),s+=2,u.xMaxExtent=l.readShort(r,s),s+=2,u.caretSlopeRise=l.readShort(r,s),s+=2,u.caretSlopeRun=l.readShort(r,s),s+=2,u.caretOffset=l.readShort(r,s),s+=2,s+=8,u.metricDataFormat=l.readShort(r,s),s+=2,u.numberOfHMetrics=l.readUshort(r,s),s+=2,u},e.hmtx={},e.hmtx.parse=function(r,s,a,l){for(var u=e._bin,f={aWidth:[],lsBearing:[]},d=0,v=0,y=0;y<l.maxp.numGlyphs;y++)y<l.hhea.numberOfHMetrics&&(d=u.readUshort(r,s),s+=2,v=u.readShort(r,s),s+=2),f.aWidth.push(d),f.lsBearing.push(v);return f},e.kern={},e.kern.parse=function(r,s,a,l){var u=e._bin,f=u.readUshort(r,s);if(s+=2,f==1)return e.kern.parseV1(r,s-2,a,l);var d=u.readUshort(r,s);s+=2;for(var v={glyph1:[],rval:[]},y=0;y<d;y++){s+=2,a=u.readUshort(r,s),s+=2;var A=u.readUshort(r,s);s+=2;var b=A>>>8;if((b&=15)!=0)throw"unknown kern table format: "+b;s=e.kern.readFormat0(r,s,v)}return v},e.kern.parseV1=function(r,s,a,l){var u=e._bin;u.readFixed(r,s),s+=4;var f=u.readUint(r,s);s+=4;for(var d={glyph1:[],rval:[]},v=0;v<f;v++){u.readUint(r,s),s+=4;var y=u.readUshort(r,s);s+=2,u.readUshort(r,s),s+=2;var A=y>>>8;if((A&=15)!=0)throw"unknown kern table format: "+A;s=e.kern.readFormat0(r,s,d)}return d},e.kern.readFormat0=function(r,s,a){var l=e._bin,u=-1,f=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2,l.readUshort(r,s),s+=2,l.readUshort(r,s),s+=2;for(var d=0;d<f;d++){var v=l.readUshort(r,s);s+=2;var y=l.readUshort(r,s);s+=2;var A=l.readShort(r,s);s+=2,v!=u&&(a.glyph1.push(v),a.rval.push({glyph2:[],vals:[]}));var b=a.rval[a.rval.length-1];b.glyph2.push(y),b.vals.push(A),u=v}return s},e.loca={},e.loca.parse=function(r,s,a,l){var u=e._bin,f=[],d=l.head.indexToLocFormat,v=l.maxp.numGlyphs+1;if(d==0)for(var y=0;y<v;y++)f.push(u.readUshort(r,s+(y<<1))<<1);if(d==1)for(y=0;y<v;y++)f.push(u.readUint(r,s+(y<<2)));return f},e.maxp={},e.maxp.parse=function(r,s,a){var l=e._bin,u={},f=l.readUint(r,s);return s+=4,u.numGlyphs=l.readUshort(r,s),s+=2,f==65536&&(u.maxPoints=l.readUshort(r,s),s+=2,u.maxContours=l.readUshort(r,s),s+=2,u.maxCompositePoints=l.readUshort(r,s),s+=2,u.maxCompositeContours=l.readUshort(r,s),s+=2,u.maxZones=l.readUshort(r,s),s+=2,u.maxTwilightPoints=l.readUshort(r,s),s+=2,u.maxStorage=l.readUshort(r,s),s+=2,u.maxFunctionDefs=l.readUshort(r,s),s+=2,u.maxInstructionDefs=l.readUshort(r,s),s+=2,u.maxStackElements=l.readUshort(r,s),s+=2,u.maxSizeOfInstructions=l.readUshort(r,s),s+=2,u.maxComponentElements=l.readUshort(r,s),s+=2,u.maxComponentDepth=l.readUshort(r,s),s+=2),u},e.name={},e.name.parse=function(r,s,a){var l=e._bin,u={};l.readUshort(r,s),s+=2;var f=l.readUshort(r,s);s+=2,l.readUshort(r,s);for(var d,v=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],y=s+=2,A=0;A<f;A++){var b=l.readUshort(r,s);s+=2;var C=l.readUshort(r,s);s+=2;var T=l.readUshort(r,s);s+=2;var M=l.readUshort(r,s);s+=2;var B=l.readUshort(r,s);s+=2;var D=l.readUshort(r,s);s+=2;var O,P=v[M],F=y+12*f+D;if(b==0)O=l.readUnicode(r,F,B/2);else if(b==3&&C==0)O=l.readUnicode(r,F,B/2);else if(C==0)O=l.readASCII(r,F,B);else if(C==1)O=l.readUnicode(r,F,B/2);else if(C==3)O=l.readUnicode(r,F,B/2);else{if(b!=1)throw"unknown encoding "+C+", platformID: "+b;O=l.readASCII(r,F,B),console.debug("reading unknown MAC encoding "+C+" as ASCII")}var V="p"+b+","+T.toString(16);u[V]==null&&(u[V]={}),u[V][P!==void 0?P:M]=O,u[V]._lang=T}for(var G in u)if(u[G].postScriptName!=null&&u[G]._lang==1033)return u[G];for(var G in u)if(u[G].postScriptName!=null&&u[G]._lang==0)return u[G];for(var G in u)if(u[G].postScriptName!=null&&u[G]._lang==3084)return u[G];for(var G in u)if(u[G].postScriptName!=null)return u[G];for(var G in u){d=G;break}return console.debug("returning name table with languageID "+u[d]._lang),u[d]},e["OS/2"]={},e["OS/2"].parse=function(r,s,a){var l=e._bin.readUshort(r,s);s+=2;var u={};if(l==0)e["OS/2"].version0(r,s,u);else if(l==1)e["OS/2"].version1(r,s,u);else if(l==2||l==3||l==4)e["OS/2"].version2(r,s,u);else{if(l!=5)throw"unknown OS/2 table version: "+l;e["OS/2"].version5(r,s,u)}return u},e["OS/2"].version0=function(r,s,a){var l=e._bin;return a.xAvgCharWidth=l.readShort(r,s),s+=2,a.usWeightClass=l.readUshort(r,s),s+=2,a.usWidthClass=l.readUshort(r,s),s+=2,a.fsType=l.readUshort(r,s),s+=2,a.ySubscriptXSize=l.readShort(r,s),s+=2,a.ySubscriptYSize=l.readShort(r,s),s+=2,a.ySubscriptXOffset=l.readShort(r,s),s+=2,a.ySubscriptYOffset=l.readShort(r,s),s+=2,a.ySuperscriptXSize=l.readShort(r,s),s+=2,a.ySuperscriptYSize=l.readShort(r,s),s+=2,a.ySuperscriptXOffset=l.readShort(r,s),s+=2,a.ySuperscriptYOffset=l.readShort(r,s),s+=2,a.yStrikeoutSize=l.readShort(r,s),s+=2,a.yStrikeoutPosition=l.readShort(r,s),s+=2,a.sFamilyClass=l.readShort(r,s),s+=2,a.panose=l.readBytes(r,s,10),s+=10,a.ulUnicodeRange1=l.readUint(r,s),s+=4,a.ulUnicodeRange2=l.readUint(r,s),s+=4,a.ulUnicodeRange3=l.readUint(r,s),s+=4,a.ulUnicodeRange4=l.readUint(r,s),s+=4,a.achVendID=[l.readInt8(r,s),l.readInt8(r,s+1),l.readInt8(r,s+2),l.readInt8(r,s+3)],s+=4,a.fsSelection=l.readUshort(r,s),s+=2,a.usFirstCharIndex=l.readUshort(r,s),s+=2,a.usLastCharIndex=l.readUshort(r,s),s+=2,a.sTypoAscender=l.readShort(r,s),s+=2,a.sTypoDescender=l.readShort(r,s),s+=2,a.sTypoLineGap=l.readShort(r,s),s+=2,a.usWinAscent=l.readUshort(r,s),s+=2,a.usWinDescent=l.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,a){var l=e._bin;return s=e["OS/2"].version0(r,s,a),a.ulCodePageRange1=l.readUint(r,s),s+=4,a.ulCodePageRange2=l.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,a){var l=e._bin;return s=e["OS/2"].version1(r,s,a),a.sxHeight=l.readShort(r,s),s+=2,a.sCapHeight=l.readShort(r,s),s+=2,a.usDefault=l.readUshort(r,s),s+=2,a.usBreak=l.readUshort(r,s),s+=2,a.usMaxContext=l.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,a){var l=e._bin;return s=e["OS/2"].version2(r,s,a),a.usLowerOpticalPointSize=l.readUshort(r,s),s+=2,a.usUpperOpticalPointSize=l.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,a){var l=e._bin,u={};return u.version=l.readFixed(r,s),s+=4,u.italicAngle=l.readFixed(r,s),s+=4,u.underlinePosition=l.readShort(r,s),s+=2,u.underlineThickness=l.readShort(r,s),s+=2,u},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var a=r.cmap,l=-1;if(a.p0e4!=null?l=a.p0e4:a.p3e1!=null?l=a.p3e1:a.p1e0!=null?l=a.p1e0:a.p0e3!=null&&(l=a.p0e3),l==-1)throw"no familiar platform and encoding!";var u=a.tables[l];if(u.format==0)return s>=u.map.length?0:u.map[s];if(u.format==4){for(var f=-1,d=0;d<u.endCount.length;d++)if(s<=u.endCount[d]){f=d;break}return f==-1||u.startCount[f]>s?0:65535&(u.idRangeOffset[f]!=0?u.glyphIdArray[s-u.startCount[f]+(u.idRangeOffset[f]>>1)-(u.idRangeOffset.length-f)]:s+u.idDelta[f])}if(u.format==12){if(s>u.groups[u.groups.length-1][1])return 0;for(d=0;d<u.groups.length;d++){var v=u.groups[d];if(v[0]<=s&&s<=v[1])return v[2]+(s-v[0])}return 0}throw"unknown cmap table format "+u.format},e.U.glyphToPath=function(r,s){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var l=r.SVG.entries[s];return l==null?a:(typeof l=="string"&&(l=e.SVG.toPath(l),r.SVG.entries[s]=l),l)}if(r.CFF){var u={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},f=r.CFF,d=r.CFF.Private;if(f.ROS){for(var v=0;f.FDSelect[v+2]<=s;)v+=2;d=f.FDArray[f.FDSelect[v+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],u,f,d,a)}else r.glyf&&e.U._drawGlyf(s,r,a);return a},e.U._drawGlyf=function(r,s,a){var l=s.glyf[r];l==null&&(l=s.glyf[r]=e.glyf._parseGlyf(s,r)),l!=null&&(l.noc>-1?e.U._simpleGlyph(l,a):e.U._compoGlyph(l,s,a))},e.U._simpleGlyph=function(r,s){for(var a=0;a<r.noc;a++){for(var l=a==0?0:r.endPts[a-1]+1,u=r.endPts[a],f=l;f<=u;f++){var d=f==l?u:f-1,v=f==u?l:f+1,y=1&r.flags[f],A=1&r.flags[d],b=1&r.flags[v],C=r.xs[f],T=r.ys[f];if(f==l)if(y){if(!A){e.U.P.moveTo(s,C,T);continue}e.U.P.moveTo(s,r.xs[d],r.ys[d])}else A?e.U.P.moveTo(s,r.xs[d],r.ys[d]):e.U.P.moveTo(s,(r.xs[d]+C)/2,(r.ys[d]+T)/2);y?A&&e.U.P.lineTo(s,C,T):b?e.U.P.qcurveTo(s,C,T,r.xs[v],r.ys[v]):e.U.P.qcurveTo(s,C,T,(C+r.xs[v])/2,(T+r.ys[v])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,a){for(var l=0;l<r.parts.length;l++){var u={cmds:[],crds:[]},f=r.parts[l];e.U._drawGlyf(f.glyphIndex,s,u);for(var d=f.m,v=0;v<u.crds.length;v+=2){var y=u.crds[v],A=u.crds[v+1];a.crds.push(y*d.a+A*d.b+d.tx),a.crds.push(y*d.c+A*d.d+d.ty)}for(v=0;v<u.cmds.length;v++)a.cmds.push(u.cmds[v])}},e.U._getGlyphClass=function(r,s){var a=e._lctf.getInterval(s,r);return a==-1?0:s[a+2]},e.U._applySubs=function(r,s,a,l){for(var u=r.length-s-1,f=0;f<a.tabs.length;f++)if(a.tabs[f]!=null){var d,v=a.tabs[f];if(!v.coverage||(d=e._lctf.coverageIndex(v.coverage,r[s]))!=-1){if(a.ltype==1)r[s],v.fmt==1?r[s]=r[s]+v.delta:r[s]=v.newg[d];else if(a.ltype==4)for(var y=v.vals[d],A=0;A<y.length;A++){var b=y[A],C=b.chain.length;if(!(C>u)){for(var T=!0,M=0,B=0;B<C;B++){for(;r[s+M+(1+B)]==-1;)M++;b.chain[B]!=r[s+M+(1+B)]&&(T=!1)}if(T){for(r[s]=b.nglyph,B=0;B<C+M;B++)r[s+B+1]=-1;break}}}else if(a.ltype==5&&v.fmt==2)for(var D=e._lctf.getInterval(v.cDef,r[s]),O=v.cDef[D+2],P=v.scset[O],F=0;F<P.length;F++){var V=P[F],G=V.input;if(!(G.length>u)){for(T=!0,B=0;B<G.length;B++){var I=e._lctf.getInterval(v.cDef,r[s+1+B]);if(D==-1&&v.cDef[I+2]!=G[B]){T=!1;break}}if(T){var N=V.substLookupRecords;for(A=0;A<N.length;A+=2)N[A],N[A+1]}}}else if(a.ltype==6&&v.fmt==3){if(!e.U._glsCovered(r,v.backCvg,s-v.backCvg.length)||!e.U._glsCovered(r,v.inptCvg,s)||!e.U._glsCovered(r,v.ahedCvg,s+v.inptCvg.length))continue;var Q=v.lookupRec;for(F=0;F<Q.length;F+=2){D=Q[F];var $=l[Q[F+1]];e.U._applySubs(r,s+D,$,l)}}}}},e.U._glsCovered=function(r,s,a){for(var l=0;l<s.length;l++)if(e._lctf.coverageIndex(s[l],r[a+l])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,a){for(var l={cmds:[],crds:[]},u=0,f=0;f<s.length;f++){var d=s[f];if(d!=-1){for(var v=f<s.length-1&&s[f+1]!=-1?s[f+1]:0,y=e.U.glyphToPath(r,d),A=0;A<y.crds.length;A+=2)l.crds.push(y.crds[A]+u),l.crds.push(y.crds[A+1]);for(a&&l.cmds.push(a),A=0;A<y.cmds.length;A++)l.cmds.push(y.cmds[A]);a&&l.cmds.push("X"),u+=r.hmtx.aWidth[d],f<s.length-1&&(u+=e.U.getPairAdjustment(r,d,v))}}return l},e.U.P={},e.U.P.moveTo=function(r,s,a){r.cmds.push("M"),r.crds.push(s,a)},e.U.P.lineTo=function(r,s,a){r.cmds.push("L"),r.crds.push(s,a)},e.U.P.curveTo=function(r,s,a,l,u,f,d){r.cmds.push("C"),r.crds.push(s,a,l,u,f,d)},e.U.P.qcurveTo=function(r,s,a,l,u){r.cmds.push("Q"),r.crds.push(s,a,l,u)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,a,l,u){for(var f=s.stack,d=s.nStems,v=s.haveWidth,y=s.width,A=s.open,b=0,C=s.x,T=s.y,M=0,B=0,D=0,O=0,P=0,F=0,V=0,G=0,I=0,N=0,Q={val:0,size:0};b<r.length;){e.CFF.getCharString(r,b,Q);var $=Q.val;if(b+=Q.size,$=="o1"||$=="o18")f.length%2!=0&&!v&&(y=f.shift()+l.nominalWidthX),d+=f.length>>1,f.length=0,v=!0;else if($=="o3"||$=="o23")f.length%2!=0&&!v&&(y=f.shift()+l.nominalWidthX),d+=f.length>>1,f.length=0,v=!0;else if($=="o4")f.length>1&&!v&&(y=f.shift()+l.nominalWidthX,v=!0),A&&e.U.P.closePath(u),T+=f.pop(),e.U.P.moveTo(u,C,T),A=!0;else if($=="o5")for(;f.length>0;)C+=f.shift(),T+=f.shift(),e.U.P.lineTo(u,C,T);else if($=="o6"||$=="o7")for(var te=f.length,se=$=="o6",ye=0;ye<te;ye++){var k=f.shift();se?C+=k:T+=k,se=!se,e.U.P.lineTo(u,C,T)}else if($=="o8"||$=="o24"){te=f.length;for(var ee=0;ee+6<=te;)M=C+f.shift(),B=T+f.shift(),D=M+f.shift(),O=B+f.shift(),C=D+f.shift(),T=O+f.shift(),e.U.P.curveTo(u,M,B,D,O,C,T),ee+=6;$=="o24"&&(C+=f.shift(),T+=f.shift(),e.U.P.lineTo(u,C,T))}else{if($=="o11")break;if($=="o1234"||$=="o1235"||$=="o1236"||$=="o1237")$=="o1234"&&(B=T,D=(M=C+f.shift())+f.shift(),N=O=B+f.shift(),F=O,G=T,C=(V=(P=(I=D+f.shift())+f.shift())+f.shift())+f.shift(),e.U.P.curveTo(u,M,B,D,O,I,N),e.U.P.curveTo(u,P,F,V,G,C,T)),$=="o1235"&&(M=C+f.shift(),B=T+f.shift(),D=M+f.shift(),O=B+f.shift(),I=D+f.shift(),N=O+f.shift(),P=I+f.shift(),F=N+f.shift(),V=P+f.shift(),G=F+f.shift(),C=V+f.shift(),T=G+f.shift(),f.shift(),e.U.P.curveTo(u,M,B,D,O,I,N),e.U.P.curveTo(u,P,F,V,G,C,T)),$=="o1236"&&(M=C+f.shift(),B=T+f.shift(),D=M+f.shift(),N=O=B+f.shift(),F=O,V=(P=(I=D+f.shift())+f.shift())+f.shift(),G=F+f.shift(),C=V+f.shift(),e.U.P.curveTo(u,M,B,D,O,I,N),e.U.P.curveTo(u,P,F,V,G,C,T)),$=="o1237"&&(M=C+f.shift(),B=T+f.shift(),D=M+f.shift(),O=B+f.shift(),I=D+f.shift(),N=O+f.shift(),P=I+f.shift(),F=N+f.shift(),V=P+f.shift(),G=F+f.shift(),Math.abs(V-C)>Math.abs(G-T)?C=V+f.shift():T=G+f.shift(),e.U.P.curveTo(u,M,B,D,O,I,N),e.U.P.curveTo(u,P,F,V,G,C,T));else if($=="o14"){if(f.length>0&&!v&&(y=f.shift()+a.nominalWidthX,v=!0),f.length==4){var ne=f.shift(),de=f.shift(),X=f.shift(),J=f.shift(),ce=e.CFF.glyphBySE(a,X),ge=e.CFF.glyphBySE(a,J);e.U._drawCFF(a.CharStrings[ce],s,a,l,u),s.x=ne,s.y=de,e.U._drawCFF(a.CharStrings[ge],s,a,l,u)}A&&(e.U.P.closePath(u),A=!1)}else if($=="o19"||$=="o20")f.length%2!=0&&!v&&(y=f.shift()+l.nominalWidthX),d+=f.length>>1,f.length=0,v=!0,b+=d+7>>3;else if($=="o21")f.length>2&&!v&&(y=f.shift()+l.nominalWidthX,v=!0),T+=f.pop(),C+=f.pop(),A&&e.U.P.closePath(u),e.U.P.moveTo(u,C,T),A=!0;else if($=="o22")f.length>1&&!v&&(y=f.shift()+l.nominalWidthX,v=!0),C+=f.pop(),A&&e.U.P.closePath(u),e.U.P.moveTo(u,C,T),A=!0;else if($=="o25"){for(;f.length>6;)C+=f.shift(),T+=f.shift(),e.U.P.lineTo(u,C,T);M=C+f.shift(),B=T+f.shift(),D=M+f.shift(),O=B+f.shift(),C=D+f.shift(),T=O+f.shift(),e.U.P.curveTo(u,M,B,D,O,C,T)}else if($=="o26")for(f.length%2&&(C+=f.shift());f.length>0;)M=C,B=T+f.shift(),C=D=M+f.shift(),T=(O=B+f.shift())+f.shift(),e.U.P.curveTo(u,M,B,D,O,C,T);else if($=="o27")for(f.length%2&&(T+=f.shift());f.length>0;)B=T,D=(M=C+f.shift())+f.shift(),O=B+f.shift(),C=D+f.shift(),T=O,e.U.P.curveTo(u,M,B,D,O,C,T);else if($=="o10"||$=="o29"){var oe=$=="o10"?l:a;if(f.length==0)console.debug("error: empty stack");else{var ve=f.pop(),Se=oe.Subrs[ve+oe.Bias];s.x=C,s.y=T,s.nStems=d,s.haveWidth=v,s.width=y,s.open=A,e.U._drawCFF(Se,s,a,l,u),C=s.x,T=s.y,d=s.nStems,v=s.haveWidth,y=s.width,A=s.open}}else if($=="o30"||$=="o31"){var Re=f.length,Le=(ee=0,$=="o31");for(ee+=Re-(te=-3&Re);ee<te;)Le?(B=T,D=(M=C+f.shift())+f.shift(),T=(O=B+f.shift())+f.shift(),te-ee==5?(C=D+f.shift(),ee++):C=D,Le=!1):(M=C,B=T+f.shift(),D=M+f.shift(),O=B+f.shift(),C=D+f.shift(),te-ee==5?(T=O+f.shift(),ee++):T=O,Le=!0),e.U.P.curveTo(u,M,B,D,O,C,T),ee+=4}else{if(($+"").charAt(0)=="o")throw console.debug("Unknown operation: "+$,r),$;f.push($)}}}s.x=C,s.y=T,s.nStems=d,s.haveWidth=v,s.width=y,s.open=A};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function MY(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function($,te){for(var se=new t(31),ye=0;ye<31;++ye)se[ye]=te+=1<<$[ye-1];var k=new i(se[30]);for(ye=1;ye<30;++ye)for(var ee=se[ye];ee<se[ye+1];++ee)k[ee]=ee-se[ye]<<5|ye;return[se,k]},u=l(r,2),f=u[0],d=u[1];f[28]=258,d[258]=28;for(var v=l(s,0)[0],y=new t(32768),A=0;A<32768;++A){var b=(43690&A)>>>1|(21845&A)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,y[A]=((65280&b)>>>8|(255&b)<<8)>>>1}var C=function($,te,se){for(var ye=$.length,k=0,ee=new t(te);k<ye;++k)++ee[$[k]-1];var ne,de=new t(te);for(k=0;k<te;++k)de[k]=de[k-1]+ee[k-1]<<1;{ne=new t(1<<te);var X=15-te;for(k=0;k<ye;++k)if($[k])for(var J=k<<4|$[k],ce=te-$[k],ge=de[$[k]-1]++<<ce,oe=ge|(1<<ce)-1;ge<=oe;++ge)ne[y[ge]>>>X]=J}return ne},T=new e(288);for(A=0;A<144;++A)T[A]=8;for(A=144;A<256;++A)T[A]=9;for(A=256;A<280;++A)T[A]=7;for(A=280;A<288;++A)T[A]=8;var M=new e(32);for(A=0;A<32;++A)M[A]=5;var B=C(T,9),D=C(M,5),O=function($){for(var te=$[0],se=1;se<$.length;++se)$[se]>te&&(te=$[se]);return te},P=function($,te,se){var ye=te/8|0;return($[ye]|$[ye+1]<<8)>>(7&te)&se},F=function($,te){var se=te/8|0;return($[se]|$[se+1]<<8|$[se+2]<<16)>>(7&te)},V=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],G=function($,te,se){var ye=new Error(te||V[$]);if(ye.code=$,Error.captureStackTrace&&Error.captureStackTrace(ye,G),!se)throw ye;return ye},I=function($,te,se){var ye=$.length;if(!ye||se&&!se.l&&ye<5)return te||new e(0);var k=!te||se,ee=!se||se.i;se||(se={}),te||(te=new e(3*ye));var ne,de=function(ot){var xe=te.length;if(ot>xe){var We=new e(Math.max(2*xe,ot));We.set(te),te=We}},X=se.f||0,J=se.p||0,ce=se.b||0,ge=se.l,oe=se.d,ve=se.m,Se=se.n,Re=8*ye;do{if(!ge){se.f=X=P($,J,1);var Le=P($,J+1,3);if(J+=3,!Le){var gt=$[(Ve=((ne=J)/8|0)+(7&ne&&1)+4)-4]|$[Ve-3]<<8,Mt=Ve+gt;if(Mt>ye){ee&&G(0);break}k&&de(ce+gt),te.set($.subarray(Ve,Mt),ce),se.b=ce+=gt,se.p=J=8*Mt;continue}if(Le==1)ge=B,oe=D,ve=9,Se=5;else if(Le==2){var At=P($,J,31)+257,at=P($,J+10,15)+4,Nt=At+P($,J+5,31)+1;J+=14;for(var ie=new e(Nt),ut=new e(19),$e=0;$e<at;++$e)ut[a[$e]]=P($,J+3*$e,7);J+=3*at;var Ke=O(ut),Pe=(1<<Ke)-1,pt=C(ut,Ke);for($e=0;$e<Nt;){var Ve,j=pt[P($,J,Pe)];if(J+=15&j,(Ve=j>>>4)<16)ie[$e++]=Ve;else{var Y=0,_e=0;for(Ve==16?(_e=3+P($,J,3),J+=2,Y=ie[$e-1]):Ve==17?(_e=3+P($,J,7),J+=3):Ve==18&&(_e=11+P($,J,127),J+=7);_e--;)ie[$e++]=Y}}var Ie=ie.subarray(0,At),Ge=ie.subarray(At);ve=O(Ie),Se=O(Ge),ge=C(Ie,ve),oe=C(Ge,Se)}else G(1);if(J>Re){ee&&G(0);break}}k&&de(ce+131072);for(var Ye=(1<<ve)-1,it=(1<<Se)-1,rt=J;;rt=J){var yt=(Y=ge[F($,J)&Ye])>>>4;if((J+=15&Y)>Re){ee&&G(0);break}if(Y||G(2),yt<256)te[ce++]=yt;else{if(yt==256){rt=J,ge=null;break}var Vt=yt-254;if(yt>264){var ht=r[$e=yt-257];Vt=P($,J,(1<<ht)-1)+f[$e],J+=ht}var Lt=oe[F($,J)&it],Et=Lt>>>4;if(Lt||G(3),J+=15&Lt,Ge=v[Et],Et>3&&(ht=s[Et],Ge+=F($,J)&(1<<ht)-1,J+=ht),J>Re){ee&&G(0);break}k&&de(ce+131072);for(var _t=ce+Vt;ce<_t;ce+=4)te[ce]=te[ce-Ge],te[ce+1]=te[ce+1-Ge],te[ce+2]=te[ce+2-Ge],te[ce+3]=te[ce+3-Ge];ce=_t}}se.l=ge,se.p=rt,se.b=ce,ge&&(X=1,se.m=ve,se.d=oe,se.n=Se)}while(!X);return ce==te.length?te:function(ot,xe,We){(We==null||We>ot.length)&&(We=ot.length);var Rt=new(ot instanceof t?t:ot instanceof i?i:e)(We-xe);return Rt.set(ot.subarray(xe,We)),Rt}(te,0,ce)},N=new e(0),Q=typeof TextDecoder<"u"&&new TextDecoder;try{Q.decode(N,{stream:!0})}catch{}return n.convert_streams=function($){var te=new DataView($),se=0;function ye(){var At=te.getUint16(se);return se+=2,At}function k(){var At=te.getUint32(se);return se+=4,At}function ee(At){gt.setUint16(Mt,At),Mt+=2}function ne(At){gt.setUint32(Mt,At),Mt+=4}for(var de={signature:k(),flavor:k(),length:k(),numTables:ye(),reserved:ye(),totalSfntSize:k(),majorVersion:ye(),minorVersion:ye(),metaOffset:k(),metaLength:k(),metaOrigLength:k(),privOffset:k(),privLength:k()},X=0;Math.pow(2,X)<=de.numTables;)X++;X--;for(var J=16*Math.pow(2,X),ce=16*de.numTables-J,ge=12,oe=[],ve=0;ve<de.numTables;ve++)oe.push({tag:k(),offset:k(),compLength:k(),origLength:k(),origChecksum:k()}),ge+=16;var Se,Re=new Uint8Array(12+16*oe.length+oe.reduce(function(At,at){return At+at.origLength+4},0)),Le=Re.buffer,gt=new DataView(Le),Mt=0;return ne(de.flavor),ee(de.numTables),ee(J),ee(X),ee(ce),oe.forEach(function(At){ne(At.tag),ne(At.origChecksum),ne(ge),ne(At.origLength),At.outOffset=ge,(ge+=At.origLength)%4!=0&&(ge+=4-ge%4)}),oe.forEach(function(At){var at,Nt=$.slice(At.offset,At.offset+At.compLength);if(At.compLength!=At.origLength){var ie=new Uint8Array(At.origLength);at=new Uint8Array(Nt,2),I(at,ie)}else ie=new Uint8Array(Nt);Re.set(ie,At.outOffset);var ut=0;(ge=At.outOffset+At.origLength)%4!=0&&(ut=4-ge%4),Re.set(new Uint8Array(ut).buffer,At.outOffset+At.origLength),Se=ge+ut}),Le.slice(0,Se)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function TY(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,a=4,l=8,u=16,f=32;let d;function v(V){if(!d){const G={R:s,L:r,D:a,C:u,U:f,T:l};d=new Map;for(let I in i){let N=0;i[I].split(",").forEach(Q=>{let[$,te]=Q.split("+");$=parseInt($,36),te=te?parseInt(te,36):0,d.set(N+=$,G[I]);for(let se=te;se--;)d.set(++N,G[I])})}}return d.get(V)||f}const y=1,A=2,b=3,C=4,T=[null,"isol","init","fina","medi"];function M(V){const G=new Uint8Array(V.length);let I=f,N=y,Q=-1;for(let $=0;$<V.length;$++){const te=V.codePointAt($);let se=v(te)|0,ye=y;se&l||(I&(r|a|u)?se&(s|a|u)?(ye=b,(N===y||N===b)&&G[Q]++):se&(r|f)&&(N===A||N===C)&&G[Q]--:I&(s|f)&&(N===A||N===C)&&G[Q]--,N=G[$]=ye,I=se,Q=$,te>65535&&$++)}return G}function B(V,G){const I=[];for(let Q=0;Q<G.length;Q++){const $=G.codePointAt(Q);$>65535&&Q++,I.push(n.U.codeToGlyph(V,$))}const N=V.GSUB;if(N){const{lookupList:Q,featureList:$}=N;let te;const se=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ye=[];$.forEach(k=>{if(se.test(k.tag))for(let ee=0;ee<k.tab.length;ee++){if(ye[k.tab[ee]])continue;ye[k.tab[ee]]=!0;const ne=Q[k.tab[ee]],de=/^(isol|init|fina|medi)$/.test(k.tag);de&&!te&&(te=M(G));for(let X=0;X<I.length;X++)(!te||!de||T[te[X]]===k.tag)&&n.U._applySubs(I,X,ne,Q)}})}return I}function D(V,G){const I=new Int16Array(G.length*3);let N=0;for(;N<G.length;N++){const se=G[N];if(se===-1)continue;I[N*3+2]=V.hmtx.aWidth[se];const ye=V.GPOS;if(ye){const k=ye.lookupList;for(let ee=0;ee<k.length;ee++){const ne=k[ee];for(let de=0;de<ne.tabs.length;de++){const X=ne.tabs[de];if(ne.ltype===1){if(n._lctf.coverageIndex(X.coverage,se)!==-1&&X.pos){te(X.pos,N);break}}else if(ne.ltype===2){let J=null,ce=Q();if(ce!==-1){const ge=n._lctf.coverageIndex(X.coverage,G[ce]);if(ge!==-1){if(X.fmt===1){const oe=X.pairsets[ge];for(let ve=0;ve<oe.length;ve++)oe[ve].gid2===se&&(J=oe[ve])}else if(X.fmt===2){const oe=n.U._getGlyphClass(G[ce],X.classDef1),ve=n.U._getGlyphClass(se,X.classDef2);J=X.matrix[oe][ve]}if(J){J.val1&&te(J.val1,ce),J.val2&&te(J.val2,N);break}}}}else if(ne.ltype===4){const J=n._lctf.coverageIndex(X.markCoverage,se);if(J!==-1){const ce=Q($),ge=ce===-1?-1:n._lctf.coverageIndex(X.baseCoverage,G[ce]);if(ge!==-1){const oe=X.markArray[J],ve=X.baseArray[ge][oe.markClass];I[N*3]=ve.x-oe.x+I[ce*3]-I[ce*3+2],I[N*3+1]=ve.y-oe.y+I[ce*3+1];break}}}else if(ne.ltype===6){const J=n._lctf.coverageIndex(X.mark1Coverage,se);if(J!==-1){const ce=Q();if(ce!==-1){const ge=G[ce];if(O(V,ge)===3){const oe=n._lctf.coverageIndex(X.mark2Coverage,ge);if(oe!==-1){const ve=X.mark1Array[J],Se=X.mark2Array[oe][ve.markClass];I[N*3]=Se.x-ve.x+I[ce*3]-I[ce*3+2],I[N*3+1]=Se.y-ve.y+I[ce*3+1];break}}}}}}}}else if(V.kern&&!V.cff){const k=Q();if(k!==-1){const ee=V.kern.glyph1.indexOf(G[k]);if(ee!==-1){const ne=V.kern.rval[ee].glyph2.indexOf(se);ne!==-1&&(I[k*3+2]+=V.kern.rval[ee].vals[ne])}}}}return I;function Q(se){for(let ye=N-1;ye>=0;ye--)if(G[ye]!==-1&&(!se||se(G[ye])))return ye;return-1}function $(se){return O(V,se)===1}function te(se,ye){for(let k=0;k<3;k++)I[ye*3+k]+=se[k]||0}}function O(V,G){const I=V.GDEF&&V.GDEF.glyphClassDef;return I?n.U._getGlyphClass(G,I):0}function P(...V){for(let G=0;G<V.length;G++)if(typeof V[G]=="number")return V[G]}function F(V){const G=Object.create(null),I=V["OS/2"],N=V.hhea,Q=V.head.unitsPerEm,$=P(I&&I.sTypoAscender,N&&N.ascender,Q),te={unitsPerEm:Q,ascender:$,descender:P(I&&I.sTypoDescender,N&&N.descender,0),capHeight:P(I&&I.sCapHeight,$),xHeight:P(I&&I.sxHeight,$),lineGap:P(I&&I.sTypoLineGap,N&&N.lineGap),supportsCodePoint(se){return n.U.codeToGlyph(V,se)>0},forEachGlyph(se,ye,k,ee){let ne=0;const de=1/te.unitsPerEm*ye,X=B(V,se);let J=0;const ce=D(V,X);return X.forEach((ge,oe)=>{if(ge!==-1){let ve=G[ge];if(!ve){const{cmds:Se,crds:Re}=n.U.glyphToPath(V,ge);let Le="",gt=0;for(let ie=0,ut=Se.length;ie<ut;ie++){const $e=t[Se[ie]];Le+=Se[ie];for(let Ke=1;Ke<=$e;Ke++)Le+=(Ke>1?",":"")+Re[gt++]}let Mt,At,at,Nt;if(Re.length){Mt=At=1/0,at=Nt=-1/0;for(let ie=0,ut=Re.length;ie<ut;ie+=2){let $e=Re[ie],Ke=Re[ie+1];$e<Mt&&(Mt=$e),Ke<At&&(At=Ke),$e>at&&(at=$e),Ke>Nt&&(Nt=Ke)}}else Mt=at=At=Nt=0;ve=G[ge]={index:ge,advanceWidth:V.hmtx.aWidth[ge],xMin:Mt,yMin:At,xMax:at,yMax:Nt,path:Le}}ee.call(null,ve,ne+ce[oe*3]*de,ce[oe*3+1]*de,J),ne+=ce[oe*3+2]*de,k&&(ne+=k*ye)}J+=se.codePointAt(J)>65535?2:1}),ne}};return te}return function(G){const I=new Uint8Array(G,0,4),N=n._bin.readASCII(I,0,4);if(N==="wOFF")G=e(G);else if(N==="wOF2")throw new Error("woff2 fonts not supported");return F(n.parse(G)[0])}}const EY=sy({name:"Typr Font Parser",dependencies:[bY,MY,TY],init(n,e,t){const i=n(),r=e();return t(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function CY(){return function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(D){var O=D>>5;this.buckets.set(O,(this.buckets.get(O)||0)|1<<(31&D))},e.prototype.has=function(D){var O=this.buckets.get(D>>5);return O!==void 0&&(O&1<<(31&D))!=0},e.prototype.serialize=function(){var D=[];return this.buckets.forEach(function(O,P){D.push((+P).toString(36)+":"+O.toString(36))}),D.join(",")},e.prototype.deserialize=function(D){var O=this;this.buckets.clear(),D.split(",").forEach(function(P){var F=P.split(":");O.buckets.set(parseInt(F[0],36),parseInt(F[1],36))})};var t=Math.pow(2,8),i=t-1,r=~i;function s(D){var O=function(F){return F&r}(D).toString(16),P=function(F){return(F&r)+t-1}(D).toString(16);return"codepoint-index/plane"+(D>>16)+"/"+O+"-"+P+".json"}function a(D,O){var P=D&i,F=O.codePointAt(P/6|0);return((F=(F||48)-48)&1<<P%6)!=0}function l(D,O){var P;(P=D,P.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(F){return F.split("-").map(function(V){return parseInt(V.trim(),16)})})).forEach(function(F){var V=F[0],G=F[1];G===void 0&&(G=V),O(V,G)})}function u(D,O){l(D,function(P,F){for(var V=P;V<=F;V++)O(V)})}var f={},d={},v=new WeakMap,y="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function A(D){var O=v.get(D);return O||(O=new e,u(D.ranges,function(P){return O.add(P)}),v.set(D,O)),O}var b,C=new Map;function T(D,O,P){return D[O]?O:D[P]?P:function(F){for(var V in F)return V}(D)}function M(D,O){var P=O;if(!D.includes(P)){P=1/0;for(var F=0;F<D.length;F++)Math.abs(D[F]-O)<Math.abs(P-O)&&(P=D[F])}return P}function B(D){return b||(b=new Set,u("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(O){b.add(O)})),b.has(D)}return n.CodePointSet=e,n.clearCache=function(){f={},d={}},n.getFontsForString=function(D,O){O===void 0&&(O={});var P,F=O.lang;F===void 0&&(F=new RegExp("\\p{Script=Hangul}","u").test(P=D)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(P)?"ja":"en");var V=O.category;V===void 0&&(V="sans-serif");var G=O.style;G===void 0&&(G="normal");var I=O.weight;I===void 0&&(I=400);var N=(O.dataUrl||y).replace(/\/$/g,""),Q=new Map,$=new Uint8Array(D.length),te={},se={},ye=new Array(D.length),k=new Map,ee=!1;function ne(J){var ce=C.get(J);return ce||(ce=fetch(N+"/"+J).then(function(ge){if(!ge.ok)throw new Error(ge.statusText);return ge.json().then(function(oe){if(!Array.isArray(oe)||oe[0]!==1)throw new Error("Incorrect schema version; need 1, got "+oe[0]);return oe[1]})}).catch(function(ge){if(N!==y)return ee||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+N+'", trying default CDN. '+ge.message),ee=!0),N=y,C.delete(J),ne(J);throw ge}),C.set(J,ce)),ce}for(var de=function(J){var ce=D.codePointAt(J),ge=s(ce);ye[J]=ge,f[ge]||k.has(ge)||k.set(ge,ne(ge).then(function(oe){f[ge]=oe})),ce>65535&&(J++,X=J)},X=0;X<D.length;X++)de(X);return Promise.all(k.values()).then(function(){k.clear();for(var J=function(ge){var oe=D.codePointAt(ge),ve=null,Se=f[ye[ge]],Re=void 0;for(var Le in Se){var gt=se[Le];if(gt===void 0&&(gt=se[Le]=new RegExp(Le).test(F||"en")),gt){for(var Mt in Re=Le,Se[Le])if(a(oe,Se[Le][Mt])){ve=Mt;break}break}}if(!ve){e:for(var At in Se)if(At!==Re){for(var at in Se[At])if(a(oe,Se[At][at])){ve=at;break e}}}ve||(console.debug("No font coverage for U+"+oe.toString(16)),ve="latin"),ye[ge]=ve,d[ve]||k.has(ve)||k.set(ve,ne("font-meta/"+ve+".json").then(function(Nt){d[ve]=Nt})),oe>65535&&(ge++,ce=ge)},ce=0;ce<D.length;ce++)J(ce);return Promise.all(k.values())}).then(function(){for(var J,ce=null,ge=0;ge<D.length;ge++){var oe=D.codePointAt(ge);if(ce&&(B(oe)||A(ce).has(oe)))$[ge]=$[ge-1];else{ce=d[ye[ge]];var ve=te[ce.id];if(!ve){var Se=ce.typeforms,Re=T(Se,V,"sans-serif"),Le=T(Se[Re],G,"normal"),gt=M((J=Se[Re])===null||J===void 0?void 0:J[Le],I);ve=te[ce.id]=N+"/font-files/"+ce.id+"/"+Re+"."+Le+"."+gt+".woff"}var Mt=Q.get(ve);Mt==null&&(Mt=Q.size,Q.set(ve,Mt)),$[ge]=Mt}oe>65535&&(ge++,$[ge]=$[ge-1])}return{fontUrls:Array.from(Q.keys()),chars:$}})},Object.defineProperty(n,"__esModule",{value:!0}),n}({})}function wY(n,e){const t=Object.create(null),i=Object.create(null);function r(a,l){const u=f=>{console.error(`Failure loading font ${a}`,f)};try{const f=new XMLHttpRequest;f.open("get",a,!0),f.responseType="arraybuffer",f.onload=function(){if(f.status>=400)u(new Error(f.statusText));else if(f.status>0)try{const d=n(f.response);d.src=a,l(d)}catch(d){u(d)}},f.onerror=u,f.send()}catch(f){u(f)}}function s(a,l){let u=t[a];u?l(u):i[a]?i[a].push(l):(i[a]=[l],r(a,f=>{f.src=a,t[a]=f,i[a].forEach(d=>d(f)),delete i[a]}))}return function(a,l,{lang:u,fonts:f=[],style:d="normal",weight:v="normal",unicodeFontsURL:y}={}){const A=new Uint8Array(a.length),b=[];a.length||B();const C=new Map,T=[];if(d!=="italic"&&(d="normal"),typeof v!="number"&&(v=v==="bold"?700:400),f&&!Array.isArray(f)&&(f=[f]),f=f.slice().filter(O=>!O.lang||O.lang.test(u)).reverse(),f.length){let V=0;(function G(I=0){for(let N=I,Q=a.length;N<Q;N++){const $=a.codePointAt(N);if(V===1&&b[A[N-1]].supportsCodePoint($)||N>0&&/\s/.test(a[N]))A[N]=A[N-1],V===2&&(T[T.length-1][1]=N);else for(let te=A[N],se=f.length;te<=se;te++)if(te===se){const ye=V===2?T[T.length-1]:T[T.length]=[N,N];ye[1]=N,V=2}else{A[N]=te;const{src:ye,unicodeRange:k}=f[te];if(!k||D($,k)){const ee=t[ye];if(!ee){s(ye,()=>{G(N)});return}if(ee.supportsCodePoint($)){let ne=C.get(ee);typeof ne!="number"&&(ne=b.length,b.push(ee),C.set(ee,ne)),A[N]=ne,V=1;break}}}$>65535&&N+1<Q&&(A[N+1]=A[N],N++,V===2&&(T[T.length-1][1]=N))}M()})()}else T.push([0,a.length-1]),M();function M(){if(T.length){const O=T.map(P=>a.substring(P[0],P[1]+1)).join(`
`);e.getFontsForString(O,{lang:u||void 0,style:d,weight:v,dataUrl:y}).then(({fontUrls:P,chars:F})=>{const V=b.length;let G=0;T.forEach(N=>{for(let Q=0,$=N[1]-N[0];Q<=$;Q++)A[N[0]+Q]=F[G++]+V;G++});let I=0;P.forEach((N,Q)=>{s(N,$=>{b[Q+V]=$,++I===P.length&&B()})})})}else B()}function B(){l({chars:A,fonts:b})}function D(O,P){for(let F=0;F<P.length;F++){const[V,G=V]=P[F];if(V<=O&&O<=G)return!0}return!1}}}const RY=sy({name:"FontResolver",dependencies:[wY,EY,CY],init(n,e,t){return n(e,t())}});function DY(n,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:b,lang:C,fonts:T,style:M,weight:B,preResolvedFonts:D,unicodeFontsURL:O},P){const F=({chars:V,fonts:G})=>{let I,N;const Q=[];for(let $=0;$<V.length;$++)V[$]!==N?(N=V[$],Q.push(I={start:$,end:$,fontObj:G[V[$]]})):I.end=$;P(Q)};D?F(D):n(b,F,{lang:C,fonts:T,style:M,weight:B,unicodeFontsURL:O})}function l({text:b="",font:C,lang:T,sdfGlyphSize:M=64,fontSize:B=400,fontWeight:D=1,fontStyle:O="normal",letterSpacing:P=0,lineHeight:F="normal",maxWidth:V=1/0,direction:G,textAlign:I="left",textIndent:N=0,whiteSpace:Q="normal",overflowWrap:$="normal",anchorX:te=0,anchorY:se=0,metricsOnly:ye=!1,unicodeFontsURL:k,preResolvedFonts:ee=null,includeCaretPositions:ne=!1,chunkedBoundsSize:de=8192,colorRanges:X=null},J){const ce=v(),ge={fontLoad:0,typesetting:0};b.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),b=b.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),B=+B,P=+P,V=+V,F=F||"normal",N=+N,a({text:b,lang:T,style:O,weight:D,fonts:typeof C=="string"?[{src:C}]:C,unicodeFontsURL:k,preResolvedFonts:ee},oe=>{ge.fontLoad=v()-ce;const ve=isFinite(V);let Se=null,Re=null,Le=null,gt=null,Mt=null,At=null,at=null,Nt=null,ie=0,ut=0,$e=Q!=="nowrap";const Ke=new Map,Pe=v();let pt=N,Ve=0,j=new y;const Y=[j];oe.forEach(it=>{const{fontObj:rt}=it,{ascender:yt,descender:Vt,unitsPerEm:ht,lineGap:Lt,capHeight:Et,xHeight:_t}=rt;let ot=Ke.get(rt);if(!ot){const De=B/ht,He=F==="normal"?(yt-Vt+Lt)*De:F*B,dt=(He-(yt-Vt)*De)/2,Pt=Math.min(He,(yt-Vt)*De),Tt=(yt+Vt)/2*De+Pt/2;ot={index:Ke.size,src:rt.src,fontObj:rt,fontSizeMult:De,unitsPerEm:ht,ascender:yt*De,descender:Vt*De,capHeight:Et*De,xHeight:_t*De,lineHeight:He,baseline:-dt-yt*De,caretTop:Tt,caretBottom:Tt-Pt},Ke.set(rt,ot)}const{fontSizeMult:xe}=ot,We=b.slice(it.start,it.end+1);let Rt,Ae;rt.forEachGlyph(We,B,P,(De,He,dt,Pt)=>{He+=Ve,Pt+=it.start,Rt=He,Ae=De;const Tt=b.charAt(Pt),qt=De.advanceWidth*xe,sn=j.count;let Jt;if("isEmpty"in De||(De.isWhitespace=!!Tt&&new RegExp(r).test(Tt),De.canBreakAfter=!!Tt&&s.test(Tt),De.isEmpty=De.xMin===De.xMax||De.yMin===De.yMax||i.test(Tt)),!De.isWhitespace&&!De.isEmpty&&ut++,$e&&ve&&!De.isWhitespace&&He+qt+pt>V&&sn){if(j.glyphAt(sn-1).glyphObj.canBreakAfter)Jt=new y,pt=-He;else for(let ti=sn;ti--;)if(ti===0&&$==="break-word"){Jt=new y,pt=-He;break}else if(j.glyphAt(ti).glyphObj.canBreakAfter){Jt=j.splitAt(ti+1);const Fn=Jt.glyphAt(0).x;pt-=Fn;for(let Ln=Jt.count;Ln--;)Jt.glyphAt(Ln).x-=Fn;break}Jt&&(j.isSoftWrapped=!0,j=Jt,Y.push(j),ie=V)}let nn=j.glyphAt(j.count);nn.glyphObj=De,nn.x=He+pt,nn.y=dt,nn.width=qt,nn.charIndex=Pt,nn.fontData=ot,Tt===`
`&&(j=new y,Y.push(j),pt=-(He+qt+P*B)+N)}),Ve=Rt+Ae.advanceWidth*xe+P*B});let _e=0;Y.forEach(it=>{let rt=!0;for(let yt=it.count;yt--;){const Vt=it.glyphAt(yt);rt&&!Vt.glyphObj.isWhitespace&&(it.width=Vt.x+Vt.width,it.width>ie&&(ie=it.width),rt=!1);let{lineHeight:ht,capHeight:Lt,xHeight:Et,baseline:_t}=Vt.fontData;ht>it.lineHeight&&(it.lineHeight=ht);const ot=_t-it.baseline;ot<0&&(it.baseline+=ot,it.cap+=ot,it.ex+=ot),it.cap=Math.max(it.cap,it.baseline+Lt),it.ex=Math.max(it.ex,it.baseline+Et)}it.baseline-=_e,it.cap-=_e,it.ex-=_e,_e+=it.lineHeight});let Ie=0,Ge=0;if(te&&(typeof te=="number"?Ie=-te:typeof te=="string"&&(Ie=-ie*(te==="left"?0:te==="center"?.5:te==="right"?1:f(te)))),se&&(typeof se=="number"?Ge=-se:typeof se=="string"&&(Ge=se==="top"?0:se==="top-baseline"?-Y[0].baseline:se==="top-cap"?-Y[0].cap:se==="top-ex"?-Y[0].ex:se==="middle"?_e/2:se==="bottom"?_e:se==="bottom-baseline"?-Y[Y.length-1].baseline:f(se)*_e)),!ye){const it=e.getEmbeddingLevels(b,G);Se=new Uint16Array(ut),Re=new Uint8Array(ut),Le=new Float32Array(ut*2),gt={},at=[1/0,1/0,-1/0,-1/0],Nt=[],ne&&(At=new Float32Array(b.length*4)),X&&(Mt=new Uint8Array(ut*3));let rt=0,yt=-1,Vt=-1,ht,Lt;if(Y.forEach((Et,_t)=>{let{count:ot,width:xe}=Et;if(ot>0){let We=0;for(let Pt=ot;Pt--&&Et.glyphAt(Pt).glyphObj.isWhitespace;)We++;let Rt=0,Ae=0;if(I==="center")Rt=(ie-xe)/2;else if(I==="right")Rt=ie-xe;else if(I==="justify"&&Et.isSoftWrapped){let Pt=0;for(let Tt=ot-We;Tt--;)Et.glyphAt(Tt).glyphObj.isWhitespace&&Pt++;Ae=(ie-xe)/Pt}if(Ae||Rt){let Pt=0;for(let Tt=0;Tt<ot;Tt++){let qt=Et.glyphAt(Tt);const sn=qt.glyphObj;qt.x+=Rt+Pt,Ae!==0&&sn.isWhitespace&&Tt<ot-We&&(Pt+=Ae,qt.width+=Ae)}}const De=e.getReorderSegments(b,it,Et.glyphAt(0).charIndex,Et.glyphAt(Et.count-1).charIndex);for(let Pt=0;Pt<De.length;Pt++){const[Tt,qt]=De[Pt];let sn=1/0,Jt=-1/0;for(let nn=0;nn<ot;nn++)if(Et.glyphAt(nn).charIndex>=Tt){let ti=nn,Fn=nn;for(;Fn<ot;Fn++){let Ln=Et.glyphAt(Fn);if(Ln.charIndex>qt)break;Fn<ot-We&&(sn=Math.min(sn,Ln.x),Jt=Math.max(Jt,Ln.x+Ln.width))}for(let Ln=ti;Ln<Fn;Ln++){const Ai=Et.glyphAt(Ln);Ai.x=Jt-(Ai.x+Ai.width-sn)}break}}let He;const dt=Pt=>He=Pt;for(let Pt=0;Pt<ot;Pt++){const Tt=Et.glyphAt(Pt);He=Tt.glyphObj;const qt=He.index,sn=it.levels[Tt.charIndex]&1;if(sn){const Jt=e.getMirroredCharacter(b[Tt.charIndex]);Jt&&Tt.fontData.fontObj.forEachGlyph(Jt,0,0,dt)}if(ne){const{charIndex:Jt,fontData:nn}=Tt,ti=Tt.x+Ie,Fn=Tt.x+Tt.width+Ie;At[Jt*4]=sn?Fn:ti,At[Jt*4+1]=sn?ti:Fn,At[Jt*4+2]=Et.baseline+nn.caretBottom+Ge,At[Jt*4+3]=Et.baseline+nn.caretTop+Ge;const Ln=Jt-yt;Ln>1&&d(At,yt,Ln),yt=Jt}if(X){const{charIndex:Jt}=Tt;for(;Jt>Vt;)Vt++,X.hasOwnProperty(Vt)&&(Lt=X[Vt])}if(!He.isWhitespace&&!He.isEmpty){const Jt=rt++,{fontSizeMult:nn,src:ti,index:Fn}=Tt.fontData,Ln=gt[ti]||(gt[ti]={});Ln[qt]||(Ln[qt]={path:He.path,pathBounds:[He.xMin,He.yMin,He.xMax,He.yMax]});const Ai=Tt.x+Ie,Di=Tt.y+Et.baseline+Ge;Le[Jt*2]=Ai,Le[Jt*2+1]=Di;const or=Ai+He.xMin*nn,kr=Di+He.yMin*nn,pr=Ai+He.xMax*nn,ln=Di+He.yMax*nn;or<at[0]&&(at[0]=or),kr<at[1]&&(at[1]=kr),pr>at[2]&&(at[2]=pr),ln>at[3]&&(at[3]=ln),Jt%de===0&&(ht={start:Jt,end:Jt,rect:[1/0,1/0,-1/0,-1/0]},Nt.push(ht)),ht.end++;const Gi=ht.rect;if(or<Gi[0]&&(Gi[0]=or),kr<Gi[1]&&(Gi[1]=kr),pr>Gi[2]&&(Gi[2]=pr),ln>Gi[3]&&(Gi[3]=ln),Se[Jt]=qt,Re[Jt]=Fn,X){const ni=Jt*3;Mt[ni]=Lt>>16&255,Mt[ni+1]=Lt>>8&255,Mt[ni+2]=Lt&255}}}}}),At){const Et=b.length-yt;Et>1&&d(At,yt,Et)}}const Ye=[];Ke.forEach(({index:it,src:rt,unitsPerEm:yt,ascender:Vt,descender:ht,lineHeight:Lt,capHeight:Et,xHeight:_t})=>{Ye[it]={src:rt,unitsPerEm:yt,ascender:Vt,descender:ht,lineHeight:Lt,capHeight:Et,xHeight:_t}}),ge.typesetting=v()-Pe,J({glyphIds:Se,glyphFontIndices:Re,glyphPositions:Le,glyphData:gt,fontData:Ye,caretPositions:At,glyphColors:Mt,chunkedBounds:Nt,fontSize:B,topBaseline:Ge+Y[0].baseline,blockBounds:[Ie,Ge-_e,Ie+ie,Ge],visibleBounds:at,timings:ge})})}function u(b,C){l({...b,metricsOnly:!0},T=>{const[M,B,D,O]=T.blockBounds;C({width:D-M,height:O-B})})}function f(b){let C=b.match(/^([\d.]+)%$/),T=C?parseFloat(C[1]):NaN;return isNaN(T)?0:T/100}function d(b,C,T){const M=b[C*4],B=b[C*4+1],D=b[C*4+2],O=b[C*4+3],P=(B-M)/T;for(let F=0;F<T;F++){const V=(C+F)*4;b[V]=M+P*F,b[V+1]=M+P*(F+1),b[V+2]=D,b[V+3]=O}}function v(){return(self.performance||Date).now()}function y(){this.data=[]}const A=["glyphObj","x","y","width","charIndex","fontData"];return y.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/A.length)},glyphAt(b){let C=y.flyweight;return C.data=this.data,C.index=b,C},splitAt(b){let C=new y;return C.data=this.data.splice(b*A.length),C}},y.flyweight=A.reduce((b,C,T,M)=>(Object.defineProperty(b,C,{get(){return this.data[this.index*A.length+T]},set(B){this.data[this.index*A.length+T]=B}}),b),{data:null,index:0}),{typeset:l,measure:u}}const Hg=()=>(self.performance||Date).now(),Yb=IN();let o3;function BY(n,e,t,i,r,s,a,l,u,f,d=!0){return d?OY(n,e,t,i,r,s,a,l,u,f).then(null,v=>(o3||(console.warn("WebGL SDF generation failed, falling back to JS",v),o3=!0),u3(n,e,t,i,r,s,a,l,u,f))):u3(n,e,t,i,r,s,a,l,u,f)}const zA=[],UY=5;let oC=0;function GN(){const n=Hg();for(;zA.length&&Hg()-n<UY;)zA.shift()();oC=zA.length?setTimeout(GN,0):0}const OY=(...n)=>new Promise((e,t)=>{zA.push(()=>{const i=Hg();try{Yb.webgl.generateIntoCanvas(...n),e({timing:Hg()-i})}catch(r){t(r)}}),oC||(oC=setTimeout(GN,0))}),LY=4,PY=2e3,l3={};let NY=0;function u3(n,e,t,i,r,s,a,l,u,f){const d="TroikaTextSDFGenerator_JS_"+NY++%LY;let v=l3[d];return v||(v=l3[d]={workerModule:sy({name:d,workerId:d,dependencies:[IN,Hg],init(y,A){const b=y().javascript.generate;return function(...C){const T=A();return{textureData:b(...C),timing:A()-T}}},getTransferables(y){return[y.textureData.buffer]}}),requests:0,idleTimer:null}),v.requests++,clearTimeout(v.idleTimer),v.workerModule(n,e,t,i,r,s).then(({textureData:y,timing:A})=>{const b=Hg(),C=new Uint8Array(y.length*4);for(let T=0;T<y.length;T++)C[T*4+f]=y[T];return Yb.webglUtils.renderImageData(a,C,l,u,n,e,1<<3-f),A+=Hg()-b,--v.requests===0&&(v.idleTimer=setTimeout(()=>{dY(d)},PY)),{timing:A}})}function IY(n){n._warm||(Yb.webgl.isSupported(n),n._warm=!0)}const FY=Yb.webglUtils.resizeWebGLCanvasWithoutClearing,l1={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},GY=new jt;function d0(){return(self.performance||Date).now()}const c3=Object.create(null);function HN(n,e){n=VY({},n);const t=d0(),i=[];if(n.font&&i.push({label:"user",src:kY(n.font)}),n.font=i,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||l1.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||l1.unicodeFontsURL,n.colorRanges!=null){let y={};for(let A in n.colorRanges)if(n.colorRanges.hasOwnProperty(A)){let b=n.colorRanges[A];typeof b!="number"&&(b=GY.set(b).getHex()),y[A]=b}n.colorRanges=y}Object.freeze(n);const{textureWidth:r,sdfExponent:s}=l1,{sdfGlyphSize:a}=n,l=r/a*4;let u=c3[a];if(!u){const y=document.createElement("canvas");y.width=r,y.height=a*256/l,u=c3[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:y,sdfTexture:new ar(y,void 0,void 0,void 0,qi,qi),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,HY(u)}const{sdfTexture:f,sdfCanvas:d}=u;kN(n).then(y=>{const{glyphIds:A,glyphFontIndices:b,fontData:C,glyphPositions:T,fontSize:M,timings:B}=y,D=[],O=new Float32Array(A.length*4);let P=0,F=0;const V=d0(),G=C.map(te=>{let se=u.glyphsByFont.get(te.src);return se||u.glyphsByFont.set(te.src,se=new Map),se});A.forEach((te,se)=>{const ye=b[se],{src:k,unitsPerEm:ee}=C[ye];let ne=G[ye].get(te);if(!ne){const{path:ge,pathBounds:oe}=y.glyphData[k][te],ve=Math.max(oe[2]-oe[0],oe[3]-oe[1])/a*(l1.sdfMargin*a+.5),Se=u.glyphCount++,Re=[oe[0]-ve,oe[1]-ve,oe[2]+ve,oe[3]+ve];G[ye].set(te,ne={path:ge,atlasIndex:Se,sdfViewBox:Re}),D.push(ne)}const{sdfViewBox:de}=ne,X=T[F++],J=T[F++],ce=M/ee;O[P++]=X+de[0]*ce,O[P++]=J+de[1]*ce,O[P++]=X+de[2]*ce,O[P++]=J+de[3]*ce,A[se]=ne.atlasIndex}),B.quads=(B.quads||0)+(d0()-V);const I=d0();B.sdf={};const N=d.height,Q=Math.ceil(u.glyphCount/l),$=Math.pow(2,Math.ceil(Math.log2(Q*a)));$>N&&(console.info(`Increasing SDF texture size ${N}->${$}`),FY(d,r,$),f.dispose()),Promise.all(D.map(te=>zN(te,u,n.gpuAccelerateSDF).then(({timing:se})=>{B.sdf[te.atlasIndex]=se}))).then(()=>{D.length&&!u.contextLost&&(VN(u),f.needsUpdate=!0),B.sdfTotal=d0()-I,B.total=d0()-t,e(Object.freeze({parameters:n,sdfTexture:f,sdfGlyphSize:a,sdfExponent:s,glyphBounds:O,glyphAtlasIndices:A,glyphColors:y.glyphColors,caretPositions:y.caretPositions,chunkedBounds:y.chunkedBounds,ascender:y.ascender,descender:y.descender,lineHeight:y.lineHeight,capHeight:y.capHeight,xHeight:y.xHeight,topBaseline:y.topBaseline,blockBounds:y.blockBounds,visibleBounds:y.visibleBounds,timings:y.timings}))})}),Promise.resolve().then(()=>{u.contextLost||IY(d)})}function zN({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},a){if(s)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:u}=l1,f=Math.max(t[2]-t[0],t[3]-t[1]),d=Math.floor(e/4),v=d%(l/i)*i,y=Math.floor(d/(l/i))*i,A=e%4;return BY(i,i,n,t,f,u,r,v,y,A,a)}function HY(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(zN(s,n,!0))})}),Promise.all(i).then(()=>{VN(n),n.sdfTexture.needsUpdate=!0})})}function zY({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;HN({font:n,sdfGlyphSize:t,text:r},i)}function VY(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let SA;function kY(n){return SA||(SA=typeof document>"u"?{}:document.createElement("a")),SA.href=n,SA.href}function VN(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let a=t.image.data;(!a||a.length!==i*r*4)&&(a=new Uint8Array(i*r*4),t.image={width:i,height:r,data:a},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,a)}}const XY=sy({name:"Typesetter",dependencies:[DY,RY,mY],init(n,e,t){return n(e,t())}}),kN=sy({name:"Typesetter",dependencies:[XY],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}});kN.onMainThread;const f3={};function WY(n){let e=f3[n];return e||(e=f3[n]=new xf(1,1,n,n).translate(.5,.5,0)),e}const YY="aTroikaGlyphBounds",h3="aTroikaGlyphIndex",jY="aTroikaGlyphColor";class qY extends N2{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new ua,this.boundingBox=new la}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=WY(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){this.updateAttributeData(YY,e,4),this.updateAttributeData(h3,t,1),this.updateAttributeData(jY,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:a,max:l,sin:u,cos:f}=Math,d=r/2,v=r*2,y=Math.abs(t),A=e[0]/y,b=e[2]/y,C=s((A+d)/v)!==s((b+d)/v)?-y:a(u(A)*y,u(b)*y),T=s((A-d)/v)!==s((b-d)/v)?y:l(u(A)*y,u(b)*y),M=s((A+r)/v)!==s((b+r)/v)?y*2:l(y-f(A)*y,y-f(b)*y);i.min.set(C,e[1],t<0?-M:0),i.max.set(T,e[3],t<0?0:M)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(h3).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,i){const r=this.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(this.setAttribute(e,new Zp(t,i)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const KY=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,JY=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,ZY=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,QY=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function $Y(n){const e=aC(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new xt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Ii(0,0,0,0)},uTroikaClipRect:{value:new Ii(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new xt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new jt},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Kn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:KY,vertexTransform:JY,fragmentDefs:ZY,fragmentColorTransform:QY,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(FN,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const ew=new ul({color:16777215,side:Ru,transparent:!0}),d3=8421504,p3=new Tn,bA=new he,tE=new he,Jy=[],ej=new he,nE="+x+y";function m3(n){return Array.isArray(n)?n[0]:n}let XN=()=>{const n=new Ur(new xf(1,1),ew);return XN=()=>n,n},WN=()=>{const n=new Ur(new xf(1,1,32,1),ew);return WN=()=>n,n};const tj={type:"syncstart"},nj={type:"synccomplete"},YN=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],ij=YN.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let jN=class extends Ur{constructor(){const e=new qY;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=d3,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=nE,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(tj),HN({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(nj),e&&e()})))}onBeforeRender(e,t,i,r,s,a){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return $Y(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=ew.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return m3(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return m3(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:l,blockBounds:u}=r;i.uTroikaSDFTexture.value=l,i.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(u),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let f=0,d=0,v=0,y,A,b,C=0,T=0;if(t){let{outlineWidth:B,outlineOffsetX:D,outlineOffsetY:O,outlineBlur:P,outlineOpacity:F}=this;f=this._parsePercent(B)||0,d=Math.max(0,this._parsePercent(P)||0),y=F,C=this._parsePercent(D)||0,T=this._parsePercent(O)||0}else v=Math.max(0,this._parsePercent(this.strokeWidth)||0),v&&(b=this.strokeColor,i.uTroikaStrokeColor.value.set(b??d3),A=this.strokeOpacity,A==null&&(A=1)),y=this.fillOpacity;i.uTroikaEdgeOffset.value=f,i.uTroikaPositionOffset.value.set(C,T),i.uTroikaBlurRadius.value=d,i.uTroikaStrokeWidth.value=v,i.uTroikaStrokeOpacity.value=A,i.uTroikaFillOpacity.value=y??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let M=this.clipRect;if(M&&Array.isArray(M)&&M.length===4)i.uTroikaClipRect.value.fromArray(M);else{const B=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(u[0]-B,u[1]-B,u[2]+B,u[3]+B)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const l=e.hasOwnProperty("color")?e.color:e.color=new jt;(s!==l._input||typeof s=="object")&&l.set(l._input=s)}let a=this.orientation||nE;if(a!==e._orientation){let l=i.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let u=a!==nE&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(u){let[,f,d,v,y]=u;bA.set(0,0,0)[d]=f==="-"?1:-1,tE.set(0,0,0)[y]=v==="-"?-1:1,p3.lookAt(ej,bA.cross(tE),tE),l.setFromMatrix4(p3)}else l.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new xt){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new xt){return bA.copy(e),this.localPositionToTextCoords(this.worldToLocal(bA),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,a=r?WN():XN(),l=a.geometry,{position:u,uv:f}=l.attributes;for(let d=0;d<f.count;d++){let v=s[0]+f.getX(d)*(s[2]-s[0]);const y=s[1]+f.getY(d)*(s[3]-s[1]);let A=0;r&&(A=r-Math.cos(v/r)*r,v=Math.sin(v/r)*r),u.setXYZ(d,v,y,A)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,Jy.length=0,a.raycast(e,Jy);for(let d=0;d<Jy.length;d++)Jy[d].object=this,t.push(Jy[d])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,ij.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};YN.forEach(n=>{const e="_private_"+n;Object.defineProperty(jN.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new la;new jt;const rj=we.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:s,characters:a,onSync:l,...u},f)=>{const d=ol(({invalidate:b})=>b),[v]=we.useState(()=>new jN),[y,A]=we.useMemo(()=>{const b=[];let C="";return we.Children.forEach(s,T=>{typeof T=="string"||typeof T=="number"?C+=T:b.push(T)}),[b,C]},[s]);return lN(()=>new Promise(b=>zY({font:i,characters:a},b)),["troika-text",i,a]),we.useLayoutEffect(()=>void v.sync(()=>{d(),l&&l(v)})),we.useEffect(()=>()=>v.dispose(),[v]),we.createElement("primitive",J1({object:v,ref:f,font:i,text:A,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},u),y)}),sj=()=>parseInt($0.replace(/\D+/g,"")),aj=sj();let MA=null,qN="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function KN(n=!0,e=!0,t){return i=>{t&&t(i),n&&(MA||(MA=new oY),MA.setDecoderPath(typeof n=="string"?n:qN),i.setDRACOLoader(MA)),e&&i.setMeshoptDecoder(typeof $T=="function"?$T():$T)}}const df=(n,e,t,i)=>Rd($2,n,KN(e,t,i));df.preload=(n,e,t,i)=>Rd.preload($2,n,KN(e,t,i));df.clear=n=>Rd.clear($2,n);df.setDecoderPath=n=>{qN=n};const JN=we.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:a,onStart:l,onEnd:u,...f},d)=>{const v=ol(F=>F.invalidate),y=ol(F=>F.camera),A=ol(F=>F.gl),b=ol(F=>F.events),C=ol(F=>F.setEvents),T=ol(F=>F.set),M=ol(F=>F.get),B=ol(F=>F.performance),D=e||y,O=i||b.connected||A.domElement,P=we.useMemo(()=>new bW(D),[D]);return N_(()=>{P.enabled&&P.update()},-1),we.useEffect(()=>(s&&P.connect(s===!0?O:s),P.connect(O),()=>void P.dispose()),[s,O,t,P,v]),we.useEffect(()=>{const F=I=>{v(),t&&B.regress(),a&&a(I)},V=I=>{l&&l(I)},G=I=>{u&&u(I)};return P.addEventListener("change",F),P.addEventListener("start",V),P.addEventListener("end",G),()=>{P.removeEventListener("start",V),P.removeEventListener("end",G),P.removeEventListener("change",F)}},[a,l,u,P,v,C]),we.useEffect(()=>{if(n){const F=M().controls;return T({controls:P}),()=>T({controls:F})}},[n,P]),we.createElement("primitive",J1({ref:d,object:P,enableDamping:r},f))}),ZN=(n,e,t)=>{let i;switch(n){case dl:i=new Uint8ClampedArray(e*t*4);break;case wa:i=new Uint16Array(e*t*4);break;case yh:i=new Uint32Array(e*t*4);break;case hb:i=new Int8Array(e*t*4);break;case db:i=new Int16Array(e*t*4);break;case x_:i=new Int32Array(e*t*4);break;case ss:i=new Float32Array(e*t*4);break;default:throw new Error("Unsupported data type")}return i};let TA;const oj=(n,e,t,i)=>{if(TA!==void 0)return TA;const r=new _c(1,1,i);e.setRenderTarget(r);const s=new Ur(new xf,new ul({color:16777215}));e.render(s,t),e.setRenderTarget(null);const a=ZN(n,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,a),r.dispose(),s.geometry.dispose(),s.material.dispose(),TA=a[0]!==0,TA};class tw{constructor(e){var t,i,r,s,a,l,u,f,d,v,y,A,b,C,T,M;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(D){throw this._renderer.setRenderTarget(null),D}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const B={format:Fs,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)===null||t===void 0?void 0:t.anisotropy)!==void 0?(i=e.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy:1,generateMipmaps:((r=e.renderTargetOptions)===null||r===void 0?void 0:r.generateMipmaps)!==void 0?(s=e.renderTargetOptions)===null||s===void 0?void 0:s.generateMipmaps:!1,magFilter:((a=e.renderTargetOptions)===null||a===void 0?void 0:a.magFilter)!==void 0?(l=e.renderTargetOptions)===null||l===void 0?void 0:l.magFilter:qi,minFilter:((u=e.renderTargetOptions)===null||u===void 0?void 0:u.minFilter)!==void 0?(f=e.renderTargetOptions)===null||f===void 0?void 0:f.minFilter:qi,samples:((d=e.renderTargetOptions)===null||d===void 0?void 0:d.samples)!==void 0?(v=e.renderTargetOptions)===null||v===void 0?void 0:v.samples:void 0,wrapS:((y=e.renderTargetOptions)===null||y===void 0?void 0:y.wrapS)!==void 0?(A=e.renderTargetOptions)===null||A===void 0?void 0:A.wrapS:Is,wrapT:((b=e.renderTargetOptions)===null||b===void 0?void 0:b.wrapT)!==void 0?(C=e.renderTargetOptions)===null||C===void 0?void 0:C.wrapT:Is};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=tw.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new E_,this._camera=new uh,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!oj(this._type,this._renderer,this._camera,B)){let D;switch(this._type){case wa:D=this._renderer.extensions.has("EXT_color_buffer_float")?ss:void 0;break}D!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ss}`),this._type=D):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Ur(new xf,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new _c(this.width,this.height,B),this._renderTarget.texture.mapping=((T=e.renderTargetOptions)===null||T===void 0?void 0:T.mapping)!==void 0?(M=e.renderTargetOptions)===null||M===void 0?void 0:M.mapping:jp}static instantiateRenderer(){const e=new W2;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=ZN(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new mf(this.toArray(),this.width,this.height,Fs,this._type,(e==null?void 0:e.mapping)||jp,(e==null?void 0:e.wrapS)||Is,(e==null?void 0:e.wrapT)||Is,(e==null?void 0:e.magFilter)||qi,(e==null?void 0:e.minFilter)||qi,(e==null?void 0:e.anisotropy)||1,gf);return t.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof pl&&Object.values(this.material.uniforms).forEach(t=>{t.value instanceof ar&&t.value.dispose()}),Object.values(this.material).forEach(t=>{t instanceof ar&&t.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const lj=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,uj=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class cj extends pl{constructor({gamma:e,offsetHdr:t,offsetSdr:i,gainMapMin:r,gainMapMax:s,maxDisplayBoost:a,hdrCapacityMin:l,hdrCapacityMax:u,sdr:f,gainMap:d}){super({name:"GainMapDecoderMaterial",vertexShader:lj,fragmentShader:uj,uniforms:{sdr:{value:f},gainMap:{value:d},gamma:{value:new he(1/e[0],1/e[1],1/e[2])},offsetHdr:{value:new he().fromArray(t)},offsetSdr:{value:new he().fromArray(i)},gainMapMin:{value:new he().fromArray(r)},gainMapMax:{value:new he().fromArray(s)},weightFactor:{value:(Math.log2(a)-l)/(u-l)}},blending:oh,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=l,this._hdrCapacityMax=u,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class QN extends Error{}class $N extends Error{}const Zy=(n,e,t)=>{const i=new RegExp(`${e}="([^"]*)"`,"i").exec(n);if(i)return i[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(n);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(a=>a.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(t!==void 0)return t;throw new Error(`Can't find ${e} in gainmap metadata`)},fj=n=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(n):e=n.toString();let t=e.indexOf("<x:xmpmeta");for(;t!==-1;){const i=e.indexOf("x:xmpmeta>",t),r=e.slice(t,i+10);try{const s=Zy(r,"hdrgm:GainMapMin","0"),a=Zy(r,"hdrgm:GainMapMax"),l=Zy(r,"hdrgm:Gamma","1"),u=Zy(r,"hdrgm:OffsetSDR","0.015625"),f=Zy(r,"hdrgm:OffsetHDR","0.015625"),d=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),v=d?d[1]:"0",y=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!y)throw new Error("Incomplete gainmap metadata");const A=y[1];return{gainMapMin:Array.isArray(s)?s.map(b=>parseFloat(b)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(a)?a.map(b=>parseFloat(b)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(l)?l.map(b=>parseFloat(b)):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetSdr:Array.isArray(u)?u.map(b=>parseFloat(b)):[parseFloat(u),parseFloat(u),parseFloat(u)],offsetHdr:Array.isArray(f)?f.map(b=>parseFloat(b)):[parseFloat(f),parseFloat(f),parseFloat(f)],hdrCapacityMin:parseFloat(v),hdrCapacityMax:parseFloat(A)}}catch{}t=e.indexOf("<x:xmpmeta",i)}};class hj{constructor(e){this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((t,i)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){i(new Error("Not a valid jpeg"));return}const a=s.byteLength;let l=2,u=0,f;for(;l<a;){if(++u>250){i(new Error(`Found no marker after ${u} loops 😵`));return}if(s.getUint8(l)!==255){i(new Error(`Not a valid marker at offset 0x${l.toString(16)}, found: 0x${s.getUint8(l).toString(16)}`));return}if(f=s.getUint8(l+1),r&&console.log(`Marker: ${f.toString(16)}`),f===226){r&&console.log("Found APP2 marker (0xffe2)");const d=l+4;if(s.getUint32(d)===1297106432){const v=d+4;let y;if(s.getUint16(v)===18761)y=!1;else if(s.getUint16(v)===19789)y=!0;else{i(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(v+2,!y)!==42){i(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const A=s.getUint32(v+4,!y);if(A<8){i(new Error("Not valid TIFF data! (First offset less than 8)"));return}const b=v+A,C=s.getUint16(b,!y),T=b+2;let M=0;for(let P=T;P<T+12*C;P+=12)s.getUint16(P,!y)===45057&&(M=s.getUint32(P+8,!y));const D=b+2+C*12+4,O=[];for(let P=D;P<D+M*16;P+=16){const F={MPType:s.getUint32(P,!y),size:s.getUint32(P+4,!y),dataOffset:s.getUint32(P+8,!y),dependantImages:s.getUint32(P+12,!y),start:-1,end:-1,isFII:!1};F.dataOffset?(F.start=v+F.dataOffset,F.isFII=!1):(F.start=0,F.isFII=!0),F.end=F.start+F.size,O.push(F)}if(this.options.extractNonFII&&O.length){const P=new Blob([s]),F=[];for(const V of O){if(V.isFII&&!this.options.extractFII)continue;const G=P.slice(V.start,V.end+1,"image/jpeg");F.push(G)}t(F)}}}l+=2+s.getUint16(l+2)}})}}const dj=async n=>{const e=fj(n);if(!e)throw new $N("Gain map XMP metadata not found");const i=await new hj({extractFII:!0,extractNonFII:!0}).extract(n);if(i.length!==2)throw new QN("Gain map recovery image not found");return{sdr:new Uint8Array(await i[0].arrayBuffer()),gainMap:new Uint8Array(await i[1].arrayBuffer()),metadata:e}},g3=n=>new Promise((e,t)=>{const i=document.createElement("img");i.onload=()=>{e(i)},i.onerror=r=>{t(r)},i.src=URL.createObjectURL(n)});class eI extends to{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Vb}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new cj({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new ar,sdr:new ar});return new tw({width:16,height:16,type:wa,colorSpace:gf,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,i,r){const s=r?new Blob([r],{type:"image/jpeg"}):void 0,a=new Blob([i],{type:"image/jpeg"});let l,u,f=!1;if(typeof createImageBitmap>"u"){const y=await Promise.all([s?g3(s):Promise.resolve(void 0),g3(a)]);u=y[0],l=y[1],f=!0}else{const y=await Promise.all([s?createImageBitmap(s,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:"flipY"})]);u=y[0],l=y[1]}const d=new ar(u||new ImageData(2,2),jp,Is,Is,qi,FE,Fs,dl,1,gf);d.flipY=f,d.needsUpdate=!0;const v=new ar(l,jp,Is,Is,qi,FE,Fs,dl,1,$a);v.flipY=f,v.needsUpdate=!0,e.width=l.width,e.height=l.height,e.material.gainMap=d,e.material.sdr=v,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class pj extends eI{load([e,t,i],r,s,a){const l=this.prepareQuadRenderer();let u,f,d;const v=async()=>{if(u&&f&&d){try{await this.render(l,d,u,f)}catch(I){this.manager.itemError(e),this.manager.itemError(t),this.manager.itemError(i),typeof a=="function"&&a(I),l.disposeOnDemandRenderer();return}typeof r=="function"&&r(l),this.manager.itemEnd(e),this.manager.itemEnd(t),this.manager.itemEnd(i),l.disposeOnDemandRenderer()}};let y=!0,A=0,b=0,C=!0,T=0,M=0,B=!0,D=0,O=0;const P=()=>{if(typeof s=="function"){const I=A+T+D,N=b+M+O,Q=y&&C&&B;s(new ProgressEvent("progress",{lengthComputable:Q,loaded:N,total:I}))}};this.manager.itemStart(e),this.manager.itemStart(t),this.manager.itemStart(i);const F=new eo(this._internalLoadingManager);F.setResponseType("arraybuffer"),F.setRequestHeader(this.requestHeader),F.setPath(this.path),F.setWithCredentials(this.withCredentials),F.load(e,async I=>{if(typeof I=="string")throw new Error("Invalid sdr buffer");u=I,await v()},I=>{y=I.lengthComputable,b=I.loaded,A=I.total,P()},I=>{this.manager.itemError(e),typeof a=="function"&&a(I)});const V=new eo(this._internalLoadingManager);V.setResponseType("arraybuffer"),V.setRequestHeader(this.requestHeader),V.setPath(this.path),V.setWithCredentials(this.withCredentials),V.load(t,async I=>{if(typeof I=="string")throw new Error("Invalid gainmap buffer");f=I,await v()},I=>{C=I.lengthComputable,M=I.loaded,T=I.total,P()},I=>{this.manager.itemError(t),typeof a=="function"&&a(I)});const G=new eo(this._internalLoadingManager);return G.setRequestHeader(this.requestHeader),G.setPath(this.path),G.setWithCredentials(this.withCredentials),G.load(i,async I=>{if(typeof I!="string")throw new Error("Invalid metadata string");d=JSON.parse(I),await v()},I=>{B=I.lengthComputable,O=I.loaded,D=I.total,P()},I=>{this.manager.itemError(i),typeof a=="function"&&a(I)}),l}}class mj extends eI{load(e,t,i,r){const s=this.prepareQuadRenderer(),a=new eo(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async l=>{if(typeof l=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const u=new Uint8Array(l);let f,d,v;try{const y=await dj(u);f=y.sdr,d=y.gainMap,v=y.metadata}catch(y){if(y instanceof $N||y instanceof QN)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),v={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},f=u;else throw y}try{await this.render(s,v,f,d)}catch(y){this.manager.itemError(e),typeof r=="function"&&r(y),s.disposeOnDemandRenderer();return}typeof t=="function"&&t(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},i,l=>{this.manager.itemError(e),typeof r=="function"&&r(l)}),s}}const Z1={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},tI="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",D0=n=>Array.isArray(n),nw=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function jb({files:n=nw,path:e="",preset:t=void 0,colorSpace:i=void 0,extensions:r}={}){t&&(iw(t),n=Z1[t],e=tI);const s=D0(n),{extension:a,isCubemap:l}=rw(n),u=sw(a);if(!u)throw new Error("useEnvironment: Unrecognized file extension: "+n);const f=ol(A=>A.gl);we.useLayoutEffect(()=>{if(a!=="webp"&&a!=="jpg"&&a!=="jpeg")return;function A(){Rd.clear(u,s?[n]:n)}f.domElement.addEventListener("webglcontextlost",A,{once:!0})},[n,f.domElement]);const d=Rd(u,s?[n]:n,A=>{(a==="webp"||a==="jpg"||a==="jpeg")&&A.setRenderer(f),A.setPath==null||A.setPath(e),r&&r(A)});let v=s?d[0]:d;if(a==="jpg"||a==="jpeg"||a==="webp"){var y;v=(y=v.renderTarget)==null?void 0:y.texture}return v.mapping=l?vh:O0,v.colorSpace=i??(l?"srgb":"srgb-linear"),v}const gj={files:nw,path:"",preset:void 0,extensions:void 0};jb.preload=n=>{const e={...gj,...n};let{files:t,path:i=""}=e;const{preset:r,extensions:s}=e;r&&(iw(r),t=Z1[r],i=tI);const{extension:a}=rw(t);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const l=sw(a);if(!l)throw new Error("useEnvironment: Unrecognized file extension: "+t);Rd.preload(l,D0(t)?[t]:t,u=>{u.setPath==null||u.setPath(i),s&&s(u)})};const vj={files:nw,preset:void 0};jb.clear=n=>{const e={...vj,...n};let{files:t}=e;const{preset:i}=e;i&&(iw(i),t=Z1[i]);const{extension:r}=rw(t),s=sw(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+t);Rd.clear(s,D0(t)?[t]:t)};function iw(n){if(!(n in Z1))throw new Error("Preset must be one of: "+Object.keys(Z1).join(", "))}function rw(n){var e;const t=D0(n)&&n.length===6,i=D0(n)&&n.length===3&&n.some(a=>a.endsWith("json")),r=D0(n)?n[0]:n;return{extension:t?"cube":i?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:t,isGainmap:i}}function sw(n){return n==="cube"?IP:n==="hdr"?sY:n==="exr"?aY:n==="jpg"||n==="jpeg"?mj:n==="webp"?pj:null}const yj=n=>n.current&&n.current.isScene,_j=n=>yj(n)?n.current:n;function aw(n,e,t,i,r={}){var s,a,l,u;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const f=_j(e||t),d=f.background,v=f.environment,y={backgroundBlurriness:f.backgroundBlurriness,backgroundIntensity:f.backgroundIntensity,backgroundRotation:(s=(a=f.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:f.environmentIntensity,environmentRotation:(l=(u=f.environmentRotation)==null||u.clone==null?void 0:u.clone())!==null&&l!==void 0?l:[0,0,0]};return n!=="only"&&(f.environment=i),n&&(f.background=i),ff(f,r),()=>{n!=="only"&&(f.environment=v),n&&(f.background=d),ff(f,y)}}function ow({scene:n,background:e=!1,map:t,...i}){const r=ol(s=>s.scene);return we.useLayoutEffect(()=>{if(t)return aw(e,n,r,t,i)}),null}function nI({background:n=!1,scene:e,blur:t,backgroundBlurriness:i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:l,...u}){const f=jb(u),d=ol(v=>v.scene);return we.useLayoutEffect(()=>aw(n,e,d,f,{backgroundBlurriness:t??i,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:l})),we.useEffect(()=>()=>{f.dispose()},[f]),null}function xj({children:n,near:e=.1,far:t=1e3,resolution:i=256,frames:r=1,map:s,background:a=!1,blur:l,backgroundBlurriness:u,backgroundIntensity:f,backgroundRotation:d,environmentIntensity:v,environmentRotation:y,scene:A,files:b,path:C,preset:T=void 0,extensions:M}){const B=ol(G=>G.gl),D=ol(G=>G.scene),O=we.useRef(null),[P]=we.useState(()=>new E_),F=we.useMemo(()=>{const G=new g2(i);return G.texture.type=wa,G},[i]);we.useEffect(()=>()=>{F.dispose()},[F]),we.useLayoutEffect(()=>{if(r===1){const G=B.autoClear;B.autoClear=!0,O.current.update(B,P),B.autoClear=G}return aw(a,A,D,F.texture,{backgroundBlurriness:l??u,backgroundIntensity:f,backgroundRotation:d,environmentIntensity:v,environmentRotation:y})},[n,P,F.texture,A,D,a,r,B]);let V=1;return N_(()=>{if(r===1/0||V<r){const G=B.autoClear;B.autoClear=!0,O.current.update(B,P),B.autoClear=G,V++}}),we.createElement(we.Fragment,null,PX(we.createElement(we.Fragment,null,n,we.createElement("cubeCamera",{ref:O,args:[e,t,F]}),b||T?we.createElement(nI,{background:!0,files:b,preset:T,path:C,extensions:M}):s?we.createElement(ow,{background:!0,map:s,extensions:M}):null),P))}function Aj(n){var e,t,i,r;const s=jb(n),a=n.map||s;we.useMemo(()=>xN({GroundProjectedEnvImpl:mW}),[]),we.useEffect(()=>()=>{s.dispose()},[s]);const l=we.useMemo(()=>[a],[a]),u=(e=n.ground)==null?void 0:e.height,f=(t=n.ground)==null?void 0:t.radius,d=(i=(r=n.ground)==null?void 0:r.scale)!==null&&i!==void 0?i:1e3;return we.createElement(we.Fragment,null,we.createElement(ow,J1({},n,{map:a})),we.createElement("groundProjectedEnvImpl",{args:l,scale:d,height:u,radius:f}))}function Sj(n){return n.ground?we.createElement(Aj,n):n.map?we.createElement(ow,n):n.children?we.createElement(xj,n):we.createElement(nI,n)}class bj extends pl{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${aj>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const Mj=n=>new he().setFromSpherical(new FS(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),v3=we.forwardRef(({radius:n=100,depth:e=50,count:t=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:a=1},l)=>{const u=we.useRef(null),[f,d,v]=we.useMemo(()=>{const A=[],b=[],C=Array.from({length:t},()=>(.5+.5*Math.random())*r),T=new jt;let M=n+e;const B=e/t;for(let D=0;D<t;D++)M-=B*Math.random(),A.push(...Mj(M).toArray()),T.setHSL(D/t,i,.9),b.push(T.r,T.g,T.b);return[new Float32Array(A),new Float32Array(b),new Float32Array(C)]},[t,e,r,n,i]);N_(A=>u.current&&(u.current.uniforms.time.value=A.clock.elapsedTime*a));const[y]=we.useState(()=>new bj);return we.createElement("points",{ref:l},we.createElement("bufferGeometry",null,we.createElement("bufferAttribute",{attach:"attributes-position",args:[f,3]}),we.createElement("bufferAttribute",{attach:"attributes-color",args:[d,3]}),we.createElement("bufferAttribute",{attach:"attributes-size",args:[v,1]})),we.createElement("primitive",{ref:u,object:y,attach:"material",blending:ZA,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});var lw=G_(),Zn=n=>F_(n,lw),uw=G_();Zn.write=n=>F_(n,uw);var qb=G_();Zn.onStart=n=>F_(n,qb);var cw=G_();Zn.onFrame=n=>F_(n,cw);var fw=G_();Zn.onFinish=n=>F_(n,fw);var B0=[];Zn.setTimeout=(n,e)=>{const t=Zn.now()+e,i=()=>{const s=B0.findIndex(a=>a.cancel==i);~s&&B0.splice(s,1),Xp-=~s?1:0},r={time:t,handler:n,cancel:i};return B0.splice(iI(t),0,r),Xp+=1,rI(),r};var iI=n=>~(~B0.findIndex(e=>e.time>n)||~B0.length);Zn.cancel=n=>{qb.delete(n),cw.delete(n),fw.delete(n),lw.delete(n),uw.delete(n)};Zn.sync=n=>{lC=!0,Zn.batchedUpdates(n),lC=!1};Zn.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,Zn.onStart(t)}return i.handler=n,i.cancel=()=>{qb.delete(t),e=null},i};var hw=typeof window<"u"?window.requestAnimationFrame:()=>{};Zn.use=n=>hw=n;Zn.now=typeof performance<"u"?()=>performance.now():Date.now;Zn.batchedUpdates=n=>n();Zn.catch=console.error;Zn.frameLoop="always";Zn.advance=()=>{Zn.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):aI()};var kp=-1,Xp=0,lC=!1;function F_(n,e){lC?(e.delete(n),n(0)):(e.add(n),rI())}function rI(){kp<0&&(kp=0,Zn.frameLoop!=="demand"&&hw(sI))}function Tj(){kp=-1}function sI(){~kp&&(hw(sI),Zn.batchedUpdates(aI))}function aI(){const n=kp;kp=Zn.now();const e=iI(kp);if(e&&(oI(B0.splice(0,e),t=>t.handler()),Xp-=e),!Xp){Tj();return}qb.flush(),lw.flush(n?Math.min(64,kp-n):16.667),cw.flush(),uw.flush(),fw.flush()}function G_(){let n=new Set,e=n;return{add(t){Xp+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Xp-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Xp-=e.size,oI(e,i=>i(t)&&n.add(i)),Xp+=n.size,e=n)}}}function oI(n,e){n.forEach(t=>{try{e(t)}catch(i){Zn.catch(i)}})}var Ej=Object.defineProperty,Cj=(n,e)=>{for(var t in e)Ej(n,t,{get:e[t],enumerable:!0})},vf={};Cj(vf,{assign:()=>Rj,colors:()=>Yp,createStringInterpolator:()=>pw,skipAnimation:()=>uI,to:()=>lI,willAdvance:()=>mw});function uC(){}var wj=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),Kt={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function xd(n,e){if(Kt.arr(n)){if(!Kt.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var dr=(n,e)=>n.forEach(e);function Dd(n,e,t){if(Kt.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var gc=n=>Kt.und(n)?[]:Kt.arr(n)?n:[n];function E1(n,e){if(n.size){const t=Array.from(n);n.clear(),dr(t,e)}}var u1=(n,...e)=>E1(n,t=>t(...e)),dw=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),pw,lI,Yp=null,uI=!1,mw=uC,Rj=n=>{n.to&&(lI=n.to),n.now&&(Zn.now=n.now),n.colors!==void 0&&(Yp=n.colors),n.skipAnimation!=null&&(uI=n.skipAnimation),n.createStringInterpolator&&(pw=n.createStringInterpolator),n.requestAnimationFrame&&Zn.use(n.requestAnimationFrame),n.batchedUpdates&&(Zn.batchedUpdates=n.batchedUpdates),n.willAdvance&&(mw=n.willAdvance),n.frameLoop&&(Zn.frameLoop=n.frameLoop)},C1=new Set,dc=[],iE=[],WS=0,Kb={get idle(){return!C1.size&&!dc.length},start(n){WS>n.priority?(C1.add(n),Zn.onStart(Dj)):(cI(n),Zn(cC))},advance:cC,sort(n){if(WS)Zn.onFrame(()=>Kb.sort(n));else{const e=dc.indexOf(n);~e&&(dc.splice(e,1),fI(n))}},clear(){dc=[],C1.clear()}};function Dj(){C1.forEach(cI),C1.clear(),Zn(cC)}function cI(n){dc.includes(n)||fI(n)}function fI(n){dc.splice(Bj(dc,e=>e.priority>n.priority),0,n)}function cC(n){const e=iE;for(let t=0;t<dc.length;t++){const i=dc[t];WS=i.priority,i.idle||(mw(i),i.advance(n),i.idle||e.push(i))}return WS=0,iE=dc,iE.length=0,dc=e,dc.length>0}function Bj(n,e){const t=n.findIndex(e);return t<0?n.length:t}var Uj={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},pf="[-+]?\\d*\\.?\\d+",YS=pf+"%";function Jb(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var Oj=new RegExp("rgb"+Jb(pf,pf,pf)),Lj=new RegExp("rgba"+Jb(pf,pf,pf,pf)),Pj=new RegExp("hsl"+Jb(pf,YS,YS)),Nj=new RegExp("hsla"+Jb(pf,YS,YS,pf)),Ij=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Fj=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Gj=/^#([0-9a-fA-F]{6})$/,Hj=/^#([0-9a-fA-F]{8})$/;function zj(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=Gj.exec(n))?parseInt(e[1]+"ff",16)>>>0:Yp&&Yp[n]!==void 0?Yp[n]:(e=Oj.exec(n))?(p0(e[1])<<24|p0(e[2])<<16|p0(e[3])<<8|255)>>>0:(e=Lj.exec(n))?(p0(e[1])<<24|p0(e[2])<<16|p0(e[3])<<8|x3(e[4]))>>>0:(e=Ij.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=Hj.exec(n))?parseInt(e[1],16)>>>0:(e=Fj.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=Pj.exec(n))?(y3(_3(e[1]),EA(e[2]),EA(e[3]))|255)>>>0:(e=Nj.exec(n))?(y3(_3(e[1]),EA(e[2]),EA(e[3]))|x3(e[4]))>>>0:null}function rE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function y3(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=rE(r,i,n+1/3),a=rE(r,i,n),l=rE(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(a*255)<<16|Math.round(l*255)<<8}function p0(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function _3(n){return(parseFloat(n)%360+360)%360/360}function x3(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function EA(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function A3(n){let e=zj(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var Q1=(n,e,t)=>{if(Kt.fun(n))return n;if(Kt.arr(n))return Q1({range:n,output:e,extrapolate:t});if(Kt.str(n.output[0]))return pw(n);const i=n,r=i.output,s=i.range||[0,1],a=i.extrapolateLeft||i.extrapolate||"extend",l=i.extrapolateRight||i.extrapolate||"extend",u=i.easing||(f=>f);return f=>{const d=kj(f,s);return Vj(f,s[d],s[d+1],r[d],r[d+1],u,a,l,i.map)}};function Vj(n,e,t,i,r,s,a,l,u){let f=u?u(n):n;if(f<e){if(a==="identity")return f;a==="clamp"&&(f=e)}if(f>t){if(l==="identity")return f;l==="clamp"&&(f=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?f=-f:t===1/0?f=f-e:f=(f-e)/(t-e),f=s(f),i===-1/0?f=-f:r===1/0?f=f+i:f=f*(r-i)+i,f)}function kj(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var Xj={linear:n=>n},$1=Symbol.for("FluidValue.get"),j0=Symbol.for("FluidValue.observers"),ah=n=>!!(n&&n[$1]),fc=n=>n&&n[$1]?n[$1]():n,S3=n=>n[j0]||null;function Wj(n,e){n.eventObserved?n.eventObserved(e):n(e)}function jS(n,e){const t=n[j0];t&&t.forEach(i=>{Wj(i,e)})}var Yj=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");jj(this,n)}},jj=(n,e)=>hI(n,$1,e);function H_(n,e){if(n[$1]){let t=n[j0];t||hI(n,j0,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function qS(n,e){const t=n[j0];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[j0]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var hI=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),VA=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,qj=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,b3=new RegExp(`(${VA.source})(%|[a-z]+)`,"i"),Kj=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Zb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,dI=n=>{const[e,t]=Jj(n);if(!e||dw())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&Zb.test(t))return dI(t);if(t)return t}return n},Jj=n=>{const e=Zb.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},sE,Zj=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,pI=n=>{sE||(sE=Yp?new RegExp(`(${Object.keys(Yp).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>fc(s).replace(Zb,dI).replace(qj,A3).replace(sE,A3)),t=e.map(s=>s.match(VA).map(Number)),r=t[0].map((s,a)=>t.map(l=>{if(!(a in l))throw Error('The arity of each "output" value must be equal');return l[a]})).map(s=>Q1({...n,output:s}));return s=>{var u;const a=!b3.test(e[0])&&((u=e.find(f=>b3.test(f)))==null?void 0:u.replace(VA,""));let l=0;return e[0].replace(VA,()=>`${r[l++](s)}${a||""}`).replace(Kj,Zj)}},gw="react-spring: ",mI=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${gw}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},Qj=mI(console.warn);function $j(){Qj(`${gw}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var eq=mI(console.warn);function tq(){eq(`${gw}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Qb(n){return Kt.str(n)&&(n[0]=="#"||/\d/.test(n)||!dw()&&Zb.test(n)||n in(Yp||{}))}var vw=dw()?we.useEffect:we.useLayoutEffect,nq=()=>{const n=we.useRef(!1);return vw(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function gI(){const n=we.useState()[1],e=nq();return()=>{e.current&&n(Math.random())}}var vI=n=>we.useEffect(n,iq),iq=[];function M3(n){const e=we.useRef(void 0);return we.useEffect(()=>{e.current=n}),e.current}var e_=Symbol.for("Animated:node"),rq=n=>!!n&&n[e_]===n,sh=n=>n&&n[e_],yw=(n,e)=>wj(n,e_,e),$b=n=>n&&n[e_]&&n[e_].getPayload(),yI=class{constructor(){yw(this,this)}getPayload(){return this.payload||[]}},eM=class _I extends yI{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Kt.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new _I(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Kt.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Kt.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},KS=class xI extends eM{constructor(e){super(0),this._string=null,this._toString=Q1({output:[e,e]})}static create(e){return new xI(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Kt.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Q1({output:[this.getValue(),e]})),this._value=0,super.reset()}},JS={dependencies:null},_w=class extends yI{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return Dd(this.source,(t,i)=>{rq(t)?e[i]=t.getValue(n):ah(t)?e[i]=fc(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&dr(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return Dd(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){JS.dependencies&&ah(n)&&JS.dependencies.add(n);const e=$b(n);e&&dr(e,t=>this.add(t))}},sq=class AI extends _w{constructor(e){super(e)}static create(e){return new AI(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((i,r)=>i.setValue(e[r])).some(Boolean):(super.setValue(e.map(aq)),!0)}};function aq(n){return(Qb(n)?KS:eM).create(n)}function fC(n){const e=sh(n);return e?e.constructor:Kt.arr(n)?sq:Qb(n)?KS:eM}var T3=(n,e)=>{const t=!Kt.fun(n)||n.prototype&&n.prototype.isReactComponent;return we.forwardRef((i,r)=>{const s=we.useRef(null),a=t&&we.useCallback(b=>{s.current=uq(r,b)},[r]),[l,u]=lq(i,e),f=gI(),d=()=>{const b=s.current;if(t&&!b)return;(b?e.applyAnimatedValues(b,l.getValue(!0)):!1)===!1&&f()},v=new oq(d,u),y=we.useRef(void 0);vw(()=>(y.current=v,dr(u,b=>H_(b,v)),()=>{y.current&&(dr(y.current.deps,b=>qS(b,y.current)),Zn.cancel(y.current.update))})),we.useEffect(d,[]),vI(()=>()=>{const b=y.current;dr(b.deps,C=>qS(C,b))});const A=e.getComponentProps(l.getValue());return we.createElement(n,{...A,ref:a})})},oq=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&Zn.write(this.update)}};function lq(n,e){const t=new Set;return JS.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new _w(n),JS.dependencies=null,[n,t]}function uq(n,e){return n&&(Kt.fun(n)?n(e):n.current=e),e}var E3=Symbol.for("AnimatedComponent"),cq=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new _w(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=a=>{const l=C3(a)||"Anonymous";return Kt.str(a)?a=s[a]||(s[a]=T3(a,r)):a=a[E3]||(a[E3]=T3(a,r)),a.displayName=`Animated(${l})`,a};return Dd(n,(a,l)=>{Kt.arr(n)&&(l=C3(a)),s[l]=s(a)}),{animated:s}},C3=n=>Kt.str(n)?n:n&&Kt.str(n.displayName)?n.displayName:Kt.fun(n)&&n.name||null;function Mg(n,...e){return Kt.fun(n)?n(...e):n}var w1=(n,e)=>n===!0||!!(e&&n&&(Kt.fun(n)?n(e):gc(n).includes(e))),SI=(n,e)=>Kt.obj(n)?e&&n[e]:n,bI=(n,e)=>n.default===!0?n[e]:n.default?n.default[e]:void 0,fq=n=>n,xw=(n,e=fq)=>{let t=hq;n.default&&n.default!==!0&&(n=n.default,t=Object.keys(n));const i={};for(const r of t){const s=e(n[r],r);Kt.und(s)||(i[r]=s)}return i},hq=["config","onProps","onStart","onChange","onPause","onResume","onRest"],dq={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function pq(n){const e={};let t=0;if(Dd(n,(i,r)=>{dq[r]||(e[r]=i,t++)}),t)return e}function MI(n){const e=pq(n);if(e){const t={to:e};return Dd(n,(i,r)=>r in e||(t[r]=i)),t}return{...n}}function t_(n){return n=fc(n),Kt.arr(n)?n.map(t_):Qb(n)?vf.createStringInterpolator({range:[0,1],output:[n,n]})(1):n}function mq(n){for(const e in n)return!0;return!1}function hC(n){return Kt.fun(n)||Kt.arr(n)&&Kt.obj(n[0])}function gq(n,e){var t;(t=n.ref)==null||t.delete(n),e==null||e.delete(n)}function vq(n,e){var t;e&&n.ref!==e&&((t=n.ref)==null||t.delete(n),e.add(n),n.ref=e)}var yq={default:{tension:170,friction:26}},dC={...yq.default,mass:1,damping:1,easing:Xj.linear,clamp:!1},_q=class{constructor(){this.velocity=0,Object.assign(this,dC)}};function xq(n,e,t){t&&(t={...t},w3(t,e),e={...t,...e}),w3(n,e),Object.assign(n,e);for(const a in dC)n[a]==null&&(n[a]=dC[a]);let{frequency:i,damping:r}=n;const{mass:s}=n;return Kt.und(i)||(i<.01&&(i=.01),r<0&&(r=0),n.tension=Math.pow(2*Math.PI/i,2)*s,n.friction=4*Math.PI*r*s/i),n}function w3(n,e){if(!Kt.und(e.decay))n.duration=void 0;else{const t=!Kt.und(e.tension)||!Kt.und(e.friction);(t||!Kt.und(e.frequency)||!Kt.und(e.damping)||!Kt.und(e.mass))&&(n.duration=void 0,n.decay=void 0),t&&(n.frequency=void 0)}}var R3=[],Aq=class{constructor(){this.changed=!1,this.values=R3,this.toValues=null,this.fromValues=R3,this.config=new _q,this.immediate=!1}};function TI(n,{key:e,props:t,defaultProps:i,state:r,actions:s}){return new Promise((a,l)=>{let u,f,d=w1(t.cancel??(i==null?void 0:i.cancel),e);if(d)A();else{Kt.und(t.pause)||(r.paused=w1(t.pause,e));let b=i==null?void 0:i.pause;b!==!0&&(b=r.paused||w1(b,e)),u=Mg(t.delay||0,e),b?(r.resumeQueue.add(y),s.pause()):(s.resume(),y())}function v(){r.resumeQueue.add(y),r.timeouts.delete(f),f.cancel(),u=f.time-Zn.now()}function y(){u>0&&!vf.skipAnimation?(r.delayed=!0,f=Zn.setTimeout(A,u),r.pauseQueue.add(v),r.timeouts.add(f)):A()}function A(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(v),r.timeouts.delete(f),n<=(r.cancelId||0)&&(d=!0);try{s.start({...t,callId:n,cancel:d},a)}catch(b){l(b)}}})}var Aw=(n,e)=>e.length==1?e[0]:e.some(t=>t.cancelled)?U0(n.get()):e.every(t=>t.noop)?EI(n.get()):cf(n.get(),e.every(t=>t.finished)),EI=n=>({value:n,noop:!0,finished:!0,cancelled:!1}),cf=(n,e,t=!1)=>({value:n,finished:e,cancelled:t}),U0=n=>({value:n,cancelled:!0,finished:!1});function CI(n,e,t,i){const{callId:r,parentId:s,onRest:a}=e,{asyncTo:l,promise:u}=t;return!s&&n===l&&!e.reset?u:t.promise=(async()=>{t.asyncId=r,t.asyncTo=n;const f=xw(e,(T,M)=>M==="onRest"?void 0:T);let d,v;const y=new Promise((T,M)=>(d=T,v=M)),A=T=>{const M=r<=(t.cancelId||0)&&U0(i)||r!==t.asyncId&&cf(i,!1);if(M)throw T.result=M,v(T),T},b=(T,M)=>{const B=new D3,D=new B3;return(async()=>{if(vf.skipAnimation)throw n_(t),D.result=cf(i,!1),v(D),D;A(B);const O=Kt.obj(T)?{...T}:{...M,to:T};O.parentId=r,Dd(f,(F,V)=>{Kt.und(O[V])&&(O[V]=F)});const P=await i.start(O);return A(B),t.paused&&await new Promise(F=>{t.resumeQueue.add(F)}),P})()};let C;if(vf.skipAnimation)return n_(t),cf(i,!1);try{let T;Kt.arr(n)?T=(async M=>{for(const B of M)await b(B)})(n):T=Promise.resolve(n(b,i.stop.bind(i))),await Promise.all([T.then(d),y]),C=cf(i.get(),!0,!1)}catch(T){if(T instanceof D3)C=T.result;else if(T instanceof B3)C=T.result;else throw T}finally{r==t.asyncId&&(t.asyncId=s,t.asyncTo=s?l:void 0,t.promise=s?u:void 0)}return Kt.fun(a)&&Zn.batchedUpdates(()=>{a(C,i,i.item)}),C})()}function n_(n,e){E1(n.timeouts,t=>t.cancel()),n.pauseQueue.clear(),n.resumeQueue.clear(),n.asyncId=n.asyncTo=n.promise=void 0,e&&(n.cancelId=e)}var D3=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},B3=class extends Error{constructor(){super("SkipAnimationSignal")}},pC=n=>n instanceof Sw,Sq=1,Sw=class extends Yj{constructor(){super(...arguments),this.id=Sq++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=sh(this);return n&&n.getValue()}to(...n){return vf.to(this,n)}interpolate(...n){return $j(),vf.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){jS(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||Kb.sort(this),jS(this,{type:"priority",parent:this,priority:n})}},Zg=Symbol.for("SpringPhase"),wI=1,RI=2,DI=4,aE=n=>(n[Zg]&wI)>0,Ip=n=>(n[Zg]&RI)>0,Qy=n=>(n[Zg]&DI)>0,U3=(n,e)=>e?n[Zg]|=RI|wI:n[Zg]&=-3,O3=(n,e)=>e?n[Zg]|=DI:n[Zg]&=-5,bq=class extends Sw{constructor(n,e){if(super(),this.animation=new Aq,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Kt.und(n)||!Kt.und(e)){const t=Kt.obj(n)?{...n}:{...e,from:n};Kt.und(t.default)&&(t.default=!0),this.start(t)}}get idle(){return!(Ip(this)||this._state.asyncTo)||Qy(this)}get goal(){return fc(this.animation.to)}get velocity(){const n=sh(this);return n instanceof eM?n.lastVelocity||0:n.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return aE(this)}get isAnimating(){return Ip(this)}get isPaused(){return Qy(this)}get isDelayed(){return this._state.delayed}advance(n){let e=!0,t=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,a=$b(i.to);!a&&ah(i.to)&&(r=gc(fc(i.to))),i.values.forEach((f,d)=>{if(f.done)return;const v=f.constructor==KS?1:a?a[d].lastPosition:r[d];let y=i.immediate,A=v;if(!y){if(A=f.lastPosition,s.tension<=0){f.done=!0;return}let b=f.elapsedTime+=n;const C=i.fromValues[d],T=f.v0!=null?f.v0:f.v0=Kt.arr(s.velocity)?s.velocity[d]:s.velocity;let M;const B=s.precision||(C==v?.005:Math.min(1,Math.abs(v-C)*.001));if(Kt.und(s.duration))if(s.decay){const D=s.decay===!0?.998:s.decay,O=Math.exp(-(1-D)*b);A=C+T/(1-D)*(1-O),y=Math.abs(f.lastPosition-A)<=B,M=T*O}else{M=f.lastVelocity==null?T:f.lastVelocity;const D=s.restVelocity||B/10,O=s.clamp?0:s.bounce,P=!Kt.und(O),F=C==v?f.v0>0:C<v;let V,G=!1;const I=1,N=Math.ceil(n/I);for(let Q=0;Q<N&&(V=Math.abs(M)>D,!(!V&&(y=Math.abs(v-A)<=B,y)));++Q){P&&(G=A==v||A>v==F,G&&(M=-M*O,A=v));const $=-s.tension*1e-6*(A-v),te=-s.friction*.001*M,se=($+te)/s.mass;M=M+se*I,A=A+M*I}}else{let D=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,f.durationProgress>0&&(f.elapsedTime=s.duration*f.durationProgress,b=f.elapsedTime+=n)),D=(s.progress||0)+b/this._memoizedDuration,D=D>1?1:D<0?0:D,f.durationProgress=D),A=C+s.easing(D)*(v-C),M=(A-f.lastPosition)/n,y=D==1}f.lastVelocity=M,Number.isNaN(A)&&(console.warn("Got NaN while animating:",this),y=!0)}a&&!a[d].done&&(y=!1),y?f.done=!0:e=!1,f.setValue(A,s.round)&&(t=!0)});const l=sh(this),u=l.getValue();if(e){const f=fc(i.to);(u!==f||t)&&!s.decay?(l.setValue(f),this._onChange(f)):t&&s.decay&&this._onChange(u),this._stop()}else t&&this._onChange(u)}set(n){return Zn.batchedUpdates(()=>{this._stop(),this._focus(n),this._set(n)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Ip(this)){const{to:n,config:e}=this.animation;Zn.batchedUpdates(()=>{this._onStart(),e.decay||this._set(n,!1),this._stop()})}return this}update(n){return(this.queue||(this.queue=[])).push(n),this}start(n,e){let t;return Kt.und(n)?(t=this.queue||[],this.queue=[]):t=[Kt.obj(n)?n:{...e,to:n}],Promise.all(t.map(i=>this._update(i))).then(i=>Aw(this,i))}stop(n){const{to:e}=this.animation;return this._focus(this.get()),n_(this._state,n&&this._lastCallId),Zn.batchedUpdates(()=>this._stop(e,n)),this}reset(){this._update({reset:!0})}eventObserved(n){n.type=="change"?this._start():n.type=="priority"&&(this.priority=n.priority+1)}_prepareNode(n){const e=this.key||"";let{to:t,from:i}=n;t=Kt.obj(t)?t[e]:t,(t==null||hC(t))&&(t=void 0),i=Kt.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:t,from:i};return aE(this)||(n.reverse&&([t,i]=[i,t]),i=fc(i),Kt.und(i)?sh(this)||this._set(t):this._set(i)),r}_update({...n},e){const{key:t,defaultProps:i}=this;n.default&&Object.assign(i,xw(n,(a,l)=>/^on/.test(l)?SI(a,t):a)),P3(this,n,"onProps"),e1(this,"onProps",n,this);const r=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return TI(++this._lastCallId,{key:t,props:n,defaultProps:i,state:s,actions:{pause:()=>{Qy(this)||(O3(this,!0),u1(s.pauseQueue),e1(this,"onPause",cf(this,$y(this,this.animation.to)),this))},resume:()=>{Qy(this)&&(O3(this,!1),Ip(this)&&this._resume(),u1(s.resumeQueue),e1(this,"onResume",cf(this,$y(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(a=>{if(n.loop&&a.finished&&!(e&&a.noop)){const l=BI(n);if(l)return this._update(l,!0)}return a})}_merge(n,e,t){if(e.cancel)return this.stop(!0),t(U0(this));const i=!Kt.und(n.to),r=!Kt.und(n.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return t(U0(this));const{key:s,defaultProps:a,animation:l}=this,{to:u,from:f}=l;let{to:d=u,from:v=f}=n;r&&!i&&(!e.default||Kt.und(d))&&(d=v),e.reverse&&([d,v]=[v,d]);const y=!xd(v,f);y&&(l.from=v),v=fc(v);const A=!xd(d,u);A&&this._focus(d);const b=hC(e.to),{config:C}=l,{decay:T,velocity:M}=C;(i||r)&&(C.velocity=0),e.config&&!b&&xq(C,Mg(e.config,s),e.config!==a.config?Mg(a.config,s):void 0);let B=sh(this);if(!B||Kt.und(d))return t(cf(this,!0));const D=Kt.und(e.reset)?r&&!e.default:!Kt.und(v)&&w1(e.reset,s),O=D?v:this.get(),P=t_(d),F=Kt.num(P)||Kt.arr(P)||Qb(P),V=!b&&(!F||w1(a.immediate||e.immediate,s));if(A){const Q=fC(d);if(Q!==B.constructor)if(V)B=this._set(P);else throw Error(`Cannot animate between ${B.constructor.name} and ${Q.name}, as the "to" prop suggests`)}const G=B.constructor;let I=ah(d),N=!1;if(!I){const Q=D||!aE(this)&&y;(A||Q)&&(N=xd(t_(O),P),I=!N),(!xd(l.immediate,V)&&!V||!xd(C.decay,T)||!xd(C.velocity,M))&&(I=!0)}if(N&&Ip(this)&&(l.changed&&!D?I=!0:I||this._stop(u)),!b&&((I||ah(u))&&(l.values=B.getPayload(),l.toValues=ah(d)?null:G==KS?[1]:gc(P)),l.immediate!=V&&(l.immediate=V,!V&&!D&&this._set(u)),I)){const{onRest:Q}=l;dr(Tq,te=>P3(this,e,te));const $=cf(this,$y(this,u));u1(this._pendingCalls,$),this._pendingCalls.add(t),l.changed&&Zn.batchedUpdates(()=>{var te;l.changed=!D,Q==null||Q($,this),D?Mg(a.onRest,$):(te=l.onStart)==null||te.call(l,$,this)})}D&&this._set(O),b?t(CI(e.to,e,this._state,this)):I?this._start():Ip(this)&&!A?this._pendingCalls.add(t):t(EI(O))}_focus(n){const e=this.animation;n!==e.to&&(S3(this)&&this._detach(),e.to=n,S3(this)&&this._attach())}_attach(){let n=0;const{to:e}=this.animation;ah(e)&&(H_(e,this),pC(e)&&(n=e.priority+1)),this.priority=n}_detach(){const{to:n}=this.animation;ah(n)&&qS(n,this)}_set(n,e=!0){const t=fc(n);if(!Kt.und(t)){const i=sh(this);if(!i||!xd(t,i.getValue())){const r=fC(t);!i||i.constructor!=r?yw(this,r.create(t)):i.setValue(t),i&&Zn.batchedUpdates(()=>{this._onChange(t,e)})}}return sh(this)}_onStart(){const n=this.animation;n.changed||(n.changed=!0,e1(this,"onStart",cf(this,$y(this,n.to)),this))}_onChange(n,e){e||(this._onStart(),Mg(this.animation.onChange,n,this)),Mg(this.defaultProps.onChange,n,this),super._onChange(n,e)}_start(){const n=this.animation;sh(this).reset(fc(n.to)),n.immediate||(n.fromValues=n.values.map(e=>e.lastPosition)),Ip(this)||(U3(this,!0),Qy(this)||this._resume())}_resume(){vf.skipAnimation?this.finish():Kb.start(this)}_stop(n,e){if(Ip(this)){U3(this,!1);const t=this.animation;dr(t.values,r=>{r.done=!0}),t.toValues&&(t.onChange=t.onPause=t.onResume=void 0),jS(this,{type:"idle",parent:this});const i=e?U0(this.get()):cf(this.get(),$y(this,n??t.to));u1(this._pendingCalls,i),t.changed&&(t.changed=!1,e1(this,"onRest",i,this))}}};function $y(n,e){const t=t_(e),i=t_(n.get());return xd(i,t)}function BI(n,e=n.loop,t=n.to){const i=Mg(e);if(i){const r=i!==!0&&MI(i),s=(r||n).reverse,a=!r||r.reset;return i_({...n,loop:e,default:!1,pause:void 0,to:!s||hC(t)?t:void 0,from:a?n.from:void 0,reset:a,...r})}}function i_(n){const{to:e,from:t}=n=MI(n),i=new Set;return Kt.obj(e)&&L3(e,i),Kt.obj(t)&&L3(t,i),n.keys=i.size?Array.from(i):null,n}function Mq(n){const e=i_(n);return Kt.und(e.default)&&(e.default=xw(e)),e}function L3(n,e){Dd(n,(t,i)=>t!=null&&e.add(i))}var Tq=["onStart","onRest","onChange","onPause","onResume"];function P3(n,e,t){n.animation[t]=e[t]!==bI(e,t)?SI(e[t],n.key):void 0}function e1(n,e,...t){var i,r,s,a;(r=(i=n.animation)[e])==null||r.call(i,...t),(a=(s=n.defaultProps)[e])==null||a.call(s,...t)}var Eq=["onStart","onChange","onRest"],Cq=1,wq=class{constructor(n,e){this.id=Cq++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),e&&(this._flush=e),n&&this.start({default:!0,...n})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(n=>n.idle&&!n.isDelayed&&!n.isPaused)}get item(){return this._item}set item(n){this._item=n}get(){const n={};return this.each((e,t)=>n[t]=e.get()),n}set(n){for(const e in n){const t=n[e];Kt.und(t)||this.springs[e].set(t)}}update(n){return n&&this.queue.push(i_(n)),this}start(n){let{queue:e}=this;return n?e=gc(n).map(i_):this.queue=[],this._flush?this._flush(this,e):(NI(this,e),mC(this,e))}stop(n,e){if(n!==!!n&&(e=n),e){const t=this.springs;dr(gc(e),i=>t[i].stop(!!n))}else n_(this._state,this._lastAsyncId),this.each(t=>t.stop(!!n));return this}pause(n){if(Kt.und(n))this.start({pause:!0});else{const e=this.springs;dr(gc(n),t=>e[t].pause())}return this}resume(n){if(Kt.und(n))this.start({pause:!1});else{const e=this.springs;dr(gc(n),t=>e[t].resume())}return this}each(n){Dd(this.springs,n)}_onFrame(){const{onStart:n,onChange:e,onRest:t}=this._events,i=this._active.size>0,r=this._changed.size>0;(i&&!this._started||r&&!this._started)&&(this._started=!0,E1(n,([l,u])=>{u.value=this.get(),l(u,this,this._item)}));const s=!i&&this._started,a=r||s&&t.size?this.get():null;r&&e.size&&E1(e,([l,u])=>{u.value=a,l(u,this,this._item)}),s&&(this._started=!1,E1(t,([l,u])=>{u.value=a,l(u,this,this._item)}))}eventObserved(n){if(n.type=="change")this._changed.add(n.parent),n.idle||this._active.add(n.parent);else if(n.type=="idle")this._active.delete(n.parent);else return;Zn.onFrame(this._onFrame)}};function mC(n,e){return Promise.all(e.map(t=>UI(n,t))).then(t=>Aw(n,t))}async function UI(n,e,t){const{keys:i,to:r,from:s,loop:a,onRest:l,onResolve:u}=e,f=Kt.obj(e.default)&&e.default;a&&(e.loop=!1),r===!1&&(e.to=null),s===!1&&(e.from=null);const d=Kt.arr(r)||Kt.fun(r)?r:void 0;d?(e.to=void 0,e.onRest=void 0,f&&(f.onRest=void 0)):dr(Eq,C=>{const T=e[C];if(Kt.fun(T)){const M=n._events[C];e[C]=({finished:B,cancelled:D})=>{const O=M.get(T);O?(B||(O.finished=!1),D&&(O.cancelled=!0)):M.set(T,{value:null,finished:B||!1,cancelled:D||!1})},f&&(f[C]=e[C])}});const v=n._state;e.pause===!v.paused?(v.paused=e.pause,u1(e.pause?v.pauseQueue:v.resumeQueue)):v.paused&&(e.pause=!0);const y=(i||Object.keys(n.springs)).map(C=>n.springs[C].start(e)),A=e.cancel===!0||bI(e,"cancel")===!0;(d||A&&v.asyncId)&&y.push(TI(++n._lastAsyncId,{props:e,state:v,actions:{pause:uC,resume:uC,start(C,T){A?(n_(v,n._lastAsyncId),T(U0(n))):(C.onRest=l,T(CI(d,C,v,n)))}}})),v.paused&&await new Promise(C=>{v.resumeQueue.add(C)});const b=Aw(n,await Promise.all(y));if(a&&b.finished&&!(t&&b.noop)){const C=BI(e,a,r);if(C)return NI(n,[C]),UI(n,C,!0)}return u&&Zn.batchedUpdates(()=>u(b,n,n.item)),b}function N3(n,e){const t={...n.springs};return e&&dr(gc(e),i=>{Kt.und(i.keys)&&(i=i_(i)),Kt.obj(i.to)||(i={...i,to:void 0}),PI(t,i,r=>LI(r))}),OI(n,t),t}function OI(n,e){Dd(e,(t,i)=>{n.springs[i]||(n.springs[i]=t,H_(t,n))})}function LI(n,e){const t=new bq;return t.key=n,e&&H_(t,e),t}function PI(n,e,t){e.keys&&dr(e.keys,i=>{(n[i]||(n[i]=t(i)))._prepareNode(e)})}function NI(n,e){dr(e,t=>{PI(n.springs,t,i=>LI(i,n))})}var Rq=we.createContext({pause:!1,immediate:!1}),Dq=()=>{const n=[],e=function(i){tq();const r=[];return dr(n,(s,a)=>{if(Kt.und(i))r.push(s.start());else{const l=t(i,s,a);l&&r.push(s.start(l))}}),r};e.current=n,e.add=function(i){n.includes(i)||n.push(i)},e.delete=function(i){const r=n.indexOf(i);~r&&n.splice(r,1)},e.pause=function(){return dr(n,i=>i.pause(...arguments)),this},e.resume=function(){return dr(n,i=>i.resume(...arguments)),this},e.set=function(i){dr(n,(r,s)=>{const a=Kt.fun(i)?i(s,r):i;a&&r.set(a)})},e.start=function(i){const r=[];return dr(n,(s,a)=>{if(Kt.und(i))r.push(s.start());else{const l=this._getProps(i,s,a);l&&r.push(s.start(l))}}),r},e.stop=function(){return dr(n,i=>i.stop(...arguments)),this},e.update=function(i){return dr(n,(r,s)=>r.update(this._getProps(i,r,s))),this};const t=function(i,r,s){return Kt.fun(i)?i(s,r):i};return e._getProps=t,e};function Bq(n,e,t){const i=Kt.fun(e)&&e;i&&!t&&(t=[]);const r=we.useMemo(()=>i||arguments.length==3?Dq():void 0,[]),s=we.useRef(0),a=gI(),l=we.useMemo(()=>({ctrls:[],queue:[],flush(M,B){const D=N3(M,B);return s.current>0&&!l.queue.length&&!Object.keys(D).some(P=>!M.springs[P])?mC(M,B):new Promise(P=>{OI(M,D),l.queue.push(()=>{P(mC(M,B))}),a()})}}),[]),u=we.useRef([...l.ctrls]),f=we.useRef([]),d=M3(n)||0;we.useMemo(()=>{dr(u.current.slice(n,d),M=>{gq(M,r),M.stop(!0)}),u.current.length=n,v(d,n)},[n]),we.useMemo(()=>{v(0,Math.min(d,n))},t);function v(M,B){for(let D=M;D<B;D++){const O=u.current[D]||(u.current[D]=new wq(null,l.flush)),P=i?i(D,O):e[D];P&&(f.current[D]=Mq(P))}}const y=u.current.map((M,B)=>N3(M,f.current[B])),A=we.useContext(Rq),b=M3(A),C=A!==b&&mq(A);vw(()=>{s.current++,l.ctrls=u.current;const{queue:M}=l;M.length&&(l.queue=[],dr(M,B=>B())),dr(u.current,(B,D)=>{r==null||r.add(B),C&&B.start({default:A});const O=f.current[D];O&&(vq(B,O.ref),B.ref?B.queue.push(O):B.start(O))})}),vI(()=>()=>{dr(l.ctrls,M=>M.stop(!0))});const T=y.map(M=>({...M}));return r?[T,r]:T}function Uq(n,e){const t=Kt.fun(n),[[i],r]=Bq(1,t?n:[n],t?[]:e);return t||arguments.length==2?[i,r]:i}var Oq=class extends Sw{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=Q1(...e);const t=this._get(),i=fC(t);yw(this,i.create(t))}advance(n){const e=this._get(),t=this.get();xd(e,t)||(sh(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&I3(this._active)&&oE(this)}_get(){const n=Kt.arr(this.source)?this.source.map(fc):gc(fc(this.source));return this.calc(...n)}_start(){this.idle&&!I3(this._active)&&(this.idle=!1,dr($b(this),n=>{n.done=!1}),vf.skipAnimation?(Zn.batchedUpdates(()=>this.advance()),oE(this)):Kb.start(this))}_attach(){let n=1;dr(gc(this.source),e=>{ah(e)&&H_(e,this),pC(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){dr(gc(this.source),n=>{ah(n)&&qS(n,this)}),this._active.clear(),oE(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=gc(this.source).reduce((e,t)=>Math.max(e,(pC(t)?t.priority:0)+1),0))}};function Lq(n){return n.idle!==!1}function I3(n){return!n.size||Array.from(n).every(Lq)}function oE(n){n.idle||(n.idle=!0,dr($b(n),e=>{e.done=!0}),jS(n,{type:"idle",parent:n}))}vf.assign({createStringInterpolator:pI,to:(n,e)=>new Oq(n,e)});var Pq=["primitive"].concat(Object.keys(iN).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));vf.assign({createStringInterpolator:pI,colors:Uj,frameLoop:"demand"});HX(()=>{Zn.advance()});var Nq=cq(Pq,{applyAnimatedValues:ff}),F3=Nq.animated;const lE=({children:n,delay:e=0,duration:t=8e3})=>{const[i,r]=we.useState(!1);we.useEffect(()=>{const a=setTimeout(()=>r(!0),e);return()=>clearTimeout(a)},[e]);const s=Uq({from:{position:[0,8,-2],opacity:0,rotationX:Math.PI/6,scale:1.5},to:i?{position:[0,-15,-8],opacity:0,rotationX:Math.PI/4,scale:0}:{position:[0,8,-2],opacity:0,rotationX:Math.PI/6,scale:1.5},config:{duration:t,easing:a=>a}});return Gt.jsx(F3.group,{position:s.position,"rotation-x":s.rotationX,scale:s.scale,children:Gt.jsx(F3.mesh,{"material-opacity":s.opacity,children:Gt.jsx(rj,{fontSize:.5,color:"#FFE81F","material-transparent":!0,outlineWidth:.03,outlineColor:"#FFA500",textAlign:"center",maxWidth:8,lineHeight:1.2,children:n})})})},Iq=we.lazy(()=>ZX(()=>Promise.resolve().then(()=>Hq),void 0));function Fq({viewportSize:n,onModelLoad:e}){const{camera:t,scene:i,gl:r}=ol(),s=we.useRef(),a=we.useRef();return we.useEffect(()=>{r.setPixelRatio(Math.min(window.devicePixelRatio,2))},[r]),we.useEffect(()=>{i.background=new jt("#000000"),i.fog=new T_("#000000",.01)},[i]),N_((l,u)=>{a.current&&(a.current.rotation.x+=u*.01,a.current.rotation.y+=u*.01)}),we.useEffect(()=>{if(t){t.aspect=n.width/n.height;const l=1920,u=10,f=Math.max(.8,Math.min(1.5,l/n.width));t.position.set(0,0,u*f),t.lookAt(0,0,0),t.updateProjectionMatrix(),s.current&&s.current.update()}},[n,t]),Gt.jsxs(Gt.Fragment,{children:[Gt.jsx("group",{ref:a,children:Gt.jsx(v3,{radius:100,depth:50,count:1500,factor:10,saturation:.5,fade:!0})}),Gt.jsxs("group",{position:[0,10,5],children:[Gt.jsx(lE,{delay:0,duration:6e3,children:"안녕하세요"}),Gt.jsx(lE,{delay:4e3,duration:6e3,children:"찾아주셔서 감사합니다."}),Gt.jsx(lE,{delay:8e3,duration:6e3,children:"모델링을 클릭하면 상세보기가 가능합니다!"})]}),Gt.jsx("group",{children:Gt.jsx(v3,{radius:120,depth:80,count:500,factor:20,saturation:.8,fade:!0})}),Gt.jsx(JN,{ref:s,enableDamping:!0,dampingFactor:.05,rotateSpeed:.5,zoomSpeed:.7,minDistance:5,maxDistance:50}),Gt.jsx("mesh",{position:[0,-2,0],rotation:[-Math.PI/2,0,0],receiveShadow:!0,onAfterRender:()=>e==null?void 0:e(),children:Gt.jsx(Iq,{scale:20,position:[0,0,0]})})]})}const II="/my-portfolio/assets/planet2-Bc73jjt9.glb",FI="/my-portfolio/assets/portpolio-D4CTRwJB.glb",GI="/my-portfolio/assets/rock-CpsjPMwd.glb",HI="/my-portfolio/assets/my-CorxG3Iw.glb",r_=eW(n=>({isModalOpen:!1,type:null,openModal:()=>n({isModalOpen:!0}),closeModal:()=>n({isModalOpen:!1}),setType:e=>n({type:e})}));function Gq({scale:n=1,position:e=[0,0,0]}){const t=we.useRef(),i=we.useRef(),r=we.useRef(),s=we.useRef(),a=we.useRef(),[l,u]=we.useState(!1),[f,d]=we.useState(!1),{scene:v}=df(II),{scene:y}=df(FI),{scene:A}=df(GI),{scene:b}=df(HI),C=[1.6,.55,1.2],T=[-5.6,-.4,-1],M=5,B=[-1,-.5,1.67],D=[1.5,-1.5,-.2],O=1,P=r_(te=>te.openModal),F=r_(te=>te.setType),V=B[2],G=.1,I=1.2,N=[5,3,5];we.useEffect(()=>{document.body.style.cursor=l||f?"pointer":"auto"},[l,f]),N_(te=>{const se=te.clock.elapsedTime;if(r.current){const ye=te.clock.elapsedTime;r.current.position.z=V+Math.sin(ye*I)*G}(s.current||a.current)&&(s.current.position.x=N[0]+Math.sin(se*.3)*.5,s.current.position.y=N[1]+Math.cos(se*.5)*.3,s.current.position.z=N[2]+Math.sin(se*.4)*.4,s.current.rotation.x=se*.1,s.current.rotation.y=se*.15,s.current.rotation.z=se*.05)});const Q=te=>{te.stopPropagation(),F("portfolio"),P()},$=te=>{te.stopPropagation(),F("my"),P()};return Gt.jsxs("group",{children:[Gt.jsx("group",{ref:s,children:Gt.jsx("primitive",{object:A.clone(),position:[5,3,5],scale:2})}),Gt.jsxs("group",{ref:t,position:e,scale:n,children:[Gt.jsx(Sj,{preset:"sunset",background:!1}),Gt.jsx("ambientLight",{intensity:1.5}),Gt.jsx("directionalLight",{position:[10,10,5],intensity:1,castShadow:!0}),Gt.jsx("primitive",{ref:i,object:v})]}),Gt.jsx("group",{position:C,rotation:T,scale:M,onClick:Q,onPointerOver:te=>{te.stopPropagation(),u(!0)},onPointerOut:te=>{te.stopPropagation(),u(!1)},scale:l?[M*1.05,M*1.05,M*1.05]:[M,M,M],children:Gt.jsx("primitive",{object:y.clone()})}),Gt.jsx("group",{ref:r,position:B,rotation:D,scale:O,onClick:$,onPointerOver:te=>{te.stopPropagation(),d(!0)},onPointerOut:te=>{te.stopPropagation(),d(!1)},scale:f?[O*1.1,O*1.1,O*1.1]:[O,O,O],children:Gt.jsx("primitive",{object:b.clone()})})]})}df.preload(II);df.preload(FI);df.preload(GI);df.preload(HI);const Hq=Object.freeze(Object.defineProperty({__proto__:null,default:Gq},Symbol.toStringTag,{value:"Module"})),zI=we.createContext({});function zq(n){const e=we.useRef(null);return e.current===null&&(e.current=n()),e.current}const bw=typeof window<"u",Vq=bw?we.useLayoutEffect:we.useEffect,Mw=we.createContext(null),VI=we.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function kI(n){return typeof n=="object"&&n!==null}function XI(n){return kI(n)&&"offsetHeight"in n}function kq(n=!0){const e=we.useContext(Mw);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=we.useId();we.useEffect(()=>{if(n)return r(s)},[n]);const a=we.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,a]:[!0]}const CA=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],G3={value:null};function Xq(n,e){let t=new Set,i=new Set,r=!1,s=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},u=0;function f(v){a.has(v)&&(d.schedule(v),n()),u++,v(l)}const d={schedule:(v,y=!1,A=!1)=>{const C=A&&r?t:i;return y&&a.add(v),C.has(v)||C.add(v),v},cancel:v=>{i.delete(v),a.delete(v)},process:v=>{if(l=v,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(f),e&&G3.value&&G3.value.frameloop[e].push(u),u=0,t.clear(),r=!1,s&&(s=!1,d.process(v))}};return d}const Bd={},Wq=40;function WI(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=CA.reduce((D,O)=>(D[O]=Xq(s,e?O:void 0),D),{}),{setup:l,read:u,resolveKeyframes:f,preUpdate:d,update:v,preRender:y,render:A,postRender:b}=a,C=()=>{const D=Bd.useManualTiming?r.timestamp:performance.now();t=!1,Bd.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(D-r.timestamp,Wq),1)),r.timestamp=D,r.isProcessing=!0,l.process(r),u.process(r),f.process(r),d.process(r),v.process(r),y.process(r),A.process(r),b.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(C))},T=()=>{t=!0,i=!0,r.isProcessing||n(C)};return{schedule:CA.reduce((D,O)=>{const P=a[O];return D[O]=(F,V=!1,G=!1)=>(t||T(),P.schedule(F,V,G)),D},{}),cancel:D=>{for(let O=0;O<CA.length;O++)a[CA[O]].cancel(D)},state:r,steps:a}}const vc=n=>n,{schedule:as,cancel:Qp,state:Za,steps:uE}=WI(typeof requestAnimationFrame<"u"?requestAnimationFrame:vc,!0),YI=we.createContext({strict:!1}),H3={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},q0={};for(const n in H3)q0[n]={isEnabled:e=>H3[n].some(t=>!!e[t])};function Yq(n){for(const e in n)q0[e]={...q0[e],...n[e]}}const jq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ZS(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||jq.has(n)}let jI=n=>!ZS(n);function qq(n){n&&(jI=e=>e.startsWith("on")?!ZS(e):n(e))}try{qq(require("@emotion/is-prop-valid").default)}catch{}function Kq(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(jI(r)||t===!0&&ZS(r)||!e&&!ZS(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function Jq(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const tM=we.createContext({});function nM(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function s_(n){return typeof n=="string"||Array.isArray(n)}const Tw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ew=["initial",...Tw];function iM(n){return nM(n.animate)||Ew.some(e=>s_(n[e]))}function qI(n){return!!(iM(n)||n.variants)}function Zq(n,e){if(iM(n)){const{initial:t,animate:i}=n;return{initial:t===!1||s_(t)?t:void 0,animate:s_(i)?i:void 0}}return n.inherit!==!1?e:{}}function Qq(n){const{initial:e,animate:t}=Zq(n,we.useContext(tM));return we.useMemo(()=>({initial:e,animate:t}),[z3(e),z3(t)])}function z3(n){return Array.isArray(n)?n.join(" "):n}const $q=Symbol.for("motionComponentSymbol");function v0(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function eK(n,e,t){return we.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):v0(t)&&(t.current=i))},[e])}const Cw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tK="framerAppearId",KI="data-"+Cw(tK),JI=we.createContext({}),{schedule:ww}=WI(queueMicrotask,!1);function nK(n,e,t,i,r){var C,T;const{visualElement:s}=we.useContext(tM),a=we.useContext(YI),l=we.useContext(Mw),u=we.useContext(VI).reducedMotion,f=we.useRef(null);i=i||a.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:s,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const d=f.current,v=we.useContext(JI);d&&!d.projection&&r&&(d.type==="html"||d.type==="svg")&&iK(f.current,t,r,v);const y=we.useRef(!1);we.useInsertionEffect(()=>{d&&y.current&&d.update(t,l)});const A=t[KI],b=we.useRef(!!A&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,A))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,A)));return Vq(()=>{d&&(y.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),ww.render(d.render),b.current&&d.animationState&&d.animationState.animateChanges())}),we.useEffect(()=>{d&&(!b.current&&d.animationState&&d.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,A)}),b.current=!1))}),d}function iK(n,e,t,i){const{layoutId:r,layout:s,drag:a,dragConstraints:l,layoutScroll:u,layoutRoot:f,layoutCrossfade:d}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:ZI(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||l&&v0(l),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:u,layoutRoot:f})}function ZI(n){if(n)return n.options.allowProjection!==!1?n.projection:ZI(n.parent)}let Rw=()=>{};function rK({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&Yq(n);function s(l,u){let f;const d={...we.useContext(VI),...l,layoutId:sK(l)},{isStatic:v}=d,y=Qq(l),A=i(l,v);if(!v&&bw){aK();const b=oK(d);f=b.MeasureLayout,y.visualElement=nK(r,A,d,e,b.ProjectionNode)}return Gt.jsxs(tM.Provider,{value:y,children:[f&&y.visualElement?Gt.jsx(f,{visualElement:y.visualElement,...d}):null,t(r,l,eK(A,y.visualElement,u),A,v,y.visualElement)]})}s.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const a=we.forwardRef(s);return a[$q]=r,a}function sK({layoutId:n}){const e=we.useContext(zI).id;return e&&n!==void 0?e+"-"+n:n}function aK(n,e){we.useContext(YI).strict}function oK(n){const{drag:e,layout:t}=q0;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const QI=n=>e=>typeof e=="string"&&e.startsWith(n),Dw=QI("--"),lK=QI("var(--"),Bw=n=>lK(n)?uK.test(n.split("/*")[0].trim()):!1,uK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,a_={};function cK(n){for(const e in n)a_[e]=n[e],Dw(e)&&(a_[e].isCSSVariable=!0)}const ay=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oy=new Set(ay);function $I(n,{layout:e,layoutId:t}){return oy.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!a_[n]||n==="opacity")}const eF=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ud=(n,e,t)=>t>e?e:t<n?n:t,ly={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},o_={...ly,transform:n=>Ud(0,1,n)},wA={...ly,default:1},V3={...ly,transform:Math.round},z_=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Fp=z_("deg"),ch=z_("%"),Nn=z_("px"),fK=z_("vh"),hK=z_("vw"),k3={...ch,parse:n=>ch.parse(n)/100,transform:n=>ch.transform(n*100)},dK={rotate:Fp,rotateX:Fp,rotateY:Fp,rotateZ:Fp,scale:wA,scaleX:wA,scaleY:wA,scaleZ:wA,skew:Fp,skewX:Fp,skewY:Fp,distance:Nn,translateX:Nn,translateY:Nn,translateZ:Nn,x:Nn,y:Nn,z:Nn,perspective:Nn,transformPerspective:Nn,opacity:o_,originX:k3,originY:k3,originZ:Nn},Uw={borderWidth:Nn,borderTopWidth:Nn,borderRightWidth:Nn,borderBottomWidth:Nn,borderLeftWidth:Nn,borderRadius:Nn,radius:Nn,borderTopLeftRadius:Nn,borderTopRightRadius:Nn,borderBottomRightRadius:Nn,borderBottomLeftRadius:Nn,width:Nn,maxWidth:Nn,height:Nn,maxHeight:Nn,top:Nn,right:Nn,bottom:Nn,left:Nn,padding:Nn,paddingTop:Nn,paddingRight:Nn,paddingBottom:Nn,paddingLeft:Nn,margin:Nn,marginTop:Nn,marginRight:Nn,marginBottom:Nn,marginLeft:Nn,backgroundPositionX:Nn,backgroundPositionY:Nn,...dK,zIndex:V3,fillOpacity:o_,strokeOpacity:o_,numOctaves:V3},pK={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mK=ay.length;function gK(n,e,t){let i="",r=!0;for(let s=0;s<mK;s++){const a=ay[s],l=n[a];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(a.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||t){const f=eF(l,Uw[a]);if(!u){r=!1;const d=pK[a]||a;i+=`${d}(${f}) `}t&&(e[a]=f)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function Ow(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let a=!1,l=!1;for(const u in e){const f=e[u];if(oy.has(u)){a=!0;continue}else if(Dw(u)){r[u]=f;continue}else{const d=eF(f,Uw[u]);u.startsWith("origin")?(l=!0,s[u]=d):i[u]=d}}if(e.transform||(a||t?i.transform=gK(e,n.transform,t):i.transform&&(i.transform="none")),l){const{originX:u="50%",originY:f="50%",originZ:d=0}=s;i.transformOrigin=`${u} ${f} ${d}`}}const Lw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),Ro=n=>!!(n&&n.getVelocity);function tF(n,e,t){for(const i in e)!Ro(e[i])&&!$I(i,t)&&(n[i]=e[i])}function vK({transformTemplate:n},e){return we.useMemo(()=>{const t=Lw();return Ow(t,e,n),Object.assign({},t.vars,t.style)},[e])}function yK(n,e){const t=n.style||{},i={};return tF(i,t,n),Object.assign(i,vK(n,e)),i}function _K(n,e){const t={},i=yK(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const xK={offset:"stroke-dashoffset",array:"stroke-dasharray"},AK={offset:"strokeDashoffset",array:"strokeDasharray"};function SK(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?xK:AK;n[s.offset]=Nn.transform(-i);const a=Nn.transform(e),l=Nn.transform(t);n[s.array]=`${a} ${l}`}function nF(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:a=0,...l},u,f,d){if(Ow(n,l,f),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:y}=n;v.transform&&(y.transform=v.transform,delete v.transform),(y.transform||v.transformOrigin)&&(y.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),y.transform&&(y.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),r!==void 0&&SK(v,r,s,a,!1)}const iF=()=>({...Lw(),attrs:{}}),rF=n=>typeof n=="string"&&n.toLowerCase()==="svg";function bK(n,e,t,i){const r=we.useMemo(()=>{const s=iF();return nF(s,e,rF(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};tF(s,n.style,n),r.style={...s,...r.style}}return r}const MK=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Pw(n){return typeof n!="string"||n.includes("-")?!1:!!(MK.indexOf(n)>-1||/[A-Z]/u.test(n))}function TK(n=!1){return(t,i,r,{latestValues:s},a)=>{const u=(Pw(t)?bK:_K)(i,s,a,t),f=Kq(i,typeof t=="string",n),d=t!==we.Fragment?{...f,...u,ref:r}:{},{children:v}=i,y=we.useMemo(()=>Ro(v)?v.get():v,[v]);return we.createElement(t,{...d,children:y})}}function X3(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Nw(n,e,t,i){if(typeof e=="function"){const[r,s]=X3(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=X3(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function kA(n){return Ro(n)?n.get():n}function EK({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:CK(t,i,r,n),renderState:e()}}const sF=n=>(e,t)=>{const i=we.useContext(tM),r=we.useContext(Mw),s=()=>EK(n,e,i,r);return t?s():zq(s)};function CK(n,e,t,i){const r={},s=i(n,{});for(const y in s)r[y]=kA(s[y]);let{initial:a,animate:l}=n;const u=iM(n),f=qI(n);e&&f&&!u&&n.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let d=t?t.initial===!1:!1;d=d||a===!1;const v=d?l:a;if(v&&typeof v!="boolean"&&!nM(v)){const y=Array.isArray(v)?v:[v];for(let A=0;A<y.length;A++){const b=Nw(n,y[A]);if(b){const{transitionEnd:C,transition:T,...M}=b;for(const B in M){let D=M[B];if(Array.isArray(D)){const O=d?D.length-1:0;D=D[O]}D!==null&&(r[B]=D)}for(const B in C)r[B]=C[B]}}}return r}function Iw(n,e,t){var s;const{style:i}=n,r={};for(const a in i)(Ro(i[a])||e.style&&Ro(e.style[a])||$I(a,n)||((s=t==null?void 0:t.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(r[a]=i[a]);return r}const wK={useVisualState:sF({scrapeMotionValuesFromProps:Iw,createRenderState:Lw})};function aF(n,e,t){const i=Iw(n,e,t);for(const r in n)if(Ro(n[r])||Ro(e[r])){const s=ay.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const RK={useVisualState:sF({scrapeMotionValuesFromProps:aF,createRenderState:iF})};function DK(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...Pw(i)?RK:wK,preloadedFeatures:n,useRender:TK(r),createVisualElement:e,Component:i};return rK(a)}}function l_(n,e,t){const i=n.getProps();return Nw(i,e,t!==void 0?t:i.custom,n)}const gC=n=>Array.isArray(n);let XA;function BK(){XA=void 0}const Wl={now:()=>(XA===void 0&&Wl.set(Za.isProcessing||Bd.useManualTiming?Za.timestamp:performance.now()),XA),set:n=>{XA=n,queueMicrotask(BK)}};function Fw(n,e){n.indexOf(e)===-1&&n.push(e)}function Gw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Hw=class{constructor(){this.subscriptions=[]}add(e){return Fw(this.subscriptions,e),()=>Gw(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}};function oF(n,e){return e?n*(1e3/e):0}const W3=30,UK=n=>!isNaN(parseFloat(n));let OK=class{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{var a,l;const s=Wl.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();r&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Wl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=UK(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Hw);const i=this.events[e].add(t);return e==="change"?()=>{i(),as.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Wl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>W3)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,W3);return oF(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function K0(n,e){return new OK(n,e)}function LK(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,K0(t))}function PK(n){return gC(n)?n[n.length-1]||0:n}function NK(n,e){const t=l_(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const a in s){const l=PK(s[a]);LK(n,a,l)}}function IK(n){return!!(Ro(n)&&n.add)}function vC(n,e){const t=n.getValue("willChange");if(IK(t))return t.add(e);if(!t&&Bd.WillChange){const i=new Bd.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function lF(n){return n.props[KI]}const FK=n=>n!==null;function GK(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(FK),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[s]}const HK={type:"spring",stiffness:500,damping:25,restSpeed:10},zK=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),VK={type:"keyframes",duration:.8},kK={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},XK=(n,{keyframes:e})=>e.length>2?VK:oy.has(n)?n.startsWith("scale")?zK(e[1]):HK:kK;function WK({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:l,from:u,elapsed:f,...d}){return!!Object.keys(d).length}function zw(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const fh=n=>n*1e3,hh=n=>n/1e3,R1=n=>Math.round(n*1e5)/1e5,Vw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function YK(n){return n==null}const jK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kw=(n,e)=>t=>!!(typeof t=="string"&&jK.test(t)&&t.startsWith(n)||e&&!YK(t)&&Object.prototype.hasOwnProperty.call(t,e)),uF=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,a,l]=i.match(Vw);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},qK=n=>Ud(0,255,n),cE={...ly,transform:n=>Math.round(qK(n))},Og={test:kw("rgb","red"),parse:uF("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+cE.transform(n)+", "+cE.transform(e)+", "+cE.transform(t)+", "+R1(o_.transform(i))+")"};function KK(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const yC={test:kw("#"),parse:KK,transform:Og.transform},y0={test:kw("hsl","hue"),parse:uF("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+ch.transform(R1(e))+", "+ch.transform(R1(t))+", "+R1(o_.transform(i))+")"},Co={test:n=>Og.test(n)||yC.test(n)||y0.test(n),parse:n=>Og.test(n)?Og.parse(n):y0.test(n)?y0.parse(n):yC.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Og.transform(n):y0.transform(n)},JK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ZK(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Vw))==null?void 0:e.length)||0)+(((t=n.match(JK))==null?void 0:t.length)||0)>0}const cF="number",fF="color",QK="var",$K="var(",Y3="${}",eJ=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function u_(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const l=e.replace(eJ,u=>(Co.test(u)?(i.color.push(s),r.push(fF),t.push(Co.parse(u))):u.startsWith($K)?(i.var.push(s),r.push(QK),t.push(u)):(i.number.push(s),r.push(cF),t.push(parseFloat(u))),++s,Y3)).split(Y3);return{values:t,split:l,indexes:i,types:r}}function hF(n){return u_(n).values}function dF(n){const{split:e,types:t}=u_(n),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const l=t[a];l===cF?s+=R1(r[a]):l===fF?s+=Co.transform(r[a]):s+=r[a]}return s}}const tJ=n=>typeof n=="number"?0:n;function nJ(n){const e=hF(n);return dF(n)(e.map(tJ))}const $p={test:ZK,parse:hF,createTransformer:dF,getAnimatableNone:nJ};function fE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function iJ({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,a=0;if(!e)r=s=a=t;else{const l=t<.5?t*(1+e):t+e-t*e,u=2*t-l;r=fE(u,l,n+1/3),s=fE(u,l,n),a=fE(u,l,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function QS(n,e){return t=>t>0?e:n}const is=(n,e,t)=>n+(e-n)*t,hE=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},rJ=[yC,Og,y0],sJ=n=>rJ.find(e=>e.test(n));function j3(n){const e=sJ(n);if(!e)return!1;let t=e.parse(n);return e===y0&&(t=iJ(t)),t}const q3=(n,e)=>{const t=j3(n),i=j3(e);if(!t||!i)return QS(n,e);const r={...t};return s=>(r.red=hE(t.red,i.red,s),r.green=hE(t.green,i.green,s),r.blue=hE(t.blue,i.blue,s),r.alpha=is(t.alpha,i.alpha,s),Og.transform(r))},_C=new Set(["none","hidden"]);function aJ(n,e){return _C.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}const oJ=(n,e)=>t=>e(n(t)),V_=(...n)=>n.reduce(oJ);function lJ(n,e){return t=>is(n,e,t)}function Xw(n){return typeof n=="number"?lJ:typeof n=="string"?Bw(n)?QS:Co.test(n)?q3:fJ:Array.isArray(n)?pF:typeof n=="object"?Co.test(n)?q3:uJ:QS}function pF(n,e){const t=[...n],i=t.length,r=n.map((s,a)=>Xw(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)t[a]=r[a](s);return t}}function uJ(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=Xw(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function cJ(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],a=n.indexes[s][i[s]],l=n.values[a]??0;t[r]=l,i[s]++}return t}const fJ=(n,e)=>{const t=$p.createTransformer(e),i=u_(n),r=u_(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?_C.has(n)&&!r.values.length||_C.has(e)&&!i.values.length?aJ(n,e):V_(pF(cJ(i,r),r.values),t):QS(n,e)};function mF(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?is(n,e,t):Xw(n)(n,e)}const hJ=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>as.update(e,t),stop:()=>Qp(e),now:()=>Za.isProcessing?Za.timestamp:Wl.now()}},gF=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(s/(r-1))+", ";return`linear(${i.substring(0,i.length-2)})`},$S=2e4;function Ww(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<$S;)e+=t,i=n.next(e);return e>=$S?1/0:e}function dJ(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(Ww(i),$S);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:hh(r)}}const pJ=5;function vF(n,e,t){const i=Math.max(e-pJ,0);return oF(t-n(i),e-i)}const xs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},K3=.001;function mJ({duration:n=xs.duration,bounce:e=xs.bounce,velocity:t=xs.velocity,mass:i=xs.mass}){let r,s,a=1-e;a=Ud(xs.minDamping,xs.maxDamping,a),n=Ud(xs.minDuration,xs.maxDuration,hh(n)),a<1?(r=f=>{const d=f*a,v=d*n,y=d-t,A=xC(f,a),b=Math.exp(-v);return K3-y/A*b},s=f=>{const v=f*a*n,y=v*t+t,A=Math.pow(a,2)*Math.pow(f,2)*n,b=Math.exp(-v),C=xC(Math.pow(f,2),a);return(-r(f)+K3>0?-1:1)*((y-A)*b)/C}):(r=f=>{const d=Math.exp(-f*n),v=(f-t)*n+1;return-.001+d*v},s=f=>{const d=Math.exp(-f*n),v=(t-f)*(n*n);return d*v});const l=5/n,u=vJ(r,s,l);if(n=fh(n),isNaN(u))return{stiffness:xs.stiffness,damping:xs.damping,duration:n};{const f=Math.pow(u,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:n}}}const gJ=12;function vJ(n,e,t){let i=t;for(let r=1;r<gJ;r++)i=i-n(i)/e(i);return i}function xC(n,e){return n*Math.sqrt(1-e*e)}const yJ=["duration","bounce"],_J=["stiffness","damping","mass"];function J3(n,e){return e.some(t=>n[t]!==void 0)}function xJ(n){let e={velocity:xs.velocity,stiffness:xs.stiffness,damping:xs.damping,mass:xs.mass,isResolvedFromDuration:!1,...n};if(!J3(n,_J)&&J3(n,yJ))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Ud(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:xs.mass,stiffness:r,damping:s}}else{const t=mJ(n);e={...e,...t,mass:xs.mass},e.isResolvedFromDuration=!0}return e}function eb(n=xs.visualDuration,e=xs.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:f,mass:d,duration:v,velocity:y,isResolvedFromDuration:A}=xJ({...t,velocity:-hh(t.velocity||0)}),b=y||0,C=f/(2*Math.sqrt(u*d)),T=a-s,M=hh(Math.sqrt(u/d)),B=Math.abs(T)<5;i||(i=B?xs.restSpeed.granular:xs.restSpeed.default),r||(r=B?xs.restDelta.granular:xs.restDelta.default);let D;if(C<1){const P=xC(M,C);D=F=>{const V=Math.exp(-C*M*F);return a-V*((b+C*M*T)/P*Math.sin(P*F)+T*Math.cos(P*F))}}else if(C===1)D=P=>a-Math.exp(-M*P)*(T+(b+M*T)*P);else{const P=M*Math.sqrt(C*C-1);D=F=>{const V=Math.exp(-C*M*F),G=Math.min(P*F,300);return a-V*((b+C*M*T)*Math.sinh(G)+P*T*Math.cosh(G))/P}}const O={calculatedDuration:A&&v||null,next:P=>{const F=D(P);if(A)l.done=P>=v;else{let V=P===0?b:0;C<1&&(V=P===0?fh(b):vF(D,P,F));const G=Math.abs(V)<=i,I=Math.abs(a-F)<=r;l.done=G&&I}return l.value=l.done?a:F,l},toString:()=>{const P=Math.min(Ww(O),$S),F=gF(V=>O.next(P*V).value,P,30);return P+"ms "+F},toTransition:()=>{}};return O}eb.applyToOptions=n=>{const e=dJ(n,100,eb);return n.ease=e.ease,n.duration=fh(e.duration),n.type="keyframes",n};function AC({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:u,restDelta:f=.5,restSpeed:d}){const v=n[0],y={done:!1,value:v},A=G=>l!==void 0&&G<l||u!==void 0&&G>u,b=G=>l===void 0?u:u===void 0||Math.abs(l-G)<Math.abs(u-G)?l:u;let C=t*e;const T=v+C,M=a===void 0?T:a(T);M!==T&&(C=M-v);const B=G=>-C*Math.exp(-G/i),D=G=>M+B(G),O=G=>{const I=B(G),N=D(G);y.done=Math.abs(I)<=f,y.value=y.done?M:N};let P,F;const V=G=>{A(y.value)&&(P=G,F=eb({keyframes:[y.value,b(y.value)],velocity:vF(D,G,y.value),damping:r,stiffness:s,restDelta:f,restSpeed:d}))};return V(0),{calculatedDuration:null,next:G=>{let I=!1;return!F&&P===void 0&&(I=!0,O(G),V(G)),P!==void 0&&G>=P?F.next(G-P):(!I&&O(G),y)}}}const c_=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};function AJ(n,e,t){const i=[],r=t||Bd.mix||mF,s=n.length-1;for(let a=0;a<s;a++){let l=r(n[a],n[a+1]);if(e){const u=Array.isArray(e)?e[a]||vc:e;l=V_(u,l)}i.push(l)}return i}function SJ(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(Rw(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const l=AJ(e,i,r),u=l.length,f=d=>{if(a&&d<n[0])return e[0];let v=0;if(u>1)for(;v<n.length-2&&!(d<n[v+1]);v++);const y=c_(n[v],n[v+1],d);return l[v](y)};return t?d=>f(Ud(n[0],n[s-1],d)):f}function bJ(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=c_(0,e,i);n.push(is(t,1,r))}}function MJ(n){const e=[0];return bJ(e,n.length-1),e}function TJ(n,e){return n.map(t=>t*e)}const yF=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,EJ=1e-7,CJ=12;function wJ(n,e,t,i,r){let s,a,l=0;do a=e+(t-e)/2,s=yF(a,i,r)-n,s>0?t=a:e=a;while(Math.abs(s)>EJ&&++l<CJ);return a}function k_(n,e,t,i){if(n===e&&t===i)return vc;const r=s=>wJ(s,0,1,n,t);return s=>s===0||s===1?s:yF(r(s),e,i)}const RJ=k_(.42,0,1,1),DJ=k_(0,0,.58,1),_F=k_(.42,0,.58,1),BJ=n=>Array.isArray(n)&&typeof n[0]!="number",xF=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,AF=n=>e=>1-n(1-e),SF=k_(.33,1.53,.69,.99),Yw=AF(SF),bF=xF(Yw),MF=n=>(n*=2)<1?.5*Yw(n):.5*(2-Math.pow(2,-10*(n-1))),jw=n=>1-Math.sin(Math.acos(n)),TF=AF(jw),EF=xF(jw),CF=n=>Array.isArray(n)&&typeof n[0]=="number",UJ={linear:vc,easeIn:RJ,easeInOut:_F,easeOut:DJ,circIn:jw,circInOut:EF,circOut:TF,backIn:Yw,backInOut:bF,backOut:SF,anticipate:MF},OJ=n=>typeof n=="string",Z3=n=>{if(CF(n)){Rw(n.length===4);const[e,t,i,r]=n;return k_(e,t,i,r)}else if(OJ(n))return UJ[n];return n};function LJ(n,e){return n.map(()=>e||_F).splice(0,n.length-1)}function D1({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=BJ(i)?i.map(Z3):Z3(i),s={done:!1,value:e[0]},a=TJ(t&&t.length===e.length?t:MJ(e),n),l=SJ(a,e,{ease:Array.isArray(r)?r:LJ(e,r)});return{calculatedDuration:n,next:u=>(s.value=l(u),s.done=u>=n,s)}}const PJ=n=>n!==null;function qw(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(PJ),l=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!l||i===void 0?s[l]:i}const NJ={decay:AC,inertia:AC,tween:D1,keyframes:D1,spring:eb};function wF(n){typeof n.type=="string"&&(n.type=NJ[n.type])}let Kw=class{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}};const IJ=n=>n/100;let Jw=class extends Kw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,r;const{motionValue:t}=this.options;t&&t.updatedAt!==Wl.now()&&this.tick(Wl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(i=this.options).onStop)==null||r.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;wF(e);const{type:t=D1,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=e;let{keyframes:l}=e;const u=t||D1;u!==D1&&typeof l[0]!="number"&&(this.mixKeyframes=V_(IJ,mF(l[0],l[1])),l=[0,100]);const f=u({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=Ww(f));const{calculatedDuration:d}=f;this.calculatedDuration=d,this.resolvedDuration=d+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:d,repeat:v,repeatType:y,repeatDelay:A,type:b,onUpdate:C,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const M=this.currentTime-f*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?M<0:M>r;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let D=this.currentTime,O=i;if(v){const G=Math.min(this.currentTime,r)/l;let I=Math.floor(G),N=G%1;!N&&G>=1&&(N=1),N===1&&I--,I=Math.min(I,v+1),!!(I%2)&&(y==="reverse"?(N=1-N,A&&(N-=A/l)):y==="mirror"&&(O=a)),D=Ud(0,1,N)*l}const P=B?{done:!1,value:d[0]}:O.next(D);s&&(P.value=s(P.value));let{done:F}=P;!B&&u!==null&&(F=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return V&&b!==AC&&(P.value=qw(d,this.options,T,this.speed)),C&&C(P.value),V&&this.finish(),P}then(e,t){return this.finished.then(e,t)}get duration(){return hh(this.calculatedDuration)}get time(){return hh(this.currentTime)}set time(e){var t;e=fh(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Wl.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=hh(this.currentTime))}play(){var r,s;if(this.isStopped)return;const{driver:e=hJ,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(r=this.options).onPlay)==null||s.call(r);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}};function FJ(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Lg=n=>n*180/Math.PI,SC=n=>{const e=Lg(Math.atan2(n[1],n[0]));return bC(e)},GJ={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:SC,rotateZ:SC,skewX:n=>Lg(Math.atan(n[1])),skewY:n=>Lg(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},bC=n=>(n=n%360,n<0&&(n+=360),n),Q3=SC,$3=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),eU=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),HJ={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$3,scaleY:eU,scale:n=>($3(n)+eU(n))/2,rotateX:n=>bC(Lg(Math.atan2(n[6],n[5]))),rotateY:n=>bC(Lg(Math.atan2(-n[2],n[0]))),rotateZ:Q3,rotate:Q3,skewX:n=>Lg(Math.atan(n[4])),skewY:n=>Lg(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function MC(n){return n.includes("scale")?1:0}function TC(n,e){if(!n||n==="none")return MC(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=HJ,r=t;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=GJ,r=l}if(!r)return MC(e);const s=i[e],a=r[1].split(",").map(VJ);return typeof s=="function"?s(a):a[s]}const zJ=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return TC(t,e)};function VJ(n){return parseFloat(n.trim())}const tU=n=>n===ly||n===Nn,kJ=new Set(["x","y","z"]),XJ=ay.filter(n=>!kJ.has(n));function WJ(n){const e=[];return XJ.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const zg={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>TC(e,"x"),y:(n,{transform:e})=>TC(e,"y")};zg.translateX=zg.x;zg.translateY=zg.y;const Vg=new Set;let EC=!1,CC=!1,wC=!1;function RF(){if(CC){const n=Array.from(Vg).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=WJ(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,a])=>{var l;(l=i.getValue(s))==null||l.set(a)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}CC=!1,EC=!1,Vg.forEach(n=>n.complete(wC)),Vg.clear()}function DF(){Vg.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(CC=!0)})}function YJ(){wC=!0,DF(),RF(),wC=!1}let Zw=class{constructor(e,t,i,r,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Vg.add(this),EC||(EC=!0,as.read(DF),as.resolveKeyframes(RF))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r==null?void 0:r.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&s===void 0&&r.set(e[0])}FJ(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Vg.delete(this)}cancel(){this.state==="scheduled"&&(Vg.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}};const jJ=n=>n.startsWith("--");function qJ(n,e,t){jJ(e)?n.style.setProperty(e,t):n.style[e]=t}function Qw(n){let e;return()=>(e===void 0&&(e=n()),e)}const KJ=Qw(()=>window.ScrollTimeline!==void 0),JJ={};function ZJ(n,e){const t=Qw(n);return()=>JJ[e]??t()}const BF=ZJ(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),c1=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,nU={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:c1([0,.65,.55,1]),circOut:c1([.55,0,1,.45]),backIn:c1([.31,.01,.66,-.59]),backOut:c1([.33,1.53,.69,.99])};function UF(n,e){if(n)return typeof n=="function"?BF()?gF(n,e):"ease-out":CF(n)?c1(n):Array.isArray(n)?n.map(t=>UF(t,e)||nU.easeOut):nU[n]}function QJ(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:l="easeOut",times:u}={},f=void 0){const d={[e]:t};u&&(d.offset=u);const v=UF(l,r);Array.isArray(v)&&(d.easing=v);const y={delay:i,duration:r,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),n.animate(d,y)}function OF(n){return typeof n=="function"&&"applyToOptions"in n}function $J({type:n,...e}){return OF(n)&&BF()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}let eZ=class extends Kw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,Rw(typeof e.type!="string");const f=$J(e);this.animation=QJ(t,i,r,f,s),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=qw(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):qJ(t,i,d),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return hh(Number(e))}get time(){return hh(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=fh(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&KJ()?(this.animation.timeline=e,vc):t(this)}};const LF={anticipate:MF,backInOut:bF,circInOut:EF};function tZ(n){return n in LF}function nZ(n){typeof n.ease=="string"&&tZ(n.ease)&&(n.ease=LF[n.ease])}const iU=10;let iZ=class extends eZ{constructor(e){nZ(e),wF(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new Jw({...a,autoplay:!1}),u=fh(this.finishedTime??this.time);t.setWithVelocity(l.sample(u-iU).value,l.sample(u).value,iU),l.stop()}};const rU=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&($p.test(n)||n==="0")&&!n.startsWith("url("));function rZ(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function sZ(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=rU(r,e),l=rU(s,e);return!a||!l?!1:rZ(n)||(t==="spring"||OF(t))&&i}const aZ=new Set(["opacity","clipPath","filter","transform"]),oZ=Qw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function lZ(n){var f;const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:a}=n;if(!XI((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return oZ()&&t&&aZ.has(t)&&(t!=="transform"||!u)&&!l&&!i&&r!=="mirror"&&s!==0&&a!=="inertia"}const uZ=40;let cZ=class extends Kw{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",keyframes:l,name:u,motionValue:f,element:d,...v}){var b;super(),this.stop=()=>{var C,T;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=Wl.now();const y={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:a,name:u,motionValue:f,element:d,...v},A=(d==null?void 0:d.KeyframeResolver)||Zw;this.keyframeResolver=new A(l,(C,T,M)=>this.onKeyframesResolved(C,T,y,!M),u,f,d),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:a,velocity:l,delay:u,isHandoff:f,onUpdate:d}=i;this.resolvedAt=Wl.now(),sZ(e,s,a,l)||((Bd.instantAnimations||!u)&&(d==null||d(qw(e,i,t))),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const y={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>uZ?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},A=!f&&lZ(y)?new iZ({...y,element:y.motionValue.owner.current}):new Jw(y);A.finished.then(()=>this.notifyFinished()).catch(vc),this.pendingTimeline&&(this.stopTimeline=A.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=A}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),YJ()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}};const $w=(n,e,t,i={},r,s)=>a=>{const l=zw(i,n)||{},u=l.delay||i.delay||0;let{elapsed:f=0}=i;f=f-fh(u);const d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:y=>{e.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:n,motionValue:e,element:s?void 0:r};WK(l)||Object.assign(d,XK(n,d)),d.duration&&(d.duration=fh(d.duration)),d.repeatDelay&&(d.repeatDelay=fh(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let v=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(v=!0)),(Bd.instantAnimations||Bd.skipAnimations)&&(v=!0,d.duration=0,d.delay=0),d.allowFlatten=!l.type&&!l.ease,v&&!s&&e.get()!==void 0){const y=GK(d.keyframes,l);if(y!==void 0){as.update(()=>{d.onUpdate(y),d.onComplete()});return}}return l.isSync?new Jw(d):new cZ(d)},PF=new Set(["width","height","top","left","right","bottom",...ay]);function fZ({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function NF(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(s=i);const u=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const d in l){const v=n.getValue(d,n.latestValues[d]??null),y=l[d];if(y===void 0||f&&fZ(f,d))continue;const A={delay:t,...zw(s||{},d)},b=v.get();if(b!==void 0&&!v.isAnimating&&!Array.isArray(y)&&y===b&&!A.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const M=lF(n);if(M){const B=window.MotionHandoffAnimation(M,d,as);B!==null&&(A.startTime=B,C=!0)}}vC(n,d),v.start($w(d,v,y,n.shouldReduceMotion&&PF.has(d)?{type:!1}:A,n,C));const T=v.animation;T&&u.push(T)}return a&&Promise.all(u).then(()=>{as.update(()=>{a&&NK(n,a)})}),u}function RC(n,e,t={}){var u;const i=l_(n,e,t.type==="exit"?(u=n.presenceContext)==null?void 0:u.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(NF(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:v,staggerDirection:y}=r;return hZ(n,e,d+f,v,y,t)}:()=>Promise.resolve(),{when:l}=r;if(l){const[f,d]=l==="beforeChildren"?[s,a]:[a,s];return f().then(()=>d())}else return Promise.all([s(),a(t.delay)])}function hZ(n,e,t=0,i=0,r=1,s){const a=[],l=(n.variantChildren.size-1)*i,u=r===1?(f=0)=>f*i:(f=0)=>l-f*i;return Array.from(n.variantChildren).sort(dZ).forEach((f,d)=>{f.notify("AnimationStart",e),a.push(RC(f,e,{...s,delay:t+u(d)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function dZ(n,e){return n.sortNodePosition(e)}function pZ(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>RC(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=RC(n,e,t);else{const r=typeof e=="function"?l_(n,e,t.custom):e;i=Promise.all(NF(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function IF(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const mZ=Ew.length;function FF(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?FF(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<mZ;t++){const i=Ew[t],r=n.props[i];(s_(r)||r===!1)&&(e[i]=r)}return e}const gZ=[...Tw].reverse(),vZ=Tw.length;function yZ(n){return e=>Promise.all(e.map(({animation:t,options:i})=>pZ(n,t,i)))}function _Z(n){let e=yZ(n),t=sU(),i=!0;const r=u=>(f,d)=>{var y;const v=l_(n,d,u==="exit"?(y=n.presenceContext)==null?void 0:y.custom:void 0);if(v){const{transition:A,transitionEnd:b,...C}=v;f={...f,...C,...b}}return f};function s(u){e=u(n)}function a(u){const{props:f}=n,d=FF(n.parent)||{},v=[],y=new Set;let A={},b=1/0;for(let T=0;T<vZ;T++){const M=gZ[T],B=t[M],D=f[M]!==void 0?f[M]:d[M],O=s_(D),P=M===u?B.isActive:null;P===!1&&(b=T);let F=D===d[M]&&D!==f[M]&&O;if(F&&i&&n.manuallyAnimateOnMount&&(F=!1),B.protectedKeys={...A},!B.isActive&&P===null||!D&&!B.prevProp||nM(D)||typeof D=="boolean")continue;const V=xZ(B.prevProp,D);let G=V||M===u&&B.isActive&&!F&&O||T>b&&O,I=!1;const N=Array.isArray(D)?D:[D];let Q=N.reduce(r(M),{});P===!1&&(Q={});const{prevResolvedValues:$={}}=B,te={...$,...Q},se=ee=>{G=!0,y.has(ee)&&(I=!0,y.delete(ee)),B.needsAnimating[ee]=!0;const ne=n.getValue(ee);ne&&(ne.liveStyle=!1)};for(const ee in te){const ne=Q[ee],de=$[ee];if(A.hasOwnProperty(ee))continue;let X=!1;gC(ne)&&gC(de)?X=!IF(ne,de):X=ne!==de,X?ne!=null?se(ee):y.add(ee):ne!==void 0&&y.has(ee)?se(ee):B.protectedKeys[ee]=!0}B.prevProp=D,B.prevResolvedValues=Q,B.isActive&&(A={...A,...Q}),i&&n.blockInitialAnimation&&(G=!1),G&&(!(F&&V)||I)&&v.push(...N.map(ee=>({animation:ee,options:{type:M}})))}if(y.size){const T={};if(typeof f.initial!="boolean"){const M=l_(n,Array.isArray(f.initial)?f.initial[0]:f.initial);M&&M.transition&&(T.transition=M.transition)}y.forEach(M=>{const B=n.getBaseTarget(M),D=n.getValue(M);D&&(D.liveStyle=!0),T[M]=B??null}),v.push({animation:T})}let C=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(C=!1),i=!1,C?e(v):Promise.resolve()}function l(u,f){var v;if(t[u].isActive===f)return Promise.resolve();(v=n.variantChildren)==null||v.forEach(y=>{var A;return(A=y.animationState)==null?void 0:A.setActive(u,f)}),t[u].isActive=f;const d=a(u);for(const y in t)t[y].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=sU(),i=!0}}}function xZ(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!IF(e,n):!1}function mg(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function sU(){return{animate:mg(!0),whileInView:mg(),whileHover:mg(),whileTap:mg(),whileDrag:mg(),whileFocus:mg(),exit:mg()}}let sm=class{constructor(e){this.isMounted=!1,this.node=e}update(){}},AZ=class extends sm{constructor(e){super(e),e.animationState||(e.animationState=_Z(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();nM(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}},SZ=0,bZ=class extends sm{constructor(){super(...arguments),this.id=SZ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}};const MZ={animation:{Feature:AZ},exit:{Feature:bZ}};function f_(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const eR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function X_(n){return{point:{x:n.pageX,y:n.pageY}}}const TZ=n=>e=>eR(e)&&n(e,X_(e));function B1(n,e,t,i){return f_(n,e,TZ(t),i)}function GF({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function EZ({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function CZ(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}const HF=1e-4,wZ=1-HF,RZ=1+HF,zF=.01,DZ=0-zF,BZ=0+zF;function cl(n){return n.max-n.min}function UZ(n,e,t){return Math.abs(n-e)<=t}function aU(n,e,t,i=.5){n.origin=i,n.originPoint=is(e.min,e.max,n.origin),n.scale=cl(t)/cl(e),n.translate=is(t.min,t.max,n.origin)-n.originPoint,(n.scale>=wZ&&n.scale<=RZ||isNaN(n.scale))&&(n.scale=1),(n.translate>=DZ&&n.translate<=BZ||isNaN(n.translate))&&(n.translate=0)}function U1(n,e,t,i){aU(n.x,e.x,t.x,i?i.originX:void 0),aU(n.y,e.y,t.y,i?i.originY:void 0)}function oU(n,e,t){n.min=t.min+e.min,n.max=n.min+cl(e)}function OZ(n,e,t){oU(n.x,e.x,t.x),oU(n.y,e.y,t.y)}function lU(n,e,t){n.min=e.min-t.min,n.max=n.min+cl(e)}function O1(n,e,t){lU(n.x,e.x,t.x),lU(n.y,e.y,t.y)}const uU=()=>({translate:0,scale:1,origin:0,originPoint:0}),_0=()=>({x:uU(),y:uU()}),cU=()=>({min:0,max:0}),Ps=()=>({x:cU(),y:cU()});function lc(n){return[n("x"),n("y")]}function dE(n){return n===void 0||n===1}function DC({scale:n,scaleX:e,scaleY:t}){return!dE(n)||!dE(e)||!dE(t)}function Ag(n){return DC(n)||VF(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function VF(n){return fU(n.x)||fU(n.y)}function fU(n){return n&&n!=="0%"}function tb(n,e,t){const i=n-t,r=e*i;return t+r}function hU(n,e,t,i,r){return r!==void 0&&(n=tb(n,r,i)),tb(n,t,i)+e}function BC(n,e=0,t=1,i,r){n.min=hU(n.min,e,t,i,r),n.max=hU(n.max,e,t,i,r)}function kF(n,{x:e,y:t}){BC(n.x,e.translate,e.scale,e.originPoint),BC(n.y,t.translate,t.scale,t.originPoint)}const dU=.999999999999,pU=1.0000000000001;function LZ(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,a;for(let l=0;l<r;l++){s=t[l],a=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&A0(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,kF(n,a)),i&&Ag(s.latestValues)&&A0(n,s.latestValues))}e.x<pU&&e.x>dU&&(e.x=1),e.y<pU&&e.y>dU&&(e.y=1)}function x0(n,e){n.min=n.min+e,n.max=n.max+e}function mU(n,e,t,i,r=.5){const s=is(n.min,n.max,r);BC(n,e,t,s,i)}function A0(n,e){mU(n.x,e.x,e.scaleX,e.scale,e.originX),mU(n.y,e.y,e.scaleY,e.scale,e.originY)}function XF(n,e){return GF(CZ(n.getBoundingClientRect(),e))}function PZ(n,e,t){const i=XF(n,t),{scroll:r}=e;return r&&(x0(i.x,r.offset.x),x0(i.y,r.offset.y)),i}const WF=({current:n})=>n?n.ownerDocument.defaultView:null,gU=(n,e)=>Math.abs(n-e);function NZ(n,e){const t=gU(n.x,e.x),i=gU(n.y,e.y);return Math.sqrt(t**2+i**2)}let YF=class{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=mE(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,A=NZ(v.offset,{x:0,y:0})>=3;if(!y&&!A)return;const{point:b}=v,{timestamp:C}=Za;this.history.push({...b,timestamp:C});const{onStart:T,onMove:M}=this.handlers;y||(T&&T(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=pE(y,this.transformPagePoint),as.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:A,onSessionEnd:b,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=mE(v.type==="pointercancel"?this.lastMoveEventInfo:pE(y,this.transformPagePoint),this.history);this.startEvent&&A&&A(v,T),b&&b(v,T)},!eR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const a=X_(e),l=pE(a,this.transformPagePoint),{point:u}=l,{timestamp:f}=Za;this.history=[{...u,timestamp:f}];const{onSessionStart:d}=t;d&&d(e,mE(l,this.history)),this.removeListeners=V_(B1(this.contextWindow,"pointermove",this.handlePointerMove),B1(this.contextWindow,"pointerup",this.handlePointerUp),B1(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Qp(this.updatePoint)}};function pE(n,e){return e?{point:e(n.point)}:n}function vU(n,e){return{x:n.x-e.x,y:n.y-e.y}}function mE({point:n},e){return{point:n,delta:vU(n,jF(e)),offset:vU(n,IZ(e)),velocity:FZ(e,.1)}}function IZ(n){return n[0]}function jF(n){return n[n.length-1]}function FZ(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=jF(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>fh(e)));)t--;if(!i)return{x:0,y:0};const s=hh(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function GZ(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?is(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?is(t,n,i.max):Math.min(n,t)),n}function yU(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function HZ(n,{top:e,left:t,bottom:i,right:r}){return{x:yU(n.x,t,r),y:yU(n.y,e,i)}}function _U(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function zZ(n,e){return{x:_U(n.x,e.x),y:_U(n.y,e.y)}}function VZ(n,e){let t=.5;const i=cl(n),r=cl(e);return r>i?t=c_(e.min,e.max-i,n.min):i>r&&(t=c_(n.min,n.max-r,e.min)),Ud(0,1,t)}function kZ(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const UC=.35;function XZ(n=UC){return n===!1?n=0:n===!0&&(n=UC),{x:xU(n,"left","right"),y:xU(n,"top","bottom")}}function xU(n,e,t){return{min:AU(n,e),max:AU(n,t)}}function AU(n,e){return typeof n=="number"?n:n[e]||0}const af={x:!1,y:!1};function qF(){return af.x||af.y}function WZ(n){return n==="x"||n==="y"?af[n]?null:(af[n]=!0,()=>{af[n]=!1}):af.x||af.y?null:(af.x=af.y=!0,()=>{af.x=af.y=!1})}const YZ=new WeakMap;let jZ=class{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ps(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(X_(d).point)},s=(d,v)=>{const{drag:y,dragPropagation:A,onDragStart:b}=this.getProps();if(y&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=WZ(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lc(T=>{let M=this.getAxisMotionValue(T).get()||0;if(ch.test(M)){const{projection:B}=this.visualElement;if(B&&B.layout){const D=B.layout.layoutBox[T];D&&(M=cl(D)*(parseFloat(M)/100))}}this.originPoint[T]=M}),b&&as.postRender(()=>b(d,v)),vC(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},a=(d,v)=>{const{dragPropagation:y,dragDirectionLock:A,onDirectionLock:b,onDrag:C}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:T}=v;if(A&&this.currentDirection===null){this.currentDirection=qZ(T),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",v.point,T),this.updateAxis("y",v.point,T),this.visualElement.render(),C&&C(d,v)},l=(d,v)=>this.stop(d,v),u=()=>lc(d=>{var v;return this.getAnimationState(d)==="paused"&&((v=this.getAxisMotionValue(d).animation)==null?void 0:v.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new YF(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:WF(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&as.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!RA(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=GZ(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,r=this.constraints;e&&v0(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=HZ(i.layoutBox,e):this.constraints=!1,this.elastic=XZ(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&lc(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=kZ(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!v0(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=PZ(i,r.root,this.visualElement.getTransformPagePoint());let a=zZ(r.layout.layoutBox,s);if(t){const l=t(EZ(a));this.hasMutatedConstraints=!!l,l&&(a=GF(l))}return a}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},f=lc(d=>{if(!RA(d,t,this.currentDirection))return;let v=u&&u[d]||{};a&&(v={min:0,max:0});const y=r?200:1e6,A=r?40:1e7,b={type:"inertia",velocity:i?e[d]:0,bounceStiffness:y,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...s,...v};return this.startAxisValueAnimation(d,b)});return Promise.all(f).then(l)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return vC(this.visualElement,e),i.start($w(e,i,0,t,this.visualElement,!1))}stopAnimation(){lc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){lc(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){lc(t=>{const{drag:i}=this.getProps();if(!RA(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[t];s.set(e[t]-is(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!v0(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};lc(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const u=l.get();r[a]=VZ({min:u,max:u},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),lc(a=>{if(!RA(a,e,null))return;const l=this.getAxisMotionValue(a),{min:u,max:f}=this.constraints[a];l.set(is(u,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;YZ.set(this.visualElement,this);const e=this.visualElement.current,t=B1(e,"pointerdown",u=>{const{drag:f,dragListener:d=!0}=this.getProps();f&&d&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();v0(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),as.read(i);const a=f_(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(lc(d=>{const v=this.getAxisMotionValue(d);v&&(this.originPoint[d]+=u[d].translate,v.set(v.get()+u[d].translate))}),this.visualElement.render())});return()=>{a(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=UC,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:l}}};function RA(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function qZ(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}let KZ=class extends sm{constructor(e){super(e),this.removeGroupControls=vc,this.removeListeners=vc,this.controls=new jZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||vc}unmount(){this.removeGroupControls(),this.removeListeners()}};const SU=n=>(e,t)=>{n&&as.postRender(()=>n(e,t))};let JZ=class extends sm{constructor(){super(...arguments),this.removePointerDownListener=vc}onPointerDown(e){this.session=new YF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:WF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:SU(e),onStart:SU(t),onMove:i,onEnd:(s,a)=>{delete this.session,r&&as.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=B1(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}};const WA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bU(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const t1={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Nn.test(n))n=parseFloat(n);else return n;const t=bU(n,e.target.x),i=bU(n,e.target.y);return`${t}% ${i}%`}},ZZ={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=$p.parse(n);if(r.length>5)return i;const s=$p.createTransformer(n),a=typeof r[0]!="number"?1:0,l=t.x.scale*e.x,u=t.y.scale*e.y;r[0+a]/=l,r[1+a]/=u;const f=is(l,u,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),s(r)}};let QZ=class extends we.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;cK($Z),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),WA.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:a}=i;return a&&(a.isPresent=s,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||as.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ww.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}};function KF(n){const[e,t]=kq(),i=we.useContext(zI);return Gt.jsx(QZ,{...n,layoutGroup:i,switchLayoutGroup:we.useContext(JI),isPresent:e,safeToRemove:t})}const $Z={borderRadius:{...t1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:t1,borderTopRightRadius:t1,borderBottomLeftRadius:t1,borderBottomRightRadius:t1,boxShadow:ZZ};function eQ(n,e,t){const i=Ro(n)?n:K0(n);return i.start($w("",i,e,t)),i.animation}const tQ=(n,e)=>n.depth-e.depth;let nQ=class{constructor(){this.children=[],this.isDirty=!1}add(e){Fw(this.children,e),this.isDirty=!0}remove(e){Gw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tQ),this.isDirty=!1,this.children.forEach(e)}};function iQ(n,e){const t=Wl.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(Qp(i),n(s-e))};return as.setup(i,!0),()=>Qp(i)}const JF=["TopLeft","TopRight","BottomLeft","BottomRight"],rQ=JF.length,MU=n=>typeof n=="string"?parseFloat(n):n,TU=n=>typeof n=="number"||Nn.test(n);function sQ(n,e,t,i,r,s){r?(n.opacity=is(0,t.opacity??1,aQ(i)),n.opacityExit=is(e.opacity??1,0,oQ(i))):s&&(n.opacity=is(e.opacity??1,t.opacity??1,i));for(let a=0;a<rQ;a++){const l=`border${JF[a]}Radius`;let u=EU(e,l),f=EU(t,l);if(u===void 0&&f===void 0)continue;u||(u=0),f||(f=0),u===0||f===0||TU(u)===TU(f)?(n[l]=Math.max(is(MU(u),MU(f),i),0),(ch.test(f)||ch.test(u))&&(n[l]+="%")):n[l]=f}(e.rotate||t.rotate)&&(n.rotate=is(e.rotate||0,t.rotate||0,i))}function EU(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const aQ=ZF(0,.5,TF),oQ=ZF(.5,.95,vc);function ZF(n,e,t){return i=>i<n?0:i>e?1:t(c_(n,e,i))}function CU(n,e){n.min=e.min,n.max=e.max}function ac(n,e){CU(n.x,e.x),CU(n.y,e.y)}function wU(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function RU(n,e,t,i,r){return n-=e,n=tb(n,1/t,i),r!==void 0&&(n=tb(n,1/r,i)),n}function lQ(n,e=0,t=1,i=.5,r,s=n,a=n){if(ch.test(e)&&(e=parseFloat(e),e=is(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=is(s.min,s.max,i);n===s&&(l-=e),n.min=RU(n.min,e,t,l,r),n.max=RU(n.max,e,t,l,r)}function DU(n,e,[t,i,r],s,a){lQ(n,e[t],e[i],e[r],e.scale,s,a)}const uQ=["x","scaleX","originX"],cQ=["y","scaleY","originY"];function BU(n,e,t,i){DU(n.x,e,uQ,t?t.x:void 0,i?i.x:void 0),DU(n.y,e,cQ,t?t.y:void 0,i?i.y:void 0)}function UU(n){return n.translate===0&&n.scale===1}function QF(n){return UU(n.x)&&UU(n.y)}function OU(n,e){return n.min===e.min&&n.max===e.max}function fQ(n,e){return OU(n.x,e.x)&&OU(n.y,e.y)}function LU(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function $F(n,e){return LU(n.x,e.x)&&LU(n.y,e.y)}function PU(n){return cl(n.x)/cl(n.y)}function NU(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}let hQ=class{constructor(){this.members=[]}add(e){Fw(this.members,e),e.scheduleRender()}remove(e){if(Gw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}};function dQ(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:d,rotateX:v,rotateY:y,skewX:A,skewY:b}=t;f&&(i=`perspective(${f}px) ${i}`),d&&(i+=`rotate(${d}deg) `),v&&(i+=`rotateX(${v}deg) `),y&&(i+=`rotateY(${y}deg) `),A&&(i+=`skewX(${A}deg) `),b&&(i+=`skewY(${b}deg) `)}const l=n.x.scale*e.x,u=n.y.scale*e.y;return(l!==1||u!==1)&&(i+=`scale(${l}, ${u})`),i||"none"}function e4(n){return kI(n)&&"ownerSVGElement"in n}function pQ(n){return e4(n)&&n.tagName==="svg"}const gE=["","X","Y","Z"],mQ={visibility:"hidden"},gQ=1e3;let vQ=0;function vE(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function t4(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=lF(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",as,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&t4(i)}function n4({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},l=e==null?void 0:e()){this.id=vQ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(xQ),this.nodes.forEach(TQ),this.nodes.forEach(EQ),this.nodes.forEach(AQ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new nQ)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Hw),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const u=this.eventHandlers.get(a);u&&u.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=e4(a)&&!pQ(a),this.instance=a;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const v=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=iQ(v,250),WA.hasAnimatedSinceResize&&(WA.hasAnimatedSinceResize=!1,this.nodes.forEach(FU))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:v,hasRelativeLayoutChanged:y,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||BQ,{onLayoutAnimationStart:C,onLayoutAnimationComplete:T}=f.getProps(),M=!this.targetLayout||!$F(this.targetLayout,A),B=!v&&y;if(this.options.layoutRoot||this.resumeFrom||B||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...zw(b,"layout"),onPlay:C,onComplete:T};(f.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(d,B)}else v||FU(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Qp(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CQ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&t4(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const v=this.path[d];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(IU);return}this.isUpdating||this.nodes.forEach(bQ),this.isUpdating=!1,this.nodes.forEach(MQ),this.nodes.forEach(yQ),this.nodes.forEach(_Q),this.clearAllSnapshots();const l=Wl.now();Za.delta=Ud(0,1e3/60,l-Za.timestamp),Za.timestamp=l,Za.isProcessing=!0,uE.update.process(Za),uE.preRender.process(Za),uE.render.process(Za),Za.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ww.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SQ),this.sharedNodes.forEach(wQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,as.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){as.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cl(this.snapshot.measuredBox.x)&&!cl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ps(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!QF(this.projectionDelta),u=this.getTransformTemplate(),f=u?u(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;a&&this.instance&&(l||Ag(this.latestValues)||d)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return a&&(u=this.removeTransform(u)),UQ(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:a}=this.options;if(!a)return Ps();const l=a.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(OQ))){const{scroll:d}=this.root;d&&(x0(l.x,d.offset.x),x0(l.y,d.offset.y))}return l}removeElementScroll(a){var u;const l=Ps();if(ac(l,a),(u=this.scroll)!=null&&u.wasRoot)return l;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:v,options:y}=d;d!==this.root&&v&&y.layoutScroll&&(v.wasRoot&&ac(l,a),x0(l.x,v.offset.x),x0(l.y,v.offset.y))}return l}applyTransform(a,l=!1){const u=Ps();ac(u,a);for(let f=0;f<this.path.length;f++){const d=this.path[f];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&A0(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ag(d.latestValues)&&A0(u,d.latestValues)}return Ag(this.latestValues)&&A0(u,this.latestValues),u}removeTransform(a){const l=Ps();ac(l,a);for(let u=0;u<this.path.length;u++){const f=this.path[u];if(!f.instance||!Ag(f.latestValues))continue;DC(f.latestValues)&&f.updateSnapshot();const d=Ps(),v=f.measurePageBox();ac(d,v),BU(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return Ag(this.latestValues)&&BU(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Za.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var y;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:v}=this.options;if(!(!this.layout||!(d||v))){if(this.resolvedRelativeTargetAt=Za.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ps(),this.relativeTargetOrigin=Ps(),O1(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),ac(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ps(),this.targetWithTransforms=Ps()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),OZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ac(this.target,this.layout.layoutBox),kF(this.target,this.targetDelta)):ac(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ps(),this.relativeTargetOrigin=Ps(),O1(this.relativeTargetOrigin,this.target,A.target),ac(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||DC(this.parent.latestValues)||VF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Za.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;ac(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,y=this.treeScale.y;LZ(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ps());const{target:A}=a;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wU(this.prevProjectionDelta.x,this.projectionDelta.x),wU(this.prevProjectionDelta.y,this.projectionDelta.y)),U1(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==y||!NU(this.projectionDelta.x,this.prevProjectionDelta.x)||!NU(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=_0(),this.projectionDelta=_0(),this.projectionDeltaWithTransform=_0()}setAnimationOrigin(a,l=!1){const u=this.snapshot,f=u?u.latestValues:{},d={...this.latestValues},v=_0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=Ps(),A=u?u.source:void 0,b=this.layout?this.layout.source:void 0,C=A!==b,T=this.getStack(),M=!T||T.members.length<=1,B=!!(C&&!M&&this.options.crossfade===!0&&!this.path.some(DQ));this.animationProgress=0;let D;this.mixTargetDelta=O=>{const P=O/1e3;GU(v.x,a.x,P),GU(v.y,a.y,P),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(O1(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RQ(this.relativeTarget,this.relativeTargetOrigin,y,P),D&&fQ(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=Ps()),ac(D,this.relativeTarget)),C&&(this.animationValues=d,sQ(d,f,this.latestValues,P,B,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,u,f;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(f=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||f.stop(),this.pendingAnimation&&(Qp(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=as.update(()=>{WA.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=K0(0)),this.currentAnimation=eQ(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(gQ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:u,layout:f,latestValues:d}=a;if(!(!l||!u||!f)){if(this!==a&&this.layout&&f&&i4(this.options.animationType,this.layout.layoutBox,f.layoutBox)){u=this.target||Ps();const v=cl(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+v;const y=cl(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+y}ac(l,u),A0(l,d),U1(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new hQ),this.sharedNodes.get(a).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:u}={}){const f=this.getStack();f&&f.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const f={};u.z&&vE("z",a,f,this.animationValues);for(let d=0;d<gE.length;d++)vE(`rotate${gE[d]}`,a,f,this.animationValues),vE(`skew${gE[d]}`,a,f,this.animationValues);a.render();for(const d in f)a.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return mQ;const l={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=kA(a==null?void 0:a.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none",l;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=kA(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Ag(this.latestValues)&&(A.transform=u?u({},""):"none",this.hasProjected=!1),A}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),l.transform=dQ(this.projectionDeltaWithTransform,this.treeScale,d),u&&(l.transform=u(d,l.transform));const{x:v,y}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${y.origin*100}% 0`,f.animationValues?l.opacity=f===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const A in a_){if(d[A]===void 0)continue;const{correct:b,applyTo:C,isCSSVariable:T}=a_[A],M=l.transform==="none"?d[A]:b(d[A],f);if(C){const B=C.length;for(let D=0;D<B;D++)l[C[D]]=M}else T?this.options.visualElement.renderState.vars[A]=M:l[A]=M}return this.options.layoutId&&(l.pointerEvents=f===this?kA(a==null?void 0:a.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(IU),this.root.sharedNodes.clear()}}}function yQ(n){n.updateLayout()}function _Q(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,a=e.source!==n.layout.source;s==="size"?lc(v=>{const y=a?e.measuredBox[v]:e.layoutBox[v],A=cl(y);y.min=i[v].min,y.max=y.min+A}):i4(s,e.layoutBox,i)&&lc(v=>{const y=a?e.measuredBox[v]:e.layoutBox[v],A=cl(i[v]);y.max=y.min+A,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+A)});const l=_0();U1(l,i,e.layoutBox);const u=_0();a?U1(u,n.applyTransform(r,!0),e.measuredBox):U1(u,i,e.layoutBox);const f=!QF(l);let d=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:y,layout:A}=v;if(y&&A){const b=Ps();O1(b,e.layoutBox,y.layoutBox);const C=Ps();O1(C,i,A.layoutBox),$F(b,C)||(d=!0),v.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=b,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function xQ(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function AQ(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function SQ(n){n.clearSnapshot()}function IU(n){n.clearMeasurements()}function bQ(n){n.isLayoutDirty=!1}function MQ(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function FU(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function TQ(n){n.resolveTargetDelta()}function EQ(n){n.calcProjection()}function CQ(n){n.resetSkewAndRotation()}function wQ(n){n.removeLeadSnapshot()}function GU(n,e,t){n.translate=is(e.translate,0,t),n.scale=is(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function HU(n,e,t,i){n.min=is(e.min,t.min,i),n.max=is(e.max,t.max,i)}function RQ(n,e,t,i){HU(n.x,e.x,t.x,i),HU(n.y,e.y,t.y,i)}function DQ(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const BQ={duration:.45,ease:[.4,0,.1,1]},zU=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),VU=zU("applewebkit/")&&!zU("chrome/")?Math.round:vc;function kU(n){n.min=VU(n.min),n.max=VU(n.max)}function UQ(n){kU(n.x),kU(n.y)}function i4(n,e,t){return n==="position"||n==="preserve-aspect"&&!UZ(PU(e),PU(t),.2)}function OQ(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const LQ=n4({attachResizeListener:(n,e)=>f_(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yE={current:void 0},r4=n4({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!yE.current){const n=new LQ({});n.mount(window),n.setOptions({layoutScroll:!0}),yE.current=n}return yE.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),PQ={pan:{Feature:JZ},drag:{Feature:KZ,ProjectionNode:r4,MeasureLayout:KF}};function NQ(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=(t==null?void 0:t[n])??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}function s4(n,e){const t=NQ(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function XU(n){return!(n.pointerType==="touch"||qF())}function IQ(n,e,t={}){const[i,r,s]=s4(n,t),a=l=>{if(!XU(l))return;const{target:u}=l,f=e(u,l);if(typeof f!="function"||!u)return;const d=v=>{XU(v)&&(f(v),u.removeEventListener("pointerleave",d))};u.addEventListener("pointerleave",d,r)};return i.forEach(l=>{l.addEventListener("pointerenter",a,r)}),s}function WU(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&as.postRender(()=>s(e,X_(e)))}let FQ=class extends sm{mount(){const{current:e}=this.node;e&&(this.unmount=IQ(e,(t,i)=>(WU(this.node,i,"Start"),r=>WU(this.node,r,"End"))))}unmount(){}},GQ=class extends sm{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=V_(f_(this.node.current,"focus",()=>this.onFocus()),f_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}};const a4=(n,e)=>e?n===e?!0:a4(n,e.parentElement):!1,HQ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zQ(n){return HQ.has(n.tagName)||n.tabIndex!==-1}const YA=new WeakSet;function YU(n){return e=>{e.key==="Enter"&&n(e)}}function _E(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const VQ=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=YU(()=>{if(YA.has(t))return;_E(t,"down");const r=YU(()=>{_E(t,"up")}),s=()=>_E(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function jU(n){return eR(n)&&!qF()}function kQ(n,e,t={}){const[i,r,s]=s4(n,t),a=l=>{const u=l.currentTarget;if(!jU(l))return;YA.add(u);const f=e(u,l),d=(A,b)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",y),YA.has(u)&&YA.delete(u),jU(A)&&typeof f=="function"&&f(A,{success:b})},v=A=>{d(A,u===window||u===document||t.useGlobalTarget||a4(u,A.target))},y=A=>{d(A,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",y,r)};return i.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",a,r),XI(l)&&(l.addEventListener("focus",f=>VQ(f,r)),!zQ(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function qU(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&as.postRender(()=>s(e,X_(e)))}let XQ=class extends sm{mount(){const{current:e}=this.node;e&&(this.unmount=kQ(e,(t,i)=>(qU(this.node,i,"Start"),(r,{success:s})=>qU(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}};const OC=new WeakMap,xE=new WeakMap,WQ=n=>{const e=OC.get(n.target);e&&e(n)},YQ=n=>{n.forEach(WQ)};function jQ({root:n,...e}){const t=n||document;xE.has(t)||xE.set(t,{});const i=xE.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(YQ,{root:n,...e})),i[r]}function qQ(n,e,t){const i=jQ(e);return OC.set(n,t),i.observe(n),()=>{OC.delete(n),i.unobserve(n)}}const KQ={some:0,all:1};let JQ=class extends sm{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:KQ[r]},l=u=>{const{isIntersecting:f}=u;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:v}=this.node.getProps(),y=f?d:v;y&&y(u)};return qQ(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(ZQ(e,t))&&this.startObserver()}unmount(){}};function ZQ({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const QQ={inView:{Feature:JQ},tap:{Feature:XQ},focus:{Feature:GQ},hover:{Feature:FQ}},$Q={layout:{ProjectionNode:r4,MeasureLayout:KF}},LC={current:null},o4={current:!1};function e$(){if(o4.current=!0,!!bw)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>LC.current=n.matches;n.addListener(e),e()}else LC.current=!1}const t$=new WeakMap;function n$(n,e,t){for(const i in e){const r=e[i],s=t[i];if(Ro(r))n.addValue(i,r);else if(Ro(s))n.addValue(i,K0(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const a=n.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=n.getStaticValue(i);n.addValue(i,K0(a!==void 0?a:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const l4=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),u4=n=>/^0[^.\s]+$/u.test(n),i$={test:n=>n==="auto",parse:n=>n},c4=n=>e=>e.test(n),f4=[ly,Nn,ch,Fp,hK,fK,i$],KU=n=>f4.find(c4(n)),r$=[...f4,Co,$p],s$=n=>r$.find(c4(n)),a$=new Set(["brightness","contrast","saturate","opacity"]);function o$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Vw)||[];if(!i)return n;const r=t.replace(i,"");let s=a$.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const l$=/\b([a-z-]*)\(.*?\)/gu,PC={...$p,getAnimatableNone:n=>{const e=n.match(l$);return e?e.map(o$).join(" "):n}},u$={...Uw,color:Co,backgroundColor:Co,outlineColor:Co,fill:Co,stroke:Co,borderColor:Co,borderTopColor:Co,borderRightColor:Co,borderBottomColor:Co,borderLeftColor:Co,filter:PC,WebkitFilter:PC},h4=n=>u$[n];function d4(n,e){let t=h4(n);return t!==PC&&(t=$p),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const JU=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let c$=class{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Zw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Wl.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,as.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=iM(t),this.isVariantNode=qI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in v){const A=v[y];u[y]!==void 0&&Ro(A)&&A.set(u[y],!1)}}mount(e){this.current=e,t$.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),o4.current||e$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:LC.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Qp(this.notifyUpdate),Qp(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=oy.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&as.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in q0){const t=q0[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ps()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<JU.length;i++){const r=JU[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=n$(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=K0(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(l4(i)||u4(i))?i=parseFloat(i):!s$(i)&&$p.test(t)&&(i=d4(e,t)),this.setBaseTarget(e,Ro(i)?i.get():i)),Ro(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const a=Nw(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);a&&(i=a[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Ro(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Hw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}};const f$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function h$(n){const e=f$.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function p4(n,e,t=1){const[i,r]=h$(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return l4(a)?parseFloat(a):a}return Bw(r)?p4(r,e,t+1):r}function d$(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||u4(n):!0}const p$=new Set(["auto","none","0"]);function m$(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!p$.has(s)&&u_(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=d4(t,r)}let g$=class extends Zw{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let f=e[u];if(typeof f=="string"&&(f=f.trim(),Bw(f))){const d=p4(f,t.current);d!==void 0&&(e[u]=d),u===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!PF.has(i)||e.length!==2)return;const[r,s]=e,a=KU(r),l=KU(s);if(a!==l)if(tU(a)&&tU(l))for(let u=0;u<e.length;u++){const f=e[u];typeof f=="string"&&(e[u]=parseFloat(f))}else zg[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||d$(e[r]))&&i.push(r);i.length&&m$(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zg[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var l;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,a=i[s];i[s]=zg[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([u,f])=>{e.getValue(u).set(f)}),this.resolveNoneKeyframes()}},m4=class extends c${constructor(){super(...arguments),this.KeyframeResolver=g$}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ro(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}};function g4(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}function v$(n){return window.getComputedStyle(n)}let y$=class extends m4{constructor(){super(...arguments),this.type="html",this.renderInstance=g4}readValueFromInstance(e,t){var i;if(oy.has(t))return(i=this.projection)!=null&&i.isProjecting?MC(t):zJ(e,t);{const r=v$(e),s=(Dw(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return XF(e,t)}build(e,t,i){Ow(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Iw(e,t,i)}};const v4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _$(n,e,t,i){g4(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(v4.has(r)?r:Cw(r),e.attrs[r])}let x$=class extends m4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ps}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(oy.has(t)){const i=h4(t);return i&&i.default||0}return t=v4.has(t)?t:Cw(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return aF(e,t,i)}build(e,t,i){nF(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){_$(e,t,i,r)}mount(e){this.isSVGTag=rF(e.tagName),super.mount(e)}};const A$=(n,e)=>Pw(n)?new x$(e):new y$(e,{allowProjection:n!==we.Fragment}),S$=DK({...MZ,...QQ,...PQ,...$Q},A$),b$=Jq(S$),M$=({children:n})=>{const e=r_(i=>i.isModalOpen),t=r_(i=>i.closeModal);return Gt.jsx(b$.div,{className:`modal ${e?"open":""}`,initial:{y:"100vh",x:"50%",opacity:0},animate:{y:e?"-50%":"50%",x:"-50%",opacity:e?1:0},transition:{type:"spring",stiffness:300,damping:30},children:Gt.jsxs("div",{className:"modal-content",children:[Gt.jsx("div",{className:"modal_head",children:Gt.jsx("button",{type:"button",onClick:t,children:"X"})}),Gt.jsx("div",{className:"modal_body",children:n})]})})};function T$(n,e){if(n==null)return{};var t=E$(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function E$(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function nb(){return nb=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nb.apply(this,arguments)}function ZU(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function n1(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ZU(Object(t),!0).forEach(function(i){C$(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ZU(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function C$(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}const w$={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},AE=2;class y4 extends Tg.Component{constructor(e){super(e),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let t;this.props.breakpointCols&&this.props.breakpointCols.default?t=this.props.breakpointCols.default:t=parseInt(this.props.breakpointCols)||AE,this.state={columnCount:t}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const e=window&&window.innerWidth||1/0;let t=this.props.breakpointCols;typeof t!="object"&&(t={default:parseInt(t)||AE});let i=1/0,r=t.default||AE;for(let s in t){const a=parseInt(s);a>0&&e<=a&&a<i&&(i=a,r=t[s])}r=Math.max(1,parseInt(r)||1),this.state.columnCount!==r&&this.setState({columnCount:r})}itemsInColumns(){const e=this.state.columnCount,t=new Array(e),i=Tg.Children.toArray(this.props.children);for(let r=0;r<i.length;r++){const s=r%e;t[s]||(t[s]=[]),t[s].push(i[r])}return t}renderColumns(){const{column:e,columnAttrs:t={},columnClassName:i}=this.props,r=this.itemsInColumns(),s=`${100/r.length}%`;let a=i;a&&typeof a!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof a>"u"&&(a="my-masonry-grid_column"));const l=n1(n1(n1({},e),t),{},{style:n1(n1({},t.style),{},{width:s}),className:a});return r.map((u,f)=>Tg.createElement("div",nb({},l,{key:f}),u))}logDeprecated(e){console.error("[Masonry]",e)}render(){const e=this.props,{children:t,breakpointCols:i,columnClassName:r,columnAttrs:s,column:a,className:l}=e,u=T$(e,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let f=l;return typeof l!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof l>"u"&&(f="my-masonry-grid")),Tg.createElement("div",nb({},u,{className:f}),this.renderColumns())}}y4.defaultProps=w$;var f1={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var R$=f1.exports,QU;function D$(){return QU||(QU=1,function(n,e){(function(){var t,i="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",f=500,d="__lodash_placeholder__",v=1,y=2,A=4,b=1,C=2,T=1,M=2,B=4,D=8,O=16,P=32,F=64,V=128,G=256,I=512,N=30,Q="...",$=800,te=16,se=1,ye=2,k=3,ee=1/0,ne=9007199254740991,de=17976931348623157e292,X=NaN,J=4294967295,ce=J-1,ge=J>>>1,oe=[["ary",V],["bind",T],["bindKey",M],["curry",D],["curryRight",O],["flip",I],["partial",P],["partialRight",F],["rearg",G]],ve="[object Arguments]",Se="[object Array]",Re="[object AsyncFunction]",Le="[object Boolean]",gt="[object Date]",Mt="[object DOMException]",At="[object Error]",at="[object Function]",Nt="[object GeneratorFunction]",ie="[object Map]",ut="[object Number]",$e="[object Null]",Ke="[object Object]",Pe="[object Promise]",pt="[object Proxy]",Ve="[object RegExp]",j="[object Set]",Y="[object String]",_e="[object Symbol]",Ie="[object Undefined]",Ge="[object WeakMap]",Ye="[object WeakSet]",it="[object ArrayBuffer]",rt="[object DataView]",yt="[object Float32Array]",Vt="[object Float64Array]",ht="[object Int8Array]",Lt="[object Int16Array]",Et="[object Int32Array]",_t="[object Uint8Array]",ot="[object Uint8ClampedArray]",xe="[object Uint16Array]",We="[object Uint32Array]",Rt=/\b__p \+= '';/g,Ae=/\b(__p \+=) '' \+/g,De=/(__e\(.*?\)|\b__t\)) \+\n'';/g,He=/&(?:amp|lt|gt|quot|#39);/g,dt=/[&<>"']/g,Pt=RegExp(He.source),Tt=RegExp(dt.source),qt=/<%-([\s\S]+?)%>/g,sn=/<%([\s\S]+?)%>/g,Jt=/<%=([\s\S]+?)%>/g,nn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ti=/^\w*$/,Fn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ln=/[\\^$.*+?()[\]{}|]/g,Ai=RegExp(Ln.source),Di=/^\s+/,or=/\s/,kr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pr=/\{\n\/\* \[wrapped with (.+)\] \*/,ln=/,? & /,Gi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ni=/[()=,{}\[\]\/\s]/,K=/\\(\\)?/g,le=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ce=/\w*$/,Qe=/^[-+]0x[0-9a-f]+$/i,et=/^0b[01]+$/i,ft=/^\[object .+?Constructor\]$/,Ft=/^0o[0-7]+$/i,Bt=/^(?:0|[1-9]\d*)$/,q=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,me=/($^)/,Me=/['\n\r\u2028\u2029\\]/g,pe="\\ud800-\\udfff",Be="\\u0300-\\u036f",qe="\\ufe20-\\ufe2f",ct="\\u20d0-\\u20ff",vt=Be+qe+ct,wt="\\u2700-\\u27bf",Wt="a-z\\xdf-\\xf6\\xf8-\\xff",kt="\\xac\\xb1\\xd7\\xf7",Yt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fn="\\u2000-\\u206f",an=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$n="A-Z\\xc0-\\xd6\\xd8-\\xde",rn="\\ufe0e\\ufe0f",cn=kt+Yt+fn+an,$t="['’]",Si="["+pe+"]",gn="["+cn+"]",_n="["+vt+"]",Bi="\\d+",dn="["+wt+"]",xn="["+Wt+"]",Pn="[^"+pe+cn+Bi+wt+Wt+$n+"]",Ui="\\ud83c[\\udffb-\\udfff]",Wn="(?:"+_n+"|"+Ui+")",Oi="[^"+pe+"]",mr="(?:\\ud83c[\\udde6-\\uddff]){2}",Or="[\\ud800-\\udbff][\\udc00-\\udfff]",Zr="["+$n+"]",jl="\\u200d",ql="(?:"+xn+"|"+Pn+")",Uu="(?:"+Zr+"|"+Pn+")",ml="(?:"+$t+"(?:d|ll|m|re|s|t|ve))?",Af="(?:"+$t+"(?:D|LL|M|RE|S|T|VE))?",Uo=Wn+"?",no="["+rn+"]?",Oo="(?:"+jl+"(?:"+[Oi,mr,Or].join("|")+")"+no+Uo+")*",da="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",vl=no+Uo+Oo,Kl="(?:"+[dn,mr,Or].join("|")+")"+vl,Sc="(?:"+[Oi+_n+"?",_n,mr,Or,Si].join("|")+")",Jl=RegExp($t,"g"),Zs=RegExp(_n,"g"),Lo=RegExp(Ui+"(?="+Ui+")|"+Sc+vl,"g"),Zl=RegExp([Zr+"?"+xn+"+"+ml+"(?="+[gn,Zr,"$"].join("|")+")",Uu+"+"+Af+"(?="+[gn,Zr+ql,"$"].join("|")+")",Zr+"?"+ql+"+"+ml,Zr+"+"+Af,gl,da,Bi,Kl].join("|"),"g"),Ir=RegExp("["+jl+pe+vt+rn+"]"),bc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Sf=-1,li={};li[yt]=li[Vt]=li[ht]=li[Lt]=li[Et]=li[_t]=li[ot]=li[xe]=li[We]=!0,li[ve]=li[Se]=li[it]=li[Le]=li[rt]=li[gt]=li[At]=li[at]=li[ie]=li[ut]=li[Ke]=li[Ve]=li[j]=li[Y]=li[Ge]=!1;var vi={};vi[ve]=vi[Se]=vi[it]=vi[rt]=vi[Le]=vi[gt]=vi[yt]=vi[Vt]=vi[ht]=vi[Lt]=vi[Et]=vi[ie]=vi[ut]=vi[Ke]=vi[Ve]=vi[j]=vi[Y]=vi[_e]=vi[_t]=vi[ot]=vi[xe]=vi[We]=!0,vi[At]=vi[at]=vi[Ge]=!1;var Ou={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Fr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pa={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qs={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ql=parseFloat,bf=parseInt,ma=typeof Tx=="object"&&Tx&&Tx.Object===Object&&Tx,io=typeof self=="object"&&self&&self.Object===Object&&self,gr=ma||io||Function("return this")(),ga=e&&!e.nodeType&&e,Ba=ga&&!0&&n&&!n.nodeType&&n,bs=Ba&&Ba.exports===ga,xh=bs&&ma.process,bi=function(){try{var Fe=Ba&&Ba.require&&Ba.require("util").types;return Fe||xh&&xh.binding&&xh.binding("util")}catch{}}(),yl=bi&&bi.isArrayBuffer,Mf=bi&&bi.isDate,Ah=bi&&bi.isMap,ls=bi&&bi.isRegExp,$s=bi&&bi.isSet,Gr=bi&&bi.isTypedArray;function vr(Fe,mt,lt){switch(lt.length){case 0:return Fe.call(mt);case 1:return Fe.call(mt,lt[0]);case 2:return Fe.call(mt,lt[0],lt[1]);case 3:return Fe.call(mt,lt[0],lt[1],lt[2])}return Fe.apply(mt,lt)}function Sh(Fe,mt,lt,Xt){for(var An=-1,yi=Fe==null?0:Fe.length;++An<yi;){var Xr=Fe[An];mt(Xt,Xr,lt(Xr),Fe)}return Xt}function Ua(Fe,mt){for(var lt=-1,Xt=Fe==null?0:Fe.length;++lt<Xt&&mt(Fe[lt],lt,Fe)!==!1;);return Fe}function nv(Fe,mt){for(var lt=Fe==null?0:Fe.length;lt--&&mt(Fe[lt],lt,Fe)!==!1;);return Fe}function Pd(Fe,mt){for(var lt=-1,Xt=Fe==null?0:Fe.length;++lt<Xt;)if(!mt(Fe[lt],lt,Fe))return!1;return!0}function ro(Fe,mt){for(var lt=-1,Xt=Fe==null?0:Fe.length,An=0,yi=[];++lt<Xt;){var Xr=Fe[lt];mt(Xr,lt,Fe)&&(yi[An++]=Xr)}return yi}function bh(Fe,mt){var lt=Fe==null?0:Fe.length;return!!lt&&va(Fe,mt,0)>-1}function Mh(Fe,mt,lt){for(var Xt=-1,An=Fe==null?0:Fe.length;++Xt<An;)if(lt(mt,Fe[Xt]))return!0;return!1}function lr(Fe,mt){for(var lt=-1,Xt=Fe==null?0:Fe.length,An=Array(Xt);++lt<Xt;)An[lt]=mt(Fe[lt],lt,Fe);return An}function Po(Fe,mt){for(var lt=-1,Xt=mt.length,An=Fe.length;++lt<Xt;)Fe[An+lt]=mt[lt];return Fe}function Nd(Fe,mt,lt,Xt){var An=-1,yi=Fe==null?0:Fe.length;for(Xt&&yi&&(lt=Fe[++An]);++An<yi;)lt=mt(lt,Fe[An],An,Fe);return lt}function om(Fe,mt,lt,Xt){var An=Fe==null?0:Fe.length;for(Xt&&An&&(lt=Fe[--An]);An--;)lt=mt(lt,Fe[An],An,Fe);return lt}function Id(Fe,mt){for(var lt=-1,Xt=Fe==null?0:Fe.length;++lt<Xt;)if(mt(Fe[lt],lt,Fe))return!0;return!1}var $l=Tc("length");function lm(Fe){return Fe.split("")}function hy(Fe){return Fe.match(Gi)||[]}function um(Fe,mt,lt){var Xt;return lt(Fe,function(An,yi,Xr){if(mt(An,yi,Xr))return Xt=yi,!1}),Xt}function No(Fe,mt,lt,Xt){for(var An=Fe.length,yi=lt+(Xt?1:-1);Xt?yi--:++yi<An;)if(mt(Fe[yi],yi,Fe))return yi;return-1}function va(Fe,mt,lt){return mt===mt?sv(Fe,mt,lt):No(Fe,Lu,lt)}function Th(Fe,mt,lt,Xt){for(var An=lt-1,yi=Fe.length;++An<yi;)if(Xt(Fe[An],mt))return An;return-1}function Lu(Fe){return Fe!==Fe}function Tf(Fe,mt){var lt=Fe==null?0:Fe.length;return lt?Ch(Fe,mt)/lt:X}function Tc(Fe){return function(mt){return mt==null?t:mt[Fe]}}function _l(Fe){return function(mt){return Fe==null?t:Fe[mt]}}function us(Fe,mt,lt,Xt,An){return An(Fe,function(yi,Xr,di){lt=Xt?(Xt=!1,yi):mt(lt,yi,Xr,di)}),lt}function Eh(Fe,mt){var lt=Fe.length;for(Fe.sort(mt);lt--;)Fe[lt]=Fe[lt].value;return Fe}function Ch(Fe,mt){for(var lt,Xt=-1,An=Fe.length;++Xt<An;){var yi=mt(Fe[Xt]);yi!==t&&(lt=lt===t?yi:lt+yi)}return lt}function xl(Fe,mt){for(var lt=-1,Xt=Array(Fe);++lt<Fe;)Xt[lt]=mt(lt);return Xt}function wh(Fe,mt){return lr(mt,function(lt){return[lt,Fe[lt]]})}function Fd(Fe){return Fe&&Fe.slice(0,kd(Fe)+1).replace(Di,"")}function Gs(Fe){return function(mt){return Fe(mt)}}function Rh(Fe,mt){return lr(mt,function(lt){return Fe[lt]})}function cs(Fe,mt){return Fe.has(mt)}function Ec(Fe,mt){for(var lt=-1,Xt=Fe.length;++lt<Xt&&va(mt,Fe[lt],0)>-1;);return lt}function Pu(Fe,mt){for(var lt=Fe.length;lt--&&va(mt,Fe[lt],0)>-1;);return lt}function iv(Fe,mt){for(var lt=Fe.length,Xt=0;lt--;)Fe[lt]===mt&&++Xt;return Xt}var Dh=_l(Ou),Gd=_l(Fr);function Hd(Fe){return"\\"+Qs[Fe]}function zd(Fe,mt){return Fe==null?t:Fe[mt]}function Io(Fe){return Ir.test(Fe)}function Ef(Fe){return bc.test(Fe)}function Mr(Fe){for(var mt,lt=[];!(mt=Fe.next()).done;)lt.push(mt.value);return lt}function Vd(Fe){var mt=-1,lt=Array(Fe.size);return Fe.forEach(function(Xt,An){lt[++mt]=[An,Xt]}),lt}function rv(Fe,mt){return function(lt){return Fe(mt(lt))}}function eu(Fe,mt){for(var lt=-1,Xt=Fe.length,An=0,yi=[];++lt<Xt;){var Xr=Fe[lt];(Xr===mt||Xr===d)&&(Fe[lt]=d,yi[An++]=lt)}return yi}function Nu(Fe){var mt=-1,lt=Array(Fe.size);return Fe.forEach(function(Xt){lt[++mt]=Xt}),lt}function Iu(Fe){var mt=-1,lt=Array(Fe.size);return Fe.forEach(function(Xt){lt[++mt]=[Xt,Xt]}),lt}function sv(Fe,mt,lt){for(var Xt=lt-1,An=Fe.length;++Xt<An;)if(Fe[Xt]===mt)return Xt;return-1}function ya(Fe,mt,lt){for(var Xt=lt+1;Xt--;)if(Fe[Xt]===mt)return Xt;return Xt}function Hs(Fe){return Io(Fe)?fm(Fe):$l(Fe)}function Tr(Fe){return Io(Fe)?Bh(Fe):lm(Fe)}function kd(Fe){for(var mt=Fe.length;mt--&&or.test(Fe.charAt(mt)););return mt}var cm=_l(pa);function fm(Fe){for(var mt=Lo.lastIndex=0;Lo.test(Fe);)++mt;return mt}function Bh(Fe){return Fe.match(Lo)||[]}function hm(Fe){return Fe.match(Zl)||[]}var tu=function Fe(mt){mt=mt==null?gr:nu.defaults(gr.Object(),mt,nu.pick(gr,Mc));var lt=mt.Array,Xt=mt.Date,An=mt.Error,yi=mt.Function,Xr=mt.Math,di=mt.Object,Ms=mt.RegExp,dm=mt.String,yr=mt.TypeError,Uh=lt.prototype,iu=yi.prototype,Fo=di.prototype,so=mt["__core-js_shared__"],Cc=iu.toString,Mi=Fo.hasOwnProperty,fs=0,Xd=function(){var g=/[^.]+$/.exec(so&&so.keys&&so.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Wr=Fo.toString,zs=Cc.call(di),ao=gr._,Wd=Ms("^"+Cc.call(Mi).replace(Ln,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fu=bs?mt.Buffer:t,ea=mt.Symbol,wc=mt.Uint8Array,Al=Fu?Fu.allocUnsafe:t,Cf=rv(di.getPrototypeOf,di),Rc=di.create,ru=Fo.propertyIsEnumerable,wf=Uh.splice,ta=ea?ea.isConcatSpreadable:t,su=ea?ea.iterator:t,nr=ea?ea.toStringTag:t,Rf=function(){try{var g=$r(di,"defineProperty");return g({},"",{}),g}catch{}}(),hs=mt.clearTimeout!==gr.clearTimeout&&mt.clearTimeout,Gu=Xt&&Xt.now!==gr.Date.now&&Xt.now,Oh=mt.setTimeout!==gr.setTimeout&&mt.setTimeout,Dc=Xr.ceil,au=Xr.floor,Vs=di.getOwnPropertySymbols,Lh=Fu?Fu.isBuffer:t,Bc=mt.isFinite,Ts=Uh.join,Oa=rv(di.keys,di),ur=Xr.max,_r=Xr.min,Sl=Xt.now,ou=mt.parseInt,Ph=Xr.random,pm=Uh.reverse,Nh=$r(mt,"DataView"),Qr=$r(mt,"Map"),xr=$r(mt,"Promise"),ai=$r(mt,"Set"),ks=$r(mt,"WeakMap"),Es=$r(di,"create"),Uc=ks&&new ks,La={},av=vo(Nh),mm=vo(Qr),Go=vo(xr),Df=vo(ai),Hi=vo(ks),bl=ea?ea.prototype:t,Oc=bl?bl.valueOf:t,lu=bl?bl.toString:t;function re(g){if(zr(g)&&!On(g)&&!(g instanceof Yn)){if(g instanceof _a)return g;if(Mi.call(g,"__wrapped__"))return $i(g)}return new _a(g)}var Pa=function(){function g(){}return function(_){if(!Nr(_))return{};if(Rc)return Rc(_);g.prototype=_;var R=new g;return g.prototype=t,R}}();function oo(){}function _a(g,_){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!_,this.__index__=0,this.__values__=t}re.templateSettings={escape:qt,evaluate:sn,interpolate:Jt,variable:"",imports:{_:re}},re.prototype=oo.prototype,re.prototype.constructor=re,_a.prototype=Pa(oo.prototype),_a.prototype.constructor=_a;function Yn(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=J,this.__views__=[]}function lo(){var g=new Yn(this.__wrapped__);return g.__actions__=jr(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=jr(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=jr(this.__views__),g}function Ih(){if(this.__filtered__){var g=new Yn(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function Ml(){var g=this.__wrapped__.value(),_=this.__dir__,R=On(g),H=_<0,Z=R?g.length:0,fe=kf(0,Z,this.__views__),be=fe.start,Ue=fe.end,Xe=Ue-be,Dt=H?Ue:be-1,Ot=this.__iteratees__,It=Ot.length,tn=0,mn=_r(Xe,this.__takeCount__);if(!R||!H&&Z==Xe&&mn==Xe)return mv(g,this.__actions__);var Bn=[];e:for(;Xe--&&tn<mn;){Dt+=_;for(var hi=-1,Un=g[Dt];++hi<It;){var wi=Ot[hi],Pi=wi.iteratee,Tu=wi.type,il=Pi(Un);if(Tu==ye)Un=il;else if(!il){if(Tu==se)continue e;break e}}Bn[tn++]=Un}return Bn}Yn.prototype=Pa(oo.prototype),Yn.prototype.constructor=Yn;function Ji(g){var _=-1,R=g==null?0:g.length;for(this.clear();++_<R;){var H=g[_];this.set(H[0],H[1])}}function Fh(){this.__data__=Es?Es(null):{},this.size=0}function Yd(g){var _=this.has(g)&&delete this.__data__[g];return this.size-=_?1:0,_}function gm(g){var _=this.__data__;if(Es){var R=_[g];return R===u?t:R}return Mi.call(_,g)?_[g]:t}function dy(g){var _=this.__data__;return Es?_[g]!==t:Mi.call(_,g)}function ov(g,_){var R=this.__data__;return this.size+=this.has(g)?0:1,R[g]=Es&&_===t?u:_,this}Ji.prototype.clear=Fh,Ji.prototype.delete=Yd,Ji.prototype.get=gm,Ji.prototype.has=dy,Ji.prototype.set=ov;function Zi(g){var _=-1,R=g==null?0:g.length;for(this.clear();++_<R;){var H=g[_];this.set(H[0],H[1])}}function jd(){this.__data__=[],this.size=0}function Bf(g){var _=this.__data__,R=bn(_,g);if(R<0)return!1;var H=_.length-1;return R==H?_.pop():wf.call(_,R,1),--this.size,!0}function Uf(g){var _=this.__data__,R=bn(_,g);return R<0?t:_[R][1]}function Gh(g){return bn(this.__data__,g)>-1}function zn(g,_){var R=this.__data__,H=bn(R,g);return H<0?(++this.size,R.push([g,_])):R[H][1]=_,this}Zi.prototype.clear=jd,Zi.prototype.delete=Bf,Zi.prototype.get=Uf,Zi.prototype.has=Gh,Zi.prototype.set=zn;function xa(g){var _=-1,R=g==null?0:g.length;for(this.clear();++_<R;){var H=g[_];this.set(H[0],H[1])}}function Na(){this.size=0,this.__data__={hash:new Ji,map:new(Qr||Zi),string:new Ji}}function qd(g){var _=pu(this,g).delete(g);return this.size-=_?1:0,_}function py(g){return pu(this,g).get(g)}function Hh(g){return pu(this,g).has(g)}function uo(g,_){var R=pu(this,g),H=R.size;return R.set(g,_),this.size+=R.size==H?0:1,this}xa.prototype.clear=Na,xa.prototype.delete=qd,xa.prototype.get=py,xa.prototype.has=Hh,xa.prototype.set=uo;function Aa(g){var _=-1,R=g==null?0:g.length;for(this.__data__=new xa;++_<R;)this.add(g[_])}function zh(g){return this.__data__.set(g,u),this}function Kd(g){return this.__data__.has(g)}Aa.prototype.add=Aa.prototype.push=zh,Aa.prototype.has=Kd;function na(g){var _=this.__data__=new Zi(g);this.size=_.size}function vm(){this.__data__=new Zi,this.size=0}function Ho(g){var _=this.__data__,R=_.delete(g);return this.size=_.size,R}function Vh(g){return this.__data__.get(g)}function Jd(g){return this.__data__.has(g)}function Of(g,_){var R=this.__data__;if(R instanceof Zi){var H=R.__data__;if(!Qr||H.length<r-1)return H.push([g,_]),this.size=++R.size,this;R=this.__data__=new xa(H)}return R.set(g,_),this.size=R.size,this}na.prototype.clear=vm,na.prototype.delete=Ho,na.prototype.get=Vh,na.prototype.has=Jd,na.prototype.set=Of;function kh(g,_){var R=On(g),H=!R&&Qc(g),Z=!R&&!H&&Qf(g),fe=!R&&!H&&!Z&&Ap(g),be=R||H||Z||fe,Ue=be?xl(g.length,dm):[],Xe=Ue.length;for(var Dt in g)(_||Mi.call(g,Dt))&&!(be&&(Dt=="length"||Z&&(Dt=="offset"||Dt=="parent")||fe&&(Dt=="buffer"||Dt=="byteLength"||Dt=="byteOffset")||Ga(Dt,Xe)))&&Ue.push(Dt);return Ue}function Ia(g){var _=g.length;return _?g[ip(0,_-1)]:t}function ym(g,_){return qo(jr(g),Vo(_,0,g.length))}function lv(g){return qo(jr(g))}function zo(g,_,R){(R!==t&&!So(g[_],R)||R===t&&!(_ in g))&&Sa(g,_,R)}function Lc(g,_,R){var H=g[_];(!(Mi.call(g,_)&&So(H,R))||R===t&&!(_ in g))&&Sa(g,_,R)}function bn(g,_){for(var R=g.length;R--;)if(So(g[R][0],_))return R;return-1}function Tl(g,_,R,H){return uu(g,function(Z,fe,be){_(H,Z,R(Z),be)}),H}function El(g,_){return g&&Ea(_,Us(_),g)}function Pc(g,_){return g&&Ea(_,qs(_),g)}function Sa(g,_,R){_=="__proto__"&&Rf?Rf(g,_,{configurable:!0,enumerable:!0,value:R,writable:!0}):g[_]=R}function Xh(g,_){for(var R=-1,H=_.length,Z=lt(H),fe=g==null;++R<H;)Z[R]=fe?t:qm(g,_[R]);return Z}function Vo(g,_,R){return g===g&&(R!==t&&(g=g<=R?g:R),_!==t&&(g=g>=_?g:_)),g}function Cs(g,_,R,H,Z,fe){var be,Ue=_&v,Xe=_&y,Dt=_&A;if(R&&(be=Z?R(g,H,Z,fe):R(g)),be!==t)return be;if(!Nr(g))return g;var Ot=On(g);if(Ot){if(be=Rs(g),!Ue)return jr(g,be)}else{var It=_i(g),tn=It==at||It==Nt;if(Qf(g))return Nm(g,Ue);if(It==Ke||It==ve||tn&&!Z){if(be=Xe||tn?{}:ms(g),!Ue)return Xe?Hf(g,Pc(be,g)):ed(g,El(be,g))}else{if(!vi[It])return Z?g:{};be=xi(g,It,Ue)}}fe||(fe=new na);var mn=fe.get(g);if(mn)return mn;fe.set(g,be),ax(g)?g.forEach(function(Un){be.add(Cs(Un,_,R,Un,g,fe))}):Uv(g)&&g.forEach(function(Un,wi){be.set(wi,Cs(Un,_,R,wi,g,fe))});var Bn=Dt?Xe?Ys:Ws:Xe?qs:Us,hi=Ot?t:Bn(g);return Ua(hi||g,function(Un,wi){hi&&(wi=Un,Un=g[wi]),Lc(be,wi,Cs(Un,_,R,wi,g,fe))}),be}function Lf(g){var _=Us(g);return function(R){return _m(R,g,_)}}function _m(g,_,R){var H=R.length;if(g==null)return!H;for(g=di(g);H--;){var Z=R[H],fe=_[Z],be=g[Z];if(be===t&&!(Z in g)||!fe(be))return!1}return!0}function Nc(g,_,R){if(typeof g!="function")throw new yr(a);return vu(function(){g.apply(t,R)},_)}function Hu(g,_,R,H){var Z=-1,fe=bh,be=!0,Ue=g.length,Xe=[],Dt=_.length;if(!Ue)return Xe;R&&(_=lr(_,Gs(R))),H?(fe=Mh,be=!1):_.length>=r&&(fe=cs,be=!1,_=new Aa(_));e:for(;++Z<Ue;){var Ot=g[Z],It=R==null?Ot:R(Ot);if(Ot=H||Ot!==0?Ot:0,be&&It===It){for(var tn=Dt;tn--;)if(_[tn]===It)continue e;Xe.push(Ot)}else fe(_,It,H)||Xe.push(Ot)}return Xe}var uu=Fm(Er),Zd=Fm(Hr,!0);function Wh(g,_){var R=!0;return uu(g,function(H,Z,fe){return R=!!_(H,Z,fe),R}),R}function co(g,_,R){for(var H=-1,Z=g.length;++H<Z;){var fe=g[H],be=_(fe);if(be!=null&&(Ue===t?be===be&&!Ka(be):R(be,Ue)))var Ue=be,Xe=fe}return Xe}function Vn(g,_,R,H){var Z=g.length;for(R=kn(R),R<0&&(R=-R>Z?0:Z+R),H=H===t||H>Z?Z:kn(H),H<0&&(H+=Z),H=R>H?0:rc(H);R<H;)g[R++]=_;return g}function zi(g,_){var R=[];return uu(g,function(H,Z,fe){_(H,Z,fe)&&R.push(H)}),R}function ui(g,_,R,H,Z){var fe=-1,be=g.length;for(R||(R=gs),Z||(Z=[]);++fe<be;){var Ue=g[fe];_>0&&R(Ue)?_>1?ui(Ue,_-1,R,H,Z):Po(Z,Ue):H||(Z[Z.length]=Ue)}return Z}var Pf=Wu(),cu=Wu(!0);function Er(g,_){return g&&Pf(g,_,Us)}function Hr(g,_){return g&&cu(g,_,Us)}function ia(g,_){return ro(_,function(R){return bu(g[R])})}function Rr(g,_){_=hu(_,g);for(var R=0,H=_.length;g!=null&&R<H;)g=g[mi(_[R++])];return R&&R==H?g:t}function xm(g,_,R){var H=_(g);return On(g)?H:Po(H,R(g))}function pi(g){return g==null?g===t?Ie:$e:nr&&nr in di(g)?Yu(g):Yc(g)}function ds(g,_){return g>_}function fu(g,_){return g!=null&&Mi.call(g,_)}function uv(g,_){return g!=null&&_ in di(g)}function cv(g,_,R){return g>=_r(_,R)&&g<ur(_,R)}function Am(g,_,R){for(var H=R?Mh:bh,Z=g[0].length,fe=g.length,be=fe,Ue=lt(fe),Xe=1/0,Dt=[];be--;){var Ot=g[be];be&&_&&(Ot=lr(Ot,Gs(_))),Xe=_r(Ot.length,Xe),Ue[be]=!R&&(_||Z>=120&&Ot.length>=120)?new Aa(be&&Ot):t}Ot=g[0];var It=-1,tn=Ue[0];e:for(;++It<Z&&Dt.length<Xe;){var mn=Ot[It],Bn=_?_(mn):mn;if(mn=R||mn!==0?mn:0,!(tn?cs(tn,Bn):H(Dt,Bn,R))){for(be=fe;--be;){var hi=Ue[be];if(!(hi?cs(hi,Bn):H(g[be],Bn,R)))continue e}tn&&tn.push(Bn),Dt.push(mn)}}return Dt}function Sm(g,_,R,H){return Er(g,function(Z,fe,be){_(H,R(Z),fe,be)}),H}function zu(g,_,R){_=hu(_,g),g=qu(g,_);var H=g==null?g:g[mi(wr(_))];return H==null?t:vr(H,g,R)}function Qd(g){return zr(g)&&pi(g)==ve}function ra(g){return zr(g)&&pi(g)==it}function Yr(g){return zr(g)&&pi(g)==gt}function fo(g,_,R,H,Z){return g===_?!0:g==null||_==null||!zr(g)&&!zr(_)?g!==g&&_!==_:ko(g,_,R,H,fo,Z)}function ko(g,_,R,H,Z,fe){var be=On(g),Ue=On(_),Xe=be?Se:_i(g),Dt=Ue?Se:_i(_);Xe=Xe==ve?Ke:Xe,Dt=Dt==ve?Ke:Dt;var Ot=Xe==Ke,It=Dt==Ke,tn=Xe==Dt;if(tn&&Qf(g)){if(!Qf(_))return!1;be=!0,Ot=!1}if(tn&&!Ot)return fe||(fe=new na),be||Ap(g)?bv(g,_,R,H,Z,fe):Mv(g,_,Xe,R,H,Z,fe);if(!(R&b)){var mn=Ot&&Mi.call(g,"__wrapped__"),Bn=It&&Mi.call(_,"__wrapped__");if(mn||Bn){var hi=mn?g.value():g,Un=Bn?_.value():_;return fe||(fe=new na),Z(hi,Un,R,H,fe)}}return tn?(fe||(fe=new na),ps(g,_,R,H,Z,fe)):!1}function $d(g){return zr(g)&&_i(g)==ie}function Yh(g,_,R,H){var Z=R.length,fe=Z,be=!H;if(g==null)return!fe;for(g=di(g);Z--;){var Ue=R[Z];if(be&&Ue[2]?Ue[1]!==g[Ue[0]]:!(Ue[0]in g))return!1}for(;++Z<fe;){Ue=R[Z];var Xe=Ue[0],Dt=g[Xe],Ot=Ue[1];if(be&&Ue[2]){if(Dt===t&&!(Xe in g))return!1}else{var It=new na;if(H)var tn=H(Dt,Ot,Xe,g,_,It);if(!(tn===t?fo(Ot,Dt,b|C,H,It):tn))return!1}}return!0}function Cl(g){if(!Nr(g)||gu(g))return!1;var _=bu(g)?Wd:ft;return _.test(vo(g))}function Vu(g){return zr(g)&&pi(g)==Ve}function bm(g){return zr(g)&&_i(g)==j}function Mm(g){return zr(g)&&cd(g.length)&&!!li[pi(g)]}function Tm(g){return typeof g=="function"?g:g==null?Ze:typeof g=="object"?On(g)?tp(g[0],g[1]):Cm(g):Li(g)}function ku(g){if(!Vi(g))return Oa(g);var _=[];for(var R in di(g))Mi.call(g,R)&&R!="constructor"&&_.push(R);return _}function fv(g){if(!Nr(g))return Ha(g);var _=Vi(g),R=[];for(var H in g)H=="constructor"&&(_||!Mi.call(g,H))||R.push(H);return R}function ep(g,_){return g<_}function Em(g,_){var R=-1,H=Ds(g)?lt(g.length):[];return uu(g,function(Z,fe,be){H[++R]=_(Z,fe,be)}),H}function Cm(g){var _=sa(g);return _.length==1&&_[0][2]?Xc(_[0][0],_[0][1]):function(R){return R===g||Yh(R,g,_)}}function tp(g,_){return mu(g)&&dp(_)?Xc(mi(g),_):function(R){var H=qm(R,g);return H===t&&H===_?Tp(R,g):fo(_,H,b|C)}}function jh(g,_,R,H,Z){g!==_&&Pf(_,function(fe,be){if(Z||(Z=new na),Nr(fe))my(g,_,be,R,jh,H,Z);else{var Ue=H?H(Ku(g,be),fe,be+"",g,_,Z):t;Ue===t&&(Ue=fe),zo(g,be,Ue)}},qs)}function my(g,_,R,H,Z,fe,be){var Ue=Ku(g,R),Xe=Ku(_,R),Dt=be.get(Xe);if(Dt){zo(g,R,Dt);return}var Ot=fe?fe(Ue,Xe,R+"",g,_,be):t,It=Ot===t;if(It){var tn=On(Xe),mn=!tn&&Qf(Xe),Bn=!tn&&!mn&&Ap(Xe);Ot=Xe,tn||mn||Bn?On(Ue)?Ot=Ue:Kr(Ue)?Ot=jr(Ue):mn?(It=!1,Ot=Nm(Xe,!0)):Bn?(It=!1,Ot=Ta(Xe,!0)):Ot=[]:Hl(Xe)||Qc(Xe)?(Ot=Ue,Qc(Ue)?Ot=ux(Ue):(!Nr(Ue)||bu(Ue))&&(Ot=ms(Xe))):It=!1}It&&(be.set(Xe,Ot),Z(Ot,Xe,H,fe,be),be.delete(Xe)),zo(g,R,Ot)}function wm(g,_){var R=g.length;if(R)return _+=_<0?R:0,Ga(_,R)?g[_]:t}function Rm(g,_,R){_.length?_=lr(_,function(fe){return On(fe)?function(be){return Rr(be,fe.length===1?fe[0]:fe)}:fe}):_=[Ze];var H=-1;_=lr(_,Gs(hn()));var Z=Em(g,function(fe,be,Ue){var Xe=lr(_,function(Dt){return Dt(fe)});return{criteria:Xe,index:++H,value:fe}});return Eh(Z,function(fe,be){return cp(fe,be,R)})}function hv(g,_){return np(g,_,function(R,H){return Tp(g,H)})}function np(g,_,R){for(var H=-1,Z=_.length,fe={};++H<Z;){var be=_[H],Ue=Rr(g,be);R(Ue,be)&&Ic(fe,hu(be,g),Ue)}return fe}function dv(g){return function(_){return Rr(_,g)}}function qh(g,_,R,H){var Z=H?Th:va,fe=-1,be=_.length,Ue=g;for(g===_&&(_=jr(_)),R&&(Ue=lr(g,Gs(R)));++fe<be;)for(var Xe=0,Dt=_[fe],Ot=R?R(Dt):Dt;(Xe=Z(Ue,Ot,Xe,H))>-1;)Ue!==g&&wf.call(Ue,Xe,1),wf.call(g,Xe,1);return g}function Dm(g,_){for(var R=g?_.length:0,H=R-1;R--;){var Z=_[R];if(R==H||Z!==fe){var fe=Z;Ga(Z)?wf.call(g,Z,1):Ff(g,Z)}}return g}function ip(g,_){return g+au(Ph()*(_-g+1))}function pv(g,_,R,H){for(var Z=-1,fe=ur(Dc((_-g)/(R||1)),0),be=lt(fe);fe--;)be[H?fe:++Z]=g,g+=R;return be}function Bm(g,_){var R="";if(!g||_<1||_>ne)return R;do _%2&&(R+=g),_=au(_/2),_&&(g+=g);while(_);return R}function jn(g,_){return Pl(Ol(g,_,Ze),g+"")}function Nf(g){return Ia(Cp(g))}function Kh(g,_){var R=Cp(g);return qo(R,Vo(_,0,R.length))}function Ic(g,_,R,H){if(!Nr(g))return g;_=hu(_,g);for(var Z=-1,fe=_.length,be=fe-1,Ue=g;Ue!=null&&++Z<fe;){var Xe=mi(_[Z]),Dt=R;if(Xe==="__proto__"||Xe==="constructor"||Xe==="prototype")return g;if(Z!=be){var Ot=Ue[Xe];Dt=H?H(Ot,Xe,Ue):t,Dt===t&&(Dt=Nr(Ot)?Ot:Ga(_[Z+1])?[]:{})}Lc(Ue,Xe,Dt),Ue=Ue[Xe]}return g}var Jh=Uc?function(g,_){return Uc.set(g,_),g}:Ze,If=Rf?function(g,_){return Rf(g,"toString",{configurable:!0,enumerable:!1,value:Je(_),writable:!0})}:Ze;function Um(g){return qo(Cp(g))}function ba(g,_,R){var H=-1,Z=g.length;_<0&&(_=-_>Z?0:Z+_),R=R>Z?Z:R,R<0&&(R+=Z),Z=_>R?0:R-_>>>0,_>>>=0;for(var fe=lt(Z);++H<Z;)fe[H]=g[H+_];return fe}function rp(g,_){var R;return uu(g,function(H,Z,fe){return R=_(H,Z,fe),!R}),!!R}function Fc(g,_,R){var H=0,Z=g==null?H:g.length;if(typeof _=="number"&&_===_&&Z<=ge){for(;H<Z;){var fe=H+Z>>>1,be=g[fe];be!==null&&!Ka(be)&&(R?be<=_:be<_)?H=fe+1:Z=fe}return Z}return sp(g,_,Ze,R)}function sp(g,_,R,H){var Z=0,fe=g==null?0:g.length;if(fe===0)return 0;_=R(_);for(var be=_!==_,Ue=_===null,Xe=Ka(_),Dt=_===t;Z<fe;){var Ot=au((Z+fe)/2),It=R(g[Ot]),tn=It!==t,mn=It===null,Bn=It===It,hi=Ka(It);if(be)var Un=H||Bn;else Dt?Un=Bn&&(H||tn):Ue?Un=Bn&&tn&&(H||!mn):Xe?Un=Bn&&tn&&!mn&&(H||!hi):mn||hi?Un=!1:Un=H?It<=_:It<_;Un?Z=Ot+1:fe=Ot}return _r(fe,ce)}function Om(g,_){for(var R=-1,H=g.length,Z=0,fe=[];++R<H;){var be=g[R],Ue=_?_(be):be;if(!R||!So(Ue,Xe)){var Xe=Ue;fe[Z++]=be===0?0:be}}return fe}function ap(g){return typeof g=="number"?g:Ka(g)?X:+g}function Ma(g){if(typeof g=="string")return g;if(On(g))return lr(g,Ma)+"";if(Ka(g))return lu?lu.call(g):"";var _=g+"";return _=="0"&&1/g==-1/0?"-0":_}function wl(g,_,R){var H=-1,Z=bh,fe=g.length,be=!0,Ue=[],Xe=Ue;if(R)be=!1,Z=Mh;else if(fe>=r){var Dt=_?null:Sv(g);if(Dt)return Nu(Dt);be=!1,Z=cs,Xe=new Aa}else Xe=_?[]:Ue;e:for(;++H<fe;){var Ot=g[H],It=_?_(Ot):Ot;if(Ot=R||Ot!==0?Ot:0,be&&It===It){for(var tn=Xe.length;tn--;)if(Xe[tn]===It)continue e;_&&Xe.push(It),Ue.push(Ot)}else Z(Xe,It,R)||(Xe!==Ue&&Xe.push(It),Ue.push(Ot))}return Ue}function Ff(g,_){return _=hu(_,g),g=qu(g,_),g==null||delete g[mi(wr(_))]}function Lm(g,_,R,H){return Ic(g,_,R(Rr(g,_)),H)}function Zh(g,_,R,H){for(var Z=g.length,fe=H?Z:-1;(H?fe--:++fe<Z)&&_(g[fe],fe,g););return R?ba(g,H?0:fe,H?fe+1:Z):ba(g,H?fe+1:0,H?Z:fe)}function mv(g,_){var R=g;return R instanceof Yn&&(R=R.value()),Nd(_,function(H,Z){return Z.func.apply(Z.thisArg,Po([H],Z.args))},R)}function Qh(g,_,R){var H=g.length;if(H<2)return H?wl(g[0]):[];for(var Z=-1,fe=lt(H);++Z<H;)for(var be=g[Z],Ue=-1;++Ue<H;)Ue!=Z&&(fe[Z]=Hu(fe[Z]||be,g[Ue],_,R));return wl(ui(fe,1),_,R)}function Pm(g,_,R){for(var H=-1,Z=g.length,fe=_.length,be={};++H<Z;){var Ue=H<fe?_[H]:t;R(be,g[H],Ue)}return be}function op(g){return Kr(g)?g:[]}function $h(g){return typeof g=="function"?g:Ze}function hu(g,_){return On(g)?g:mu(g,_)?[g]:Ko(ji(g))}var gv=jn;function Xu(g,_,R){var H=g.length;return R=R===t?H:R,!_&&R>=H?g:ba(g,_,R)}var vv=hs||function(g){return gr.clearTimeout(g)};function Nm(g,_){if(_)return g.slice();var R=g.length,H=Al?Al(R):new g.constructor(R);return g.copy(H),H}function Gc(g){var _=new g.constructor(g.byteLength);return new wc(_).set(new wc(g)),_}function lp(g,_){var R=_?Gc(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.byteLength)}function up(g){var _=new g.constructor(g.source,Ce.exec(g));return _.lastIndex=g.lastIndex,_}function yv(g){return Oc?di(Oc.call(g)):{}}function Ta(g,_){var R=_?Gc(g.buffer):g.buffer;return new g.constructor(R,g.byteOffset,g.length)}function Gf(g,_){if(g!==_){var R=g!==t,H=g===null,Z=g===g,fe=Ka(g),be=_!==t,Ue=_===null,Xe=_===_,Dt=Ka(_);if(!Ue&&!Dt&&!fe&&g>_||fe&&be&&Xe&&!Ue&&!Dt||H&&be&&Xe||!R&&Xe||!Z)return 1;if(!H&&!fe&&!Dt&&g<_||Dt&&R&&Z&&!H&&!fe||Ue&&R&&Z||!be&&Z||!Xe)return-1}return 0}function cp(g,_,R){for(var H=-1,Z=g.criteria,fe=_.criteria,be=Z.length,Ue=R.length;++H<be;){var Xe=Gf(Z[H],fe[H]);if(Xe){if(H>=Ue)return Xe;var Dt=R[H];return Xe*(Dt=="desc"?-1:1)}}return g.index-_.index}function fp(g,_,R,H){for(var Z=-1,fe=g.length,be=R.length,Ue=-1,Xe=_.length,Dt=ur(fe-be,0),Ot=lt(Xe+Dt),It=!H;++Ue<Xe;)Ot[Ue]=_[Ue];for(;++Z<be;)(It||Z<fe)&&(Ot[R[Z]]=g[Z]);for(;Dt--;)Ot[Ue++]=g[Z++];return Ot}function Im(g,_,R,H){for(var Z=-1,fe=g.length,be=-1,Ue=R.length,Xe=-1,Dt=_.length,Ot=ur(fe-Ue,0),It=lt(Ot+Dt),tn=!H;++Z<Ot;)It[Z]=g[Z];for(var mn=Z;++Xe<Dt;)It[mn+Xe]=_[Xe];for(;++be<Ue;)(tn||Z<fe)&&(It[mn+R[be]]=g[Z++]);return It}function jr(g,_){var R=-1,H=g.length;for(_||(_=lt(H));++R<H;)_[R]=g[R];return _}function Ea(g,_,R,H){var Z=!R;R||(R={});for(var fe=-1,be=_.length;++fe<be;){var Ue=_[fe],Xe=H?H(R[Ue],g[Ue],Ue,R,g):t;Xe===t&&(Xe=g[Ue]),Z?Sa(R,Ue,Xe):Lc(R,Ue,Xe)}return R}function ed(g,_){return Ea(g,Fa(g),_)}function Hf(g,_){return Ea(g,mo(g),_)}function Hc(g,_){return function(R,H){var Z=On(R)?Sh:Tl,fe=_?_():{};return Z(R,g,hn(H,2),fe)}}function zc(g){return jn(function(_,R){var H=-1,Z=R.length,fe=Z>1?R[Z-1]:t,be=Z>2?R[2]:t;for(fe=g.length>3&&typeof fe=="function"?(Z--,fe):t,be&&cr(R[0],R[1],be)&&(fe=Z<3?t:fe,Z=1),_=di(_);++H<Z;){var Ue=R[H];Ue&&g(_,Ue,H,fe)}return _})}function Fm(g,_){return function(R,H){if(R==null)return R;if(!Ds(R))return g(R,H);for(var Z=R.length,fe=_?Z:-1,be=di(R);(_?fe--:++fe<Z)&&H(be[fe],fe,be)!==!1;);return R}}function Wu(g){return function(_,R,H){for(var Z=-1,fe=di(_),be=H(_),Ue=be.length;Ue--;){var Xe=be[g?Ue:++Z];if(R(fe[Xe],Xe,fe)===!1)break}return _}}function _v(g,_,R){var H=_&T,Z=ho(g);function fe(){var be=this&&this!==gr&&this instanceof fe?Z:g;return be.apply(H?R:this,arguments)}return fe}function Qi(g){return function(_){_=ji(_);var R=Io(_)?Tr(_):t,H=R?R[0]:_.charAt(0),Z=R?Xu(R,1).join(""):_.slice(1);return H[g]()+Z}}function Xs(g){return function(_){return Nd(E($c(_).replace(Jl,"")),g,"")}}function ho(g){return function(){var _=arguments;switch(_.length){case 0:return new g;case 1:return new g(_[0]);case 2:return new g(_[0],_[1]);case 3:return new g(_[0],_[1],_[2]);case 4:return new g(_[0],_[1],_[2],_[3]);case 5:return new g(_[0],_[1],_[2],_[3],_[4]);case 6:return new g(_[0],_[1],_[2],_[3],_[4],_[5]);case 7:return new g(_[0],_[1],_[2],_[3],_[4],_[5],_[6])}var R=Pa(g.prototype),H=g.apply(R,_);return Nr(H)?H:R}}function xv(g,_,R){var H=ho(g);function Z(){for(var fe=arguments.length,be=lt(fe),Ue=fe,Xe=po(Z);Ue--;)be[Ue]=arguments[Ue];var Dt=fe<3&&be[0]!==Xe&&be[fe-1]!==Xe?[]:eu(be,Xe);if(fe-=Dt.length,fe<R)return zf(g,_,Cr,Z.placeholder,t,be,Dt,t,t,R-fe);var Ot=this&&this!==gr&&this instanceof Z?H:g;return vr(Ot,this,be)}return Z}function du(g){return function(_,R,H){var Z=di(_);if(!Ds(_)){var fe=hn(R,3);_=Us(_),R=function(Ue){return fe(Z[Ue],Ue,Z)}}var be=g(_,R,H);return be>-1?Z[fe?_[be]:be]:t}}function Xo(g){return Yi(function(_){var R=_.length,H=R,Z=_a.prototype.thru;for(g&&_.reverse();H--;){var fe=_[H];if(typeof fe!="function")throw new yr(a);if(Z&&!be&&Bl(fe)=="wrapper")var be=new _a([],!0)}for(H=be?H:R;++H<R;){fe=_[H];var Ue=Bl(fe),Xe=Ue=="wrapper"?rd(fe):t;Xe&&Vc(Xe[0])&&Xe[1]==(V|D|P|G)&&!Xe[4].length&&Xe[9]==1?be=be[Bl(Xe[0])].apply(be,Xe[3]):be=fe.length==1&&Vc(fe)?be[Ue]():be.thru(fe)}return function(){var Dt=arguments,Ot=Dt[0];if(be&&Dt.length==1&&On(Ot))return be.plant(Ot).value();for(var It=0,tn=R?_[It].apply(this,Dt):Ot;++It<R;)tn=_[It].call(this,tn);return tn}})}function Cr(g,_,R,H,Z,fe,be,Ue,Xe,Dt){var Ot=_&V,It=_&T,tn=_&M,mn=_&(D|O),Bn=_&I,hi=tn?t:ho(g);function Un(){for(var wi=arguments.length,Pi=lt(wi),Tu=wi;Tu--;)Pi[Tu]=arguments[Tu];if(mn)var il=po(Un),Eu=iv(Pi,il);if(H&&(Pi=fp(Pi,H,Z,mn)),fe&&(Pi=Im(Pi,fe,be,mn)),wi-=Eu,mn&&wi<Dt){var Os=eu(Pi,il);return zf(g,_,Cr,Un.placeholder,R,Pi,Os,Ue,Xe,Dt-wi)}var ef=It?R:this,fd=tn?ef[g]:g;return wi=Pi.length,Ue?Pi=Ll(Pi,Ue):Bn&&wi>1&&Pi.reverse(),Ot&&Xe<wi&&(Pi.length=Xe),this&&this!==gr&&this instanceof Un&&(fd=hi||ho(fd)),fd.apply(ef,Pi)}return Un}function Rl(g,_){return function(R,H){return Sm(R,g,_(H),{})}}function Wo(g,_){return function(R,H){var Z;if(R===t&&H===t)return _;if(R!==t&&(Z=R),H!==t){if(Z===t)return H;typeof R=="string"||typeof H=="string"?(R=Ma(R),H=Ma(H)):(R=ap(R),H=ap(H)),Z=g(R,H)}return Z}}function ws(g){return Yi(function(_){return _=lr(_,Gs(hn())),jn(function(R){var H=this;return g(_,function(Z){return vr(Z,H,R)})})})}function td(g,_){_=_===t?" ":Ma(_);var R=_.length;if(R<2)return R?Bm(_,g):_;var H=Bm(_,Dc(g/Hs(_)));return Io(_)?Xu(Tr(H),0,g).join(""):H.slice(0,g)}function Av(g,_,R,H){var Z=_&T,fe=ho(g);function be(){for(var Ue=-1,Xe=arguments.length,Dt=-1,Ot=H.length,It=lt(Ot+Xe),tn=this&&this!==gr&&this instanceof be?fe:g;++Dt<Ot;)It[Dt]=H[Dt];for(;Xe--;)It[Dt++]=arguments[++Ue];return vr(tn,Z?R:this,It)}return be}function Yo(g){return function(_,R,H){return H&&typeof H!="number"&&cr(_,R,H)&&(R=H=t),_=ic(_),R===t?(R=_,_=0):R=ic(R),H=H===t?_<R?1:-1:ic(H),pv(_,R,H,g)}}function Dl(g){return function(_,R){return typeof _=="string"&&typeof R=="string"||(_=zl(_),R=zl(R)),g(_,R)}}function zf(g,_,R,H,Z,fe,be,Ue,Xe,Dt){var Ot=_&D,It=Ot?be:t,tn=Ot?t:be,mn=Ot?fe:t,Bn=Ot?t:fe;_|=Ot?P:F,_&=~(Ot?F:P),_&B||(_&=-4);var hi=[g,_,Z,mn,It,Bn,tn,Ue,Xe,Dt],Un=R.apply(t,hi);return Vc(g)&&Wf(Un,hi),Un.placeholder=H,yu(Un,g,_)}function Vf(g){var _=Xr[g];return function(R,H){if(R=zl(R),H=H==null?0:_r(kn(H),292),H&&Bc(R)){var Z=(ji(R)+"e").split("e"),fe=_(Z[0]+"e"+(+Z[1]+H));return Z=(ji(fe)+"e").split("e"),+(Z[0]+"e"+(+Z[1]-H))}return _(R)}}var Sv=ai&&1/Nu(new ai([,-0]))[1]==ee?function(g){return new ai(g)}:on;function nd(g){return function(_){var R=_i(_);return R==ie?Vd(_):R==j?Iu(_):wh(_,g(_))}}function qr(g,_,R,H,Z,fe,be,Ue){var Xe=_&M;if(!Xe&&typeof g!="function")throw new yr(a);var Dt=H?H.length:0;if(Dt||(_&=-97,H=Z=t),be=be===t?be:ur(kn(be),0),Ue=Ue===t?Ue:kn(Ue),Dt-=Z?Z.length:0,_&F){var Ot=H,It=Z;H=Z=t}var tn=Xe?t:rd(g),mn=[g,_,R,H,Z,Ot,It,fe,be,Ue];if(tn&&Wc(mn,tn),g=mn[0],_=mn[1],R=mn[2],H=mn[3],Z=mn[4],Ue=mn[9]=mn[9]===t?Xe?0:g.length:ur(mn[9]-Dt,0),!Ue&&_&(D|O)&&(_&=-25),!_||_==T)var Bn=_v(g,_,R);else _==D||_==O?Bn=xv(g,_,Ue):(_==P||_==(T|P))&&!Z.length?Bn=Av(g,_,R,H):Bn=Cr.apply(t,mn);var hi=tn?Jh:Wf;return yu(hi(Bn,mn),g,_)}function id(g,_,R,H){return g===t||So(g,Fo[R])&&!Mi.call(H,R)?_:g}function Gm(g,_,R,H,Z,fe){return Nr(g)&&Nr(_)&&(fe.set(_,g),jh(g,_,t,Gm,fe),fe.delete(_)),g}function hp(g){return Hl(g)?t:g}function bv(g,_,R,H,Z,fe){var be=R&b,Ue=g.length,Xe=_.length;if(Ue!=Xe&&!(be&&Xe>Ue))return!1;var Dt=fe.get(g),Ot=fe.get(_);if(Dt&&Ot)return Dt==_&&Ot==g;var It=-1,tn=!0,mn=R&C?new Aa:t;for(fe.set(g,_),fe.set(_,g);++It<Ue;){var Bn=g[It],hi=_[It];if(H)var Un=be?H(hi,Bn,It,_,g,fe):H(Bn,hi,It,g,_,fe);if(Un!==t){if(Un)continue;tn=!1;break}if(mn){if(!Id(_,function(wi,Pi){if(!cs(mn,Pi)&&(Bn===wi||Z(Bn,wi,R,H,fe)))return mn.push(Pi)})){tn=!1;break}}else if(!(Bn===hi||Z(Bn,hi,R,H,fe))){tn=!1;break}}return fe.delete(g),fe.delete(_),tn}function Mv(g,_,R,H,Z,fe,be){switch(R){case rt:if(g.byteLength!=_.byteLength||g.byteOffset!=_.byteOffset)return!1;g=g.buffer,_=_.buffer;case it:return!(g.byteLength!=_.byteLength||!fe(new wc(g),new wc(_)));case Le:case gt:case ut:return So(+g,+_);case At:return g.name==_.name&&g.message==_.message;case Ve:case Y:return g==_+"";case ie:var Ue=Vd;case j:var Xe=H&b;if(Ue||(Ue=Nu),g.size!=_.size&&!Xe)return!1;var Dt=be.get(g);if(Dt)return Dt==_;H|=C,be.set(g,_);var Ot=bv(Ue(g),Ue(_),H,Z,fe,be);return be.delete(g),Ot;case _e:if(Oc)return Oc.call(g)==Oc.call(_)}return!1}function ps(g,_,R,H,Z,fe){var be=R&b,Ue=Ws(g),Xe=Ue.length,Dt=Ws(_),Ot=Dt.length;if(Xe!=Ot&&!be)return!1;for(var It=Xe;It--;){var tn=Ue[It];if(!(be?tn in _:Mi.call(_,tn)))return!1}var mn=fe.get(g),Bn=fe.get(_);if(mn&&Bn)return mn==_&&Bn==g;var hi=!0;fe.set(g,_),fe.set(_,g);for(var Un=be;++It<Xe;){tn=Ue[It];var wi=g[tn],Pi=_[tn];if(H)var Tu=be?H(Pi,wi,tn,_,g,fe):H(wi,Pi,tn,g,_,fe);if(!(Tu===t?wi===Pi||Z(wi,Pi,R,H,fe):Tu)){hi=!1;break}Un||(Un=tn=="constructor")}if(hi&&!Un){var il=g.constructor,Eu=_.constructor;il!=Eu&&"constructor"in g&&"constructor"in _&&!(typeof il=="function"&&il instanceof il&&typeof Eu=="function"&&Eu instanceof Eu)&&(hi=!1)}return fe.delete(g),fe.delete(_),hi}function Yi(g){return Pl(Ol(g,t,Dr),g+"")}function Ws(g){return xm(g,Us,Fa)}function Ys(g){return xm(g,qs,mo)}var rd=Uc?function(g){return Uc.get(g)}:on;function Bl(g){for(var _=g.name+"",R=La[_],H=Mi.call(La,_)?R.length:0;H--;){var Z=R[H],fe=Z.func;if(fe==null||fe==g)return Z.name}return _}function po(g){var _=Mi.call(re,"placeholder")?re:g;return _.placeholder}function hn(){var g=re.iteratee||Cn;return g=g===Cn?Tm:g,arguments.length?g(arguments[0],arguments[1]):g}function pu(g,_){var R=g.__data__;return jo(_)?R[typeof _=="string"?"string":"hash"]:R.map}function sa(g){for(var _=Us(g),R=_.length;R--;){var H=_[R],Z=g[H];_[R]=[H,Z,dp(Z)]}return _}function $r(g,_){var R=zd(g,_);return Cl(R)?R:t}function Yu(g){var _=Mi.call(g,nr),R=g[nr];try{g[nr]=t;var H=!0}catch{}var Z=Wr.call(g);return H&&(_?g[nr]=R:delete g[nr]),Z}var Fa=Vs?function(g){return g==null?[]:(g=di(g),ro(Vs(g),function(_){return ru.call(g,_)}))}:PM,mo=Vs?function(g){for(var _=[];g;)Po(_,Fa(g)),g=Cf(g);return _}:PM,_i=pi;(Nh&&_i(new Nh(new ArrayBuffer(1)))!=rt||Qr&&_i(new Qr)!=ie||xr&&_i(xr.resolve())!=Pe||ai&&_i(new ai)!=j||ks&&_i(new ks)!=Ge)&&(_i=function(g){var _=pi(g),R=_==Ke?g.constructor:t,H=R?vo(R):"";if(H)switch(H){case av:return rt;case mm:return ie;case Go:return Pe;case Df:return j;case Hi:return Ge}return _});function kf(g,_,R){for(var H=-1,Z=R.length;++H<Z;){var fe=R[H],be=fe.size;switch(fe.type){case"drop":g+=be;break;case"dropRight":_-=be;break;case"take":_=_r(_,g+be);break;case"takeRight":g=ur(g,_-be);break}}return{start:g,end:_}}function Ul(g){var _=g.match(pr);return _?_[1].split(ln):[]}function ju(g,_,R){_=hu(_,g);for(var H=-1,Z=_.length,fe=!1;++H<Z;){var be=mi(_[H]);if(!(fe=g!=null&&R(g,be)))break;g=g[be]}return fe||++H!=Z?fe:(Z=g==null?0:g.length,!!Z&&cd(Z)&&Ga(be,Z)&&(On(g)||Qc(g)))}function Rs(g){var _=g.length,R=new g.constructor(_);return _&&typeof g[0]=="string"&&Mi.call(g,"index")&&(R.index=g.index,R.input=g.input),R}function ms(g){return typeof g.constructor=="function"&&!Vi(g)?Pa(Cf(g)):{}}function xi(g,_,R){var H=g.constructor;switch(_){case it:return Gc(g);case Le:case gt:return new H(+g);case rt:return lp(g,R);case yt:case Vt:case ht:case Lt:case Et:case _t:case ot:case xe:case We:return Ta(g,R);case ie:return new H;case ut:case Y:return new H(g);case Ve:return up(g);case j:return new H;case _e:return yv(g)}}function go(g,_){var R=_.length;if(!R)return g;var H=R-1;return _[H]=(R>1?"& ":"")+_[H],_=_.join(R>2?", ":" "),g.replace(kr,`{
/* [wrapped with `+_+`] */
`)}function gs(g){return On(g)||Qc(g)||!!(ta&&g&&g[ta])}function Ga(g,_){var R=typeof g;return _=_??ne,!!_&&(R=="number"||R!="symbol"&&Bt.test(g))&&g>-1&&g%1==0&&g<_}function cr(g,_,R){if(!Nr(R))return!1;var H=typeof _;return(H=="number"?Ds(R)&&Ga(_,R.length):H=="string"&&_ in R)?So(R[_],g):!1}function mu(g,_){if(On(g))return!1;var R=typeof g;return R=="number"||R=="symbol"||R=="boolean"||g==null||Ka(g)?!0:ti.test(g)||!nn.test(g)||_!=null&&g in di(_)}function jo(g){var _=typeof g;return _=="string"||_=="number"||_=="symbol"||_=="boolean"?g!=="__proto__":g===null}function Vc(g){var _=Bl(g),R=re[_];if(typeof R!="function"||!(_ in Yn.prototype))return!1;if(g===R)return!0;var H=rd(R);return!!H&&g===H[0]}function gu(g){return!!Xd&&Xd in g}var kc=so?bu:NM;function Vi(g){var _=g&&g.constructor,R=typeof _=="function"&&_.prototype||Fo;return g===R}function dp(g){return g===g&&!Nr(g)}function Xc(g,_){return function(R){return R==null?!1:R[g]===_&&(_!==t||g in di(R))}}function Xf(g){var _=Vm(g,function(H){return R.size===f&&R.clear(),H}),R=_.cache;return _}function Wc(g,_){var R=g[1],H=_[1],Z=R|H,fe=Z<(T|M|V),be=H==V&&R==D||H==V&&R==G&&g[7].length<=_[8]||H==(V|G)&&_[7].length<=_[8]&&R==D;if(!(fe||be))return g;H&T&&(g[2]=_[2],Z|=R&T?0:B);var Ue=_[3];if(Ue){var Xe=g[3];g[3]=Xe?fp(Xe,Ue,_[4]):Ue,g[4]=Xe?eu(g[3],d):_[4]}return Ue=_[5],Ue&&(Xe=g[5],g[5]=Xe?Im(Xe,Ue,_[6]):Ue,g[6]=Xe?eu(g[5],d):_[6]),Ue=_[7],Ue&&(g[7]=Ue),H&V&&(g[8]=g[8]==null?_[8]:_r(g[8],_[8])),g[9]==null&&(g[9]=_[9]),g[0]=_[0],g[1]=Z,g}function Ha(g){var _=[];if(g!=null)for(var R in di(g))_.push(R);return _}function Yc(g){return Wr.call(g)}function Ol(g,_,R){return _=ur(_===t?g.length-1:_,0),function(){for(var H=arguments,Z=-1,fe=ur(H.length-_,0),be=lt(fe);++Z<fe;)be[Z]=H[_+Z];Z=-1;for(var Ue=lt(_+1);++Z<_;)Ue[Z]=H[Z];return Ue[_]=R(be),vr(g,this,Ue)}}function qu(g,_){return _.length<2?g:Rr(g,ba(_,0,-1))}function Ll(g,_){for(var R=g.length,H=_r(_.length,R),Z=jr(g);H--;){var fe=_[H];g[H]=Ga(fe,R)?Z[fe]:t}return g}function Ku(g,_){if(!(_==="constructor"&&typeof g[_]=="function")&&_!="__proto__")return g[_]}var Wf=_u(Jh),vu=Oh||function(g,_){return gr.setTimeout(g,_)},Pl=_u(If);function yu(g,_,R){var H=_+"";return Pl(g,go(H,za(Ul(H),R)))}function _u(g){var _=0,R=0;return function(){var H=Sl(),Z=te-(H-R);if(R=H,Z>0){if(++_>=$)return arguments[0]}else _=0;return g.apply(t,arguments)}}function qo(g,_){var R=-1,H=g.length,Z=H-1;for(_=_===t?H:_;++R<_;){var fe=ip(R,Z),be=g[fe];g[fe]=g[R],g[R]=be}return g.length=_,g}var Ko=Xf(function(g){var _=[];return g.charCodeAt(0)===46&&_.push(""),g.replace(Fn,function(R,H,Z,fe){_.push(Z?fe.replace(K,"$1"):H||R)}),_});function mi(g){if(typeof g=="string"||Ka(g))return g;var _=g+"";return _=="0"&&1/g==-1/0?"-0":_}function vo(g){if(g!=null){try{return Cc.call(g)}catch{}try{return g+""}catch{}}return""}function za(g,_){return Ua(oe,function(R){var H="_."+R[0];_&R[1]&&!bh(g,H)&&g.push(H)}),g.sort()}function $i(g){if(g instanceof Yn)return g.clone();var _=new _a(g.__wrapped__,g.__chain__);return _.__actions__=jr(g.__actions__),_.__index__=g.__index__,_.__values__=g.__values__,_}function es(g,_,R){(R?cr(g,_,R):_===t)?_=1:_=ur(kn(_),0);var H=g==null?0:g.length;if(!H||_<1)return[];for(var Z=0,fe=0,be=lt(Dc(H/_));Z<H;)be[fe++]=ba(g,Z,Z+=_);return be}function xu(g){for(var _=-1,R=g==null?0:g.length,H=0,Z=[];++_<R;){var fe=g[_];fe&&(Z[H++]=fe)}return Z}function qn(){var g=arguments.length;if(!g)return[];for(var _=lt(g-1),R=arguments[0],H=g;H--;)_[H-1]=arguments[H];return Po(On(R)?jr(R):[R],ui(_,1))}var Sn=jn(function(g,_){return Kr(g)?Hu(g,ui(_,1,Kr,!0)):[]}),Ti=jn(function(g,_){var R=wr(_);return Kr(R)&&(R=t),Kr(g)?Hu(g,ui(_,1,Kr,!0),hn(R,2)):[]}),yo=jn(function(g,_){var R=wr(_);return Kr(R)&&(R=t),Kr(g)?Hu(g,ui(_,1,Kr,!0),t,R):[]});function jc(g,_,R){var H=g==null?0:g.length;return H?(_=R||_===t?1:kn(_),ba(g,_<0?0:_,H)):[]}function Ju(g,_,R){var H=g==null?0:g.length;return H?(_=R||_===t?1:kn(_),_=H-_,ba(g,0,_<0?0:_)):[]}function pp(g,_){return g&&g.length?Zh(g,hn(_,3),!0,!0):[]}function qc(g,_){return g&&g.length?Zh(g,hn(_,3),!0):[]}function vs(g,_,R,H){var Z=g==null?0:g.length;return Z?(R&&typeof R!="number"&&cr(g,_,R)&&(R=0,H=Z),Vn(g,_,R,H)):[]}function _o(g,_,R){var H=g==null?0:g.length;if(!H)return-1;var Z=R==null?0:kn(R);return Z<0&&(Z=ur(H+Z,0)),No(g,hn(_,3),Z)}function sd(g,_,R){var H=g==null?0:g.length;if(!H)return-1;var Z=H-1;return R!==t&&(Z=kn(R),Z=R<0?ur(H+Z,0):_r(Z,H-1)),No(g,hn(_,3),Z,!0)}function Dr(g){var _=g==null?0:g.length;return _?ui(g,1):[]}function Zu(g){var _=g==null?0:g.length;return _?ui(g,ee):[]}function aa(g,_){var R=g==null?0:g.length;return R?(_=_===t?1:kn(_),ui(g,_)):[]}function Va(g){for(var _=-1,R=g==null?0:g.length,H={};++_<R;){var Z=g[_];H[Z[0]]=Z[1]}return H}function Jo(g){return g&&g.length?g[0]:t}function mp(g,_,R){var H=g==null?0:g.length;if(!H)return-1;var Z=R==null?0:kn(R);return Z<0&&(Z=ur(H+Z,0)),va(g,_,Z)}function gp(g){var _=g==null?0:g.length;return _?ba(g,0,-1):[]}var ir=jn(function(g){var _=lr(g,op);return _.length&&_[0]===g[0]?Am(_):[]}),vp=jn(function(g){var _=wr(g),R=lr(g,op);return _===wr(R)?_=t:R.pop(),R.length&&R[0]===g[0]?Am(R,hn(_,2)):[]}),Au=jn(function(g){var _=wr(g),R=lr(g,op);return _=typeof _=="function"?_:t,_&&R.pop(),R.length&&R[0]===g[0]?Am(R,t,_):[]});function Zo(g,_){return g==null?"":Ts.call(g,_)}function wr(g){var _=g==null?0:g.length;return _?g[_-1]:t}function Yf(g,_,R){var H=g==null?0:g.length;if(!H)return-1;var Z=H;return R!==t&&(Z=kn(R),Z=Z<0?ur(H+Z,0):_r(Z,H-1)),_===_?ya(g,_,Z):No(g,Lu,Z,!0)}function Tv(g,_){return g&&g.length?wm(g,kn(_)):t}var Ev=jn(rr);function rr(g,_){return g&&g.length&&_&&_.length?qh(g,_):g}function Hm(g,_,R){return g&&g.length&&_&&_.length?qh(g,_,hn(R,2)):g}function Nl(g,_,R){return g&&g.length&&_&&_.length?qh(g,_,t,R):g}var Il=Yi(function(g,_){var R=g==null?0:g.length,H=Xh(g,_);return Dm(g,lr(_,function(Z){return Ga(Z,R)?+Z:Z}).sort(Gf)),H});function Lr(g,_){var R=[];if(!(g&&g.length))return R;var H=-1,Z=[],fe=g.length;for(_=hn(_,3);++H<fe;){var be=g[H];_(be,H,g)&&(R.push(be),Z.push(H))}return Dm(g,Z),R}function ad(g){return g==null?g:pm.call(g)}function ki(g,_,R){var H=g==null?0:g.length;return H?(R&&typeof R!="number"&&cr(g,_,R)?(_=0,R=H):(_=_==null?0:kn(_),R=R===t?H:kn(R)),ba(g,_,R)):[]}function Gn(g,_){return Fc(g,_)}function ii(g,_,R){return sp(g,_,hn(R,2))}function yn(g,_){var R=g==null?0:g.length;if(R){var H=Fc(g,_);if(H<R&&So(g[H],_))return H}return-1}function Xn(g,_){return Fc(g,_,!0)}function Br(g,_,R){return sp(g,_,hn(R,2),!0)}function ka(g,_){var R=g==null?0:g.length;if(R){var H=Fc(g,_,!0)-1;if(So(g[H],_))return H}return-1}function jf(g){return g&&g.length?Om(g):[]}function qf(g,_){return g&&g.length?Om(g,hn(_,2)):[]}function xo(g){var _=g==null?0:g.length;return _?ba(g,1,_):[]}function Ar(g,_,R){return g&&g.length?(_=R||_===t?1:kn(_),ba(g,0,_<0?0:_)):[]}function Qo(g,_,R){var H=g==null?0:g.length;return H?(_=R||_===t?1:kn(_),_=H-_,ba(g,_<0?0:_,H)):[]}function Fl(g,_){return g&&g.length?Zh(g,hn(_,3),!1,!0):[]}function Kc(g,_){return g&&g.length?Zh(g,hn(_,3)):[]}var Ao=jn(function(g){return wl(ui(g,1,Kr,!0))}),Ei=jn(function(g){var _=wr(g);return Kr(_)&&(_=t),wl(ui(g,1,Kr,!0),hn(_,2))}),Xi=jn(function(g){var _=wr(g);return _=typeof _=="function"?_:t,wl(ui(g,1,Kr,!0),t,_)});function Mn(g){return g&&g.length?wl(g):[]}function ci(g,_){return g&&g.length?wl(g,hn(_,2)):[]}function er(g,_){return _=typeof _=="function"?_:t,g&&g.length?wl(g,t,_):[]}function ys(g){if(!(g&&g.length))return[];var _=0;return g=ro(g,function(R){if(Kr(R))return _=ur(R.length,_),!0}),xl(_,function(R){return lr(g,Tc(R))})}function Xa(g,_){if(!(g&&g.length))return[];var R=ys(g);return _==null?R:lr(R,function(H){return vr(_,t,H)})}var Wa=jn(function(g,_){return Kr(g)?Hu(g,_):[]}),ts=jn(function(g){return Qh(ro(g,Kr))}),js=jn(function(g){var _=wr(g);return Kr(_)&&(_=t),Qh(ro(g,Kr),hn(_,2))}),sr=jn(function(g){var _=wr(g);return _=typeof _=="function"?_:t,Qh(ro(g,Kr),t,_)}),Ya=jn(ys);function Su(g,_){return Pm(g||[],_||[],Lc)}function od(g,_){return Pm(g||[],_||[],Ic)}var ja=jn(function(g){var _=g.length,R=_>1?g[_-1]:t;return R=typeof R=="function"?(g.pop(),R):t,Xa(g,R)});function $o(g){var _=re(g);return _.__chain__=!0,_}function Jc(g,_){return _(g),g}function Sr(g,_){return _(g)}var yp=Yi(function(g){var _=g.length,R=_?g[0]:0,H=this.__wrapped__,Z=function(fe){return Xh(fe,g)};return _>1||this.__actions__.length||!(H instanceof Yn)||!Ga(R)?this.thru(Z):(H=H.slice(R,+R+(_?1:0)),H.__actions__.push({func:Sr,args:[Z],thisArg:t}),new _a(H,this.__chain__).thru(function(fe){return _&&!fe.length&&fe.push(t),fe}))});function oa(){return $o(this)}function Kf(){return new _a(this.value(),this.__chain__)}function ld(){this.__values__===t&&(this.__values__=nl(this.value()));var g=this.__index__>=this.__values__.length,_=g?t:this.__values__[this.__index__++];return{done:g,value:_}}function Qu(){return this}function el(g){for(var _,R=this;R instanceof oo;){var H=$i(R);H.__index__=0,H.__values__=t,_?Z.__wrapped__=H:_=H;var Z=H;R=R.__wrapped__}return Z.__wrapped__=g,_}function Gl(){var g=this.__wrapped__;if(g instanceof Yn){var _=g;return this.__actions__.length&&(_=new Yn(this)),_=_.reverse(),_.__actions__.push({func:Sr,args:[ad],thisArg:t}),new _a(_,this.__chain__)}return this.thru(ad)}function Zc(){return mv(this.__wrapped__,this.__actions__)}var $u=Hc(function(g,_,R){Mi.call(g,R)?++g[R]:Sa(g,R,1)});function _p(g,_,R){var H=On(g)?Pd:Wh;return R&&cr(g,_,R)&&(_=t),H(g,hn(_,3))}function Jf(g,_){var R=On(g)?ro:zi;return R(g,hn(_,3))}var xp=du(_o),h=du(sd);function p(g,_){return ui(Ht(g,_),1)}function S(g,_){return ui(Ht(g,_),ee)}function w(g,_,R){return R=R===t?1:kn(R),ui(Ht(g,_),R)}function L(g,_){var R=On(g)?Ua:uu;return R(g,hn(_,3))}function z(g,_){var R=On(g)?nv:Zd;return R(g,hn(_,3))}var ue=Hc(function(g,_,R){Mi.call(g,R)?g[R].push(_):Sa(g,R,[_])});function Ee(g,_,R,H){g=Ds(g)?g:Cp(g),R=R&&!H?kn(R):0;var Z=g.length;return R<0&&(R=ur(Z+R,0)),Lv(g)?R<=Z&&g.indexOf(_,R)>-1:!!Z&&va(g,_,R)>-1}var ke=jn(function(g,_,R){var H=-1,Z=typeof _=="function",fe=Ds(g)?lt(g.length):[];return uu(g,function(be){fe[++H]=Z?vr(_,be,R):zu(be,_,R)}),fe}),St=Hc(function(g,_,R){Sa(g,R,_)});function Ht(g,_){var R=On(g)?lr:Em;return R(g,hn(_,3))}function Zt(g,_,R,H){return g==null?[]:(On(_)||(_=_==null?[]:[_]),R=H?t:R,On(R)||(R=R==null?[]:[R]),Rm(g,_,R))}var en=Hc(function(g,_,R){g[R?0:1].push(_)},function(){return[[],[]]});function Hn(g,_,R){var H=On(g)?Nd:us,Z=arguments.length<3;return H(g,hn(_,4),R,Z,uu)}function qa(g,_,R){var H=On(g)?om:us,Z=arguments.length<3;return H(g,hn(_,4),R,Z,Zd)}function ec(g,_){var R=On(g)?ro:zi;return R(g,km(hn(_,3)))}function tc(g){var _=On(g)?Ia:Nf;return _(g)}function tt(g,_,R){(R?cr(g,_,R):_===t)?_=1:_=kn(_);var H=On(g)?ym:Kh;return H(g,_)}function Oe(g){var _=On(g)?lv:Um;return _(g)}function st(g){if(g==null)return 0;if(Ds(g))return Lv(g)?Hs(g):g.length;var _=_i(g);return _==ie||_==j?g.size:ku(g).length}function zt(g,_,R){var H=On(g)?Id:rp;return R&&cr(g,_,R)&&(_=t),H(g,hn(_,3))}var pn=jn(function(g,_){if(g==null)return[];var R=_.length;return R>1&&cr(g,_[0],_[1])?_=[]:R>2&&cr(_[0],_[1],_[2])&&(_=[_[0]]),Rm(g,ui(_,1),[])}),tr=Gu||function(){return gr.Date.now()};function Dn(g,_){if(typeof _!="function")throw new yr(a);return g=kn(g),function(){if(--g<1)return _.apply(this,arguments)}}function Ci(g,_,R){return _=R?t:_,_=g&&_==null?g.length:_,qr(g,V,t,t,t,t,_)}function Pr(g,_){var R;if(typeof _!="function")throw new yr(a);return g=kn(g),function(){return--g>0&&(R=_.apply(this,arguments)),g<=1&&(_=t),R}}var ei=jn(function(g,_,R){var H=T;if(R.length){var Z=eu(R,po(ei));H|=P}return qr(g,H,_,R,Z)}),tl=jn(function(g,_,R){var H=T|M;if(R.length){var Z=eu(R,po(tl));H|=P}return qr(_,H,g,R,Z)});function ud(g,_,R){_=R?t:_;var H=qr(g,D,t,t,t,t,t,_);return H.placeholder=ud.placeholder,H}function Cv(g,_,R){_=R?t:_;var H=qr(g,O,t,t,t,t,t,_);return H.placeholder=Cv.placeholder,H}function Zf(g,_,R){var H,Z,fe,be,Ue,Xe,Dt=0,Ot=!1,It=!1,tn=!0;if(typeof g!="function")throw new yr(a);_=zl(_)||0,Nr(R)&&(Ot=!!R.leading,It="maxWait"in R,fe=It?ur(zl(R.maxWait)||0,_):fe,tn="trailing"in R?!!R.trailing:tn);function mn(Os){var ef=H,fd=Z;return H=Z=t,Dt=Os,be=g.apply(fd,ef),be}function Bn(Os){return Dt=Os,Ue=vu(wi,_),Ot?mn(Os):be}function hi(Os){var ef=Os-Xe,fd=Os-Dt,OR=_-ef;return It?_r(OR,fe-fd):OR}function Un(Os){var ef=Os-Xe,fd=Os-Dt;return Xe===t||ef>=_||ef<0||It&&fd>=fe}function wi(){var Os=tr();if(Un(Os))return Pi(Os);Ue=vu(wi,hi(Os))}function Pi(Os){return Ue=t,tn&&H?mn(Os):(H=Z=t,be)}function Tu(){Ue!==t&&vv(Ue),Dt=0,H=Xe=Z=Ue=t}function il(){return Ue===t?be:Pi(tr())}function Eu(){var Os=tr(),ef=Un(Os);if(H=arguments,Z=this,Xe=Os,ef){if(Ue===t)return Bn(Xe);if(It)return vv(Ue),Ue=vu(wi,_),mn(Xe)}return Ue===t&&(Ue=vu(wi,_)),be}return Eu.cancel=Tu,Eu.flush=il,Eu}var nc=jn(function(g,_){return Nc(g,1,_)}),zm=jn(function(g,_,R){return Nc(g,zl(_)||0,R)});function oM(g){return qr(g,I)}function Vm(g,_){if(typeof g!="function"||_!=null&&typeof _!="function")throw new yr(a);var R=function(){var H=arguments,Z=_?_.apply(this,H):H[0],fe=R.cache;if(fe.has(Z))return fe.get(Z);var be=g.apply(this,H);return R.cache=fe.set(Z,be)||fe,be};return R.cache=new(Vm.Cache||xa),R}Vm.Cache=xa;function km(g){if(typeof g!="function")throw new yr(a);return function(){var _=arguments;switch(_.length){case 0:return!g.call(this);case 1:return!g.call(this,_[0]);case 2:return!g.call(this,_[0],_[1]);case 3:return!g.call(this,_[0],_[1],_[2])}return!g.apply(this,_)}}function K_(g){return Pr(2,g)}var J_=gv(function(g,_){_=_.length==1&&On(_[0])?lr(_[0],Gs(hn())):lr(ui(_,1),Gs(hn()));var R=_.length;return jn(function(H){for(var Z=-1,fe=_r(H.length,R);++Z<fe;)H[Z]=_[Z].call(this,H[Z]);return vr(g,this,H)})}),gy=jn(function(g,_){var R=eu(_,po(gy));return qr(g,P,t,_,R)}),wv=jn(function(g,_){var R=eu(_,po(wv));return qr(g,F,t,_,R)}),Z_=Yi(function(g,_){return qr(g,G,t,t,t,_)});function Q_(g,_){if(typeof g!="function")throw new yr(a);return _=_===t?_:kn(_),jn(g,_)}function lM(g,_){if(typeof g!="function")throw new yr(a);return _=_==null?0:ur(kn(_),0),jn(function(R){var H=R[_],Z=Xu(R,0,_);return H&&Po(Z,H),vr(g,this,Z)})}function vy(g,_,R){var H=!0,Z=!0;if(typeof g!="function")throw new yr(a);return Nr(R)&&(H="leading"in R?!!R.leading:H,Z="trailing"in R?!!R.trailing:Z),Zf(g,_,{leading:H,maxWait:_,trailing:Z})}function yy(g){return Ci(g,1)}function uM(g,_){return gy($h(_),g)}function cM(){if(!arguments.length)return[];var g=arguments[0];return On(g)?g:[g]}function Xm(g){return Cs(g,A)}function fM(g,_){return _=typeof _=="function"?_:t,Cs(g,A,_)}function $_(g){return Cs(g,v|A)}function gi(g,_){return _=typeof _=="function"?_:t,Cs(g,v|A,_)}function _y(g,_){return _==null||_m(g,_,Us(_))}function So(g,_){return g===_||g!==g&&_!==_}var xy=Dl(ds),ex=Dl(function(g,_){return g>=_}),Qc=Qd(function(){return arguments}())?Qd:function(g){return zr(g)&&Mi.call(g,"callee")&&!ru.call(g,"callee")},On=lt.isArray,Rv=yl?Gs(yl):ra;function Ds(g){return g!=null&&cd(g.length)&&!bu(g)}function Kr(g){return zr(g)&&Ds(g)}function hM(g){return g===!0||g===!1||zr(g)&&pi(g)==Le}var Qf=Lh||NM,tx=Mf?Gs(Mf):Yr;function nx(g){return zr(g)&&g.nodeType===1&&!Hl(g)}function Dv(g){if(g==null)return!0;if(Ds(g)&&(On(g)||typeof g=="string"||typeof g.splice=="function"||Qf(g)||Ap(g)||Qc(g)))return!g.length;var _=_i(g);if(_==ie||_==j)return!g.size;if(Vi(g))return!ku(g).length;for(var R in g)if(Mi.call(g,R))return!1;return!0}function fr(g,_){return fo(g,_)}function Ay(g,_,R){R=typeof R=="function"?R:t;var H=R?R(g,_):t;return H===t?fo(g,_,t,R):!!H}function Bs(g){if(!zr(g))return!1;var _=pi(g);return _==At||_==Mt||typeof g.message=="string"&&typeof g.name=="string"&&!Hl(g)}function dM(g){return typeof g=="number"&&Bc(g)}function bu(g){if(!Nr(g))return!1;var _=pi(g);return _==at||_==Nt||_==Re||_==pt}function Bv(g){return typeof g=="number"&&g==kn(g)}function cd(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=ne}function Nr(g){var _=typeof g;return g!=null&&(_=="object"||_=="function")}function zr(g){return g!=null&&typeof g=="object"}var Uv=Ah?Gs(Ah):$d;function Sy(g,_){return g===_||Yh(g,_,sa(_))}function pM(g,_,R){return R=typeof R=="function"?R:t,Yh(g,_,sa(_),R)}function ix(g){return sx(g)&&g!=+g}function mM(g){if(kc(g))throw new An(s);return Cl(g)}function rx(g){return g===null}function gM(g){return g==null}function sx(g){return typeof g=="number"||zr(g)&&pi(g)==ut}function Hl(g){if(!zr(g)||pi(g)!=Ke)return!1;var _=Cf(g);if(_===null)return!0;var R=Mi.call(_,"constructor")&&_.constructor;return typeof R=="function"&&R instanceof R&&Cc.call(R)==zs}var Ov=ls?Gs(ls):Vu;function by(g){return Bv(g)&&g>=-9007199254740991&&g<=ne}var ax=$s?Gs($s):bm;function Lv(g){return typeof g=="string"||!On(g)&&zr(g)&&pi(g)==Y}function Ka(g){return typeof g=="symbol"||zr(g)&&pi(g)==_e}var Ap=Gr?Gs(Gr):Mm;function Mu(g){return g===t}function My(g){return zr(g)&&_i(g)==Ge}function ox(g){return zr(g)&&pi(g)==Ye}var lx=Dl(ep),Wm=Dl(function(g,_){return g<=_});function nl(g){if(!g)return[];if(Ds(g))return Lv(g)?Tr(g):jr(g);if(su&&g[su])return Mr(g[su]());var _=_i(g),R=_==ie?Vd:_==j?Nu:Cp;return R(g)}function ic(g){if(!g)return g===0?g:0;if(g=zl(g),g===ee||g===-1/0){var _=g<0?-1:1;return _*de}return g===g?g:0}function kn(g){var _=ic(g),R=_%1;return _===_?R?_-R:_:0}function rc(g){return g?Vo(kn(g),0,J):0}function zl(g){if(typeof g=="number")return g;if(Ka(g))return X;if(Nr(g)){var _=typeof g.valueOf=="function"?g.valueOf():g;g=Nr(_)?_+"":_}if(typeof g!="string")return g===0?g:+g;g=Fd(g);var R=et.test(g);return R||Ft.test(g)?bf(g.slice(2),R?2:8):Qe.test(g)?X:+g}function ux(g){return Ea(g,qs(g))}function Sp(g){return g?Vo(kn(g),-9007199254740991,ne):g===0?g:0}function ji(g){return g==null?"":Ma(g)}var vM=zc(function(g,_){if(Vi(_)||Ds(_)){Ea(_,Us(_),g);return}for(var R in _)Mi.call(_,R)&&Lc(g,R,_[R])}),cx=zc(function(g,_){Ea(_,qs(_),g)}),Pv=zc(function(g,_,R,H){Ea(_,qs(_),g,H)}),yM=zc(function(g,_,R,H){Ea(_,Us(_),g,H)}),_M=Yi(Xh);function xM(g,_){var R=Pa(g);return _==null?R:El(R,_)}var AM=jn(function(g,_){g=di(g);var R=-1,H=_.length,Z=H>2?_[2]:t;for(Z&&cr(_[0],_[1],Z)&&(H=1);++R<H;)for(var fe=_[R],be=qs(fe),Ue=-1,Xe=be.length;++Ue<Xe;){var Dt=be[Ue],Ot=g[Dt];(Ot===t||So(Ot,Fo[Dt])&&!Mi.call(g,Dt))&&(g[Dt]=fe[Dt])}return g}),fx=jn(function(g){return g.push(t,Gm),vr(Km,t,g)});function bp(g,_){return um(g,hn(_,3),Er)}function Ym(g,_){return um(g,hn(_,3),Hr)}function hx(g,_){return g==null?g:Pf(g,hn(_,3),qs)}function SM(g,_){return g==null?g:cu(g,hn(_,3),qs)}function Mp(g,_){return g&&Er(g,hn(_,3))}function jm(g,_){return g&&Hr(g,hn(_,3))}function dx(g){return g==null?[]:ia(g,Us(g))}function Nv(g){return g==null?[]:ia(g,qs(g))}function qm(g,_,R){var H=g==null?t:Rr(g,_);return H===t?R:H}function Ty(g,_){return g!=null&&ju(g,_,fu)}function Tp(g,_){return g!=null&&ju(g,_,uv)}var px=Rl(function(g,_,R){_!=null&&typeof _.toString!="function"&&(_=Wr.call(_)),g[_]=R},Je(Ze)),mx=Rl(function(g,_,R){_!=null&&typeof _.toString!="function"&&(_=Wr.call(_)),Mi.call(g,_)?g[_].push(R):g[_]=[R]},hn),bM=jn(zu);function Us(g){return Ds(g)?kh(g):ku(g)}function qs(g){return Ds(g)?kh(g,!0):fv(g)}function MM(g,_){var R={};return _=hn(_,3),Er(g,function(H,Z,fe){Sa(R,_(H,Z,fe),H)}),R}function TM(g,_){var R={};return _=hn(_,3),Er(g,function(H,Z,fe){Sa(R,Z,_(H,Z,fe))}),R}var EM=zc(function(g,_,R){jh(g,_,R)}),Km=zc(function(g,_,R,H){jh(g,_,R,H)}),Iv=Yi(function(g,_){var R={};if(g==null)return R;var H=!1;_=lr(_,function(fe){return fe=hu(fe,g),H||(H=fe.length>1),fe}),Ea(g,Ys(g),R),H&&(R=Cs(R,v|y|A,hp));for(var Z=_.length;Z--;)Ff(R,_[Z]);return R});function Ey(g,_){return Ep(g,km(hn(_)))}var CM=Yi(function(g,_){return g==null?{}:hv(g,_)});function Ep(g,_){if(g==null)return{};var R=lr(Ys(g),function(H){return[H]});return _=hn(_),np(g,R,function(H,Z){return _(H,Z[0])})}function wM(g,_,R){_=hu(_,g);var H=-1,Z=_.length;for(Z||(Z=1,g=t);++H<Z;){var fe=g==null?t:g[mi(_[H])];fe===t&&(H=Z,fe=R),g=bu(fe)?fe.call(g):fe}return g}function gx(g,_,R){return g==null?g:Ic(g,_,R)}function vx(g,_,R,H){return H=typeof H=="function"?H:t,g==null?g:Ic(g,_,R,H)}var Cy=nd(Us),wy=nd(qs);function Ry(g,_,R){var H=On(g),Z=H||Qf(g)||Ap(g);if(_=hn(_,4),R==null){var fe=g&&g.constructor;Z?R=H?new fe:[]:Nr(g)?R=bu(fe)?Pa(Cf(g)):{}:R={}}return(Z?Ua:Er)(g,function(be,Ue,Xe){return _(R,be,Ue,Xe)}),R}function yx(g,_){return g==null?!0:Ff(g,_)}function Fv(g,_,R){return g==null?g:Lm(g,_,$h(R))}function RM(g,_,R,H){return H=typeof H=="function"?H:t,g==null?g:Lm(g,_,$h(R),H)}function Cp(g){return g==null?[]:Rh(g,Us(g))}function Dy(g){return g==null?[]:Rh(g,qs(g))}function By(g,_,R){return R===t&&(R=_,_=t),R!==t&&(R=zl(R),R=R===R?R:0),_!==t&&(_=zl(_),_=_===_?_:0),Vo(zl(g),_,R)}function Gv(g,_,R){return _=ic(_),R===t?(R=_,_=0):R=ic(R),g=zl(g),cv(g,_,R)}function Uy(g,_,R){if(R&&typeof R!="boolean"&&cr(g,_,R)&&(_=R=t),R===t&&(typeof _=="boolean"?(R=_,_=t):typeof g=="boolean"&&(R=g,g=t)),g===t&&_===t?(g=0,_=1):(g=ic(g),_===t?(_=g,g=0):_=ic(_)),g>_){var H=g;g=_,_=H}if(R||g%1||_%1){var Z=Ph();return _r(g+Z*(_-g+Ql("1e-"+((Z+"").length-1))),_)}return ip(g,_)}var _x=Xs(function(g,_,R){return _=_.toLowerCase(),g+(R?Hv(_):_)});function Hv(g){return x(ji(g).toLowerCase())}function $c(g){return g=ji(g),g&&g.replace(q,Dh).replace(Zs,"")}function $f(g,_,R){g=ji(g),_=Ma(_);var H=g.length;R=R===t?H:Vo(kn(R),0,H);var Z=R;return R-=_.length,R>=0&&g.slice(R,Z)==_}function eh(g){return g=ji(g),g&&Tt.test(g)?g.replace(dt,Gd):g}function Jm(g){return g=ji(g),g&&Ai.test(g)?g.replace(Ln,"\\$&"):g}var Zm=Xs(function(g,_,R){return g+(R?"-":"")+_.toLowerCase()}),th=Xs(function(g,_,R){return g+(R?" ":"")+_.toLowerCase()}),DM=Qi("toLowerCase");function xx(g,_,R){g=ji(g),_=kn(_);var H=_?Hs(g):0;if(!_||H>=_)return g;var Z=(_-H)/2;return td(au(Z),R)+g+td(Dc(Z),R)}function Qm(g,_,R){g=ji(g),_=kn(_);var H=_?Hs(g):0;return _&&H<_?g+td(_-H,R):g}function BM(g,_,R){g=ji(g),_=kn(_);var H=_?Hs(g):0;return _&&H<_?td(_-H,R)+g:g}function Ax(g,_,R){return R||_==null?_=0:_&&(_=+_),ou(ji(g).replace(Di,""),_||0)}function zv(g,_,R){return(R?cr(g,_,R):_===t)?_=1:_=kn(_),Bm(ji(g),_)}function Sx(){var g=arguments,_=ji(g[0]);return g.length<3?_:_.replace(g[1],g[2])}var UM=Xs(function(g,_,R){return g+(R?"_":"")+_.toLowerCase()});function Vv(g,_,R){return R&&typeof R!="number"&&cr(g,_,R)&&(_=R=t),R=R===t?J:R>>>0,R?(g=ji(g),g&&(typeof _=="string"||_!=null&&!Ov(_))&&(_=Ma(_),!_&&Io(g))?Xu(Tr(g),0,R):g.split(_,R)):[]}var kv=Xs(function(g,_,R){return g+(R?" ":"")+x(_)});function bx(g,_,R){return g=ji(g),R=R==null?0:Vo(kn(R),0,g.length),_=Ma(_),g.slice(R,R+_.length)==_}function $m(g,_,R){var H=re.templateSettings;R&&cr(g,_,R)&&(_=t),g=ji(g),_=Pv({},_,H,id);var Z=Pv({},_.imports,H.imports,id),fe=Us(Z),be=Rh(Z,fe),Ue,Xe,Dt=0,Ot=_.interpolate||me,It="__p += '",tn=Ms((_.escape||me).source+"|"+Ot.source+"|"+(Ot===Jt?le:me).source+"|"+(_.evaluate||me).source+"|$","g"),mn="//# sourceURL="+(Mi.call(_,"sourceURL")?(_.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Sf+"]")+`
`;g.replace(tn,function(Un,wi,Pi,Tu,il,Eu){return Pi||(Pi=Tu),It+=g.slice(Dt,Eu).replace(Me,Hd),wi&&(Ue=!0,It+=`' +
__e(`+wi+`) +
'`),il&&(Xe=!0,It+=`';
`+il+`;
__p += '`),Pi&&(It+=`' +
((__t = (`+Pi+`)) == null ? '' : __t) +
'`),Dt=Eu+Un.length,Un}),It+=`';
`;var Bn=Mi.call(_,"variable")&&_.variable;if(!Bn)It=`with (obj) {
`+It+`
}
`;else if(ni.test(Bn))throw new An(l);It=(Xe?It.replace(Rt,""):It).replace(Ae,"$1").replace(De,"$1;"),It="function("+(Bn||"obj")+`) {
`+(Bn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ue?", __e = _.escape":"")+(Xe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+It+`return __p
}`;var hi=U(function(){return yi(fe,mn+"return "+It).apply(t,be)});if(hi.source=It,Bs(hi))throw hi;return hi}function Oy(g){return ji(g).toLowerCase()}function Xv(g){return ji(g).toUpperCase()}function Mx(g,_,R){if(g=ji(g),g&&(R||_===t))return Fd(g);if(!g||!(_=Ma(_)))return g;var H=Tr(g),Z=Tr(_),fe=Ec(H,Z),be=Pu(H,Z)+1;return Xu(H,fe,be).join("")}function OM(g,_,R){if(g=ji(g),g&&(R||_===t))return g.slice(0,kd(g)+1);if(!g||!(_=Ma(_)))return g;var H=Tr(g),Z=Pu(H,Tr(_))+1;return Xu(H,0,Z).join("")}function Wv(g,_,R){if(g=ji(g),g&&(R||_===t))return g.replace(Di,"");if(!g||!(_=Ma(_)))return g;var H=Tr(g),Z=Ec(H,Tr(_));return Xu(H,Z).join("")}function o(g,_){var R=N,H=Q;if(Nr(_)){var Z="separator"in _?_.separator:Z;R="length"in _?kn(_.length):R,H="omission"in _?Ma(_.omission):H}g=ji(g);var fe=g.length;if(Io(g)){var be=Tr(g);fe=be.length}if(R>=fe)return g;var Ue=R-Hs(H);if(Ue<1)return H;var Xe=be?Xu(be,0,Ue).join(""):g.slice(0,Ue);if(Z===t)return Xe+H;if(be&&(Ue+=Xe.length-Ue),Ov(Z)){if(g.slice(Ue).search(Z)){var Dt,Ot=Xe;for(Z.global||(Z=Ms(Z.source,ji(Ce.exec(Z))+"g")),Z.lastIndex=0;Dt=Z.exec(Ot);)var It=Dt.index;Xe=Xe.slice(0,It===t?Ue:It)}}else if(g.indexOf(Ma(Z),Ue)!=Ue){var tn=Xe.lastIndexOf(Z);tn>-1&&(Xe=Xe.slice(0,tn))}return Xe+H}function c(g){return g=ji(g),g&&Pt.test(g)?g.replace(He,cm):g}var m=Xs(function(g,_,R){return g+(R?" ":"")+_.toUpperCase()}),x=Qi("toUpperCase");function E(g,_,R){return g=ji(g),_=R?t:_,_===t?Ef(g)?hm(g):hy(g):g.match(_)||[]}var U=jn(function(g,_){try{return vr(g,t,_)}catch(R){return Bs(R)?R:new An(R)}}),W=Yi(function(g,_){return Ua(_,function(R){R=mi(R),Sa(g,R,ei(g[R],g))}),g});function ae(g){var _=g==null?0:g.length,R=hn();return g=_?lr(g,function(H){if(typeof H[1]!="function")throw new yr(a);return[R(H[0]),H[1]]}):[],jn(function(H){for(var Z=-1;++Z<_;){var fe=g[Z];if(vr(fe[0],this,H))return vr(fe[1],this,H)}})}function Te(g){return Lf(Cs(g,v))}function Je(g){return function(){return g}}function bt(g,_){return g==null||g!==g?_:g}var Ut=Xo(),nt=Xo(!0);function Ze(g){return g}function Cn(g){return Tm(typeof g=="function"?g:Cs(g,v))}function En(g){return Cm(Cs(g,v))}function hr(g,_){return tp(g,Cs(_,v))}var ze=jn(function(g,_){return function(R){return zu(R,g,_)}}),Ne=jn(function(g,_){return function(R){return zu(g,R,_)}});function je(g,_,R){var H=Us(_),Z=ia(_,H);R==null&&!(Nr(_)&&(Z.length||!H.length))&&(R=_,_=g,g=this,Z=ia(_,Us(_)));var fe=!(Nr(R)&&"chain"in R)||!!R.chain,be=bu(g);return Ua(Z,function(Ue){var Xe=_[Ue];g[Ue]=Xe,be&&(g.prototype[Ue]=function(){var Dt=this.__chain__;if(fe||Dt){var Ot=g(this.__wrapped__),It=Ot.__actions__=jr(this.__actions__);return It.push({func:Xe,args:arguments,thisArg:g}),Ot.__chain__=Dt,Ot}return Xe.apply(g,Po([this.value()],arguments))})}),g}function Ct(){return gr._===this&&(gr._=ao),this}function on(){}function fi(g){return g=kn(g),jn(function(_){return wm(_,g)})}var vn=ws(lr),wn=ws(Pd),Ks=ws(Id);function Li(g){return mu(g)?Tc(mi(g)):dv(g)}function nh(g){return function(_){return g==null?t:Rr(g,_)}}var LM=Yo(),JG=Yo(!0);function PM(){return[]}function NM(){return!1}function ZG(){return{}}function QG(){return""}function $G(){return!0}function eH(g,_){if(g=kn(g),g<1||g>ne)return[];var R=J,H=_r(g,J);_=hn(_),g-=J;for(var Z=xl(H,_);++R<g;)_(R);return Z}function tH(g){return On(g)?lr(g,mi):Ka(g)?[g]:jr(Ko(ji(g)))}function nH(g){var _=++fs;return ji(g)+_}var iH=Wo(function(g,_){return g+_},0),rH=Vf("ceil"),sH=Wo(function(g,_){return g/_},1),aH=Vf("floor");function oH(g){return g&&g.length?co(g,Ze,ds):t}function lH(g,_){return g&&g.length?co(g,hn(_,2),ds):t}function uH(g){return Tf(g,Ze)}function cH(g,_){return Tf(g,hn(_,2))}function fH(g){return g&&g.length?co(g,Ze,ep):t}function hH(g,_){return g&&g.length?co(g,hn(_,2),ep):t}var dH=Wo(function(g,_){return g*_},1),pH=Vf("round"),mH=Wo(function(g,_){return g-_},0);function gH(g){return g&&g.length?Ch(g,Ze):0}function vH(g,_){return g&&g.length?Ch(g,hn(_,2)):0}return re.after=Dn,re.ary=Ci,re.assign=vM,re.assignIn=cx,re.assignInWith=Pv,re.assignWith=yM,re.at=_M,re.before=Pr,re.bind=ei,re.bindAll=W,re.bindKey=tl,re.castArray=cM,re.chain=$o,re.chunk=es,re.compact=xu,re.concat=qn,re.cond=ae,re.conforms=Te,re.constant=Je,re.countBy=$u,re.create=xM,re.curry=ud,re.curryRight=Cv,re.debounce=Zf,re.defaults=AM,re.defaultsDeep=fx,re.defer=nc,re.delay=zm,re.difference=Sn,re.differenceBy=Ti,re.differenceWith=yo,re.drop=jc,re.dropRight=Ju,re.dropRightWhile=pp,re.dropWhile=qc,re.fill=vs,re.filter=Jf,re.flatMap=p,re.flatMapDeep=S,re.flatMapDepth=w,re.flatten=Dr,re.flattenDeep=Zu,re.flattenDepth=aa,re.flip=oM,re.flow=Ut,re.flowRight=nt,re.fromPairs=Va,re.functions=dx,re.functionsIn=Nv,re.groupBy=ue,re.initial=gp,re.intersection=ir,re.intersectionBy=vp,re.intersectionWith=Au,re.invert=px,re.invertBy=mx,re.invokeMap=ke,re.iteratee=Cn,re.keyBy=St,re.keys=Us,re.keysIn=qs,re.map=Ht,re.mapKeys=MM,re.mapValues=TM,re.matches=En,re.matchesProperty=hr,re.memoize=Vm,re.merge=EM,re.mergeWith=Km,re.method=ze,re.methodOf=Ne,re.mixin=je,re.negate=km,re.nthArg=fi,re.omit=Iv,re.omitBy=Ey,re.once=K_,re.orderBy=Zt,re.over=vn,re.overArgs=J_,re.overEvery=wn,re.overSome=Ks,re.partial=gy,re.partialRight=wv,re.partition=en,re.pick=CM,re.pickBy=Ep,re.property=Li,re.propertyOf=nh,re.pull=Ev,re.pullAll=rr,re.pullAllBy=Hm,re.pullAllWith=Nl,re.pullAt=Il,re.range=LM,re.rangeRight=JG,re.rearg=Z_,re.reject=ec,re.remove=Lr,re.rest=Q_,re.reverse=ad,re.sampleSize=tt,re.set=gx,re.setWith=vx,re.shuffle=Oe,re.slice=ki,re.sortBy=pn,re.sortedUniq=jf,re.sortedUniqBy=qf,re.split=Vv,re.spread=lM,re.tail=xo,re.take=Ar,re.takeRight=Qo,re.takeRightWhile=Fl,re.takeWhile=Kc,re.tap=Jc,re.throttle=vy,re.thru=Sr,re.toArray=nl,re.toPairs=Cy,re.toPairsIn=wy,re.toPath=tH,re.toPlainObject=ux,re.transform=Ry,re.unary=yy,re.union=Ao,re.unionBy=Ei,re.unionWith=Xi,re.uniq=Mn,re.uniqBy=ci,re.uniqWith=er,re.unset=yx,re.unzip=ys,re.unzipWith=Xa,re.update=Fv,re.updateWith=RM,re.values=Cp,re.valuesIn=Dy,re.without=Wa,re.words=E,re.wrap=uM,re.xor=ts,re.xorBy=js,re.xorWith=sr,re.zip=Ya,re.zipObject=Su,re.zipObjectDeep=od,re.zipWith=ja,re.entries=Cy,re.entriesIn=wy,re.extend=cx,re.extendWith=Pv,je(re,re),re.add=iH,re.attempt=U,re.camelCase=_x,re.capitalize=Hv,re.ceil=rH,re.clamp=By,re.clone=Xm,re.cloneDeep=$_,re.cloneDeepWith=gi,re.cloneWith=fM,re.conformsTo=_y,re.deburr=$c,re.defaultTo=bt,re.divide=sH,re.endsWith=$f,re.eq=So,re.escape=eh,re.escapeRegExp=Jm,re.every=_p,re.find=xp,re.findIndex=_o,re.findKey=bp,re.findLast=h,re.findLastIndex=sd,re.findLastKey=Ym,re.floor=aH,re.forEach=L,re.forEachRight=z,re.forIn=hx,re.forInRight=SM,re.forOwn=Mp,re.forOwnRight=jm,re.get=qm,re.gt=xy,re.gte=ex,re.has=Ty,re.hasIn=Tp,re.head=Jo,re.identity=Ze,re.includes=Ee,re.indexOf=mp,re.inRange=Gv,re.invoke=bM,re.isArguments=Qc,re.isArray=On,re.isArrayBuffer=Rv,re.isArrayLike=Ds,re.isArrayLikeObject=Kr,re.isBoolean=hM,re.isBuffer=Qf,re.isDate=tx,re.isElement=nx,re.isEmpty=Dv,re.isEqual=fr,re.isEqualWith=Ay,re.isError=Bs,re.isFinite=dM,re.isFunction=bu,re.isInteger=Bv,re.isLength=cd,re.isMap=Uv,re.isMatch=Sy,re.isMatchWith=pM,re.isNaN=ix,re.isNative=mM,re.isNil=gM,re.isNull=rx,re.isNumber=sx,re.isObject=Nr,re.isObjectLike=zr,re.isPlainObject=Hl,re.isRegExp=Ov,re.isSafeInteger=by,re.isSet=ax,re.isString=Lv,re.isSymbol=Ka,re.isTypedArray=Ap,re.isUndefined=Mu,re.isWeakMap=My,re.isWeakSet=ox,re.join=Zo,re.kebabCase=Zm,re.last=wr,re.lastIndexOf=Yf,re.lowerCase=th,re.lowerFirst=DM,re.lt=lx,re.lte=Wm,re.max=oH,re.maxBy=lH,re.mean=uH,re.meanBy=cH,re.min=fH,re.minBy=hH,re.stubArray=PM,re.stubFalse=NM,re.stubObject=ZG,re.stubString=QG,re.stubTrue=$G,re.multiply=dH,re.nth=Tv,re.noConflict=Ct,re.noop=on,re.now=tr,re.pad=xx,re.padEnd=Qm,re.padStart=BM,re.parseInt=Ax,re.random=Uy,re.reduce=Hn,re.reduceRight=qa,re.repeat=zv,re.replace=Sx,re.result=wM,re.round=pH,re.runInContext=Fe,re.sample=tc,re.size=st,re.snakeCase=UM,re.some=zt,re.sortedIndex=Gn,re.sortedIndexBy=ii,re.sortedIndexOf=yn,re.sortedLastIndex=Xn,re.sortedLastIndexBy=Br,re.sortedLastIndexOf=ka,re.startCase=kv,re.startsWith=bx,re.subtract=mH,re.sum=gH,re.sumBy=vH,re.template=$m,re.times=eH,re.toFinite=ic,re.toInteger=kn,re.toLength=rc,re.toLower=Oy,re.toNumber=zl,re.toSafeInteger=Sp,re.toString=ji,re.toUpper=Xv,re.trim=Mx,re.trimEnd=OM,re.trimStart=Wv,re.truncate=o,re.unescape=c,re.uniqueId=nH,re.upperCase=m,re.upperFirst=x,re.each=L,re.eachRight=z,re.first=Jo,je(re,function(){var g={};return Er(re,function(_,R){Mi.call(re.prototype,R)||(g[R]=_)}),g}(),{chain:!1}),re.VERSION=i,Ua(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){re[g].placeholder=re}),Ua(["drop","take"],function(g,_){Yn.prototype[g]=function(R){R=R===t?1:ur(kn(R),0);var H=this.__filtered__&&!_?new Yn(this):this.clone();return H.__filtered__?H.__takeCount__=_r(R,H.__takeCount__):H.__views__.push({size:_r(R,J),type:g+(H.__dir__<0?"Right":"")}),H},Yn.prototype[g+"Right"]=function(R){return this.reverse()[g](R).reverse()}}),Ua(["filter","map","takeWhile"],function(g,_){var R=_+1,H=R==se||R==k;Yn.prototype[g]=function(Z){var fe=this.clone();return fe.__iteratees__.push({iteratee:hn(Z,3),type:R}),fe.__filtered__=fe.__filtered__||H,fe}}),Ua(["head","last"],function(g,_){var R="take"+(_?"Right":"");Yn.prototype[g]=function(){return this[R](1).value()[0]}}),Ua(["initial","tail"],function(g,_){var R="drop"+(_?"":"Right");Yn.prototype[g]=function(){return this.__filtered__?new Yn(this):this[R](1)}}),Yn.prototype.compact=function(){return this.filter(Ze)},Yn.prototype.find=function(g){return this.filter(g).head()},Yn.prototype.findLast=function(g){return this.reverse().find(g)},Yn.prototype.invokeMap=jn(function(g,_){return typeof g=="function"?new Yn(this):this.map(function(R){return zu(R,g,_)})}),Yn.prototype.reject=function(g){return this.filter(km(hn(g)))},Yn.prototype.slice=function(g,_){g=kn(g);var R=this;return R.__filtered__&&(g>0||_<0)?new Yn(R):(g<0?R=R.takeRight(-g):g&&(R=R.drop(g)),_!==t&&(_=kn(_),R=_<0?R.dropRight(-_):R.take(_-g)),R)},Yn.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},Yn.prototype.toArray=function(){return this.take(J)},Er(Yn.prototype,function(g,_){var R=/^(?:filter|find|map|reject)|While$/.test(_),H=/^(?:head|last)$/.test(_),Z=re[H?"take"+(_=="last"?"Right":""):_],fe=H||/^find/.test(_);Z&&(re.prototype[_]=function(){var be=this.__wrapped__,Ue=H?[1]:arguments,Xe=be instanceof Yn,Dt=Ue[0],Ot=Xe||On(be),It=function(wi){var Pi=Z.apply(re,Po([wi],Ue));return H&&tn?Pi[0]:Pi};Ot&&R&&typeof Dt=="function"&&Dt.length!=1&&(Xe=Ot=!1);var tn=this.__chain__,mn=!!this.__actions__.length,Bn=fe&&!tn,hi=Xe&&!mn;if(!fe&&Ot){be=hi?be:new Yn(this);var Un=g.apply(be,Ue);return Un.__actions__.push({func:Sr,args:[It],thisArg:t}),new _a(Un,tn)}return Bn&&hi?g.apply(this,Ue):(Un=this.thru(It),Bn?H?Un.value()[0]:Un.value():Un)})}),Ua(["pop","push","shift","sort","splice","unshift"],function(g){var _=Uh[g],R=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",H=/^(?:pop|shift)$/.test(g);re.prototype[g]=function(){var Z=arguments;if(H&&!this.__chain__){var fe=this.value();return _.apply(On(fe)?fe:[],Z)}return this[R](function(be){return _.apply(On(be)?be:[],Z)})}}),Er(Yn.prototype,function(g,_){var R=re[_];if(R){var H=R.name+"";Mi.call(La,H)||(La[H]=[]),La[H].push({name:_,func:R})}}),La[Cr(t,M).name]=[{name:"wrapper",func:t}],Yn.prototype.clone=lo,Yn.prototype.reverse=Ih,Yn.prototype.value=Ml,re.prototype.at=yp,re.prototype.chain=oa,re.prototype.commit=Kf,re.prototype.next=ld,re.prototype.plant=el,re.prototype.reverse=Gl,re.prototype.toJSON=re.prototype.valueOf=re.prototype.value=Zc,re.prototype.first=re.prototype.head,su&&(re.prototype[su]=Qu),re},nu=tu();Ba?((Ba.exports=nu)._=nu,ga._=nu):gr._=nu}).call(R$)}(f1,f1.exports)),f1.exports}var B$=D$();const U$=ub(B$),O$=()=>{const n=[{id:1,image:"img/smeg.png",title:"smeg",url:"https://hongseockkim.github.io/portpolio/page/01/"},{id:2,image:"img/daelim.png",title:"대림 코퍼레이션",url:"https://hongseockkim.github.io/portpolio/page/02/"},{id:3,image:"img/children.png",title:"육아정책연구소",url:"https://hongseockkim.github.io/portpolio/page/03/"},{id:4,image:"img/canvas.png",title:"canvas",url:"https://hongseockkim.github.io/portpolio/page/06/"},{id:5,image:"img/sympol.png",title:"liveto",url:""},{id:6,image:"img/ugly.png",title:"어글리스토브",url:"https://hongseockkim.github.io/portpolio/page/05/"},{id:7,image:"img/seemple.png",title:"심플",url:""},{id:8,image:"img/bankx2.png",title:"뱅크엑스",url:""},{id:9,image:"img/tankyoy.png",title:"땡큐마켓",url:""},{id:10,image:"img/haru.png",title:"하루세탁",url:""},{id:11,image:"img/sild.png",title:"실드",url:""},{id:11,image:"img/pickko.png",title:"픽코앱",url:""},{id:12,image:"img/pickko_kisok.png",title:"키오스크",url:""}],e={default:4,1100:3,700:2,500:1},t=i=>{i&&(console.log("#######"),console.log("url",i),console.log("#######"))};return Gt.jsx(y4,{breakpointCols:e,className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:n.map(i=>{const r=U$.defaultTo(i.url,!1);return Gt.jsxs("div",{className:"masonry-item",onClick:()=>t(r),children:[Gt.jsx("img",{src:i.image,alt:i.title}),Gt.jsx("h3",{children:i.title})]},i.id)})})},_4=we.createContext({});function L$(n){const e=we.useRef(null);return e.current===null&&(e.current=n()),e.current}const tR=typeof window<"u",P$=tR?we.useLayoutEffect:we.useEffect,nR=we.createContext(null);function iR(n,e){n.indexOf(e)===-1&&n.push(e)}function rR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Od=(n,e,t)=>t>e?e:t<n?n:t;let sR=()=>{};const Ld={},x4=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function A4(n){return typeof n=="object"&&n!==null}const S4=n=>/^0[^.\s]+$/u.test(n);function aR(n){let e;return()=>(e===void 0&&(e=n()),e)}const yc=n=>n,N$=(n,e)=>t=>e(n(t)),W_=(...n)=>n.reduce(N$),h_=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class oR{constructor(){this.subscriptions=[]}add(e){return iR(this.subscriptions,e),()=>rR(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dh=n=>n*1e3,ph=n=>n/1e3;function b4(n,e){return e?n*(1e3/e):0}const M4=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,I$=1e-7,F$=12;function G$(n,e,t,i,r){let s,a,l=0;do a=e+(t-e)/2,s=M4(a,i,r)-n,s>0?t=a:e=a;while(Math.abs(s)>I$&&++l<F$);return a}function Y_(n,e,t,i){if(n===e&&t===i)return yc;const r=s=>G$(s,0,1,n,t);return s=>s===0||s===1?s:M4(r(s),e,i)}const T4=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,E4=n=>e=>1-n(1-e),C4=Y_(.33,1.53,.69,.99),lR=E4(C4),w4=T4(lR),R4=n=>(n*=2)<1?.5*lR(n):.5*(2-Math.pow(2,-10*(n-1))),uR=n=>1-Math.sin(Math.acos(n)),D4=E4(uR),B4=T4(uR),H$=Y_(.42,0,1,1),z$=Y_(0,0,.58,1),U4=Y_(.42,0,.58,1),V$=n=>Array.isArray(n)&&typeof n[0]!="number",O4=n=>Array.isArray(n)&&typeof n[0]=="number",k$={linear:yc,easeIn:H$,easeInOut:U4,easeOut:z$,circIn:uR,circInOut:B4,circOut:D4,backIn:lR,backInOut:w4,backOut:C4,anticipate:R4},X$=n=>typeof n=="string",$U=n=>{if(O4(n)){sR(n.length===4);const[e,t,i,r]=n;return Y_(e,t,i,r)}else if(X$(n))return k$[n];return n},DA=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],eO={value:null};function W$(n,e){let t=new Set,i=new Set,r=!1,s=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},u=0;function f(v){a.has(v)&&(d.schedule(v),n()),u++,v(l)}const d={schedule:(v,y=!1,A=!1)=>{const C=A&&r?t:i;return y&&a.add(v),C.has(v)||C.add(v),v},cancel:v=>{i.delete(v),a.delete(v)},process:v=>{if(l=v,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(f),e&&eO.value&&eO.value.frameloop[e].push(u),u=0,t.clear(),r=!1,s&&(s=!1,d.process(v))}};return d}const Y$=40;function L4(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,a=DA.reduce((D,O)=>(D[O]=W$(s,e?O:void 0),D),{}),{setup:l,read:u,resolveKeyframes:f,preUpdate:d,update:v,preRender:y,render:A,postRender:b}=a,C=()=>{const D=Ld.useManualTiming?r.timestamp:performance.now();t=!1,Ld.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(D-r.timestamp,Y$),1)),r.timestamp=D,r.isProcessing=!0,l.process(r),u.process(r),f.process(r),d.process(r),v.process(r),y.process(r),A.process(r),b.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(C))},T=()=>{t=!0,i=!0,r.isProcessing||n(C)};return{schedule:DA.reduce((D,O)=>{const P=a[O];return D[O]=(F,V=!1,G=!1)=>(t||T(),P.schedule(F,V,G)),D},{}),cancel:D=>{for(let O=0;O<DA.length;O++)a[DA[O]].cancel(D)},state:r,steps:a}}const{schedule:os,cancel:em,state:Qa,steps:SE}=L4(typeof requestAnimationFrame<"u"?requestAnimationFrame:yc,!0);let jA;function j$(){jA=void 0}const Yl={now:()=>(jA===void 0&&Yl.set(Qa.isProcessing||Ld.useManualTiming?Qa.timestamp:performance.now()),jA),set:n=>{jA=n,queueMicrotask(j$)}},P4=n=>e=>typeof e=="string"&&e.startsWith(n),cR=P4("--"),q$=P4("var(--"),fR=n=>q$(n)?K$.test(n.split("/*")[0].trim()):!1,K$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,uy={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},d_={...uy,transform:n=>Od(0,1,n)},BA={...uy,default:1},L1=n=>Math.round(n*1e5)/1e5,hR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function J$(n){return n==null}const Z$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dR=(n,e)=>t=>!!(typeof t=="string"&&Z$.test(t)&&t.startsWith(n)||e&&!J$(t)&&Object.prototype.hasOwnProperty.call(t,e)),N4=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,a,l]=i.match(hR);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Q$=n=>Od(0,255,n),bE={...uy,transform:n=>Math.round(Q$(n))},Pg={test:dR("rgb","red"),parse:N4("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+bE.transform(n)+", "+bE.transform(e)+", "+bE.transform(t)+", "+L1(d_.transform(i))+")"};function $$(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const NC={test:dR("#"),parse:$$,transform:Pg.transform},j_=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Gp=j_("deg"),mh=j_("%"),In=j_("px"),eee=j_("vh"),tee=j_("vw"),tO={...mh,parse:n=>mh.parse(n)/100,transform:n=>mh.transform(n*100)},S0={test:dR("hsl","hue"),parse:N4("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+mh.transform(L1(e))+", "+mh.transform(L1(t))+", "+L1(d_.transform(i))+")"},wo={test:n=>Pg.test(n)||NC.test(n)||S0.test(n),parse:n=>Pg.test(n)?Pg.parse(n):S0.test(n)?S0.parse(n):NC.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Pg.transform(n):S0.transform(n)},nee=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function iee(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(hR))==null?void 0:e.length)||0)+(((t=n.match(nee))==null?void 0:t.length)||0)>0}const I4="number",F4="color",ree="var",see="var(",nO="${}",aee=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function p_(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const l=e.replace(aee,u=>(wo.test(u)?(i.color.push(s),r.push(F4),t.push(wo.parse(u))):u.startsWith(see)?(i.var.push(s),r.push(ree),t.push(u)):(i.number.push(s),r.push(I4),t.push(parseFloat(u))),++s,nO)).split(nO);return{values:t,split:l,indexes:i,types:r}}function G4(n){return p_(n).values}function H4(n){const{split:e,types:t}=p_(n),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const l=t[a];l===I4?s+=L1(r[a]):l===F4?s+=wo.transform(r[a]):s+=r[a]}return s}}const oee=n=>typeof n=="number"?0:n;function lee(n){const e=G4(n);return H4(n)(e.map(oee))}const tm={test:iee,parse:G4,createTransformer:H4,getAnimatableNone:lee};function ME(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function uee({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,a=0;if(!e)r=s=a=t;else{const l=t<.5?t*(1+e):t+e-t*e,u=2*t-l;r=ME(u,l,n+1/3),s=ME(u,l,n),a=ME(u,l,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function ib(n,e){return t=>t>0?e:n}const rs=(n,e,t)=>n+(e-n)*t,TE=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},cee=[NC,Pg,S0],fee=n=>cee.find(e=>e.test(n));function iO(n){const e=fee(n);if(!e)return!1;let t=e.parse(n);return e===S0&&(t=uee(t)),t}const rO=(n,e)=>{const t=iO(n),i=iO(e);if(!t||!i)return ib(n,e);const r={...t};return s=>(r.red=TE(t.red,i.red,s),r.green=TE(t.green,i.green,s),r.blue=TE(t.blue,i.blue,s),r.alpha=rs(t.alpha,i.alpha,s),Pg.transform(r))},IC=new Set(["none","hidden"]);function hee(n,e){return IC.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function dee(n,e){return t=>rs(n,e,t)}function pR(n){return typeof n=="number"?dee:typeof n=="string"?fR(n)?ib:wo.test(n)?rO:gee:Array.isArray(n)?z4:typeof n=="object"?wo.test(n)?rO:pee:ib}function z4(n,e){const t=[...n],i=t.length,r=n.map((s,a)=>pR(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)t[a]=r[a](s);return t}}function pee(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=pR(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function mee(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],a=n.indexes[s][i[s]],l=n.values[a]??0;t[r]=l,i[s]++}return t}const gee=(n,e)=>{const t=tm.createTransformer(e),i=p_(n),r=p_(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?IC.has(n)&&!r.values.length||IC.has(e)&&!i.values.length?hee(n,e):W_(z4(mee(i,r),r.values),t):ib(n,e)};function V4(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?rs(n,e,t):pR(n)(n,e)}const vee=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>os.update(e,t),stop:()=>em(e),now:()=>Qa.isProcessing?Qa.timestamp:Yl.now()}},k4=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(s/(r-1))+", ";return`linear(${i.substring(0,i.length-2)})`},rb=2e4;function mR(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<rb;)e+=t,i=n.next(e);return e>=rb?1/0:e}function yee(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(mR(i),rb);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:ph(r)}}const _ee=5;function X4(n,e,t){const i=Math.max(e-_ee,0);return b4(t-n(i),e-i)}const As={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sO=.001;function xee({duration:n=As.duration,bounce:e=As.bounce,velocity:t=As.velocity,mass:i=As.mass}){let r,s,a=1-e;a=Od(As.minDamping,As.maxDamping,a),n=Od(As.minDuration,As.maxDuration,ph(n)),a<1?(r=f=>{const d=f*a,v=d*n,y=d-t,A=FC(f,a),b=Math.exp(-v);return sO-y/A*b},s=f=>{const v=f*a*n,y=v*t+t,A=Math.pow(a,2)*Math.pow(f,2)*n,b=Math.exp(-v),C=FC(Math.pow(f,2),a);return(-r(f)+sO>0?-1:1)*((y-A)*b)/C}):(r=f=>{const d=Math.exp(-f*n),v=(f-t)*n+1;return-.001+d*v},s=f=>{const d=Math.exp(-f*n),v=(t-f)*(n*n);return d*v});const l=5/n,u=See(r,s,l);if(n=dh(n),isNaN(u))return{stiffness:As.stiffness,damping:As.damping,duration:n};{const f=Math.pow(u,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:n}}}const Aee=12;function See(n,e,t){let i=t;for(let r=1;r<Aee;r++)i=i-n(i)/e(i);return i}function FC(n,e){return n*Math.sqrt(1-e*e)}const bee=["duration","bounce"],Mee=["stiffness","damping","mass"];function aO(n,e){return e.some(t=>n[t]!==void 0)}function Tee(n){let e={velocity:As.velocity,stiffness:As.stiffness,damping:As.damping,mass:As.mass,isResolvedFromDuration:!1,...n};if(!aO(n,Mee)&&aO(n,bee))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Od(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:As.mass,stiffness:r,damping:s}}else{const t=xee(n);e={...e,...t,mass:As.mass},e.isResolvedFromDuration=!0}return e}function sb(n=As.visualDuration,e=As.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],a=t.keyframes[t.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:f,mass:d,duration:v,velocity:y,isResolvedFromDuration:A}=Tee({...t,velocity:-ph(t.velocity||0)}),b=y||0,C=f/(2*Math.sqrt(u*d)),T=a-s,M=ph(Math.sqrt(u/d)),B=Math.abs(T)<5;i||(i=B?As.restSpeed.granular:As.restSpeed.default),r||(r=B?As.restDelta.granular:As.restDelta.default);let D;if(C<1){const P=FC(M,C);D=F=>{const V=Math.exp(-C*M*F);return a-V*((b+C*M*T)/P*Math.sin(P*F)+T*Math.cos(P*F))}}else if(C===1)D=P=>a-Math.exp(-M*P)*(T+(b+M*T)*P);else{const P=M*Math.sqrt(C*C-1);D=F=>{const V=Math.exp(-C*M*F),G=Math.min(P*F,300);return a-V*((b+C*M*T)*Math.sinh(G)+P*T*Math.cosh(G))/P}}const O={calculatedDuration:A&&v||null,next:P=>{const F=D(P);if(A)l.done=P>=v;else{let V=P===0?b:0;C<1&&(V=P===0?dh(b):X4(D,P,F));const G=Math.abs(V)<=i,I=Math.abs(a-F)<=r;l.done=G&&I}return l.value=l.done?a:F,l},toString:()=>{const P=Math.min(mR(O),rb),F=k4(V=>O.next(P*V).value,P,30);return P+"ms "+F},toTransition:()=>{}};return O}sb.applyToOptions=n=>{const e=yee(n,100,sb);return n.ease=e.ease,n.duration=dh(e.duration),n.type="keyframes",n};function GC({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:u,restDelta:f=.5,restSpeed:d}){const v=n[0],y={done:!1,value:v},A=G=>l!==void 0&&G<l||u!==void 0&&G>u,b=G=>l===void 0?u:u===void 0||Math.abs(l-G)<Math.abs(u-G)?l:u;let C=t*e;const T=v+C,M=a===void 0?T:a(T);M!==T&&(C=M-v);const B=G=>-C*Math.exp(-G/i),D=G=>M+B(G),O=G=>{const I=B(G),N=D(G);y.done=Math.abs(I)<=f,y.value=y.done?M:N};let P,F;const V=G=>{A(y.value)&&(P=G,F=sb({keyframes:[y.value,b(y.value)],velocity:X4(D,G,y.value),damping:r,stiffness:s,restDelta:f,restSpeed:d}))};return V(0),{calculatedDuration:null,next:G=>{let I=!1;return!F&&P===void 0&&(I=!0,O(G),V(G)),P!==void 0&&G>=P?F.next(G-P):(!I&&O(G),y)}}}function Eee(n,e,t){const i=[],r=t||Ld.mix||V4,s=n.length-1;for(let a=0;a<s;a++){let l=r(n[a],n[a+1]);if(e){const u=Array.isArray(e)?e[a]||yc:e;l=W_(u,l)}i.push(l)}return i}function Cee(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(sR(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const l=Eee(e,i,r),u=l.length,f=d=>{if(a&&d<n[0])return e[0];let v=0;if(u>1)for(;v<n.length-2&&!(d<n[v+1]);v++);const y=h_(n[v],n[v+1],d);return l[v](y)};return t?d=>f(Od(n[0],n[s-1],d)):f}function wee(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=h_(0,e,i);n.push(rs(t,1,r))}}function Ree(n){const e=[0];return wee(e,n.length-1),e}function Dee(n,e){return n.map(t=>t*e)}function Bee(n,e){return n.map(()=>e||U4).splice(0,n.length-1)}function P1({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=V$(i)?i.map($U):$U(i),s={done:!1,value:e[0]},a=Dee(t&&t.length===e.length?t:Ree(e),n),l=Cee(a,e,{ease:Array.isArray(r)?r:Bee(e,r)});return{calculatedDuration:n,next:u=>(s.value=l(u),s.done=u>=n,s)}}const Uee=n=>n!==null;function gR(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(Uee),l=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!l||i===void 0?s[l]:i}const Oee={decay:GC,inertia:GC,tween:P1,keyframes:P1,spring:sb};function W4(n){typeof n.type=="string"&&(n.type=Oee[n.type])}class vR{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Lee=n=>n/100;class yR extends vR{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,r;const{motionValue:t}=this.options;t&&t.updatedAt!==Yl.now()&&this.tick(Yl.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(i=this.options).onStop)==null||r.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;W4(e);const{type:t=P1,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=e;let{keyframes:l}=e;const u=t||P1;u!==P1&&typeof l[0]!="number"&&(this.mixKeyframes=W_(Lee,V4(l[0],l[1])),l=[0,100]);const f=u({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-a})),f.calculatedDuration===null&&(f.calculatedDuration=mR(f));const{calculatedDuration:d}=f;this.calculatedDuration=d,this.resolvedDuration=d+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return i.next(0);const{delay:f=0,keyframes:d,repeat:v,repeatType:y,repeatDelay:A,type:b,onUpdate:C,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const M=this.currentTime-f*(this.playbackSpeed>=0?1:-1),B=this.playbackSpeed>=0?M<0:M>r;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let D=this.currentTime,O=i;if(v){const G=Math.min(this.currentTime,r)/l;let I=Math.floor(G),N=G%1;!N&&G>=1&&(N=1),N===1&&I--,I=Math.min(I,v+1),!!(I%2)&&(y==="reverse"?(N=1-N,A&&(N-=A/l)):y==="mirror"&&(O=a)),D=Od(0,1,N)*l}const P=B?{done:!1,value:d[0]}:O.next(D);s&&(P.value=s(P.value));let{done:F}=P;!B&&u!==null&&(F=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const V=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&F);return V&&b!==GC&&(P.value=gR(d,this.options,T,this.speed)),C&&C(P.value),V&&this.finish(),P}then(e,t){return this.finished.then(e,t)}get duration(){return ph(this.calculatedDuration)}get time(){return ph(this.currentTime)}set time(e){var t;e=dh(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yl.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ph(this.currentTime))}play(){var r,s;if(this.isStopped)return;const{driver:e=vee,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(r=this.options).onPlay)==null||s.call(r);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yl.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function Pee(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Ng=n=>n*180/Math.PI,HC=n=>{const e=Ng(Math.atan2(n[1],n[0]));return zC(e)},Nee={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:HC,rotateZ:HC,skewX:n=>Ng(Math.atan(n[1])),skewY:n=>Ng(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},zC=n=>(n=n%360,n<0&&(n+=360),n),oO=HC,lO=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),uO=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),Iee={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lO,scaleY:uO,scale:n=>(lO(n)+uO(n))/2,rotateX:n=>zC(Ng(Math.atan2(n[6],n[5]))),rotateY:n=>zC(Ng(Math.atan2(-n[2],n[0]))),rotateZ:oO,rotate:oO,skewX:n=>Ng(Math.atan(n[4])),skewY:n=>Ng(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function VC(n){return n.includes("scale")?1:0}function kC(n,e){if(!n||n==="none")return VC(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=Iee,r=t;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=Nee,r=l}if(!r)return VC(e);const s=i[e],a=r[1].split(",").map(Gee);return typeof s=="function"?s(a):a[s]}const Fee=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return kC(t,e)};function Gee(n){return parseFloat(n.trim())}const cy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fy=new Set(cy),cO=n=>n===uy||n===In,Hee=new Set(["x","y","z"]),zee=cy.filter(n=>!Hee.has(n));function Vee(n){const e=[];return zee.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const kg={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>kC(e,"x"),y:(n,{transform:e})=>kC(e,"y")};kg.translateX=kg.x;kg.translateY=kg.y;const Xg=new Set;let XC=!1,WC=!1,YC=!1;function Y4(){if(WC){const n=Array.from(Xg).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=Vee(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,a])=>{var l;(l=i.getValue(s))==null||l.set(a)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}WC=!1,XC=!1,Xg.forEach(n=>n.complete(YC)),Xg.clear()}function j4(){Xg.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(WC=!0)})}function kee(){YC=!0,j4(),Y4(),YC=!1}class _R{constructor(e,t,i,r,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Xg.add(this),XC||(XC=!0,os.read(j4),os.resolveKeyframes(Y4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r==null?void 0:r.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&s===void 0&&r.set(e[0])}Pee(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Xg.delete(this)}cancel(){this.state==="scheduled"&&(Xg.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Xee=n=>n.startsWith("--");function Wee(n,e,t){Xee(e)?n.style.setProperty(e,t):n.style[e]=t}const Yee=aR(()=>window.ScrollTimeline!==void 0),jee={};function qee(n,e){const t=aR(n);return()=>jee[e]??t()}const q4=qee(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),h1=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,fO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:h1([0,.65,.55,1]),circOut:h1([.55,0,1,.45]),backIn:h1([.31,.01,.66,-.59]),backOut:h1([.33,1.53,.69,.99])};function K4(n,e){if(n)return typeof n=="function"?q4()?k4(n,e):"ease-out":O4(n)?h1(n):Array.isArray(n)?n.map(t=>K4(t,e)||fO.easeOut):fO[n]}function Kee(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:l="easeOut",times:u}={},f=void 0){const d={[e]:t};u&&(d.offset=u);const v=K4(l,r);Array.isArray(v)&&(d.easing=v);const y={delay:i,duration:r,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return f&&(y.pseudoElement=f),n.animate(d,y)}function J4(n){return typeof n=="function"&&"applyToOptions"in n}function Jee({type:n,...e}){return J4(n)&&q4()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Zee extends vR{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,sR(typeof e.type!="string");const f=Jee(e);this.animation=Kee(t,i,r,f,s),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const d=gR(r,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):Wee(t,i,d),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return ph(Number(e))}get time(){return ph(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=dh(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Yee()?(this.animation.timeline=e,yc):t(this)}}const Z4={anticipate:R4,backInOut:w4,circInOut:B4};function Qee(n){return n in Z4}function $ee(n){typeof n.ease=="string"&&Qee(n.ease)&&(n.ease=Z4[n.ease])}const hO=10;class ete extends Zee{constructor(e){$ee(e),W4(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...a}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new yR({...a,autoplay:!1}),u=dh(this.finishedTime??this.time);t.setWithVelocity(l.sample(u-hO).value,l.sample(u).value,hO),l.stop()}}const dO=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(tm.test(n)||n==="0")&&!n.startsWith("url("));function tte(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function nte(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],a=dO(r,e),l=dO(s,e);return!a||!l?!1:tte(n)||(t==="spring"||J4(t))&&i}function Q4(n){return A4(n)&&"offsetHeight"in n}const ite=new Set(["opacity","clipPath","filter","transform"]),rte=aR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ste(n){var f;const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:a}=n;if(!Q4((f=e==null?void 0:e.owner)==null?void 0:f.current))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return rte()&&t&&ite.has(t)&&(t!=="transform"||!u)&&!l&&!i&&r!=="mirror"&&s!==0&&a!=="inertia"}const ate=40;class ote extends vR{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",keyframes:l,name:u,motionValue:f,element:d,...v}){var b;super(),this.stop=()=>{var C,T;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=Yl.now();const y={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:a,name:u,motionValue:f,element:d,...v},A=(d==null?void 0:d.KeyframeResolver)||_R;this.keyframeResolver=new A(l,(C,T,M)=>this.onKeyframesResolved(C,T,y,!M),u,f,d),(b=this.keyframeResolver)==null||b.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:a,velocity:l,delay:u,isHandoff:f,onUpdate:d}=i;this.resolvedAt=Yl.now(),nte(e,s,a,l)||((Ld.instantAnimations||!u)&&(d==null||d(gR(e,i,t))),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const y={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>ate?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},A=!f&&ste(y)?new ete({...y,element:y.motionValue.owner.current}):new yR(y);A.finished.then(()=>this.notifyFinished()).catch(yc),this.pendingTimeline&&(this.stopTimeline=A.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=A}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),kee()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const lte=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ute(n){const e=lte.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function $4(n,e,t=1){const[i,r]=ute(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return x4(a)?parseFloat(a):a}return fR(r)?$4(r,e,t+1):r}function xR(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const eG=new Set(["width","height","top","left","right","bottom",...cy]),cte={test:n=>n==="auto",parse:n=>n},tG=n=>e=>e.test(n),nG=[uy,In,mh,Gp,tee,eee,cte],pO=n=>nG.find(tG(n));function fte(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||S4(n):!0}const hte=new Set(["brightness","contrast","saturate","opacity"]);function dte(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(hR)||[];if(!i)return n;const r=t.replace(i,"");let s=hte.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const pte=/\b([a-z-]*)\(.*?\)/gu,jC={...tm,getAnimatableNone:n=>{const e=n.match(pte);return e?e.map(dte).join(" "):n}},mO={...uy,transform:Math.round},mte={rotate:Gp,rotateX:Gp,rotateY:Gp,rotateZ:Gp,scale:BA,scaleX:BA,scaleY:BA,scaleZ:BA,skew:Gp,skewX:Gp,skewY:Gp,distance:In,translateX:In,translateY:In,translateZ:In,x:In,y:In,z:In,perspective:In,transformPerspective:In,opacity:d_,originX:tO,originY:tO,originZ:In},AR={borderWidth:In,borderTopWidth:In,borderRightWidth:In,borderBottomWidth:In,borderLeftWidth:In,borderRadius:In,radius:In,borderTopLeftRadius:In,borderTopRightRadius:In,borderBottomRightRadius:In,borderBottomLeftRadius:In,width:In,maxWidth:In,height:In,maxHeight:In,top:In,right:In,bottom:In,left:In,padding:In,paddingTop:In,paddingRight:In,paddingBottom:In,paddingLeft:In,margin:In,marginTop:In,marginRight:In,marginBottom:In,marginLeft:In,backgroundPositionX:In,backgroundPositionY:In,...mte,zIndex:mO,fillOpacity:d_,strokeOpacity:d_,numOctaves:mO},gte={...AR,color:wo,backgroundColor:wo,outlineColor:wo,fill:wo,stroke:wo,borderColor:wo,borderTopColor:wo,borderRightColor:wo,borderBottomColor:wo,borderLeftColor:wo,filter:jC,WebkitFilter:jC},iG=n=>gte[n];function rG(n,e){let t=iG(n);return t!==jC&&(t=tm),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const vte=new Set(["auto","none","0"]);function yte(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!vte.has(s)&&p_(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=rG(t,r)}class _te extends _R{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let f=e[u];if(typeof f=="string"&&(f=f.trim(),fR(f))){const d=$4(f,t.current);d!==void 0&&(e[u]=d),u===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!eG.has(i)||e.length!==2)return;const[r,s]=e,a=pO(r),l=pO(s);if(a!==l)if(cO(a)&&cO(l))for(let u=0;u<e.length;u++){const f=e[u];typeof f=="string"&&(e[u]=parseFloat(f))}else kg[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||fte(e[r]))&&i.push(r);i.length&&yte(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=kg[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var l;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,a=i[s];i[s]=kg[t](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([u,f])=>{e.getValue(u).set(f)}),this.resolveNoneKeyframes()}}function xte(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=(t==null?void 0:t[n])??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const sG=(n,e)=>e&&typeof n=="number"?e.transform(n):n,gO=30,Ate=n=>!isNaN(parseFloat(n));class Ste{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{var a,l;const s=Yl.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const u of this.dependents)u.dirty();r&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Yl.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ate(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new oR);const i=this.events[e].add(t);return e==="change"?()=>{i(),os.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>gO)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,gO);return b4(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function J0(n,e){return new Ste(n,e)}const{schedule:SR}=L4(queueMicrotask,!1),of={x:!1,y:!1};function aG(){return of.x||of.y}function bte(n){return n==="x"||n==="y"?of[n]?null:(of[n]=!0,()=>{of[n]=!1}):of.x||of.y?null:(of.x=of.y=!0,()=>{of.x=of.y=!1})}function oG(n,e){const t=xte(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function vO(n){return!(n.pointerType==="touch"||aG())}function Mte(n,e,t={}){const[i,r,s]=oG(n,t),a=l=>{if(!vO(l))return;const{target:u}=l,f=e(u,l);if(typeof f!="function"||!u)return;const d=v=>{vO(v)&&(f(v),u.removeEventListener("pointerleave",d))};u.addEventListener("pointerleave",d,r)};return i.forEach(l=>{l.addEventListener("pointerenter",a,r)}),s}const lG=(n,e)=>e?n===e?!0:lG(n,e.parentElement):!1,bR=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Tte=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Ete(n){return Tte.has(n.tagName)||n.tabIndex!==-1}const qA=new WeakSet;function yO(n){return e=>{e.key==="Enter"&&n(e)}}function EE(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Cte=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=yO(()=>{if(qA.has(t))return;EE(t,"down");const r=yO(()=>{EE(t,"up")}),s=()=>EE(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function _O(n){return bR(n)&&!aG()}function wte(n,e,t={}){const[i,r,s]=oG(n,t),a=l=>{const u=l.currentTarget;if(!_O(l))return;qA.add(u);const f=e(u,l),d=(A,b)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",y),qA.has(u)&&qA.delete(u),_O(A)&&typeof f=="function"&&f(A,{success:b})},v=A=>{d(A,u===window||u===document||t.useGlobalTarget||lG(u,A.target))},y=A=>{d(A,!1)};window.addEventListener("pointerup",v,r),window.addEventListener("pointercancel",y,r)};return i.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",a,r),Q4(l)&&(l.addEventListener("focus",f=>Cte(f,r)),!Ete(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function uG(n){return A4(n)&&"ownerSVGElement"in n}function Rte(n){return uG(n)&&n.tagName==="svg"}const Do=n=>!!(n&&n.getVelocity),Dte=[...nG,wo,tm],Bte=n=>Dte.find(tG(n)),cG=we.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Ute(n=!0){const e=we.useContext(nR);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=we.useId();we.useEffect(()=>{if(n)return r(s)},[n]);const a=we.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,a]:[!0]}const fG=we.createContext({strict:!1}),xO={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Z0={};for(const n in xO)Z0[n]={isEnabled:e=>xO[n].some(t=>!!e[t])};function Ote(n){for(const e in n)Z0[e]={...Z0[e],...n[e]}}const Lte=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ab(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Lte.has(n)}let hG=n=>!ab(n);function Pte(n){n&&(hG=e=>e.startsWith("on")?!ab(e):n(e))}try{Pte(require("@emotion/is-prop-valid").default)}catch{}function Nte(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(hG(r)||t===!0&&ab(r)||!e&&!ab(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function Ite(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const rM=we.createContext({});function sM(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function m_(n){return typeof n=="string"||Array.isArray(n)}const MR=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],TR=["initial",...MR];function aM(n){return sM(n.animate)||TR.some(e=>m_(n[e]))}function dG(n){return!!(aM(n)||n.variants)}function Fte(n,e){if(aM(n)){const{initial:t,animate:i}=n;return{initial:t===!1||m_(t)?t:void 0,animate:m_(i)?i:void 0}}return n.inherit!==!1?e:{}}function Gte(n){const{initial:e,animate:t}=Fte(n,we.useContext(rM));return we.useMemo(()=>({initial:e,animate:t}),[AO(e),AO(t)])}function AO(n){return Array.isArray(n)?n.join(" "):n}const Hte=Symbol.for("motionComponentSymbol");function b0(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function zte(n,e,t){return we.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):b0(t)&&(t.current=i))},[e])}const ER=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Vte="framerAppearId",pG="data-"+ER(Vte),mG=we.createContext({});function kte(n,e,t,i,r){var C,T;const{visualElement:s}=we.useContext(rM),a=we.useContext(fG),l=we.useContext(nR),u=we.useContext(cG).reducedMotion,f=we.useRef(null);i=i||a.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:s,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const d=f.current,v=we.useContext(mG);d&&!d.projection&&r&&(d.type==="html"||d.type==="svg")&&Xte(f.current,t,r,v);const y=we.useRef(!1);we.useInsertionEffect(()=>{d&&y.current&&d.update(t,l)});const A=t[pG],b=we.useRef(!!A&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,A))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,A)));return P$(()=>{d&&(y.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),SR.render(d.render),b.current&&d.animationState&&d.animationState.animateChanges())}),we.useEffect(()=>{d&&(!b.current&&d.animationState&&d.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,A)}),b.current=!1))}),d}function Xte(n,e,t,i){const{layoutId:r,layout:s,drag:a,dragConstraints:l,layoutScroll:u,layoutRoot:f,layoutCrossfade:d}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:gG(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||l&&b0(l),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:d,layoutScroll:u,layoutRoot:f})}function gG(n){if(n)return n.options.allowProjection!==!1?n.projection:gG(n.parent)}function Wte({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&Ote(n);function s(l,u){let f;const d={...we.useContext(cG),...l,layoutId:Yte(l)},{isStatic:v}=d,y=Gte(l),A=i(l,v);if(!v&&tR){jte();const b=qte(d);f=b.MeasureLayout,y.visualElement=kte(r,A,d,e,b.ProjectionNode)}return Gt.jsxs(rM.Provider,{value:y,children:[f&&y.visualElement?Gt.jsx(f,{visualElement:y.visualElement,...d}):null,t(r,l,zte(A,y.visualElement,u),A,v,y.visualElement)]})}s.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const a=we.forwardRef(s);return a[Hte]=r,a}function Yte({layoutId:n}){const e=we.useContext(_4).id;return e&&n!==void 0?e+"-"+n:n}function jte(n,e){we.useContext(fG).strict}function qte(n){const{drag:e,layout:t}=Z0;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const g_={};function Kte(n){for(const e in n)g_[e]=n[e],cR(e)&&(g_[e].isCSSVariable=!0)}function vG(n,{layout:e,layoutId:t}){return fy.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!g_[n]||n==="opacity")}const Jte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Zte=cy.length;function Qte(n,e,t){let i="",r=!0;for(let s=0;s<Zte;s++){const a=cy[s],l=n[a];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(a.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||t){const f=sG(l,AR[a]);if(!u){r=!1;const d=Jte[a]||a;i+=`${d}(${f}) `}t&&(e[a]=f)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function CR(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let a=!1,l=!1;for(const u in e){const f=e[u];if(fy.has(u)){a=!0;continue}else if(cR(u)){r[u]=f;continue}else{const d=sG(f,AR[u]);u.startsWith("origin")?(l=!0,s[u]=d):i[u]=d}}if(e.transform||(a||t?i.transform=Qte(e,n.transform,t):i.transform&&(i.transform="none")),l){const{originX:u="50%",originY:f="50%",originZ:d=0}=s;i.transformOrigin=`${u} ${f} ${d}`}}const wR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function yG(n,e,t){for(const i in e)!Do(e[i])&&!vG(i,t)&&(n[i]=e[i])}function $te({transformTemplate:n},e){return we.useMemo(()=>{const t=wR();return CR(t,e,n),Object.assign({},t.vars,t.style)},[e])}function ene(n,e){const t=n.style||{},i={};return yG(i,t,n),Object.assign(i,$te(n,e)),i}function tne(n,e){const t={},i=ene(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const nne={offset:"stroke-dashoffset",array:"stroke-dasharray"},ine={offset:"strokeDashoffset",array:"strokeDasharray"};function rne(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?nne:ine;n[s.offset]=In.transform(-i);const a=In.transform(e),l=In.transform(t);n[s.array]=`${a} ${l}`}function _G(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:a=0,...l},u,f,d){if(CR(n,l,f),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:y}=n;v.transform&&(y.transform=v.transform,delete v.transform),(y.transform||v.transformOrigin)&&(y.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),y.transform&&(y.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),i!==void 0&&(v.scale=i),r!==void 0&&rne(v,r,s,a,!1)}const xG=()=>({...wR(),attrs:{}}),AG=n=>typeof n=="string"&&n.toLowerCase()==="svg";function sne(n,e,t,i){const r=we.useMemo(()=>{const s=xG();return _G(s,e,AG(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};yG(s,n.style,n),r.style={...s,...r.style}}return r}const ane=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function RR(n){return typeof n!="string"||n.includes("-")?!1:!!(ane.indexOf(n)>-1||/[A-Z]/u.test(n))}function one(n=!1){return(t,i,r,{latestValues:s},a)=>{const u=(RR(t)?sne:tne)(i,s,a,t),f=Nte(i,typeof t=="string",n),d=t!==we.Fragment?{...f,...u,ref:r}:{},{children:v}=i,y=we.useMemo(()=>Do(v)?v.get():v,[v]);return we.createElement(t,{...d,children:y})}}function SO(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function DR(n,e,t,i){if(typeof e=="function"){const[r,s]=SO(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=SO(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function KA(n){return Do(n)?n.get():n}function lne({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:une(t,i,r,n),renderState:e()}}const SG=n=>(e,t)=>{const i=we.useContext(rM),r=we.useContext(nR),s=()=>lne(n,e,i,r);return t?s():L$(s)};function une(n,e,t,i){const r={},s=i(n,{});for(const y in s)r[y]=KA(s[y]);let{initial:a,animate:l}=n;const u=aM(n),f=dG(n);e&&f&&!u&&n.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let d=t?t.initial===!1:!1;d=d||a===!1;const v=d?l:a;if(v&&typeof v!="boolean"&&!sM(v)){const y=Array.isArray(v)?v:[v];for(let A=0;A<y.length;A++){const b=DR(n,y[A]);if(b){const{transitionEnd:C,transition:T,...M}=b;for(const B in M){let D=M[B];if(Array.isArray(D)){const O=d?D.length-1:0;D=D[O]}D!==null&&(r[B]=D)}for(const B in C)r[B]=C[B]}}}return r}function BR(n,e,t){var s;const{style:i}=n,r={};for(const a in i)(Do(i[a])||e.style&&Do(e.style[a])||vG(a,n)||((s=t==null?void 0:t.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(r[a]=i[a]);return r}const cne={useVisualState:SG({scrapeMotionValuesFromProps:BR,createRenderState:wR})};function bG(n,e,t){const i=BR(n,e,t);for(const r in n)if(Do(n[r])||Do(e[r])){const s=cy.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const fne={useVisualState:SG({scrapeMotionValuesFromProps:bG,createRenderState:xG})};function hne(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...RR(i)?fne:cne,preloadedFeatures:n,useRender:one(r),createVisualElement:e,Component:i};return Wte(a)}}function v_(n,e,t){const i=n.getProps();return DR(i,e,t!==void 0?t:i.custom,n)}const qC=n=>Array.isArray(n);function dne(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,J0(t))}function pne(n){return qC(n)?n[n.length-1]||0:n}function mne(n,e){const t=v_(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const a in s){const l=pne(s[a]);dne(n,a,l)}}function gne(n){return!!(Do(n)&&n.add)}function KC(n,e){const t=n.getValue("willChange");if(gne(t))return t.add(e);if(!t&&Ld.WillChange){const i=new Ld.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function MG(n){return n.props[pG]}const vne=n=>n!==null;function yne(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(vne),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[s]}const _ne={type:"spring",stiffness:500,damping:25,restSpeed:10},xne=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Ane={type:"keyframes",duration:.8},Sne={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bne=(n,{keyframes:e})=>e.length>2?Ane:fy.has(n)?n.startsWith("scale")?xne(e[1]):_ne:Sne;function Mne({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:l,from:u,elapsed:f,...d}){return!!Object.keys(d).length}const UR=(n,e,t,i={},r,s)=>a=>{const l=xR(i,n)||{},u=l.delay||i.delay||0;let{elapsed:f=0}=i;f=f-dh(u);const d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:y=>{e.set(y),l.onUpdate&&l.onUpdate(y)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:n,motionValue:e,element:s?void 0:r};Mne(l)||Object.assign(d,bne(n,d)),d.duration&&(d.duration=dh(d.duration)),d.repeatDelay&&(d.repeatDelay=dh(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let v=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(v=!0)),(Ld.instantAnimations||Ld.skipAnimations)&&(v=!0,d.duration=0,d.delay=0),d.allowFlatten=!l.type&&!l.ease,v&&!s&&e.get()!==void 0){const y=yne(d.keyframes,l);if(y!==void 0){os.update(()=>{d.onUpdate(y),d.onComplete()});return}}return l.isSync?new yR(d):new ote(d)};function Tne({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function TG(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(s=i);const u=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const d in l){const v=n.getValue(d,n.latestValues[d]??null),y=l[d];if(y===void 0||f&&Tne(f,d))continue;const A={delay:t,...xR(s||{},d)},b=v.get();if(b!==void 0&&!v.isAnimating&&!Array.isArray(y)&&y===b&&!A.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const M=MG(n);if(M){const B=window.MotionHandoffAnimation(M,d,os);B!==null&&(A.startTime=B,C=!0)}}KC(n,d),v.start(UR(d,v,y,n.shouldReduceMotion&&eG.has(d)?{type:!1}:A,n,C));const T=v.animation;T&&u.push(T)}return a&&Promise.all(u).then(()=>{os.update(()=>{a&&mne(n,a)})}),u}function JC(n,e,t={}){var u;const i=v_(n,e,t.type==="exit"?(u=n.presenceContext)==null?void 0:u.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(TG(n,i,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:v,staggerDirection:y}=r;return Ene(n,e,d+f,v,y,t)}:()=>Promise.resolve(),{when:l}=r;if(l){const[f,d]=l==="beforeChildren"?[s,a]:[a,s];return f().then(()=>d())}else return Promise.all([s(),a(t.delay)])}function Ene(n,e,t=0,i=0,r=1,s){const a=[],l=(n.variantChildren.size-1)*i,u=r===1?(f=0)=>f*i:(f=0)=>l-f*i;return Array.from(n.variantChildren).sort(Cne).forEach((f,d)=>{f.notify("AnimationStart",e),a.push(JC(f,e,{...s,delay:t+u(d)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function Cne(n,e){return n.sortNodePosition(e)}function wne(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>JC(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=JC(n,e,t);else{const r=typeof e=="function"?v_(n,e,t.custom):e;i=Promise.all(TG(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function EG(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const Rne=TR.length;function CG(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?CG(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Rne;t++){const i=TR[t],r=n.props[i];(m_(r)||r===!1)&&(e[i]=r)}return e}const Dne=[...MR].reverse(),Bne=MR.length;function Une(n){return e=>Promise.all(e.map(({animation:t,options:i})=>wne(n,t,i)))}function One(n){let e=Une(n),t=bO(),i=!0;const r=u=>(f,d)=>{var y;const v=v_(n,d,u==="exit"?(y=n.presenceContext)==null?void 0:y.custom:void 0);if(v){const{transition:A,transitionEnd:b,...C}=v;f={...f,...C,...b}}return f};function s(u){e=u(n)}function a(u){const{props:f}=n,d=CG(n.parent)||{},v=[],y=new Set;let A={},b=1/0;for(let T=0;T<Bne;T++){const M=Dne[T],B=t[M],D=f[M]!==void 0?f[M]:d[M],O=m_(D),P=M===u?B.isActive:null;P===!1&&(b=T);let F=D===d[M]&&D!==f[M]&&O;if(F&&i&&n.manuallyAnimateOnMount&&(F=!1),B.protectedKeys={...A},!B.isActive&&P===null||!D&&!B.prevProp||sM(D)||typeof D=="boolean")continue;const V=Lne(B.prevProp,D);let G=V||M===u&&B.isActive&&!F&&O||T>b&&O,I=!1;const N=Array.isArray(D)?D:[D];let Q=N.reduce(r(M),{});P===!1&&(Q={});const{prevResolvedValues:$={}}=B,te={...$,...Q},se=ee=>{G=!0,y.has(ee)&&(I=!0,y.delete(ee)),B.needsAnimating[ee]=!0;const ne=n.getValue(ee);ne&&(ne.liveStyle=!1)};for(const ee in te){const ne=Q[ee],de=$[ee];if(A.hasOwnProperty(ee))continue;let X=!1;qC(ne)&&qC(de)?X=!EG(ne,de):X=ne!==de,X?ne!=null?se(ee):y.add(ee):ne!==void 0&&y.has(ee)?se(ee):B.protectedKeys[ee]=!0}B.prevProp=D,B.prevResolvedValues=Q,B.isActive&&(A={...A,...Q}),i&&n.blockInitialAnimation&&(G=!1),G&&(!(F&&V)||I)&&v.push(...N.map(ee=>({animation:ee,options:{type:M}})))}if(y.size){const T={};if(typeof f.initial!="boolean"){const M=v_(n,Array.isArray(f.initial)?f.initial[0]:f.initial);M&&M.transition&&(T.transition=M.transition)}y.forEach(M=>{const B=n.getBaseTarget(M),D=n.getValue(M);D&&(D.liveStyle=!0),T[M]=B??null}),v.push({animation:T})}let C=!!v.length;return i&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(C=!1),i=!1,C?e(v):Promise.resolve()}function l(u,f){var v;if(t[u].isActive===f)return Promise.resolve();(v=n.variantChildren)==null||v.forEach(y=>{var A;return(A=y.animationState)==null?void 0:A.setActive(u,f)}),t[u].isActive=f;const d=a(u);for(const y in t)t[y].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:s,getState:()=>t,reset:()=>{t=bO(),i=!0}}}function Lne(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!EG(e,n):!1}function gg(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bO(){return{animate:gg(!0),whileInView:gg(),whileHover:gg(),whileTap:gg(),whileDrag:gg(),whileFocus:gg(),exit:gg()}}class am{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Pne extends am{constructor(e){super(e),e.animationState||(e.animationState=One(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();sM(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Nne=0;class Ine extends am{constructor(){super(...arguments),this.id=Nne++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const Fne={animation:{Feature:Pne},exit:{Feature:Ine}};function y_(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function q_(n){return{point:{x:n.pageX,y:n.pageY}}}const Gne=n=>e=>bR(e)&&n(e,q_(e));function N1(n,e,t,i){return y_(n,e,Gne(t),i)}function wG({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function Hne({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function zne(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}const RG=1e-4,Vne=1-RG,kne=1+RG,DG=.01,Xne=0-DG,Wne=0+DG;function fl(n){return n.max-n.min}function Yne(n,e,t){return Math.abs(n-e)<=t}function MO(n,e,t,i=.5){n.origin=i,n.originPoint=rs(e.min,e.max,n.origin),n.scale=fl(t)/fl(e),n.translate=rs(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Vne&&n.scale<=kne||isNaN(n.scale))&&(n.scale=1),(n.translate>=Xne&&n.translate<=Wne||isNaN(n.translate))&&(n.translate=0)}function I1(n,e,t,i){MO(n.x,e.x,t.x,i?i.originX:void 0),MO(n.y,e.y,t.y,i?i.originY:void 0)}function TO(n,e,t){n.min=t.min+e.min,n.max=n.min+fl(e)}function jne(n,e,t){TO(n.x,e.x,t.x),TO(n.y,e.y,t.y)}function EO(n,e,t){n.min=e.min-t.min,n.max=n.min+fl(e)}function F1(n,e,t){EO(n.x,e.x,t.x),EO(n.y,e.y,t.y)}const CO=()=>({translate:0,scale:1,origin:0,originPoint:0}),M0=()=>({x:CO(),y:CO()}),wO=()=>({min:0,max:0}),Ns=()=>({x:wO(),y:wO()});function uc(n){return[n("x"),n("y")]}function CE(n){return n===void 0||n===1}function ZC({scale:n,scaleX:e,scaleY:t}){return!CE(n)||!CE(e)||!CE(t)}function Sg(n){return ZC(n)||BG(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function BG(n){return RO(n.x)||RO(n.y)}function RO(n){return n&&n!=="0%"}function ob(n,e,t){const i=n-t,r=e*i;return t+r}function DO(n,e,t,i,r){return r!==void 0&&(n=ob(n,r,i)),ob(n,t,i)+e}function QC(n,e=0,t=1,i,r){n.min=DO(n.min,e,t,i,r),n.max=DO(n.max,e,t,i,r)}function UG(n,{x:e,y:t}){QC(n.x,e.translate,e.scale,e.originPoint),QC(n.y,t.translate,t.scale,t.originPoint)}const BO=.999999999999,UO=1.0000000000001;function qne(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,a;for(let l=0;l<r;l++){s=t[l],a=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&E0(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,UG(n,a)),i&&Sg(s.latestValues)&&E0(n,s.latestValues))}e.x<UO&&e.x>BO&&(e.x=1),e.y<UO&&e.y>BO&&(e.y=1)}function T0(n,e){n.min=n.min+e,n.max=n.max+e}function OO(n,e,t,i,r=.5){const s=rs(n.min,n.max,r);QC(n,e,t,s,i)}function E0(n,e){OO(n.x,e.x,e.scaleX,e.scale,e.originX),OO(n.y,e.y,e.scaleY,e.scale,e.originY)}function OG(n,e){return wG(zne(n.getBoundingClientRect(),e))}function Kne(n,e,t){const i=OG(n,t),{scroll:r}=e;return r&&(T0(i.x,r.offset.x),T0(i.y,r.offset.y)),i}const LG=({current:n})=>n?n.ownerDocument.defaultView:null,LO=(n,e)=>Math.abs(n-e);function Jne(n,e){const t=LO(n.x,e.x),i=LO(n.y,e.y);return Math.sqrt(t**2+i**2)}class PG{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=RE(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,A=Jne(v.offset,{x:0,y:0})>=3;if(!y&&!A)return;const{point:b}=v,{timestamp:C}=Qa;this.history.push({...b,timestamp:C});const{onStart:T,onMove:M}=this.handlers;y||(T&&T(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=wE(y,this.transformPagePoint),os.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:A,onSessionEnd:b,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=RE(v.type==="pointercancel"?this.lastMoveEventInfo:wE(y,this.transformPagePoint),this.history);this.startEvent&&A&&A(v,T),b&&b(v,T)},!bR(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const a=q_(e),l=wE(a,this.transformPagePoint),{point:u}=l,{timestamp:f}=Qa;this.history=[{...u,timestamp:f}];const{onSessionStart:d}=t;d&&d(e,RE(l,this.history)),this.removeListeners=W_(N1(this.contextWindow,"pointermove",this.handlePointerMove),N1(this.contextWindow,"pointerup",this.handlePointerUp),N1(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),em(this.updatePoint)}}function wE(n,e){return e?{point:e(n.point)}:n}function PO(n,e){return{x:n.x-e.x,y:n.y-e.y}}function RE({point:n},e){return{point:n,delta:PO(n,NG(e)),offset:PO(n,Zne(e)),velocity:Qne(e,.1)}}function Zne(n){return n[0]}function NG(n){return n[n.length-1]}function Qne(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=NG(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>dh(e)));)t--;if(!i)return{x:0,y:0};const s=ph(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function $ne(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?rs(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?rs(t,n,i.max):Math.min(n,t)),n}function NO(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function eie(n,{top:e,left:t,bottom:i,right:r}){return{x:NO(n.x,t,r),y:NO(n.y,e,i)}}function IO(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function tie(n,e){return{x:IO(n.x,e.x),y:IO(n.y,e.y)}}function nie(n,e){let t=.5;const i=fl(n),r=fl(e);return r>i?t=h_(e.min,e.max-i,n.min):i>r&&(t=h_(n.min,n.max-r,e.min)),Od(0,1,t)}function iie(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const $C=.35;function rie(n=$C){return n===!1?n=0:n===!0&&(n=$C),{x:FO(n,"left","right"),y:FO(n,"top","bottom")}}function FO(n,e,t){return{min:GO(n,e),max:GO(n,t)}}function GO(n,e){return typeof n=="number"?n:n[e]||0}const sie=new WeakMap;class aie{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ns(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(q_(d).point)},s=(d,v)=>{const{drag:y,dragPropagation:A,onDragStart:b}=this.getProps();if(y&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=bte(y),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),uc(T=>{let M=this.getAxisMotionValue(T).get()||0;if(mh.test(M)){const{projection:B}=this.visualElement;if(B&&B.layout){const D=B.layout.layoutBox[T];D&&(M=fl(D)*(parseFloat(M)/100))}}this.originPoint[T]=M}),b&&os.postRender(()=>b(d,v)),KC(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},a=(d,v)=>{const{dragPropagation:y,dragDirectionLock:A,onDirectionLock:b,onDrag:C}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:T}=v;if(A&&this.currentDirection===null){this.currentDirection=oie(T),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",v.point,T),this.updateAxis("y",v.point,T),this.visualElement.render(),C&&C(d,v)},l=(d,v)=>this.stop(d,v),u=()=>uc(d=>{var v;return this.getAnimationState(d)==="paused"&&((v=this.getAxisMotionValue(d).animation)==null?void 0:v.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new PG(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:LG(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&os.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!UA(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=$ne(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,r=this.constraints;e&&b0(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=eie(i.layoutBox,e):this.constraints=!1,this.elastic=rie(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&uc(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=iie(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!b0(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Kne(i,r.root,this.visualElement.getTransformPagePoint());let a=tie(r.layout.layoutBox,s);if(t){const l=t(Hne(a));this.hasMutatedConstraints=!!l,l&&(a=wG(l))}return a}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},f=uc(d=>{if(!UA(d,t,this.currentDirection))return;let v=u&&u[d]||{};a&&(v={min:0,max:0});const y=r?200:1e6,A=r?40:1e7,b={type:"inertia",velocity:i?e[d]:0,bounceStiffness:y,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...s,...v};return this.startAxisValueAnimation(d,b)});return Promise.all(f).then(l)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return KC(this.visualElement,e),i.start(UR(e,i,0,t,this.visualElement,!1))}stopAnimation(){uc(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){uc(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){uc(t=>{const{drag:i}=this.getProps();if(!UA(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:a,max:l}=r.layout.layoutBox[t];s.set(e[t]-rs(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!b0(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};uc(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const u=l.get();r[a]=nie({min:u,max:u},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),uc(a=>{if(!UA(a,e,null))return;const l=this.getAxisMotionValue(a),{min:u,max:f}=this.constraints[a];l.set(rs(u,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;sie.set(this.visualElement,this);const e=this.visualElement.current,t=N1(e,"pointerdown",u=>{const{drag:f,dragListener:d=!0}=this.getProps();f&&d&&this.start(u)}),i=()=>{const{dragConstraints:u}=this.getProps();b0(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),os.read(i);const a=y_(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:u,hasLayoutChanged:f})=>{this.isDragging&&f&&(uc(d=>{const v=this.getAxisMotionValue(d);v&&(this.originPoint[d]+=u[d].translate,v.set(v.get()+u[d].translate))}),this.visualElement.render())});return()=>{a(),t(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=$C,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:l}}}function UA(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function oie(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class lie extends am{constructor(e){super(e),this.removeGroupControls=yc,this.removeListeners=yc,this.controls=new aie(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yc}unmount(){this.removeGroupControls(),this.removeListeners()}}const HO=n=>(e,t)=>{n&&os.postRender(()=>n(e,t))};class uie extends am{constructor(){super(...arguments),this.removePointerDownListener=yc}onPointerDown(e){this.session=new PG(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:LG(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:HO(e),onStart:HO(t),onMove:i,onEnd:(s,a)=>{delete this.session,r&&os.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=N1(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const JA={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zO(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const i1={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(In.test(n))n=parseFloat(n);else return n;const t=zO(n,e.target.x),i=zO(n,e.target.y);return`${t}% ${i}%`}},cie={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=tm.parse(n);if(r.length>5)return i;const s=tm.createTransformer(n),a=typeof r[0]!="number"?1:0,l=t.x.scale*e.x,u=t.y.scale*e.y;r[0+a]/=l,r[1+a]/=u;const f=rs(l,u,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),s(r)}};class fie extends we.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;Kte(hie),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),JA.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:a}=i;return a&&(a.isPresent=s,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||os.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),SR.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function IG(n){const[e,t]=Ute(),i=we.useContext(_4);return Gt.jsx(fie,{...n,layoutGroup:i,switchLayoutGroup:we.useContext(mG),isPresent:e,safeToRemove:t})}const hie={borderRadius:{...i1,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:i1,borderTopRightRadius:i1,borderBottomLeftRadius:i1,borderBottomRightRadius:i1,boxShadow:cie};function die(n,e,t){const i=Do(n)?n:J0(n);return i.start(UR("",i,e,t)),i.animation}const pie=(n,e)=>n.depth-e.depth;class mie{constructor(){this.children=[],this.isDirty=!1}add(e){iR(this.children,e),this.isDirty=!0}remove(e){rR(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(pie),this.isDirty=!1,this.children.forEach(e)}}function gie(n,e){const t=Yl.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(em(i),n(s-e))};return os.setup(i,!0),()=>em(i)}const FG=["TopLeft","TopRight","BottomLeft","BottomRight"],vie=FG.length,VO=n=>typeof n=="string"?parseFloat(n):n,kO=n=>typeof n=="number"||In.test(n);function yie(n,e,t,i,r,s){r?(n.opacity=rs(0,t.opacity??1,_ie(i)),n.opacityExit=rs(e.opacity??1,0,xie(i))):s&&(n.opacity=rs(e.opacity??1,t.opacity??1,i));for(let a=0;a<vie;a++){const l=`border${FG[a]}Radius`;let u=XO(e,l),f=XO(t,l);if(u===void 0&&f===void 0)continue;u||(u=0),f||(f=0),u===0||f===0||kO(u)===kO(f)?(n[l]=Math.max(rs(VO(u),VO(f),i),0),(mh.test(f)||mh.test(u))&&(n[l]+="%")):n[l]=f}(e.rotate||t.rotate)&&(n.rotate=rs(e.rotate||0,t.rotate||0,i))}function XO(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const _ie=GG(0,.5,D4),xie=GG(.5,.95,yc);function GG(n,e,t){return i=>i<n?0:i>e?1:t(h_(n,e,i))}function WO(n,e){n.min=e.min,n.max=e.max}function oc(n,e){WO(n.x,e.x),WO(n.y,e.y)}function YO(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function jO(n,e,t,i,r){return n-=e,n=ob(n,1/t,i),r!==void 0&&(n=ob(n,1/r,i)),n}function Aie(n,e=0,t=1,i=.5,r,s=n,a=n){if(mh.test(e)&&(e=parseFloat(e),e=rs(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=rs(s.min,s.max,i);n===s&&(l-=e),n.min=jO(n.min,e,t,l,r),n.max=jO(n.max,e,t,l,r)}function qO(n,e,[t,i,r],s,a){Aie(n,e[t],e[i],e[r],e.scale,s,a)}const Sie=["x","scaleX","originX"],bie=["y","scaleY","originY"];function KO(n,e,t,i){qO(n.x,e,Sie,t?t.x:void 0,i?i.x:void 0),qO(n.y,e,bie,t?t.y:void 0,i?i.y:void 0)}function JO(n){return n.translate===0&&n.scale===1}function HG(n){return JO(n.x)&&JO(n.y)}function ZO(n,e){return n.min===e.min&&n.max===e.max}function Mie(n,e){return ZO(n.x,e.x)&&ZO(n.y,e.y)}function QO(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function zG(n,e){return QO(n.x,e.x)&&QO(n.y,e.y)}function $O(n){return fl(n.x)/fl(n.y)}function eL(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class Tie{constructor(){this.members=[]}add(e){iR(this.members,e),e.scheduleRender()}remove(e){if(rR(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Eie(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,a=(t==null?void 0:t.z)||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:d,rotateX:v,rotateY:y,skewX:A,skewY:b}=t;f&&(i=`perspective(${f}px) ${i}`),d&&(i+=`rotate(${d}deg) `),v&&(i+=`rotateX(${v}deg) `),y&&(i+=`rotateY(${y}deg) `),A&&(i+=`skewX(${A}deg) `),b&&(i+=`skewY(${b}deg) `)}const l=n.x.scale*e.x,u=n.y.scale*e.y;return(l!==1||u!==1)&&(i+=`scale(${l}, ${u})`),i||"none"}const DE=["","X","Y","Z"],Cie={visibility:"hidden"},wie=1e3;let Rie=0;function BE(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function VG(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=MG(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",os,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&VG(i)}function kG({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},l=e==null?void 0:e()){this.id=Rie++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Uie),this.nodes.forEach(Iie),this.nodes.forEach(Fie),this.nodes.forEach(Oie)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new mie)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new oR),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const u=this.eventHandlers.get(a);u&&u.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=uG(a)&&!Rte(a),this.instance=a;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),n){let d;const v=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=gie(v,250),JA.hasAnimatedSinceResize&&(JA.hasAnimatedSinceResize=!1,this.nodes.forEach(nL))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:v,hasRelativeLayoutChanged:y,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||kie,{onLayoutAnimationStart:C,onLayoutAnimationComplete:T}=f.getProps(),M=!this.targetLayout||!zG(this.targetLayout,A),B=!v&&y;if(this.options.layoutRoot||this.resumeFrom||B||v&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const D={...xR(b,"layout"),onPlay:C,onComplete:T};(f.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D),this.setAnimationOrigin(d,B)}else v||nL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),em(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Gie),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&VG(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const v=this.path[d];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tL);return}this.isUpdating||this.nodes.forEach(Pie),this.isUpdating=!1,this.nodes.forEach(Nie),this.nodes.forEach(Die),this.nodes.forEach(Bie),this.clearAllSnapshots();const l=Yl.now();Qa.delta=Od(0,1e3/60,l-Qa.timestamp),Qa.timestamp=l,Qa.isProcessing=!0,SE.update.process(Qa),SE.preRender.process(Qa),SE.render.process(Qa),Qa.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,SR.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Lie),this.sharedNodes.forEach(Hie)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,os.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){os.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fl(this.snapshot.measuredBox.x)&&!fl(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ns(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const u=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:u,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!HG(this.projectionDelta),u=this.getTransformTemplate(),f=u?u(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;a&&this.instance&&(l||Sg(this.latestValues)||d)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return a&&(u=this.removeTransform(u)),Xie(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var f;const{visualElement:a}=this.options;if(!a)return Ns();const l=a.measureViewportBox();if(!(((f=this.scroll)==null?void 0:f.wasRoot)||this.path.some(Wie))){const{scroll:d}=this.root;d&&(T0(l.x,d.offset.x),T0(l.y,d.offset.y))}return l}removeElementScroll(a){var u;const l=Ns();if(oc(l,a),(u=this.scroll)!=null&&u.wasRoot)return l;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:v,options:y}=d;d!==this.root&&v&&y.layoutScroll&&(v.wasRoot&&oc(l,a),T0(l.x,v.offset.x),T0(l.y,v.offset.y))}return l}applyTransform(a,l=!1){const u=Ns();oc(u,a);for(let f=0;f<this.path.length;f++){const d=this.path[f];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&E0(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Sg(d.latestValues)&&E0(u,d.latestValues)}return Sg(this.latestValues)&&E0(u,this.latestValues),u}removeTransform(a){const l=Ns();oc(l,a);for(let u=0;u<this.path.length;u++){const f=this.path[u];if(!f.instance||!Sg(f.latestValues))continue;ZC(f.latestValues)&&f.updateSnapshot();const d=Ns(),v=f.measurePageBox();oc(d,v),KO(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return Sg(this.latestValues)&&KO(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Qa.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var y;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:v}=this.options;if(!(!this.layout||!(d||v))){if(this.resolvedRelativeTargetAt=Qa.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ns(),this.relativeTargetOrigin=Ns(),F1(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),oc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ns(),this.targetWithTransforms=Ns()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jne(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):oc(this.target,this.layout.layoutBox),UG(this.target,this.targetDelta)):oc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ns(),this.relativeTargetOrigin=Ns(),F1(this.relativeTargetOrigin,this.target,A.target),oc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ZC(this.parent.latestValues)||BG(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var b;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||(b=this.parent)!=null&&b.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Qa.timestamp&&(u=!1),u)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;oc(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,y=this.treeScale.y;qne(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ns());const{target:A}=a;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(YO(this.prevProjectionDelta.x,this.projectionDelta.x),YO(this.prevProjectionDelta.y,this.projectionDelta.y)),I1(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==y||!eL(this.projectionDelta.x,this.prevProjectionDelta.x)||!eL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=M0(),this.projectionDelta=M0(),this.projectionDeltaWithTransform=M0()}setAnimationOrigin(a,l=!1){const u=this.snapshot,f=u?u.latestValues:{},d={...this.latestValues},v=M0();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const y=Ns(),A=u?u.source:void 0,b=this.layout?this.layout.source:void 0,C=A!==b,T=this.getStack(),M=!T||T.members.length<=1,B=!!(C&&!M&&this.options.crossfade===!0&&!this.path.some(Vie));this.animationProgress=0;let D;this.mixTargetDelta=O=>{const P=O/1e3;iL(v.x,a.x,P),iL(v.y,a.y,P),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(F1(y,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zie(this.relativeTarget,this.relativeTargetOrigin,y,P),D&&Mie(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=Ns()),oc(D,this.relativeTarget)),C&&(this.animationValues=d,yie(d,f,this.latestValues,P,B,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,u,f;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(f=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||f.stop(),this.pendingAnimation&&(em(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=os.update(()=>{JA.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=J0(0)),this.currentAnimation=die(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wie),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:u,layout:f,latestValues:d}=a;if(!(!l||!u||!f)){if(this!==a&&this.layout&&f&&XG(this.options.animationType,this.layout.layoutBox,f.layoutBox)){u=this.target||Ns();const v=fl(this.layout.layoutBox.x);u.x.min=a.target.x.min,u.x.max=u.x.min+v;const y=fl(this.layout.layoutBox.y);u.y.min=a.target.y.min,u.y.max=u.y.min+y}oc(l,u),E0(l,d),I1(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Tie),this.sharedNodes.get(a).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:u}={}){const f=this.getStack();f&&f.promote(this,u),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:u}=a;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const f={};u.z&&BE("z",a,f,this.animationValues);for(let d=0;d<DE.length;d++)BE(`rotate${DE[d]}`,a,f,this.animationValues),BE(`skew${DE[d]}`,a,f,this.animationValues);a.render();for(const d in f)a.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);a.scheduleRender()}getProjectionStyles(a){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Cie;const l={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,l.opacity="",l.pointerEvents=KA(a==null?void 0:a.pointerEvents)||"",l.transform=u?u(this.latestValues,""):"none",l;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=KA(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Sg(this.latestValues)&&(A.transform=u?u({},""):"none",this.hasProjected=!1),A}const d=f.animationValues||f.latestValues;this.applyTransformsToTarget(),l.transform=Eie(this.projectionDeltaWithTransform,this.treeScale,d),u&&(l.transform=u(d,l.transform));const{x:v,y}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${y.origin*100}% 0`,f.animationValues?l.opacity=f===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:l.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const A in g_){if(d[A]===void 0)continue;const{correct:b,applyTo:C,isCSSVariable:T}=g_[A],M=l.transform==="none"?d[A]:b(d[A],f);if(C){const B=C.length;for(let D=0;D<B;D++)l[C[D]]=M}else T?this.options.visualElement.renderState.vars[A]=M:l[A]=M}return this.options.layoutId&&(l.pointerEvents=f===this?KA(a==null?void 0:a.pointerEvents)||"":"none"),l}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(tL),this.root.sharedNodes.clear()}}}function Die(n){n.updateLayout()}function Bie(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,a=e.source!==n.layout.source;s==="size"?uc(v=>{const y=a?e.measuredBox[v]:e.layoutBox[v],A=fl(y);y.min=i[v].min,y.max=y.min+A}):XG(s,e.layoutBox,i)&&uc(v=>{const y=a?e.measuredBox[v]:e.layoutBox[v],A=fl(i[v]);y.max=y.min+A,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+A)});const l=M0();I1(l,i,e.layoutBox);const u=M0();a?I1(u,n.applyTransform(r,!0),e.measuredBox):I1(u,i,e.layoutBox);const f=!HG(l);let d=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:y,layout:A}=v;if(y&&A){const b=Ns();F1(b,e.layoutBox,y.layoutBox);const C=Ns();F1(C,i,A.layoutBox),zG(b,C)||(d=!0),v.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=b,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Uie(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Oie(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Lie(n){n.clearSnapshot()}function tL(n){n.clearMeasurements()}function Pie(n){n.isLayoutDirty=!1}function Nie(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function nL(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Iie(n){n.resolveTargetDelta()}function Fie(n){n.calcProjection()}function Gie(n){n.resetSkewAndRotation()}function Hie(n){n.removeLeadSnapshot()}function iL(n,e,t){n.translate=rs(e.translate,0,t),n.scale=rs(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function rL(n,e,t,i){n.min=rs(e.min,t.min,i),n.max=rs(e.max,t.max,i)}function zie(n,e,t,i){rL(n.x,e.x,t.x,i),rL(n.y,e.y,t.y,i)}function Vie(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const kie={duration:.45,ease:[.4,0,.1,1]},sL=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),aL=sL("applewebkit/")&&!sL("chrome/")?Math.round:yc;function oL(n){n.min=aL(n.min),n.max=aL(n.max)}function Xie(n){oL(n.x),oL(n.y)}function XG(n,e,t){return n==="position"||n==="preserve-aspect"&&!Yne($O(e),$O(t),.2)}function Wie(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const Yie=kG({attachResizeListener:(n,e)=>y_(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),UE={current:void 0},WG=kG({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!UE.current){const n=new Yie({});n.mount(window),n.setOptions({layoutScroll:!0}),UE.current=n}return UE.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),jie={pan:{Feature:uie},drag:{Feature:lie,ProjectionNode:WG,MeasureLayout:IG}};function lL(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&os.postRender(()=>s(e,q_(e)))}class qie extends am{mount(){const{current:e}=this.node;e&&(this.unmount=Mte(e,(t,i)=>(lL(this.node,i,"Start"),r=>lL(this.node,r,"End"))))}unmount(){}}class Kie extends am{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=W_(y_(this.node.current,"focus",()=>this.onFocus()),y_(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uL(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&os.postRender(()=>s(e,q_(e)))}class Jie extends am{mount(){const{current:e}=this.node;e&&(this.unmount=wte(e,(t,i)=>(uL(this.node,i,"Start"),(r,{success:s})=>uL(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const e2=new WeakMap,OE=new WeakMap,Zie=n=>{const e=e2.get(n.target);e&&e(n)},Qie=n=>{n.forEach(Zie)};function $ie({root:n,...e}){const t=n||document;OE.has(t)||OE.set(t,{});const i=OE.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Qie,{root:n,...e})),i[r]}function ere(n,e,t){const i=$ie(e);return e2.set(n,t),i.observe(n),()=>{e2.delete(n),i.unobserve(n)}}const tre={some:0,all:1};class nre extends am{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,a={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:tre[r]},l=u=>{const{isIntersecting:f}=u;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:v}=this.node.getProps(),y=f?d:v;y&&y(u)};return ere(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(ire(e,t))&&this.startObserver()}unmount(){}}function ire({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const rre={inView:{Feature:nre},tap:{Feature:Jie},focus:{Feature:Kie},hover:{Feature:qie}},sre={layout:{ProjectionNode:WG,MeasureLayout:IG}},t2={current:null},YG={current:!1};function are(){if(YG.current=!0,!!tR)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>t2.current=n.matches;n.addListener(e),e()}else t2.current=!1}const ore=new WeakMap;function lre(n,e,t){for(const i in e){const r=e[i],s=t[i];if(Do(r))n.addValue(i,r);else if(Do(s))n.addValue(i,J0(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const a=n.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=n.getStaticValue(i);n.addValue(i,J0(a!==void 0?a:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const cL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ure{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=_R,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=Yl.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,os.render(this.render,!1,!0))};const{latestValues:u,renderState:f}=a;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=aM(t),this.isVariantNode=dG(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const y in v){const A=v[y];u[y]!==void 0&&Do(A)&&A.set(u[y],!1)}}mount(e){this.current=e,ore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),YG.current||are(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:t2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),em(this.notifyUpdate),em(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=fy.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&os.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Z0){const t=Z0[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ns()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<cL.length;i++){const r=cL[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=lre(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=J0(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(x4(i)||S4(i))?i=parseFloat(i):!Bte(i)&&tm.test(t)&&(i=rG(e,t)),this.setBaseTarget(e,Do(i)?i.get():i)),Do(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const a=DR(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);a&&(i=a[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Do(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new oR),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class jG extends ure{constructor(){super(...arguments),this.KeyframeResolver=_te}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Do(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function qG(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}function cre(n){return window.getComputedStyle(n)}class fre extends jG{constructor(){super(...arguments),this.type="html",this.renderInstance=qG}readValueFromInstance(e,t){var i;if(fy.has(t))return(i=this.projection)!=null&&i.isProjecting?VC(t):Fee(e,t);{const r=cre(e),s=(cR(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return OG(e,t)}build(e,t,i){CR(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return BR(e,t,i)}}const KG=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function hre(n,e,t,i){qG(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(KG.has(r)?r:ER(r),e.attrs[r])}class dre extends jG{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ns}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(fy.has(t)){const i=iG(t);return i&&i.default||0}return t=KG.has(t)?t:ER(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return bG(e,t,i)}build(e,t,i){_G(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){hre(e,t,i,r)}mount(e){this.isSVGTag=AG(e.tagName),super.mount(e)}}const pre=(n,e)=>RR(n)?new dre(e):new fre(e,{allowProjection:n!==we.Fragment}),mre=hne({...Fne,...rre,...jie,...sre},pre),r1=Ite(mre),gre=()=>{const[n,e]=we.useState("all"),t=[{name:"JavaScript",image:"img/skilll/img_1.png",category:"frontend"},{name:"Vue",image:"img/skilll/img_2.png",category:"frontend"},{name:"React",image:"img/skilll/img_3.png",category:"frontend"},{name:"CSS",image:"img/skilll/img_4.png",category:"frontend"},{name:"SCSS",image:"img/skilll/img_5.png",category:"frontend"},{name:"PHP",image:"img/skilll/img_6.png",category:"backend"},{name:"Java Spring",image:"img/skilll/img_7.png",category:"backend"},{name:"Node.js",image:"img/skilll/img_8.png",category:"backend"},{name:"Electron",image:"img/skilll/img_9.png",category:"native"},{name:"Flutter",image:"img/skilll/img_10.png",category:"native"},{name:"Jenkins",image:"img/skilll/img_11.png",category:"devops"},{name:"GitHub",image:"img/skilll/img_14.png",category:"git"},{name:"Bitbucket",image:"img/skilll/img_15.png",category:"git"},{name:"Sentry",image:"img/skilll/img_16.png",category:"monitoring"},{name:"WhaTap",image:"img/skilll/img_19.png",category:"monitoring"},{name:"Datadog",image:"img/skilll/img_18.png",category:"monitoring"}],i=n==="all"?t:t.filter(s=>s.category===n),r=[{id:"all",name:"전체 스킬"},{id:"frontend",name:"프론트엔드"},{id:"backend",name:"백엔드"},{id:"native",name:"네이티브"},{id:"devops",name:"배포 및 운영"},{id:"git",name:"형상관리"},{id:"monitoring",name:"모니터링"}];return Gt.jsxs("div",{className:"my_info_wrap",children:[Gt.jsxs(r1.div,{className:"profile-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[Gt.jsx("div",{className:"profile-avatar",children:Gt.jsx("div",{className:"avatar-circle",children:Gt.jsx("span",{children:"JS"})})}),Gt.jsxs("div",{className:"profile-info",children:[Gt.jsx("h1",{children:"프론트엔드 개발자"}),Gt.jsx("p",{className:"profile-subtitle",children:"다양한 경험을 바탕으로 성장하는 개발자"})]})]}),Gt.jsx(r1.div,{className:"info-container",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.5},children:Gt.jsxs("div",{className:"info-section",children:[Gt.jsx("h2",{children:"소개"}),Gt.jsx("p",{className:"info",children:"안녕하세요, 다양한 경험을 바탕으로 성장한 프론트엔드 개발자입니다. 메카트로닉스과를 졸업하여 밀링과 기계설계로 커리어를 시작했으며, 이후 언리얼 게임 배경 그래픽과 외식업 매니저 경험을 거쳐 개발 분야로 전환했습니다."}),Gt.jsx("p",{className:"info",children:"웹 퍼블리셔로 첫 발을 내딛고, 좋은 동료들에게 배우며 꾸준히 성장해왔습니다. 경력 대비 많은 기술을 접하느라 도전적이었지만, 그 과정이 값진 경험이 되었습니다."}),Gt.jsx("p",{className:"info",children:"물론 전문가들과 비교하면 깊이의 차이가 있지만, 항상 정답을 찾기 위해 노력했습니다. 얕은 지식을 이유로 포기하기보다는 도전적인 마인드로 부딪히며 경험을 쌓아왔습니다."}),Gt.jsx("p",{className:"info",children:"대부분의 회사에서 프론트엔드 파트 1인 개발자로 일하며, 자연스럽게 백엔드 영역까지 경험할 기회를 가졌습니다. 개발을 또 다른 형태의 '서비스'로 생각하는 마음가짐으로 이 분야를 선택했습니다."}),Gt.jsx("p",{className:"info",children:"제가 만든 웹, 앱, 제품이 사용자에게 편리함을 제공할 때 가장 큰 보람을 느끼며, 항상 사용자 경험 향상을 위해 고민하는 개발자입니다."})]})}),Gt.jsxs(r1.div,{className:"skills-section",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[Gt.jsx("h2",{children:"기술 스택"}),Gt.jsx("div",{className:"skill-tabs",children:r.map(s=>Gt.jsx("button",{className:n===s.id?"active":"",onClick:()=>e(s.id),children:s.name},s.id))}),Gt.jsx(r1.ul,{className:"skills-grid",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:i.map((s,a)=>Gt.jsxs(r1.li,{className:"skill-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05,duration:.3},whileHover:{y:-5,boxShadow:"0 10px 20px rgba(0,0,0,0.1)"},children:[Gt.jsx("div",{className:"skill-icon",children:Gt.jsx("img",{src:s.image,alt:s.name})}),Gt.jsx("span",{children:s.name})]},a))})]})]})};var vre={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function yre(n){if(typeof n=="number")return{value:n,unit:"px"};var e,t=(n.match(/^[0-9.]*/)||"").toString();t.includes(".")?e=parseFloat(t):e=parseInt(t,10);var i=(n.match(/[^0-9]*$/)||"").toString();return vre[i]?{value:e,unit:i}:(console.warn("React Spinners: ".concat(n," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function OA(n){var e=yre(n);return"".concat(e.value).concat(e.unit)}var _re=function(n,e,t){var i="react-spinners-".concat(n,"-").concat(t);if(typeof window>"u"||!window.document)return i;var r=document.createElement("style");document.head.appendChild(r);var s=r.sheet,a=`
    @keyframes `.concat(i,` {
      `).concat(e,`
    }
  `);return s&&s.insertRule(a,0),i},lb=function(){return lb=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},lb.apply(this,arguments)},xre=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t},Are=function(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return n.concat(s||Array.prototype.slice.call(e))},Sre=_re("ScaleLoader","0% {transform: scaley(1.0)} 50% {transform: scaley(0.4)} 100% {transform: scaley(1.0)}","scale");function bre(n){var e=n.loading,t=e===void 0?!0:e,i=n.color,r=i===void 0?"#000000":i,s=n.speedMultiplier,a=s===void 0?1:s,l=n.cssOverride,u=l===void 0?{}:l,f=n.height,d=f===void 0?35:f,v=n.width,y=v===void 0?4:v,A=n.radius,b=A===void 0?2:A,C=n.margin,T=C===void 0?2:C,M=n.barCount,B=M===void 0?5:M,D=xre(n,["loading","color","speedMultiplier","cssOverride","height","width","radius","margin","barCount"]),O=lb({display:"inherit"},u),P=function(F){return{backgroundColor:r,width:OA(y),height:OA(d),margin:OA(T),borderRadius:OA(b),display:"inline-block",animation:"".concat(Sre," ").concat(1/a,"s ").concat(F*.1,"s infinite cubic-bezier(0.2, 0.68, 0.18, 1.08)"),animationFillMode:"both"}};return t?we.createElement("span",lb({style:O},D),Are([],Array(B),!0).map(function(F,V){return we.createElement("span",{key:V,style:P(V+1)})})):null}const Mre=()=>Gt.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1e3,display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[Gt.jsx(bre,{color:"#36d7b7",height:50,width:5,radius:2,margin:2}),Gt.jsx("div",{style:{color:"#ffffff",marginTop:"20px",fontSize:"16px"},children:"Loading..."})]});function Tre(){const[n,e]=we.useState({width:window.innerWidth,height:window.innerHeight}),[t,i]=we.useState(!0),[r,s]=we.useState(!0),a=r_(f=>f.type),l=()=>[0,0,10*Math.max(.8,Math.min(1.5,1920/window.innerWidth))];we.useEffect(()=>{const f=()=>{e({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]);const u=()=>{s(!1)};return Gt.jsxs("div",{className:"app",children:[(t||r)&&Gt.jsx(Mre,{}),Gt.jsx(qX,{shadows:!0,camera:{position:l(),fov:75,aspect:n.width/n.height,near:.1,far:1e3},style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1},onCreated:()=>i(!1),children:Gt.jsxs(we.Suspense,{fallback:null,children:[Gt.jsx(Fq,{viewportSize:n,onModelLoad:u}),Gt.jsx(JN,{enablePan:!1,enableZoom:!0,enableRotate:!0,minDistance:2,maxDistance:10,rotateSpeed:.5,target:[0,0,0],autoRotate:!1,autoRotateSpeed:1})]})}),Gt.jsx(M$,{children:a==="portfolio"?Gt.jsx(O$,{}):Gt.jsx(gre,{})})]})}CH.createRoot(document.getElementById("root")).render(Gt.jsx(Gt.Fragment,{children:Gt.jsx(Tre,{})}));
